var shadow$provide = {};
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+c+"$"+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(c){return{value:c,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(f,g){this.$jscomp$symbol$id_=f;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:g})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",d=0,e=function(f){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new b(c+(f||"")+"_"+d++,f)};return e},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.polyfill("Symbol.asyncIterator",function(a){return a?a:Symbol("Symbol.asyncIterator")},"es9","es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};
(function(){
shadow$provide[0]=function(Z,oa,Ja,La){(function(p,Ta){"object"===typeof La&&"undefined"!==typeof Ja?Ta(La):"function"===typeof define&&define.amd?define(["exports"],Ta):(p="undefined"!==typeof globalThis?globalThis:p||self,Ta(p.THREE={}))})(this,function(p){function Ta(){const a=4294967295*Math.random()|0,b=4294967295*Math.random()|0,c=4294967295*Math.random()|0,d=4294967295*Math.random()|0;return(Db[a&255]+Db[a>>8&255]+Db[a>>16&255]+Db[a>>24&255]+"-"+Db[b&255]+Db[b>>8&255]+"-"+Db[b>>16&15|64]+Db[b>>
24&255]+"-"+Db[c&63|128]+Db[c>>8&255]+"-"+Db[c>>16&255]+Db[c>>24&255]+Db[d&255]+Db[d>>8&255]+Db[d>>16&255]+Db[d>>24&255]).toUpperCase()}function Ua(a,b,c){return Math.max(b,Math.min(c,a))}function Mb(a,b){return(a%b+b)%b}function lc(a,b,c){return(1-c)*a+c*b}function gd(a){return 0===(a&a-1)&&0!==a}function mc(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Yb(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function nc(a){if(0===a.length)return-Infinity;let b=a[0];for(let c=1,
d=a.length;c<d;++c)a[c]>b&&(b=a[c]);return b}function bc(a){return document.createElementNS("http://www.w3.org/1999/xhtml",a)}function sc(a){if("undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&a instanceof ImageBitmap)return hd.getDataURL(a);if(a.data)return{data:Array.prototype.slice.call(a.data),width:a.width,height:a.height,type:a.data.constructor.name};console.warn("THREE.Texture: Unable to serialize Texture.");
return{}}function tc(a,b,c,d,e){for(let f=0,g=a.length-3;f<=g;f+=3){id.fromArray(a,f);const h=e.x*Math.abs(id.x)+e.y*Math.abs(id.y)+e.z*Math.abs(id.z),k=b.dot(id),l=c.dot(id),m=d.dot(id);if(Math.max(-Math.max(k,l,m),Math.min(k,l,m))>h)return!1}return!0}function ia(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a}function Oc(a){return.04045>a?.0773993808*a:Math.pow(.9478672986*a+.0521327014,2.4)}function Pa(a){return.0031308>a?12.92*a:1.055*Math.pow(a,.41666)-.055}
function uc(a,b,c,d,e,f,g,h,k,l,m,n){Pc.fromBufferAttribute(e,l);Qc.fromBufferAttribute(e,m);Rc.fromBufferAttribute(e,n);e=a.morphTargetInfluences;if(f&&e){lf.set(0,0,0);mf.set(0,0,0);nf.set(0,0,0);for(let v=0,t=f.length;v<t;v++){var r=e[v];const y=f[v];0!==r&&(xg.fromBufferAttribute(y,l),yg.fromBufferAttribute(y,m),zg.fromBufferAttribute(y,n),g?(lf.addScaledVector(xg,r),mf.addScaledVector(yg,r),nf.addScaledVector(zg,r)):(lf.addScaledVector(xg.sub(Pc),r),mf.addScaledVector(yg.sub(Qc),r),nf.addScaledVector(zg.sub(Rc),
r)))}Pc.add(lf);Qc.add(mf);Rc.add(nf)}a.isSkinnedMesh&&(a.boneTransform(l,Pc),a.boneTransform(m,Qc),a.boneTransform(n,Rc));f=Pc;g=Qc;e=Rc;r=Ag;null===(1===b.side?d.intersectTriangle(e,g,f,!0,r):d.intersectTriangle(f,g,e,2!==b.side,r))?a=null:(of.copy(r),of.applyMatrix4(a.matrixWorld),b=c.ray.origin.distanceTo(of),a=b<c.near||b>c.far?null:{distance:b,point:of.clone(),object:a});a&&(h&&(pf.fromBufferAttribute(h,l),qf.fromBufferAttribute(h,m),rf.fromBufferAttribute(h,n),a.uv=tb.getUV(Ag,Pc,Qc,Rc,pf,
qf,rf,new la)),k&&(pf.fromBufferAttribute(k,l),qf.fromBufferAttribute(k,m),rf.fromBufferAttribute(k,n),a.uv2=tb.getUV(Ag,Pc,Qc,Rc,pf,qf,rf,new la)),h={a:l,b:m,c:n,normal:new C,materialIndex:0},tb.getNormal(Pc,Qc,Rc,h.normal),a.face=h);return a}function cc(a){const b={};for(const c in a){b[c]={};for(const d in a[c]){const e=a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture||e.isQuaternion)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=
e}}return b}function qb(a){const b={};for(let c=0;c<a.length;c++){const d=cc(a[c]);for(const e in d)b[e]=d[e]}return b}function Sc(){function a(f,g){d(f,g);e=b.requestAnimationFrame(a)}let b=null,c=!1,d=null,e=null;return{start:function(){!0!==c&&null!==d&&(e=b.requestAnimationFrame(a),c=!0)},stop:function(){b.cancelAnimationFrame(e);c=!1},setAnimationLoop:function(f){d=f},setContext:function(f){b=f}}}function jd(a,b){const c=b.isWebGL2,d=new WeakMap;return{get:function(e){e.isInterleavedBufferAttribute&&
(e=e.data);return d.get(e)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const f=d.get(e);f&&(a.deleteBuffer(f.buffer),d.delete(e))},update:function(e,f){if(e.isGLBufferAttribute)f=d.get(e),(!f||f.version<e.version)&&d.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version});else{e.isInterleavedBufferAttribute&&(e=e.data);var g=d.get(e);if(void 0===g){g=d.set;var h=e,k=e.array;const l=e.usage,m=a.createBuffer();a.bindBuffer(f,m);a.bufferData(f,k,l);e.onUploadCallback();
f=a.FLOAT;k instanceof Float32Array?f=a.FLOAT:k instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):k instanceof Uint16Array?e.isFloat16BufferAttribute?c?f=a.HALF_FLOAT:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):f=a.UNSIGNED_SHORT:k instanceof Int16Array?f=a.SHORT:k instanceof Uint32Array?f=a.UNSIGNED_INT:k instanceof Int32Array?f=a.INT:k instanceof Int8Array?f=a.BYTE:k instanceof Uint8Array?f=a.UNSIGNED_BYTE:
k instanceof Uint8ClampedArray&&(f=a.UNSIGNED_BYTE);g.call(d,h,{buffer:m,type:f,bytesPerElement:k.BYTES_PER_ELEMENT,version:e.version})}else g.version<e.version&&(h=e.array,k=e.updateRange,a.bindBuffer(f,g.buffer),-1===k.count?a.bufferSubData(f,0,h):(c?a.bufferSubData(f,k.offset*h.BYTES_PER_ELEMENT,h,k.offset,k.count):a.bufferSubData(f,k.offset*h.BYTES_PER_ELEMENT,h.subarray(k.offset,k.offset+k.count)),k.count=-1),g.version=e.version)}}}}function Hd(a,b,c,d,e){function f(v,t){c.buffers.color.setClear(v.r,
v.g,v.b,t,e)}const g=new ua(0);let h=0,k,l,m=null,n=0,r=null;return{getClearColor:function(){return g},setClearColor:function(v,t){t=void 0===t?1:t;g.set(v);h=t;f(g,h)},getClearAlpha:function(){return h},setClearAlpha:function(v){h=v;f(g,h)},render:function(v,t){let y=!1;(t=!0===t.isScene?t.background:null)&&t.isTexture&&(t=b.get(t));var E=a.xr;(E=E.getSession&&E.getSession())&&"additive"===E.environmentBlendMode&&(t=null);null===t?f(g,h):t&&t.isColor&&(f(t,1),y=!0);(a.autoClear||y)&&a.clear(a.autoClearColor,
a.autoClearDepth,a.autoClearStencil);if(t&&(t.isCubeTexture||306===t.mapping)){void 0===l&&(l=new ub(new Tc(1,1,1),new vc({name:"BackgroundCubeMaterial",uniforms:cc(dc.cube.uniforms),vertexShader:dc.cube.vertexShader,fragmentShader:dc.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(M,q,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),
d.update(l));l.material.uniforms.envMap.value=t;l.material.uniforms.flipEnvMap.value=t.isCubeTexture&&!1===t.isRenderTargetTexture?-1:1;if(m!==t||n!==t.version||r!==a.toneMapping)l.material.needsUpdate=!0,m=t,n=t.version,r=a.toneMapping;v.unshift(l,l.geometry,l.material,0,0,null)}else if(t&&t.isTexture){void 0===k&&(k=new ub(new Id(2,2),new vc({name:"BackgroundMaterial",uniforms:cc(dc.background.uniforms),vertexShader:dc.background.vertexShader,fragmentShader:dc.background.fragmentShader,side:0,depthTest:!1,
depthWrite:!1,fog:!1})),k.geometry.deleteAttribute("normal"),Object.defineProperty(k.material,"map",{get:function(){return this.uniforms.t2D.value}}),d.update(k));k.material.uniforms.t2D.value=t;!0===t.matrixAutoUpdate&&t.updateMatrix();k.material.uniforms.uvTransform.value.copy(t.matrix);if(m!==t||n!==t.version||r!==a.toneMapping)k.material.needsUpdate=!0,m=t,n=t.version,r=a.toneMapping;v.unshift(k,k.geometry,k.material,0,0,null)}}}}function pe(a,b,c,d){function e(J){return d.isWebGL2?a.bindVertexArray(J):
y.bindVertexArrayOES(J)}function f(J){return d.isWebGL2?a.deleteVertexArray(J):y.deleteVertexArrayOES(J)}function g(J){const K=[],S=[],P=[];for(let U=0;U<t;U++)K[U]=0,S[U]=0,P[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:S,attributeDivisors:P,object:J,attributes:{},index:null}}function h(){const J=H.newAttributes;for(let K=0,S=J.length;K<S;K++)J[K]=0}function k(J){l(J,0)}function l(J,K){const S=H.enabledAttributes,P=H.attributeDivisors;H.newAttributes[J]=1;
0===S[J]&&(a.enableVertexAttribArray(J),S[J]=1);P[J]!==K&&((d.isWebGL2?a:b.get("ANGLE_instanced_arrays"))[d.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](J,K),P[J]=K)}function m(){const J=H.newAttributes,K=H.enabledAttributes;for(let S=0,P=K.length;S<P;S++)K[S]!==J[S]&&(a.disableVertexAttribArray(S),K[S]=0)}function n(J,K,S,P,U,V){!0!==d.isWebGL2||S!==a.INT&&S!==a.UNSIGNED_INT?a.vertexAttribPointer(J,K,S,P,U,V):a.vertexAttribIPointer(J,K,S,U,V)}function r(){v();H!==q&&(H=q,e(H.object))}
function v(){q.geometry=null;q.program=null;q.wireframe=!1}const t=a.getParameter(a.MAX_VERTEX_ATTRIBS),y=d.isWebGL2?null:b.get("OES_vertex_array_object"),E=d.isWebGL2||null!==y,M={},q=g(null);let H=q;return{setup:function(J,K,S,P,U){var V=!1;if(E){V=!0===K.wireframe;var W=M[P.id];void 0===W&&(W={},M[P.id]=W);var da=W[S.id];void 0===da&&(da={},W[S.id]=da);W=da[V];void 0===W&&(W=g(d.isWebGL2?a.createVertexArray():y.createVertexArrayOES()),da[V]=W);V=W;H!==V&&(H=V,e(H.object));a:{V=H.attributes;da=
P.attributes;W=0;for(var ka in da){var ya=V[ka],pa=da[ka];if(void 0===ya||ya.attribute!==pa||ya.data!==pa.data){V=!0;break a}W++}V=H.attributesNum!==W||H.index!==U?!0:!1}if(V){ka={};da=P.attributes;W=0;for(var Ia in da)ya=da[Ia],pa={},pa.attribute=ya,ya.data&&(pa.data=ya.data),ka[Ia]=pa,W++;H.attributes=ka;H.attributesNum=W;H.index=U}}else if(Ia=!0===K.wireframe,H.geometry!==P.id||H.program!==S.id||H.wireframe!==Ia)H.geometry=P.id,H.program=S.id,H.wireframe=Ia,V=!0;!0===J.isInstancedMesh&&(V=!0);
null!==U&&c.update(U,a.ELEMENT_ARRAY_BUFFER);if(V){if(!1!==d.isWebGL2||!J.isInstancedMesh&&!P.isInstancedBufferGeometry||null!==b.get("ANGLE_instanced_arrays")){h();Ia=P.attributes;S=S.getAttributes();K=K.defaultAttributeValues;for(const Ca in S)if(ka=S[Ca],0<=ka.location){var wa=Ia[Ca];void 0===wa&&("instanceMatrix"===Ca&&J.instanceMatrix&&(wa=J.instanceMatrix),"instanceColor"===Ca&&J.instanceColor&&(wa=J.instanceColor));if(void 0!==wa){if(V=wa.normalized,da=wa.itemSize,ya=c.get(wa),void 0!==ya)if(pa=
ya.buffer,W=ya.type,ya=ya.bytesPerElement,wa.isInterleavedBufferAttribute){var na=wa.data,qa=na.stride;wa=wa.offset;if(na&&na.isInstancedInterleavedBuffer){for(let Qa=0;Qa<ka.locationSize;Qa++)l(ka.location+Qa,na.meshPerAttribute);!0!==J.isInstancedMesh&&void 0===P._maxInstanceCount&&(P._maxInstanceCount=na.meshPerAttribute*na.count)}else for(na=0;na<ka.locationSize;na++)k(ka.location+na);a.bindBuffer(a.ARRAY_BUFFER,pa);for(pa=0;pa<ka.locationSize;pa++)n(ka.location+pa,da/ka.locationSize,W,V,qa*ya,
(wa+da/ka.locationSize*pa)*ya)}else{if(wa.isInstancedBufferAttribute){for(qa=0;qa<ka.locationSize;qa++)l(ka.location+qa,wa.meshPerAttribute);!0!==J.isInstancedMesh&&void 0===P._maxInstanceCount&&(P._maxInstanceCount=wa.meshPerAttribute*wa.count)}else for(qa=0;qa<ka.locationSize;qa++)k(ka.location+qa);a.bindBuffer(a.ARRAY_BUFFER,pa);for(pa=0;pa<ka.locationSize;pa++)n(ka.location+pa,da/ka.locationSize,W,V,da*ya,da/ka.locationSize*pa*ya)}}else if(void 0!==K&&(V=K[Ca],void 0!==V))switch(V.length){case 2:a.vertexAttrib2fv(ka.location,
V);break;case 3:a.vertexAttrib3fv(ka.location,V);break;case 4:a.vertexAttrib4fv(ka.location,V);break;default:a.vertexAttrib1fv(ka.location,V)}}m()}null!==U&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.get(U).buffer)}},reset:r,resetDefaultState:v,dispose:function(){r();for(const J in M){const K=M[J];for(const S in K){const P=K[S];for(const U in P)f(P[U].object),delete P[U];delete K[S]}delete M[J]}},releaseStatesOfGeometry:function(J){if(void 0!==M[J.id]){var K=M[J.id];for(const S in K){const P=K[S];for(const U in P)f(P[U].object),
delete P[U];delete K[S]}delete M[J.id]}},releaseStatesOfProgram:function(J){for(const K in M){const S=M[K];if(void 0===S[J.id])continue;const P=S[J.id];for(const U in P)f(P[U].object),delete P[U];delete S[J.id]}},initAttributes:h,enableAttribute:k,disableUnusedAttributes:m}}function Jd(a,b,c,d){const e=d.isWebGL2;let f;this.setMode=function(g){f=g};this.render=function(g,h){a.drawArrays(f,g,h);c.update(h,f,1)};this.renderInstances=function(g,h,k){if(0!==k){if(e){var l=a;var m="drawArraysInstanced"}else if(l=
b.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",null===l){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}l[m](f,g,h,k);c.update(h,f,k)}}}function Kd(a,b,c){function d(J){if("highp"===J){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";J="mediump"}return"mediump"===J&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,
a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}let e;const f="undefined"!==typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&a instanceof WebGL2ComputeRenderingContext;let g=void 0!==c.precision?c.precision:"highp";var h=d(g);h!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",h,"instead."),g=h);h=f||b.has("WEBGL_draw_buffers");c=!0===c.logarithmicDepthBuffer;
const k=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),l=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=a.getParameter(a.MAX_TEXTURE_SIZE),n=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),r=a.getParameter(a.MAX_VERTEX_ATTRIBS),v=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),t=a.getParameter(a.MAX_VARYING_VECTORS),y=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),E=0<l,M=f||b.has("OES_texture_float"),q=E&&M,H=f?a.getParameter(a.MAX_SAMPLES):0;return{isWebGL2:f,drawBuffers:h,getMaxAnisotropy:function(){if(void 0!==
e)return e;if(!0===b.has("EXT_texture_filter_anisotropic")){const J=b.get("EXT_texture_filter_anisotropic");e=a.getParameter(J.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else e=0;return e},getMaxPrecision:d,precision:g,logarithmicDepthBuffer:c,maxTextures:k,maxVertexTextures:l,maxTextureSize:m,maxCubemapSize:n,maxAttributes:r,maxVertexUniforms:v,maxVaryings:t,maxFragmentUniforms:y,vertexTextures:E,floatFragmentTextures:M,floatVertexTextures:q,maxSamples:H}}function qe(a){function b(){m.value!==e&&(m.value=e,
m.needsUpdate=0<f);d.numPlanes=f;d.numIntersection=0}function c(n,r,v,t){const y=null!==n?n.length:0;let E=null;if(0!==y){E=m.value;if(!0!==t||null===E){t=v+4*y;r=r.matrixWorldInverse;l.getNormalMatrix(r);if(null===E||E.length<t)E=new Float32Array(t);for(let M=0,q=v;M!==y;++M,q+=4)k.copy(n[M]).applyMatrix4(r,l),k.normal.toArray(E,q),E[q+3]=k.constant}m.value=E;m.needsUpdate=!0}d.numPlanes=y;d.numIntersection=0;return E}const d=this;let e=null,f=0,g=!1,h=!1;const k=new oc,l=new xb,m={value:null,needsUpdate:!1};
this.uniform=m;this.numIntersection=this.numPlanes=0;this.init=function(n,r,v){const t=0!==n.length||r||0!==f||g;g=r;e=c(n,v,0);f=n.length;return t};this.beginShadows=function(){h=!0;c(null)};this.endShadows=function(){h=!1;b()};this.setState=function(n,r,v){const t=n.clippingPlanes,y=n.clipIntersection;var E=n.clipShadows;n=a.get(n);if(!g||null===t||0===t.length||h&&!E)h?c(null):b();else{E=h?0:f;const M=4*E;let q=n.clippingState||null;m.value=q;q=c(t,r,M,v);for(r=0;r!==M;++r)q[r]=e[r];n.clippingState=
q;this.numIntersection=y?this.numPlanes:0;this.numPlanes+=E}}}function Ld(a){function b(e,f){303===f?e.mapping=301:304===f&&(e.mapping=302);return e}function c(e){e=e.target;e.removeEventListener("dispose",c);const f=d.get(e);void 0!==f&&(d.delete(e),f.dispose())}let d=new WeakMap;return{get:function(e){if(e&&e.isTexture&&!1===e.isRenderTargetTexture){var f=e.mapping;if(303===f||304===f){if(d.has(e))return f=d.get(e).texture,b(f,e.mapping);var g=e.image;return g&&0<g.height?(f=a.getRenderTarget(),
g=new sf(g.height/2),g.fromEquirectangularTexture(a,e),d.set(e,g),a.setRenderTarget(f),e.addEventListener("dispose",c),b(g.texture,e.mapping)):null}}return e},dispose:function(){d=new WeakMap}}}function kd(a){a=new Rb(3*pc,3*pc,a);a.texture.mapping=306;a.texture.name="PMREM.cubeUv";a.scissorTest=!0;return a}function wc(a,b,c,d,e){a.viewport.set(b,c,d,e);a.scissor.set(b,c,d,e)}function Uc(){const a=new la(1,1);return new Md({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:a},
inputEncoding:{value:tf[3E3]}},vertexShader:Ya(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${eb()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function O(){return new Md({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:tf[3E3]}},vertexShader:Ya(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${eb()}

			void main() {

				gl_FragColor = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function Ya(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv \x3d 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction \x3d vec3( uv, 1.0 );\n\n\t\t\tif ( face \x3d\x3d 0.0 ) {\n\n\t\t\t\tdirection \x3d direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face \x3d\x3d 1.0 ) {\n\n\t\t\t\tdirection \x3d direction.xzy;\n\t\t\t\tdirection.xz *\x3d -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face \x3d\x3d 2.0 ) {\n\n\t\t\t\tdirection.x *\x3d -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face \x3d\x3d 3.0 ) {\n\n\t\t\t\tdirection \x3d direction.zyx;\n\t\t\t\tdirection.xz *\x3d -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face \x3d\x3d 4.0 ) {\n\n\t\t\t\tdirection \x3d direction.xzy;\n\t\t\t\tdirection.xy *\x3d -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face \x3d\x3d 5.0 ) {\n\n\t\t\t\tdirection.z *\x3d -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection \x3d getDirection( uv, faceIndex );\n\t\t\tgl_Position \x3d vec4( position, 1.0 );\n\n\t\t}\n\t"}
function eb(){return"\n\n\t\tuniform int inputEncoding;\n\n\t\t#include \x3cencodings_pars_fragment\x3e\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding \x3d\x3d 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function Za(a){function b(e){e=e.target;e.removeEventListener("dispose",b);const f=c.get(e);void 0!==
f&&(c.delete(e),f.dispose())}let c=new WeakMap,d=null;return{get:function(e){if(e&&e.isTexture&&!1===e.isRenderTargetTexture){var f=e.mapping,g=303===f||304===f,h=301===f||302===f;if(g||h){if(c.has(e))return c.get(e).texture;f=e.image;var k;if(!(k=g&&f&&0<f.height)&&(k=h&&f)){k=0;for(h=0;6>h;h++)void 0!==f[h]&&k++;k=6===k}return k?(f=a.getRenderTarget(),null===d&&(d=new ai(a)),g=g?d.fromEquirectangular(e):d.fromCubemap(e),c.set(e,g),a.setRenderTarget(f),e.addEventListener("dispose",b),g.texture):
null}}return e},dispose:function(){c=new WeakMap;null!==d&&(d.dispose(),d=null)}}}function mb(a){function b(d){if(void 0!==c[d])return c[d];let e;switch(d){case "WEBGL_depth_texture":e=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":e=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
break;case "WEBGL_compressed_texture_s3tc":e=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":e=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:e=a.getExtension(d)}return c[d]=e}const c={};return{has:function(d){return null!==b(d)},init:function(d){d.isWebGL2?b("EXT_color_buffer_float"):
(b("WEBGL_depth_texture"),b("OES_texture_float"),b("OES_texture_half_float"),b("OES_texture_half_float_linear"),b("OES_standard_derivatives"),b("OES_element_index_uint"),b("OES_vertex_array_object"),b("ANGLE_instanced_arrays"));b("OES_texture_float_linear");b("EXT_color_buffer_half_float");b("WEBGL_multisampled_render_to_texture")},get:function(d){const e=b(d);null===e&&console.warn("THREE.WebGLRenderer: "+d+" extension not supported.");return e}}}function Vc(a,b,c,d){function e(k){k=k.target;null!==
k.index&&b.remove(k.index);for(var l in k.attributes)b.remove(k.attributes[l]);k.removeEventListener("dispose",e);delete g[k.id];if(l=h.get(k))b.remove(l),h.delete(k);d.releaseStatesOfGeometry(k);!0===k.isInstancedBufferGeometry&&delete k._maxInstanceCount;c.memory.geometries--}function f(k){var l=[],m=k.index,n=k.attributes.position;if(null!==m){n=m.array;m=m.version;for(let t=0,y=n.length;t<y;t+=3){var r=n[t+0],v=n[t+1];const E=n[t+2];l.push(r,v,v,E,E,r)}}else{r=n.array;m=n.version;for(let t=0,
y=r.length/3-1;t<y;t+=3)n=t+0,r=t+1,v=t+2,l.push(n,r,r,v,v,n)}l=new (65535<nc(l)?uf:vf)(l,1);l.version=m;(m=h.get(k))&&b.remove(m);h.set(k,l)}const g={},h=new WeakMap;return{get:function(k,l){if(!0===g[l.id])return l;l.addEventListener("dispose",e);g[l.id]=!0;c.memory.geometries++;return l},update:function(k){var l=k.attributes;for(const m in l)b.update(l[m],a.ARRAY_BUFFER);k=k.morphAttributes;for(const m in k){l=k[m];for(let n=0,r=l.length;n<r;n++)b.update(l[n],a.ARRAY_BUFFER)}},getWireframeAttribute:function(k){const l=
h.get(k);if(l){const m=k.index;null!==m&&l.version<m.version&&f(k)}else f(k);return h.get(k)}}}function Nb(a,b,c,d){const e=d.isWebGL2;let f,g,h;this.setMode=function(k){f=k};this.setIndex=function(k){g=k.type;h=k.bytesPerElement};this.render=function(k,l){a.drawElements(f,l,g,k*h);c.update(l,f,1)};this.renderInstances=function(k,l,m){if(0!==m){if(e){var n=a;var r="drawElementsInstanced"}else if(n=b.get("ANGLE_instanced_arrays"),r="drawElementsInstancedANGLE",null===n){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
return}n[r](f,l,g,k*h,m);c.update(l,f,m)}}}function xc(a){const b={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:b,programs:null,autoReset:!0,reset:function(){b.frame++;b.calls=0;b.triangles=0;b.points=0;b.lines=0},update:function(c,d,e){b.calls++;switch(d){case a.TRIANGLES:b.triangles+=c/3*e;break;case a.LINES:b.lines+=c/2*e;break;case a.LINE_STRIP:b.lines+=e*(c-1);break;case a.LINE_LOOP:b.lines+=e*c;break;case a.POINTS:b.points+=e*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",
d)}}}}function Sb(a,b){return a[0]-b[0]}function Zb(a,b){return Math.abs(b[1])-Math.abs(a[1])}function Tb(a,b){let c=1;b=b.isInterleavedBufferAttribute?b.data.array:b.array;b instanceof Int8Array?c=127:b instanceof Int16Array?c=32767:b instanceof Int32Array?c=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",b);a.divideScalar(c)}function Eb(a,b,c){const d={},e=new Float32Array(8),f=new WeakMap,g=new C,h=[];for(let k=0;8>k;k++)h[k]=[k,0];return{update:function(k,
l,m,n){k=k.morphTargetInfluences;if(!0===b.isWebGL2){m=l.morphAttributes.position.length;var r=f.get(l);if(void 0===r||r.count!==m){void 0!==r&&r.texture.dispose();r=void 0!==l.morphAttributes.normal;var v=l.morphAttributes.position,t=l.morphAttributes.normal||[],y=!0===r?2:1,E=l.attributes.position.count*y;let M=1;E>b.maxTextureSize&&(M=Math.ceil(E/b.maxTextureSize),E=b.maxTextureSize);const q=new Float32Array(E*M*4*m),H=new wf(q,E,M,m);H.format=1023;H.type=1015;H.needsUpdate=!0;y*=4;for(let J=0;J<
m;J++){const K=v[J],S=t[J],P=E*M*4*J;for(let U=0;U<K.count;U++){g.fromBufferAttribute(K,U);!0===K.normalized&&Tb(g,K);const V=U*y;q[P+V+0]=g.x;q[P+V+1]=g.y;q[P+V+2]=g.z;q[P+V+3]=0;!0===r&&(g.fromBufferAttribute(S,U),!0===S.normalized&&Tb(g,S),q[P+V+4]=g.x,q[P+V+5]=g.y,q[P+V+6]=g.z,q[P+V+7]=0)}}r={count:m,texture:H,size:new la(E,M)};f.set(l,r)}m=0;for(v=0;v<k.length;v++)m+=k[v];l=l.morphTargetsRelative?1:1-m;n.getUniforms().setValue(a,"morphTargetBaseInfluence",l);n.getUniforms().setValue(a,"morphTargetInfluences",
k);n.getUniforms().setValue(a,"morphTargetsTexture",r.texture,c);n.getUniforms().setValue(a,"morphTargetsTextureSize",r.size)}else{m=void 0===k?0:k.length;r=d[l.id];if(void 0===r||r.length!==m){r=[];for(v=0;v<m;v++)r[v]=[v,0];d[l.id]=r}for(v=0;v<m;v++)t=r[v],t[0]=v,t[1]=k[v];r.sort(Zb);for(k=0;8>k;k++)k<m&&r[k][1]?(h[k][0]=r[k][0],h[k][1]=r[k][1]):(h[k][0]=Number.MAX_SAFE_INTEGER,h[k][1]=0);h.sort(Sb);k=l.morphAttributes.position;m=l.morphAttributes.normal;r=0;for(v=0;8>v;v++)E=h[v],t=E[0],E=E[1],
t!==Number.MAX_SAFE_INTEGER&&E?(k&&l.getAttribute("morphTarget"+v)!==k[t]&&l.setAttribute("morphTarget"+v,k[t]),m&&l.getAttribute("morphNormal"+v)!==m[t]&&l.setAttribute("morphNormal"+v,m[t]),e[v]=E,r+=E):(k&&!0===l.hasAttribute("morphTarget"+v)&&l.deleteAttribute("morphTarget"+v),m&&!0===l.hasAttribute("morphNormal"+v)&&l.deleteAttribute("morphNormal"+v),e[v]=0);l=l.morphTargetsRelative?1:1-r;n.getUniforms().setValue(a,"morphTargetBaseInfluence",l);n.getUniforms().setValue(a,"morphTargetInfluences",
e)}}}}function ec(a,b,c,d){function e(g){g=g.target;g.removeEventListener("dispose",e);c.remove(g.instanceMatrix);null!==g.instanceColor&&c.remove(g.instanceColor)}let f=new WeakMap;return{update:function(g){const h=d.render.frame,k=b.get(g,g.geometry);f.get(k)!==h&&(b.update(k),f.set(k,h));g.isInstancedMesh&&(!1===g.hasEventListener("dispose",e)&&g.addEventListener("dispose",e),c.update(g.instanceMatrix,a.ARRAY_BUFFER),null!==g.instanceColor&&c.update(g.instanceColor,a.ARRAY_BUFFER));return k},dispose:function(){f=
new WeakMap}}}function Hb(a,b,c){const d=a[0];if(0>=d||0<d)return a;const e=b*c;let f=bi[e];void 0===f&&(f=new Float32Array(e),bi[e]=f);if(0!==b){d.toArray(f,0);for(let g=1,h=0;g!==b;++g)h+=c,a[g].toArray(f,h)}return f}function u(a,b){if(a.length!==b.length)return!1;for(let c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function w(a,b){for(let c=0,d=b.length;c<d;c++)a[c]=b[c]}function D(a,b){let c=ci[b];void 0===c&&(c=new Int32Array(b),ci[b]=c);for(let d=0;d!==b;++d)c[d]=a.allocateTextureUnit();
return c}function x(a,b){const c=this.cache;c[0]!==b&&(a.uniform1f(this.addr,b),c[0]=b)}function I(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y)a.uniform2f(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y}else u(c,b)||(a.uniform2fv(this.addr,b),w(c,b))}function R(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z)a.uniform3f(this.addr,b.x,b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z}else if(void 0!==b.r){if(c[0]!==b.r||c[1]!==b.g||c[2]!==b.b)a.uniform3f(this.addr,b.r,
b.g,b.b),c[0]=b.r,c[1]=b.g,c[2]=b.b}else u(c,b)||(a.uniform3fv(this.addr,b),w(c,b))}function L(a,b){const c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z||c[3]!==b.w)a.uniform4f(this.addr,b.x,b.y,b.z,b.w),c[0]=b.x,c[1]=b.y,c[2]=b.z,c[3]=b.w}else u(c,b)||(a.uniform4fv(this.addr,b),w(c,b))}function Q(a,b){const c=this.cache,d=b.elements;void 0===d?u(c,b)||(a.uniformMatrix2fv(this.addr,!1,b),w(c,b)):u(c,d)||(di.set(d),a.uniformMatrix2fv(this.addr,!1,di),w(c,d))}function G(a,b){const c=
this.cache,d=b.elements;void 0===d?u(c,b)||(a.uniformMatrix3fv(this.addr,!1,b),w(c,b)):u(c,d)||(ei.set(d),a.uniformMatrix3fv(this.addr,!1,ei),w(c,d))}function fa(a,b){const c=this.cache,d=b.elements;void 0===d?u(c,b)||(a.uniformMatrix4fv(this.addr,!1,b),w(c,b)):u(c,d)||(fi.set(d),a.uniformMatrix4fv(this.addr,!1,fi),w(c,d))}function ra(a,b){const c=this.cache;c[0]!==b&&(a.uniform1i(this.addr,b),c[0]=b)}function Oa(a,b){const c=this.cache;u(c,b)||(a.uniform2iv(this.addr,b),w(c,b))}function Ha(a,b){const c=
this.cache;u(c,b)||(a.uniform3iv(this.addr,b),w(c,b))}function Ra(a,b){const c=this.cache;u(c,b)||(a.uniform4iv(this.addr,b),w(c,b))}function Na(a,b){const c=this.cache;c[0]!==b&&(a.uniform1ui(this.addr,b),c[0]=b)}function Wa(a,b){const c=this.cache;u(c,b)||(a.uniform2uiv(this.addr,b),w(c,b))}function fb(a,b){const c=this.cache;u(c,b)||(a.uniform3uiv(this.addr,b),w(c,b))}function yc(a,b){const c=this.cache;u(c,b)||(a.uniform4uiv(this.addr,b),w(c,b))}function Bg(a,b,c){const d=this.cache,e=c.allocateTextureUnit();
d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e);c.safeSetTexture2D(b||gi,e)}function Cg(a,b,c){const d=this.cache,e=c.allocateTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e);c.setTexture3D(b||hi,e)}function re(a,b,c){const d=this.cache,e=c.allocateTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e);c.safeSetTextureCube(b||ii,e)}function se(a,b,c){const d=this.cache,e=c.allocateTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e);c.setTexture2DArray(b||ji,e)}function Nd(a){switch(a){case 5126:return x;
case 35664:return I;case 35665:return R;case 35666:return L;case 35674:return Q;case 35675:return G;case 35676:return fa;case 5124:case 35670:return ra;case 35667:case 35671:return Oa;case 35668:case 35672:return Ha;case 35669:case 35673:return Ra;case 5125:return Na;case 36294:return Wa;case 36295:return fb;case 36296:return yc;case 35678:case 36198:case 36298:case 36306:case 35682:return Bg;case 35679:case 36299:case 36307:return Cg;case 35680:case 36300:case 36308:case 36293:return re;case 36289:case 36303:case 36311:case 36292:return se}}
function Dg(a,b){a.uniform1fv(this.addr,b)}function Od(a,b){b=Hb(b,this.size,2);a.uniform2fv(this.addr,b)}function Ib(a,b){b=Hb(b,this.size,3);a.uniform3fv(this.addr,b)}function te(a,b){b=Hb(b,this.size,4);a.uniform4fv(this.addr,b)}function Eg(a,b){b=Hb(b,this.size,4);a.uniformMatrix2fv(this.addr,!1,b)}function Jk(a,b){b=Hb(b,this.size,9);a.uniformMatrix3fv(this.addr,!1,b)}function Kk(a,b){b=Hb(b,this.size,16);a.uniformMatrix4fv(this.addr,!1,b)}function Lk(a,b){a.uniform1iv(this.addr,b)}function Mk(a,
b){a.uniform2iv(this.addr,b)}function Nk(a,b){a.uniform3iv(this.addr,b)}function Ok(a,b){a.uniform4iv(this.addr,b)}function Pk(a,b){a.uniform1uiv(this.addr,b)}function Qk(a,b){a.uniform2uiv(this.addr,b)}function Rk(a,b){a.uniform3uiv(this.addr,b)}function Sk(a,b){a.uniform4uiv(this.addr,b)}function Tk(a,b,c){const d=b.length,e=D(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.safeSetTexture2D(b[a]||gi,e[a])}function Uk(a,b,c){const d=b.length,e=D(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTexture3D(b[a]||
hi,e[a])}function Vk(a,b,c){const d=b.length,e=D(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.safeSetTextureCube(b[a]||ii,e[a])}function Wk(a,b,c){const d=b.length,e=D(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTexture2DArray(b[a]||ji,e[a])}function Xk(a){switch(a){case 5126:return Dg;case 35664:return Od;case 35665:return Ib;case 35666:return te;case 35674:return Eg;case 35675:return Jk;case 35676:return Kk;case 5124:case 35670:return Lk;case 35667:case 35671:return Mk;case 35668:case 35672:return Nk;
case 35669:case 35673:return Ok;case 5125:return Pk;case 36294:return Qk;case 36295:return Rk;case 36296:return Sk;case 35678:case 36198:case 36298:case 36306:case 35682:return Tk;case 35679:case 36299:case 36307:return Uk;case 35680:case 36300:case 36308:case 36293:return Vk;case 36289:case 36303:case 36311:case 36292:return Wk}}function Yk(a,b,c){this.id=a;this.addr=c;this.cache=[];this.setValue=Nd(b.type)}function ki(a,b,c){this.id=a;this.addr=c;this.cache=[];this.size=b.size;this.setValue=Xk(b.type)}
function li(a){this.id=a;this.seq=[];this.map={}}function Wc(a,b){this.seq=[];this.map={};const c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(let l=0;l<c;++l){var d=a.getActiveUniform(b,l),e=a.getUniformLocation(b,d.name),f=this,g=d.name;const m=g.length;for(Fg.lastIndex=0;;){const n=Fg.exec(g),r=Fg.lastIndex;var h=n[1],k=n[3];"]"===n[2]&&(h|=0);if(void 0===k||"["===k&&r+2===m){g=f;d=void 0===k?new Yk(h,d,e):new ki(h,d,e);g.seq.push(d);g.map[d.id]=d;break}else k=f.map[h],void 0===k&&(k=new li(h),
h=f,f=k,h.seq.push(f),h.map[f.id]=f),f=k}}}function mi(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return b}function ni(a){switch(a){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",a),["Linear","( value )"]}}function oi(a,b,c){const d=a.getShaderParameter(b,a.COMPILE_STATUS),e=a.getShaderInfoLog(b).trim();if(d&&""===e)return"";c=c.toUpperCase()+"\n\n"+e+"\n\n";a=a.getShaderSource(b).split("\n");
for(b=0;b<a.length;b++)a[b]=b+1+": "+a[b];a=a.join("\n");return c+a}function ld(a,b){b=ni(b);return"vec4 "+a+"( vec4 value ) { return "+b[0]+"ToLinear"+b[1]+"; }"}function Zk(a,b){b=ni(b);return"vec4 "+a+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"}function $k(a,b){switch(b){case 1:b="Linear";break;case 2:b="Reinhard";break;case 3:b="OptimizedCineon";break;case 4:b="ACESFilmic";break;case 5:b="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",b),b="Linear"}return"vec3 "+
a+"( vec3 color ) { return "+b+"ToneMapping( color ); }"}function al(a){const b=[];for(const c in a){const d=a[c];!1!==d&&b.push("#define "+c+" "+d)}return b.join("\n")}function ue(a){return""!==a}function pi(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,b.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,
b.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,b.numPointLightShadows)}function qi(a,b){return a.replace(/NUM_CLIPPING_PLANES/g,b.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,b.numClippingPlanes-b.numClipIntersection)}function Gg(a,b){a=Sa[b];if(void 0===a)throw Error("Can not resolve #include \x3c"+b+"\x3e");return a.replace(Hg,Gg)}function ri(a,b,c,d){console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.");
return Ig(a,b,c,d)}function Ig(a,b,c,d){a="";for(b=parseInt(b);b<parseInt(c);b++)a+=d.replace(/\[\s*i\s*\]/g,"[ "+b+" ]").replace(/UNROLLED_LOOP_INDEX/g,b);return a}function si(a){let b="precision "+a.precision+" float;\nprecision "+a.precision+" int;";"highp"===a.precision?b+="\n#define HIGH_PRECISION":"mediump"===a.precision?b+="\n#define MEDIUM_PRECISION":"lowp"===a.precision&&(b+="\n#define LOW_PRECISION");return b}function bl(a){let b="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?b="SHADOWMAP_TYPE_PCF":
2===a.shadowMapType?b="SHADOWMAP_TYPE_PCF_SOFT":3===a.shadowMapType&&(b="SHADOWMAP_TYPE_VSM");return b}function cl(a){let b="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case 301:case 302:b="ENVMAP_TYPE_CUBE";break;case 306:case 307:b="ENVMAP_TYPE_CUBE_UV"}return b}function dl(a){let b="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case 302:case 307:b="ENVMAP_MODE_REFRACTION"}return b}function el(a){let b="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case 0:b="ENVMAP_BLENDING_MULTIPLY";
break;case 1:b="ENVMAP_BLENDING_MIX";break;case 2:b="ENVMAP_BLENDING_ADD"}return b}function fl(a,b,c,d){const e=a.getContext();var f=c.defines,g=c.vertexShader,h=c.fragmentShader,k=bl(c),l=cl(c),m=dl(c),n=el(c),r=c.isWebGL2?"":[c.extensionDerivatives||c.envMapCubeUV||c.bumpMap||c.tangentSpaceNormalMap||c.clearcoatNormalMap||c.flatShading||"physical"===c.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(c.extensionFragDepth||c.logarithmicDepthBuffer)&&c.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":
"",c.extensionDrawBuffers&&c.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(c.extensionShaderTextureLOD||c.envMap||c.transmission)&&c.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ue).join("\n"),v=al(f);const t=e.createProgram();var y=c.glslVersion?"#version "+c.glslVersion+"\n":"";c.isRawShaderMaterial?(f=[v].filter(ue).join("\n"),0<f.length&&(f+="\n"),k=[r,v].filter(ue).join("\n"),0<k.length&&(k+="\n")):(f=[si(c),"#define SHADER_NAME "+
c.shaderName,v,c.instancing?"#define USE_INSTANCING":"",c.instancingColor?"#define USE_INSTANCING_COLOR":"",c.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+c.maxBones,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+m:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.bumpMap?"#define USE_BUMPMAP":
"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMap&&c.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",c.normalMap&&c.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.displacementMap&&c.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":
"",c.specularColorMap?"#define USE_SPECULARCOLORMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.sheenColorMap?"#define USE_SHEENCOLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",c.vertexTangents?"#define USE_TANGENT":"",c.vertexColors?"#define USE_COLOR":
"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUvs?"#define USE_UV":"",c.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",c.flatShading?"#define FLAT_SHADED":"",c.skinning?"#define USE_SKINNING":"",c.useVertexTexture?"#define BONE_TEXTURE":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals&&!1===c.flatShading?"#define USE_MORPHNORMALS":"",c.morphTargets&&c.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",c.morphTargets&&c.isWebGL2?"#define MORPHTARGETS_COUNT "+c.morphTargetsCount:"",c.doubleSided?
"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+k:"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;",
"uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) \x26\x26 ! defined( MORPHTARGETS_TEXTURE ) )",
"\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;",
"\tattribute vec4 skinWeight;","#endif","\n"].filter(ue).join("\n"),k=[r,si(c),"#define SHADER_NAME "+c.shaderName,v,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.matcap?"#define USE_MATCAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+l:"",c.envMap?"#define "+m:"",c.envMap?"#define "+n:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.bumpMap?"#define USE_BUMPMAP":
"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMap&&c.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",c.normalMap&&c.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",c.clearcoat?"#define USE_CLEARCOAT":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",c.specularColorMap?
"#define USE_SPECULARCOLORMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaTest?"#define USE_ALPHATEST":"",c.sheen?"#define USE_SHEEN":"",c.sheenColorMap?"#define USE_SHEENCOLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.vertexTangents?"#define USE_TANGENT":
"",c.vertexColors||c.instancingColor?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUvs?"#define USE_UV":"",c.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",c.gradientMap?"#define USE_GRADIENTMAP":"",c.flatShading?"#define FLAT_SHADED":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+k:"",c.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",c.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":
"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(c.extensionShaderTextureLOD||c.envMap)&&c.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==c.toneMapping?"#define TONE_MAPPING":"",0!==c.toneMapping?Sa.tonemapping_pars_fragment:"",0!==c.toneMapping?$k("toneMapping",c.toneMapping):"",c.dithering?"#define DITHERING":
"",1022===c.format?"#define OPAQUE":"",Sa.encodings_pars_fragment,c.map?ld("mapTexelToLinear",c.mapEncoding):"",c.matcap?ld("matcapTexelToLinear",c.matcapEncoding):"",c.envMap?ld("envMapTexelToLinear",c.envMapEncoding):"",c.emissiveMap?ld("emissiveMapTexelToLinear",c.emissiveMapEncoding):"",c.specularColorMap?ld("specularColorMapTexelToLinear",c.specularColorMapEncoding):"",c.sheenColorMap?ld("sheenColorMapTexelToLinear",c.sheenColorMapEncoding):"",c.lightMap?ld("lightMapTexelToLinear",c.lightMapEncoding):
"",Zk("linearToOutputTexel",c.outputEncoding),c.depthPacking?"#define DEPTH_PACKING "+c.depthPacking:"","\n"].filter(ue).join("\n"));g=g.replace(Hg,Gg);g=pi(g,c);g=qi(g,c);h=h.replace(Hg,Gg);h=pi(h,c);h=qi(h,c);g=g.replace(ti,Ig).replace(ui,ri);h=h.replace(ti,Ig).replace(ui,ri);c.isWebGL2&&!0!==c.isRawShaderMaterial&&(y="#version 300 es\n",f="precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n"+f,k=["#define varying in","300 es"===c.glslVersion?
"":"layout(location \x3d 0) out highp vec4 pc_fragColor;","300 es"===c.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+
"\n"+k);h=y+k+h;g=mi(e,e.VERTEX_SHADER,y+f+g);h=mi(e,e.FRAGMENT_SHADER,h);e.attachShader(t,g);e.attachShader(t,h);void 0!==c.index0AttributeName?e.bindAttribLocation(t,0,c.index0AttributeName):!0===c.morphTargets&&e.bindAttribLocation(t,0,"position");e.linkProgram(t);if(a.debug.checkShaderErrors){a=e.getProgramInfoLog(t).trim();y=e.getShaderInfoLog(g).trim();l=e.getShaderInfoLog(h).trim();n=m=!0;if(!1===e.getProgramParameter(t,e.LINK_STATUS))m=!1,r=oi(e,g,"vertex"),v=oi(e,h,"fragment"),console.error("THREE.WebGLProgram: Shader Error "+
e.getError()+" - VALIDATE_STATUS "+e.getProgramParameter(t,e.VALIDATE_STATUS)+"\n\nProgram Info Log: "+a+"\n"+r+"\n"+v);else if(""!==a)console.warn("THREE.WebGLProgram: Program Info Log:",a);else if(""===y||""===l)n=!1;n&&(this.diagnostics={runnable:m,programLog:a,vertexShader:{log:y,prefix:f},fragmentShader:{log:l,prefix:k}})}e.deleteShader(g);e.deleteShader(h);let E;this.getUniforms=function(){void 0===E&&(E=new Wc(e,t));return E};let M;this.getAttributes=function(){if(void 0===M){const q={},H=
e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let J=0;J<H;J++){const K=e.getActiveAttrib(t,J),S=K.name;let P=1;K.type===e.FLOAT_MAT2&&(P=2);K.type===e.FLOAT_MAT3&&(P=3);K.type===e.FLOAT_MAT4&&(P=4);q[S]={type:K.type,location:e.getAttribLocation(t,S),locationSize:P}}M=q}return M};this.destroy=function(){d.releaseStatesOfProgram(this);e.deleteProgram(t);this.program=void 0};this.name=c.shaderName;this.id=gl++;this.cacheKey=b;this.usedTimes=1;this.program=t;this.vertexShader=g;this.fragmentShader=
h;return this}function hl(a,b,c,d,e,f,g){function h(q){let H;q&&q.isTexture?H=q.encoding:q&&q.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),H=q.texture.encoding):H=3E3;n&&q&&q.isTexture&&1023===q.format&&1009===q.type&&3001===q.encoding&&(H=3E3);return H}const k=new xf,l=new il,m=[],n=e.isWebGL2,r=e.logarithmicDepthBuffer,v=e.floatVertexTextures,t=e.maxVertexUniforms,y=e.vertexTextures;
let E=e.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(q,H,J,K,S){const P=K.fog;K=q.isMeshStandardMaterial?
K.environment:null;K=(q.isMeshStandardMaterial?c:b).get(q.envMap||K);const U=M[q.type];if(S.isSkinnedMesh){var V=S.skeleton.bones;if(v)V=1024;else{var W=Math.min(Math.floor((t-20)/4),V.length);W<V.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+V.length+" bones. This GPU supports "+W+"."),V=0):V=W}}else V=0;null!==q.precision&&(E=e.getMaxPrecision(q.precision),E!==q.precision&&console.warn("THREE.WebGLProgram.getParameters:",q.precision,"not supported, using",E,"instead."));let da,ka;if(U){var ya=
dc[U];W=ya.vertexShader;ya=ya.fragmentShader}else W=q.vertexShader,ya=q.fragmentShader,l.update(q),da=l.getVertexShaderID(q),ka=l.getFragmentShaderID(q);const pa=a.getRenderTarget(),Ia=0<q.alphaTest,wa=0<q.clearcoat;return{isWebGL2:n,shaderID:U,shaderName:q.type,vertexShader:W,fragmentShader:ya,defines:q.defines,customVertexShaderID:da,customFragmentShaderID:ka,isRawShaderMaterial:!0===q.isRawShaderMaterial,glslVersion:q.glslVersion,precision:E,instancing:!0===S.isInstancedMesh,instancingColor:!0===
S.isInstancedMesh&&null!==S.instanceColor,supportsVertexTextures:y,outputEncoding:null!==pa?h(pa.texture):a.outputEncoding,map:!!q.map,mapEncoding:h(q.map),matcap:!!q.matcap,matcapEncoding:h(q.matcap),envMap:!!K,envMapMode:K&&K.mapping,envMapEncoding:h(K),envMapCubeUV:!!K&&(306===K.mapping||307===K.mapping),lightMap:!!q.lightMap,lightMapEncoding:h(q.lightMap),aoMap:!!q.aoMap,emissiveMap:!!q.emissiveMap,emissiveMapEncoding:h(q.emissiveMap),bumpMap:!!q.bumpMap,normalMap:!!q.normalMap,objectSpaceNormalMap:1===
q.normalMapType,tangentSpaceNormalMap:0===q.normalMapType,clearcoat:wa,clearcoatMap:wa&&!!q.clearcoatMap,clearcoatRoughnessMap:wa&&!!q.clearcoatRoughnessMap,clearcoatNormalMap:wa&&!!q.clearcoatNormalMap,displacementMap:!!q.displacementMap,roughnessMap:!!q.roughnessMap,metalnessMap:!!q.metalnessMap,specularMap:!!q.specularMap,specularIntensityMap:!!q.specularIntensityMap,specularColorMap:!!q.specularColorMap,specularColorMapEncoding:h(q.specularColorMap),alphaMap:!!q.alphaMap,alphaTest:Ia,gradientMap:!!q.gradientMap,
sheen:0<q.sheen,sheenColorMap:!!q.sheenColorMap,sheenColorMapEncoding:h(q.sheenColorMap),sheenRoughnessMap:!!q.sheenRoughnessMap,transmission:0<q.transmission,transmissionMap:!!q.transmissionMap,thicknessMap:!!q.thicknessMap,combine:q.combine,vertexTangents:!!q.normalMap&&!!S.geometry&&!!S.geometry.attributes.tangent,vertexColors:q.vertexColors,vertexAlphas:!0===q.vertexColors&&!!S.geometry&&!!S.geometry.attributes.color&&4===S.geometry.attributes.color.itemSize,vertexUvs:!!q.map||!!q.bumpMap||!!q.normalMap||
!!q.specularMap||!!q.alphaMap||!!q.emissiveMap||!!q.roughnessMap||!!q.metalnessMap||!!q.clearcoatMap||!!q.clearcoatRoughnessMap||!!q.clearcoatNormalMap||!!q.displacementMap||!!q.transmissionMap||!!q.thicknessMap||!!q.specularIntensityMap||!!q.specularColorMap||!!q.sheenColorMap||!!q.sheenRoughnessMap,uvsVertexOnly:!(q.map||q.bumpMap||q.normalMap||q.specularMap||q.alphaMap||q.emissiveMap||q.roughnessMap||q.metalnessMap||q.clearcoatNormalMap||0<q.transmission||q.transmissionMap||q.thicknessMap||q.specularIntensityMap||
q.specularColorMap||0<q.sheen||q.sheenColorMap||q.sheenRoughnessMap)&&!!q.displacementMap,fog:!!P,useFog:q.fog,fogExp2:P&&P.isFogExp2,flatShading:!!q.flatShading,sizeAttenuation:q.sizeAttenuation,logarithmicDepthBuffer:r,skinning:!0===S.isSkinnedMesh&&0<V,maxBones:V,useVertexTexture:v,morphTargets:!!S.geometry&&!!S.geometry.morphAttributes.position,morphNormals:!!S.geometry&&!!S.geometry.morphAttributes.normal,morphTargetsCount:S.geometry&&S.geometry.morphAttributes.position?S.geometry.morphAttributes.position.length:
0,numDirLights:H.directional.length,numPointLights:H.point.length,numSpotLights:H.spot.length,numRectAreaLights:H.rectArea.length,numHemiLights:H.hemi.length,numDirLightShadows:H.directionalShadowMap.length,numPointLightShadows:H.pointShadowMap.length,numSpotLightShadows:H.spotShadowMap.length,numClippingPlanes:g.numPlanes,numClipIntersection:g.numIntersection,format:q.format,dithering:q.dithering,shadowMapEnabled:a.shadowMap.enabled&&0<J.length,shadowMapType:a.shadowMap.type,toneMapping:q.toneMapped?
a.toneMapping:0,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:q.premultipliedAlpha,doubleSided:2===q.side,flipSided:1===q.side,depthPacking:void 0!==q.depthPacking?q.depthPacking:!1,index0AttributeName:q.index0AttributeName,extensionDerivatives:q.extensions&&q.extensions.derivatives,extensionFragDepth:q.extensions&&q.extensions.fragDepth,extensionDrawBuffers:q.extensions&&q.extensions.drawBuffers,extensionShaderTextureLOD:q.extensions&&q.extensions.shaderTextureLOD,rendererExtensionFragDepth:n||
d.has("EXT_frag_depth"),rendererExtensionDrawBuffers:n||d.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:n||d.has("EXT_shader_texture_lod"),customProgramCacheKey:q.customProgramCacheKey()}},getProgramCacheKey:function(q){const H=[];q.shaderID?H.push(q.shaderID):(H.push(q.customVertexShaderID),H.push(q.customFragmentShaderID));if(void 0!==q.defines)for(const J in q.defines)H.push(J),H.push(q.defines[J]);!1===q.isRawShaderMaterial&&(H.push(q.precision),H.push(q.outputEncoding),H.push(q.mapEncoding),
H.push(q.matcapEncoding),H.push(q.envMapMode),H.push(q.envMapEncoding),H.push(q.lightMapEncoding),H.push(q.emissiveMapEncoding),H.push(q.combine),H.push(q.vertexUvs),H.push(q.fogExp2),H.push(q.sizeAttenuation),H.push(q.maxBones),H.push(q.morphTargetsCount),H.push(q.numDirLights),H.push(q.numPointLights),H.push(q.numSpotLights),H.push(q.numHemiLights),H.push(q.numRectAreaLights),H.push(q.numDirLightShadows),H.push(q.numPointLightShadows),H.push(q.numSpotLightShadows),H.push(q.shadowMapType),H.push(q.toneMapping),
H.push(q.numClippingPlanes),H.push(q.numClipIntersection),H.push(q.format),H.push(q.specularColorMapEncoding),H.push(q.sheenColorMapEncoding),k.disableAll(),q.isWebGL2&&k.enable(0),q.supportsVertexTextures&&k.enable(1),q.instancing&&k.enable(2),q.instancingColor&&k.enable(3),q.map&&k.enable(4),q.matcap&&k.enable(5),q.envMap&&k.enable(6),q.envMapCubeUV&&k.enable(7),q.lightMap&&k.enable(8),q.aoMap&&k.enable(9),q.emissiveMap&&k.enable(10),q.bumpMap&&k.enable(11),q.normalMap&&k.enable(12),q.objectSpaceNormalMap&&
k.enable(13),q.tangentSpaceNormalMap&&k.enable(14),q.clearcoat&&k.enable(15),q.clearcoatMap&&k.enable(16),q.clearcoatRoughnessMap&&k.enable(17),q.clearcoatNormalMap&&k.enable(18),q.displacementMap&&k.enable(19),q.specularMap&&k.enable(20),q.roughnessMap&&k.enable(21),q.metalnessMap&&k.enable(22),q.gradientMap&&k.enable(23),q.alphaMap&&k.enable(24),q.alphaTest&&k.enable(25),q.vertexColors&&k.enable(26),q.vertexAlphas&&k.enable(27),q.vertexUvs&&k.enable(28),q.vertexTangents&&k.enable(29),q.uvsVertexOnly&&
k.enable(30),q.fog&&k.enable(31),H.push(k.mask),k.disableAll(),q.useFog&&k.enable(0),q.flatShading&&k.enable(1),q.logarithmicDepthBuffer&&k.enable(2),q.skinning&&k.enable(3),q.useVertexTexture&&k.enable(4),q.morphTargets&&k.enable(5),q.morphNormals&&k.enable(6),q.premultipliedAlpha&&k.enable(7),q.shadowMapEnabled&&k.enable(8),q.physicallyCorrectLights&&k.enable(9),q.doubleSided&&k.enable(10),q.flipSided&&k.enable(11),q.depthPacking&&k.enable(12),q.dithering&&k.enable(13),q.specularIntensityMap&&k.enable(14),
q.specularColorMap&&k.enable(15),q.transmission&&k.enable(16),q.transmissionMap&&k.enable(17),q.thicknessMap&&k.enable(18),q.sheen&&k.enable(19),q.sheenColorMap&&k.enable(20),q.sheenRoughnessMap&&k.enable(21),H.push(k.mask),H.push(a.outputEncoding));H.push(q.customProgramCacheKey);return H.join()},getUniforms:function(q){const H=M[q.type];return H?vi.clone(dc[H].uniforms):q.uniforms},acquireProgram:function(q,H){let J;for(let K=0,S=m.length;K<S;K++){const P=m[K];if(P.cacheKey===H){J=P;++J.usedTimes;
break}}void 0===J&&(J=new fl(a,H,q,f),m.push(J));return J},releaseProgram:function(q){if(0===--q.usedTimes){const H=m.indexOf(q);m[H]=m[m.length-1];m.pop();q.destroy()}},releaseShaderCache:function(q){l.remove(q)},programs:m,dispose:function(){l.dispose()}}}function jl(){let a=new WeakMap;return{get:function(b){let c=a.get(b);void 0===c&&(c={},a.set(b,c));return c},remove:function(b){a.delete(b)},update:function(b,c,d){a.get(b)[c]=d},dispose:function(){a=new WeakMap}}}function kl(a,b){return a.groupOrder!==
b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function wi(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function xi(){function a(g,h,k,l,m,n){let r=b[c];void 0===r?(r={id:g.id,object:g,geometry:h,material:k,groupOrder:l,renderOrder:g.renderOrder,z:m,group:n},
b[c]=r):(r.id=g.id,r.object=g,r.geometry=h,r.material=k,r.groupOrder=l,r.renderOrder=g.renderOrder,r.z=m,r.group=n);c++;return r}const b=[];let c=0;const d=[],e=[],f=[];return{opaque:d,transmissive:e,transparent:f,init:function(){c=0;d.length=0;e.length=0;f.length=0},push:function(g,h,k,l,m,n){g=a(g,h,k,l,m,n);0<k.transmission?e.push(g):!0===k.transparent?f.push(g):d.push(g)},unshift:function(g,h,k,l,m,n){g=a(g,h,k,l,m,n);0<k.transmission?e.unshift(g):!0===k.transparent?f.unshift(g):d.unshift(g)},
finish:function(){for(let g=c,h=b.length;g<h;g++){const k=b[g];if(null===k.id)break;k.id=null;k.object=null;k.geometry=null;k.material=null;k.group=null}},sort:function(g,h){1<d.length&&d.sort(g||kl);1<e.length&&e.sort(h||wi);1<f.length&&f.sort(h||wi)}}}function ll(){let a=new WeakMap;return{get:function(b,c){!1===a.has(b)?(c=new xi,a.set(b,[c])):c>=a.get(b).length?(c=new xi,a.get(b).push(c)):c=a.get(b)[c];return c},dispose:function(){a=new WeakMap}}}function ml(){const a={};return{get:function(b){if(void 0!==
a[b.id])return a[b.id];let c;switch(b.type){case "DirectionalLight":c={direction:new C,color:new ua};break;case "SpotLight":c={position:new C,direction:new C,color:new ua,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case "PointLight":c={position:new C,color:new ua,distance:0,decay:0};break;case "HemisphereLight":c={direction:new C,skyColor:new ua,groundColor:new ua};break;case "RectAreaLight":c={color:new ua,position:new C,halfWidth:new C,halfHeight:new C}}return a[b.id]=c}}}function nl(){const a=
{};return{get:function(b){if(void 0!==a[b.id])return a[b.id];let c;switch(b.type){case "DirectionalLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new la};break;case "SpotLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new la};break;case "PointLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new la,shadowCameraNear:1,shadowCameraFar:1E3}}return a[b.id]=c}}}function ol(a,b){return(b.castShadow?1:0)-(a.castShadow?1:0)}function pl(a,
b){const c=new ml,d=nl(),e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let k=0;9>k;k++)e.probe.push(new C);
const f=new C,g=new Da,h=new Da;return{setup:function(k,l){let m=0,n=0,r=0;for(var v=0;9>v;v++)e.probe[v].set(0,0,0);let t=v=0,y=0,E=0,M=0,q=0,H=0,J=0;k.sort(ol);l=!0!==l?Math.PI:1;for(let V=0,W=k.length;V<W;V++){const da=k[V];var K=da.color,S=da.intensity;const ka=da.distance;var P=da.shadow&&da.shadow.map?da.shadow.map.texture:null;if(da.isAmbientLight)m+=K.r*S*l,n+=K.g*S*l,r+=K.b*S*l;else if(da.isLightProbe)for(P=0;9>P;P++)e.probe[P].addScaledVector(da.sh.coefficients[P],S);else if(da.isDirectionalLight){S=
c.get(da);S.color.copy(da.color).multiplyScalar(da.intensity*l);if(da.castShadow){var U=da.shadow;K=d.get(da);K.shadowBias=U.bias;K.shadowNormalBias=U.normalBias;K.shadowRadius=U.radius;K.shadowMapSize=U.mapSize;e.directionalShadow[v]=K;e.directionalShadowMap[v]=P;e.directionalShadowMatrix[v]=da.shadow.matrix;q++}e.directional[v]=S;v++}else da.isSpotLight?(U=c.get(da),U.position.setFromMatrixPosition(da.matrixWorld),U.color.copy(K).multiplyScalar(S*l),U.distance=ka,U.coneCos=Math.cos(da.angle),U.penumbraCos=
Math.cos(da.angle*(1-da.penumbra)),U.decay=da.decay,da.castShadow&&(S=da.shadow,K=d.get(da),K.shadowBias=S.bias,K.shadowNormalBias=S.normalBias,K.shadowRadius=S.radius,K.shadowMapSize=S.mapSize,e.spotShadow[y]=K,e.spotShadowMap[y]=P,e.spotShadowMatrix[y]=da.shadow.matrix,J++),e.spot[y]=U,y++):da.isRectAreaLight?(P=c.get(da),P.color.copy(K).multiplyScalar(S),P.halfWidth.set(.5*da.width,0,0),P.halfHeight.set(0,.5*da.height,0),e.rectArea[E]=P,E++):da.isPointLight?(S=c.get(da),S.color.copy(da.color).multiplyScalar(da.intensity*
l),S.distance=da.distance,S.decay=da.decay,da.castShadow&&(U=da.shadow,K=d.get(da),K.shadowBias=U.bias,K.shadowNormalBias=U.normalBias,K.shadowRadius=U.radius,K.shadowMapSize=U.mapSize,K.shadowCameraNear=U.camera.near,K.shadowCameraFar=U.camera.far,e.pointShadow[t]=K,e.pointShadowMap[t]=P,e.pointShadowMatrix[t]=da.shadow.matrix,H++),e.point[t]=S,t++):da.isHemisphereLight&&(P=c.get(da),P.skyColor.copy(da.color).multiplyScalar(S*l),P.groundColor.copy(da.groundColor).multiplyScalar(S*l),e.hemi[M]=P,
M++)}0<E&&(b.isWebGL2?(e.rectAreaLTC1=sa.LTC_FLOAT_1,e.rectAreaLTC2=sa.LTC_FLOAT_2):!0===a.has("OES_texture_float_linear")?(e.rectAreaLTC1=sa.LTC_FLOAT_1,e.rectAreaLTC2=sa.LTC_FLOAT_2):!0===a.has("OES_texture_half_float_linear")?(e.rectAreaLTC1=sa.LTC_HALF_1,e.rectAreaLTC2=sa.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."));e.ambient[0]=m;e.ambient[1]=n;e.ambient[2]=r;k=e.hash;if(k.directionalLength!==v||k.pointLength!==t||k.spotLength!==y||
k.rectAreaLength!==E||k.hemiLength!==M||k.numDirectionalShadows!==q||k.numPointShadows!==H||k.numSpotShadows!==J)e.directional.length=v,e.spot.length=y,e.rectArea.length=E,e.point.length=t,e.hemi.length=M,e.directionalShadow.length=q,e.directionalShadowMap.length=q,e.pointShadow.length=H,e.pointShadowMap.length=H,e.spotShadow.length=J,e.spotShadowMap.length=J,e.directionalShadowMatrix.length=q,e.pointShadowMatrix.length=H,e.spotShadowMatrix.length=J,k.directionalLength=v,k.pointLength=t,k.spotLength=
y,k.rectAreaLength=E,k.hemiLength=M,k.numDirectionalShadows=q,k.numPointShadows=H,k.numSpotShadows=J,e.version=ql++},setupView:function(k,l){let m=0,n=0,r=0,v=0,t=0;l=l.matrixWorldInverse;for(let E=0,M=k.length;E<M;E++){const q=k[E];if(q.isDirectionalLight){var y=e.directional[m];y.direction.setFromMatrixPosition(q.matrixWorld);f.setFromMatrixPosition(q.target.matrixWorld);y.direction.sub(f);y.direction.transformDirection(l);m++}else q.isSpotLight?(y=e.spot[r],y.position.setFromMatrixPosition(q.matrixWorld),
y.position.applyMatrix4(l),y.direction.setFromMatrixPosition(q.matrixWorld),f.setFromMatrixPosition(q.target.matrixWorld),y.direction.sub(f),y.direction.transformDirection(l),r++):q.isRectAreaLight?(y=e.rectArea[v],y.position.setFromMatrixPosition(q.matrixWorld),y.position.applyMatrix4(l),h.identity(),g.copy(q.matrixWorld),g.premultiply(l),h.extractRotation(g),y.halfWidth.set(.5*q.width,0,0),y.halfHeight.set(0,.5*q.height,0),y.halfWidth.applyMatrix4(h),y.halfHeight.applyMatrix4(h),v++):q.isPointLight?
(y=e.point[n],y.position.setFromMatrixPosition(q.matrixWorld),y.position.applyMatrix4(l),n++):q.isHemisphereLight&&(y=e.hemi[t],y.direction.setFromMatrixPosition(q.matrixWorld),y.direction.transformDirection(l),y.direction.normalize(),t++)}},state:e}}function yi(a,b){const c=new pl(a,b),d=[],e=[];return{init:function(){d.length=0;e.length=0},state:{lightsArray:d,shadowsArray:e,lights:c},setupLights:function(f){c.setup(d,f)},setupLightsView:function(f){c.setupView(d,f)},pushLight:function(f){d.push(f)},
pushShadow:function(f){e.push(f)}}}function rl(a,b){let c=new WeakMap;return{get:function(d,e){e=void 0===e?0:e;!1===c.has(d)?(e=new yi(a,b),c.set(d,[e])):e>=c.get(d).length?(e=new yi(a,b),c.get(d).push(e)):e=c.get(d)[e];return e},dispose:function(){c=new WeakMap}}}function zi(a,b,c){function d(q,H,J,K,S,P,U){q=!0===K.isPointLight?q.customDistanceMaterial:q.customDepthMaterial;q=void 0!==q?q:!0===K.isPointLight?m:l;if(a.localClippingEnabled&&!0===J.clipShadows&&0!==J.clippingPlanes.length||J.displacementMap&&
0!==J.displacementScale||J.alphaMap&&0<J.alphaTest){var V=q.uuid;H=J.uuid;let W=n[V];void 0===W&&(W={},n[V]=W);V=W[H];void 0===V&&(V=q.clone(),W[H]=V);q=V}q.visible=J.visible;q.wireframe=J.wireframe;q.side=3===U?null!==J.shadowSide?J.shadowSide:J.side:null!==J.shadowSide?J.shadowSide:v[J.side];q.alphaMap=J.alphaMap;q.alphaTest=J.alphaTest;q.clipShadows=J.clipShadows;q.clippingPlanes=J.clippingPlanes;q.clipIntersection=J.clipIntersection;q.displacementMap=J.displacementMap;q.displacementScale=J.displacementScale;
q.displacementBias=J.displacementBias;q.wireframeLinewidth=J.wireframeLinewidth;q.linewidth=J.linewidth;!0===K.isPointLight&&!0===q.isMeshDistanceMaterial&&(q.referencePosition.setFromMatrixPosition(K.matrixWorld),q.nearDistance=S,q.farDistance=P);return q}function e(q,H,J,K,S){if(!1!==q.visible){if(q.layers.test(H.layers)&&(q.isMesh||q.isLine||q.isPoints)&&(q.castShadow||q.receiveShadow&&3===S)&&(!q.frustumCulled||f.intersectsObject(q))){q.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,q.matrixWorld);
const V=b.update(q);var P=q.material;if(Array.isArray(P)){const W=V.groups;for(let da=0,ka=W.length;da<ka;da++){const ya=W[da];var U=P[ya.materialIndex];U&&U.visible&&(U=d(q,V,U,K,J.near,J.far,S),a.renderBufferDirect(J,null,V,U,q,ya))}}else P.visible&&(P=d(q,V,P,K,J.near,J.far,S),a.renderBufferDirect(J,null,V,P,q,null))}q=q.children;for(let V=0,W=q.length;V<W;V++)e(q[V],H,J,K,S)}}let f=new ve;const g=new la,h=new la,k=new cb,l=new yf({depthPacking:3201}),m=new zf,n={},r=c.maxTextureSize,v={0:1,1:0,
2:2},t=new vc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new la},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position \x3d vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include \x3cpacking\x3e\nvoid main() {\n\tconst float samples \x3d float( VSM_SAMPLES );\n\tfloat mean \x3d 0.0;\n\tfloat squared_mean \x3d 0.0;\n\tfloat uvStride \x3d samples \x3c\x3d 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart \x3d samples \x3c\x3d 1.0 ? 0.0 : - 1.0;\n\tfor ( float i \x3d 0.0; i \x3c samples; i ++ ) {\n\t\tfloat uvOffset \x3d uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution \x3d unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean +\x3d distribution.x;\n\t\t\tsquared_mean +\x3d distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth \x3d unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean +\x3d depth;\n\t\t\tsquared_mean +\x3d depth * depth;\n\t\t#endif\n\t}\n\tmean \x3d mean / samples;\n\tsquared_mean \x3d squared_mean / samples;\n\tfloat std_dev \x3d sqrt( squared_mean - mean * mean );\n\tgl_FragColor \x3d pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),
y=t.clone();y.defines.HORIZONTAL_PASS=1;c=new Ma;c.setAttribute("position",new $a(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new ub(c,t),M=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(q,H,J){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==q.length){var K=a.getRenderTarget(),S=a.getActiveCubeFace(),P=a.getActiveMipmapLevel(),U=a.state;U.setBlending(0);U.buffers.color.setClear(1,1,1,1);U.buffers.depth.setTest(!0);U.setScissorTest(!1);
for(let ka=0,ya=q.length;ka<ya;ka++){var V=q[ka];const pa=V.shadow;if(void 0===pa)console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");else if(!1!==pa.autoUpdate||!1!==pa.needsUpdate){g.copy(pa.mapSize);var W=pa.getFrameExtents();g.multiply(W);h.copy(pa.mapSize);if(g.x>r||g.y>r)g.x>r&&(h.x=Math.floor(r/W.x),g.x=h.x*W.x,pa.mapSize.x=h.x),g.y>r&&(h.y=Math.floor(r/W.y),g.y=h.y*W.y,pa.mapSize.y=h.y);null!==pa.map||pa.isPointLightShadow||3!==this.type||(W={minFilter:1006,magFilter:1006,format:1023},
pa.map=new Rb(g.x,g.y,W),pa.map.texture.name=V.name+".shadowMap",pa.mapPass=new Rb(g.x,g.y,W),pa.camera.updateProjectionMatrix());null===pa.map&&(pa.map=new Rb(g.x,g.y,{minFilter:1003,magFilter:1003,format:1023}),pa.map.texture.name=V.name+".shadowMap",pa.camera.updateProjectionMatrix());a.setRenderTarget(pa.map);a.clear();W=pa.getViewportCount();for(var da=0;da<W;da++){const Ia=pa.getViewport(da);k.set(h.x*Ia.x,h.y*Ia.y,h.x*Ia.z,h.y*Ia.w);U.viewport(k);pa.updateMatrices(V,da);f=pa.getFrustum();e(H,
J,pa.camera,V,this.type)}pa.isPointLightShadow||3!==this.type||(V=pa,W=J,da=b.update(E),t.defines.VSM_SAMPLES!==V.blurSamples&&(t.defines.VSM_SAMPLES=V.blurSamples,y.defines.VSM_SAMPLES=V.blurSamples,t.needsUpdate=!0,y.needsUpdate=!0),t.uniforms.shadow_pass.value=V.map.texture,t.uniforms.resolution.value=V.mapSize,t.uniforms.radius.value=V.radius,a.setRenderTarget(V.mapPass),a.clear(),a.renderBufferDirect(W,null,da,t,E,null),y.uniforms.shadow_pass.value=V.mapPass.texture,y.uniforms.resolution.value=
V.mapSize,y.uniforms.radius.value=V.radius,a.setRenderTarget(V.map),a.clear(),a.renderBufferDirect(W,null,da,y,E,null));pa.needsUpdate=!1}}M.needsUpdate=!1;a.setRenderTarget(K,S,P)}}}function sl(a,b,c){function d(z,X,aa){const ja=new Uint8Array(4),ha=a.createTexture();a.bindTexture(z,ha);a.texParameteri(z,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(z,a.TEXTURE_MAG_FILTER,a.NEAREST);for(z=0;z<aa;z++)a.texImage2D(X+z,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,ja);return ha}function e(z){!0!==y[z]&&(a.enable(z),
y[z]=!0)}function f(z){!1!==y[z]&&(a.disable(z),y[z]=!1)}function g(z,X,aa,ja,ha,Aa,Fa,va){if(0===z)!0===q&&(f(a.BLEND),q=!1);else if(!1===q&&(e(a.BLEND),q=!0),5!==z){if(z!==H||va!==W){if(100!==J||100!==P)a.blendEquation(a.FUNC_ADD),P=J=100;if(va)switch(z){case 1:a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case 2:a.blendFunc(a.ONE,a.ONE);break;case 3:a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA);break;case 4:a.blendFuncSeparate(a.ZERO,
a.SRC_COLOR,a.ZERO,a.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",z)}else switch(z){case 1:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case 2:a.blendFunc(a.SRC_ALPHA,a.ONE);break;case 3:a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR);break;case 4:a.blendFunc(a.ZERO,a.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",z)}V=U=S=K=null;H=z;W=va}}else{ha=ha||X;Aa=Aa||aa;Fa=Fa||ja;if(X!==J||ha!==P)a.blendEquationSeparate(T[X],
T[ha]),J=X,P=ha;if(aa!==K||ja!==S||Aa!==U||Fa!==V)a.blendFuncSeparate(N[aa],N[ja],N[Aa],N[Fa]),K=aa,S=ja,U=Aa,V=Fa;H=z;W=null}}function h(z){da!==z&&(z?a.frontFace(a.CW):a.frontFace(a.CCW),da=z)}function k(z){0!==z?(e(a.CULL_FACE),z!==ka&&(1===z?a.cullFace(a.BACK):2===z?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):f(a.CULL_FACE);ka=z}function l(z,X,aa){if(z){if(e(a.POLYGON_OFFSET_FILL),pa!==X||Ia!==aa)a.polygonOffset(X,aa),pa=X,Ia=aa}else f(a.POLYGON_OFFSET_FILL)}function m(z){void 0===z&&(z=
a.TEXTURE0+wa-1);qa!==z&&(a.activeTexture(z),qa=z)}const n=c.isWebGL2,r=new function(){let z=!1;const X=new cb;let aa=null;const ja=new cb(0,0,0,0);return{setMask:function(ha){aa===ha||z||(a.colorMask(ha,ha,ha,ha),aa=ha)},setLocked:function(ha){z=ha},setClear:function(ha,Aa,Fa,va,xa){!0===xa&&(ha*=va,Aa*=va,Fa*=va);X.set(ha,Aa,Fa,va);!1===ja.equals(X)&&(a.clearColor(ha,Aa,Fa,va),ja.copy(X))},reset:function(){z=!1;aa=null;ja.set(-1,0,0,0)}}},v=new function(){let z=!1,X=null,aa=null,ja=null;return{setTest:function(ha){ha?
e(a.DEPTH_TEST):f(a.DEPTH_TEST)},setMask:function(ha){X===ha||z||(a.depthMask(ha),X=ha)},setFunc:function(ha){if(aa!==ha){if(ha)switch(ha){case 0:a.depthFunc(a.NEVER);break;case 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);break;case 4:a.depthFunc(a.EQUAL);break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);aa=ha}},setLocked:function(ha){z=
ha},setClear:function(ha){ja!==ha&&(a.clearDepth(ha),ja=ha)},reset:function(){z=!1;ja=aa=X=null}}},t=new function(){let z=!1,X=null,aa=null,ja=null,ha=null,Aa=null,Fa=null,va=null,xa=null;return{setTest:function(ab){z||(ab?e(a.STENCIL_TEST):f(a.STENCIL_TEST))},setMask:function(ab){X===ab||z||(a.stencilMask(ab),X=ab)},setFunc:function(ab,Ob,fc){if(aa!==ab||ja!==Ob||ha!==fc)a.stencilFunc(ab,Ob,fc),aa=ab,ja=Ob,ha=fc},setOp:function(ab,Ob,fc){if(Aa!==ab||Fa!==Ob||va!==fc)a.stencilOp(ab,Ob,fc),Aa=ab,Fa=
Ob,va=fc},setLocked:function(ab){z=ab},setClear:function(ab){xa!==ab&&(a.clearStencil(ab),xa=ab)},reset:function(){z=!1;xa=va=Fa=Aa=ha=ja=aa=X=null}}};let y={},E={},M=null,q=!1,H=null,J=null,K=null,S=null,P=null,U=null,V=null,W=!1,da=null,ka=null,ya=null,pa=null,Ia=null;const wa=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let na=!1;c=0;c=a.getParameter(a.VERSION);-1!==c.indexOf("WebGL")?(c=parseFloat(/^WebGL (\d)/.exec(c)[1]),na=1<=c):-1!==c.indexOf("OpenGL ES")&&(c=parseFloat(/^OpenGL ES (\d)/.exec(c)[1]),
na=2<=c);let qa=null,Ca={};c=a.getParameter(a.SCISSOR_BOX);const Qa=a.getParameter(a.VIEWPORT),Ea=(new cb).fromArray(c),A=(new cb).fromArray(Qa),F={};F[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);F[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);r.setClear(0,0,0,1);v.setClear(1);t.setClear(0);e(a.DEPTH_TEST);v.setFunc(3);h(!1);k(1);e(a.CULL_FACE);g(0);const T={[100]:a.FUNC_ADD,[101]:a.FUNC_SUBTRACT,[102]:a.FUNC_REVERSE_SUBTRACT};n?(T[103]=a.MIN,T[104]=a.MAX):(b=b.get("EXT_blend_minmax"),
null!==b&&(T[103]=b.MIN_EXT,T[104]=b.MAX_EXT));const N={[200]:a.ZERO,[201]:a.ONE,[202]:a.SRC_COLOR,[204]:a.SRC_ALPHA,[210]:a.SRC_ALPHA_SATURATE,[208]:a.DST_COLOR,[206]:a.DST_ALPHA,[203]:a.ONE_MINUS_SRC_COLOR,[205]:a.ONE_MINUS_SRC_ALPHA,[209]:a.ONE_MINUS_DST_COLOR,[207]:a.ONE_MINUS_DST_ALPHA};return{buffers:{color:r,depth:v,stencil:t},enable:e,disable:f,bindFramebuffer:function(z,X){return E[z]!==X?(a.bindFramebuffer(z,X),E[z]=X,n&&(z===a.DRAW_FRAMEBUFFER&&(E[a.FRAMEBUFFER]=X),z===a.FRAMEBUFFER&&(E[a.DRAW_FRAMEBUFFER]=
X)),!0):!1},useProgram:function(z){return M!==z?(a.useProgram(z),M=z,!0):!1},setBlending:g,setMaterial:function(z,X){2===z.side?f(a.CULL_FACE):e(a.CULL_FACE);let aa=1===z.side;X&&(aa=!aa);h(aa);1===z.blending&&!1===z.transparent?g(0):g(z.blending,z.blendEquation,z.blendSrc,z.blendDst,z.blendEquationAlpha,z.blendSrcAlpha,z.blendDstAlpha,z.premultipliedAlpha);v.setFunc(z.depthFunc);v.setTest(z.depthTest);v.setMask(z.depthWrite);r.setMask(z.colorWrite);X=z.stencilWrite;t.setTest(X);X&&(t.setMask(z.stencilWriteMask),
t.setFunc(z.stencilFunc,z.stencilRef,z.stencilFuncMask),t.setOp(z.stencilFail,z.stencilZFail,z.stencilZPass));l(z.polygonOffset,z.polygonOffsetFactor,z.polygonOffsetUnits);!0===z.alphaToCoverage?e(a.SAMPLE_ALPHA_TO_COVERAGE):f(a.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:h,setCullFace:k,setLineWidth:function(z){z!==ya&&(na&&a.lineWidth(z),ya=z)},setPolygonOffset:l,setScissorTest:function(z){z?e(a.SCISSOR_TEST):f(a.SCISSOR_TEST)},activeTexture:m,bindTexture:function(z,X){null===qa&&m();let aa=Ca[qa];
void 0===aa&&(aa={type:void 0,texture:void 0},Ca[qa]=aa);if(aa.type!==z||aa.texture!==X)a.bindTexture(z,X||F[z]),aa.type=z,aa.texture=X},unbindTexture:function(){const z=Ca[qa];void 0!==z&&void 0!==z.type&&(a.bindTexture(z.type,null),z.type=void 0,z.texture=void 0)},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},texImage3D:function(){try{a.texImage3D.apply(a,
arguments)}catch(z){console.error("THREE.WebGLState:",z)}},texStorage2D:function(){try{a.texStorage2D.apply(a,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},texStorage3D:function(){try{a.texStorage3D.apply(a,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},texSubImage2D:function(){try{a.texSubImage2D.apply(a,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},texSubImage3D:function(){try{a.texSubImage3D.apply(a,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},
compressedTexSubImage2D:function(){try{a.compressedTexSubImage2D.apply(a,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},scissor:function(z){!1===Ea.equals(z)&&(a.scissor(z.x,z.y,z.z,z.w),Ea.copy(z))},viewport:function(z){!1===A.equals(z)&&(a.viewport(z.x,z.y,z.z,z.w),A.copy(z))},reset:function(){a.disable(a.BLEND);a.disable(a.CULL_FACE);a.disable(a.DEPTH_TEST);a.disable(a.POLYGON_OFFSET_FILL);a.disable(a.SCISSOR_TEST);a.disable(a.STENCIL_TEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.blendEquation(a.FUNC_ADD);
a.blendFunc(a.ONE,a.ZERO);a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO);a.colorMask(!0,!0,!0,!0);a.clearColor(0,0,0,0);a.depthMask(!0);a.depthFunc(a.LESS);a.clearDepth(1);a.stencilMask(4294967295);a.stencilFunc(a.ALWAYS,0,4294967295);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);a.clearStencil(0);a.cullFace(a.BACK);a.frontFace(a.CCW);a.polygonOffset(0,0);a.activeTexture(a.TEXTURE0);a.bindFramebuffer(a.FRAMEBUFFER,null);!0===n&&(a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.bindFramebuffer(a.READ_FRAMEBUFFER,
null));a.useProgram(null);a.lineWidth(1);a.scissor(0,0,a.canvas.width,a.canvas.height);a.viewport(0,0,a.canvas.width,a.canvas.height);y={};qa=null;Ca={};E={};M=null;q=!1;V=U=P=S=K=J=H=null;W=!1;Ia=pa=ya=ka=da=null;Ea.set(0,0,a.canvas.width,a.canvas.height);A.set(0,0,a.canvas.width,a.canvas.height);r.reset();v.reset();t.reset()}}}function tl(a,b,c,d,e,f,g){function h(A,F,T,N){var z=1;if(A.width>N||A.height>N)z=N/Math.max(A.width,A.height);if(1>z||!0===F){if("undefined"!==typeof HTMLImageElement&&A instanceof
HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&A instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&A instanceof ImageBitmap)return N=F?Yb:Math.floor,F=N(z*A.width),z=N(z*A.height),void 0===Ia&&(Ia=wa?new OffscreenCanvas(F,z):bc("canvas")),T=T?wa?new OffscreenCanvas(F,z):bc("canvas"):Ia,T.width=F,T.height=z,T.getContext("2d").drawImage(A,0,0,F,z),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+A.width+"x"+A.height+") to ("+F+"x"+z+")."),T;"data"in A&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+
A.width+"x"+A.height+").")}return A}function k(A){return gd(A.width)&&gd(A.height)}function l(A,F){return A.generateMipmaps&&F&&1003!==A.minFilter&&1006!==A.minFilter}function m(A,F,T,N){if(!1===U)return F;if(null!==A){if(void 0!==a[A])return a[A];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+A+"'")}A=F;F===a.RED&&(T===a.FLOAT&&(A=a.R32F),T===a.HALF_FLOAT&&(A=a.R16F),T===a.UNSIGNED_BYTE&&(A=a.R8));F===a.RGB&&(T===a.FLOAT&&(A=a.RGB32F),T===a.HALF_FLOAT&&(A=
a.RGB16F),T===a.UNSIGNED_BYTE&&(A=a.RGB8));F===a.RGBA&&(T===a.FLOAT&&(A=a.RGBA32F),T===a.HALF_FLOAT&&(A=a.RGBA16F),T===a.UNSIGNED_BYTE&&(A=3001===N?a.SRGB8_ALPHA8:a.RGBA8));A!==a.R16F&&A!==a.R32F&&A!==a.RGBA16F&&A!==a.RGBA32F||b.get("EXT_color_buffer_float");return A}function n(A,F,T){return!0===l(A,T)||A.isFramebufferTexture&&1003!==A.minFilter&&1006!==A.minFilter?Math.log2(Math.max(F.width,F.height))+1:void 0!==A.mipmaps&&0<A.mipmaps.length?A.mipmaps.length:A.isCompressedTexture&&Array.isArray(A.image)?
F.mipmaps.length:1}function r(A){return 1003===A||1004===A||1005===A?a.NEAREST:a.LINEAR}function v(A){A=A.target;A.removeEventListener("dispose",v);{const F=d.get(A);void 0!==F.__webglInit&&(a.deleteTexture(F.__webglTexture),d.remove(A))}A.isVideoTexture&&pa.delete(A);g.memory.textures--}function t(A){A=A.target;A.removeEventListener("dispose",t);{const N=A.texture;var F=d.get(A),T=d.get(N);if(A){void 0!==T.__webglTexture&&(a.deleteTexture(T.__webglTexture),g.memory.textures--);A.depthTexture&&A.depthTexture.dispose();
if(A.isWebGLCubeRenderTarget)for(T=0;6>T;T++)a.deleteFramebuffer(F.__webglFramebuffer[T]),F.__webglDepthbuffer&&a.deleteRenderbuffer(F.__webglDepthbuffer[T]);else a.deleteFramebuffer(F.__webglFramebuffer),F.__webglDepthbuffer&&a.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&a.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer&&a.deleteRenderbuffer(F.__webglColorRenderbuffer),F.__webglDepthRenderbuffer&&a.deleteRenderbuffer(F.__webglDepthRenderbuffer);
if(A.isWebGLMultipleRenderTargets)for(let z=0,X=N.length;z<X;z++)F=d.get(N[z]),F.__webglTexture&&(a.deleteTexture(F.__webglTexture),g.memory.textures--),d.remove(N[z]);d.remove(N);d.remove(A)}}}function y(A,F){const T=d.get(A);if(A.isVideoTexture){var N=g.render.frame;pa.get(A)!==N&&(pa.set(A,N),A.update())}if(0<A.version&&T.__version!==A.version)if(N=A.image,void 0===N)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(!1===N.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");
else{H(T,A,F);return}c.activeTexture(a.TEXTURE0+F);c.bindTexture(a.TEXTURE_2D,T.__webglTexture)}function E(A,F){const T=d.get(A);if(0<A.version&&T.__version!==A.version){if(6===A.image.length){q(T,A);c.activeTexture(a.TEXTURE0+F);c.bindTexture(a.TEXTURE_CUBE_MAP,T.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,A.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,A.unpackAlignment);a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.NONE);
var N=A&&(A.isCompressedTexture||A.image[0].isCompressedTexture),z=A.image[0]&&A.image[0].isDataTexture;F=[];for(var X=0;6>X;X++)F[X]=N||z?z?A.image[X].image:A.image[X]:h(A.image[X],!1,!0,W);var aa=F[0];X=k(aa)||U;var ja=f.convert(A.format),ha=f.convert(A.type),Aa=m(A.internalFormat,ja,ha,A.encoding),Fa=U&&!0!==A.isVideoTexture,va=void 0===T.__version,xa=n(A,aa,X);M(a.TEXTURE_CUBE_MAP,A,X);if(N)for(Fa&&va&&c.texStorage2D(a.TEXTURE_CUBE_MAP,xa,Aa,aa.width,aa.height),z=0;6>z;z++)for(N=F[z].mipmaps,
va=0;va<N.length;va++)xa=N[va],1023!==A.format&&1022!==A.format?null!==ja?Fa?c.compressedTexSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+z,va,0,0,xa.width,xa.height,ja,xa.data):c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+z,va,Aa,xa.width,xa.height,0,xa.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Fa?c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+z,va,0,0,xa.width,xa.height,ja,ha,xa.data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+
z,va,Aa,xa.width,xa.height,0,ja,ha,xa.data);else for(N=A.mipmaps,Fa&&va&&(0<N.length&&xa++,c.texStorage2D(a.TEXTURE_CUBE_MAP,xa,Aa,F[0].width,F[0].height)),va=0;6>va;va++)if(z)for(Fa?c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+va,0,0,0,F[va].width,F[va].height,ja,ha,F[va].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+va,0,Aa,F[va].width,F[va].height,0,ja,ha,F[va].data),xa=0;xa<N.length;xa++)aa=N[xa].image[va].image,Fa?c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+va,xa+1,0,0,aa.width,aa.height,
ja,ha,aa.data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+va,xa+1,Aa,aa.width,aa.height,0,ja,ha,aa.data);else for(Fa?c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+va,0,0,0,ja,ha,F[va]):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+va,0,Aa,ja,ha,F[va]),xa=0;xa<N.length;xa++)aa=N[xa],Fa?c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+va,xa+1,0,0,ja,ha,aa.image[va]):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+va,xa+1,Aa,ja,ha,aa.image[va]);l(A,X)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);T.__version=A.version;
if(A.onUpdate)A.onUpdate(A)}}else c.activeTexture(a.TEXTURE0+F),c.bindTexture(a.TEXTURE_CUBE_MAP,T.__webglTexture)}function M(A,F,T){T?(a.texParameteri(A,a.TEXTURE_WRAP_S,qa[F.wrapS]),a.texParameteri(A,a.TEXTURE_WRAP_T,qa[F.wrapT]),A!==a.TEXTURE_3D&&A!==a.TEXTURE_2D_ARRAY||a.texParameteri(A,a.TEXTURE_WRAP_R,qa[F.wrapR]),a.texParameteri(A,a.TEXTURE_MAG_FILTER,Ca[F.magFilter]),a.texParameteri(A,a.TEXTURE_MIN_FILTER,Ca[F.minFilter])):(a.texParameteri(A,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(A,
a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),A!==a.TEXTURE_3D&&A!==a.TEXTURE_2D_ARRAY||a.texParameteri(A,a.TEXTURE_WRAP_R,a.CLAMP_TO_EDGE),1001===F.wrapS&&1001===F.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),a.texParameteri(A,a.TEXTURE_MAG_FILTER,r(F.magFilter)),a.texParameteri(A,a.TEXTURE_MIN_FILTER,r(F.minFilter)),1003!==F.minFilter&&1006!==F.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));
!0===b.has("EXT_texture_filter_anisotropic")&&(T=b.get("EXT_texture_filter_anisotropic"),1015===F.type&&!1===b.has("OES_texture_float_linear")||!1===U&&1016===F.type&&!1===b.has("OES_texture_half_float_linear")||!(1<F.anisotropy||d.get(F).__currentAnisotropy)||(a.texParameterf(A,T.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,e.getMaxAnisotropy())),d.get(F).__currentAnisotropy=F.anisotropy))}function q(A,F){void 0===A.__webglInit&&(A.__webglInit=!0,F.addEventListener("dispose",v),A.__webglTexture=
a.createTexture(),g.memory.textures++)}function H(A,F,T){let N=a.TEXTURE_2D;F.isDataTexture2DArray&&(N=a.TEXTURE_2D_ARRAY);F.isDataTexture3D&&(N=a.TEXTURE_3D);q(A,F);c.activeTexture(a.TEXTURE0+T);c.bindTexture(N,A.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,F.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,F.unpackAlignment);a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.NONE);T=U?!1:1001!==F.wrapS||1001!==F.wrapT||1003!==F.minFilter&&
1006!==F.minFilter;T=T&&!1===k(F.image);var z=h(F.image,T,!1,da);T=k(z)||U;const X=f.convert(F.format);let aa=f.convert(F.type),ja=m(F.internalFormat,X,aa,F.encoding);M(N,F,T);const ha=F.mipmaps,Aa=U&&!0!==F.isVideoTexture,Fa=void 0===A.__version,va=n(F,z,T);if(F.isDepthTexture)ja=a.DEPTH_COMPONENT,U?ja=1015===F.type?a.DEPTH_COMPONENT32F:1014===F.type?a.DEPTH_COMPONENT24:1020===F.type?a.DEPTH24_STENCIL8:a.DEPTH_COMPONENT16:1015===F.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),
1026===F.format&&ja===a.DEPTH_COMPONENT&&1012!==F.type&&1014!==F.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),F.type=1012,aa=f.convert(F.type)),1027===F.format&&ja===a.DEPTH_COMPONENT&&(ja=a.DEPTH_STENCIL,1020!==F.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),F.type=1020,aa=f.convert(F.type))),Aa&&Fa?c.texStorage2D(a.TEXTURE_2D,1,ja,z.width,z.height):c.texImage2D(a.TEXTURE_2D,
0,ja,z.width,z.height,0,X,aa,null);else if(F.isDataTexture)if(0<ha.length&&T){Aa&&Fa&&c.texStorage2D(a.TEXTURE_2D,va,ja,ha[0].width,ha[0].height);for(let xa=0,ab=ha.length;xa<ab;xa++)z=ha[xa],Aa?c.texSubImage2D(a.TEXTURE_2D,0,0,0,z.width,z.height,X,aa,z.data):c.texImage2D(a.TEXTURE_2D,xa,ja,z.width,z.height,0,X,aa,z.data);F.generateMipmaps=!1}else Aa?(Fa&&c.texStorage2D(a.TEXTURE_2D,va,ja,z.width,z.height),c.texSubImage2D(a.TEXTURE_2D,0,0,0,z.width,z.height,X,aa,z.data)):c.texImage2D(a.TEXTURE_2D,
0,ja,z.width,z.height,0,X,aa,z.data);else if(F.isCompressedTexture){Aa&&Fa&&c.texStorage2D(a.TEXTURE_2D,va,ja,ha[0].width,ha[0].height);for(let xa=0,ab=ha.length;xa<ab;xa++)z=ha[xa],1023!==F.format&&1022!==F.format?null!==X?Aa?c.compressedTexSubImage2D(a.TEXTURE_2D,xa,0,0,z.width,z.height,X,z.data):c.compressedTexImage2D(a.TEXTURE_2D,xa,ja,z.width,z.height,0,z.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Aa?c.texSubImage2D(a.TEXTURE_2D,
xa,0,0,z.width,z.height,X,aa,z.data):c.texImage2D(a.TEXTURE_2D,xa,ja,z.width,z.height,0,X,aa,z.data)}else if(F.isDataTexture2DArray)Aa?(Fa&&c.texStorage3D(a.TEXTURE_2D_ARRAY,va,ja,z.width,z.height,z.depth),c.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,0,z.width,z.height,z.depth,X,aa,z.data)):c.texImage3D(a.TEXTURE_2D_ARRAY,0,ja,z.width,z.height,z.depth,0,X,aa,z.data);else if(F.isDataTexture3D)Aa?(Fa&&c.texStorage3D(a.TEXTURE_3D,va,ja,z.width,z.height,z.depth),c.texSubImage3D(a.TEXTURE_3D,0,0,0,0,z.width,
z.height,z.depth,X,aa,z.data)):c.texImage3D(a.TEXTURE_3D,0,ja,z.width,z.height,z.depth,0,X,aa,z.data);else if(F.isFramebufferTexture)Aa&&Fa?c.texStorage2D(a.TEXTURE_2D,va,ja,z.width,z.height):c.texImage2D(a.TEXTURE_2D,0,ja,z.width,z.height,0,X,aa,null);else if(0<ha.length&&T){Aa&&Fa&&c.texStorage2D(a.TEXTURE_2D,va,ja,ha[0].width,ha[0].height);for(let xa=0,ab=ha.length;xa<ab;xa++)z=ha[xa],Aa?c.texSubImage2D(a.TEXTURE_2D,xa,0,0,X,aa,z):c.texImage2D(a.TEXTURE_2D,xa,ja,X,aa,z);F.generateMipmaps=!1}else Aa?
(Fa&&c.texStorage2D(a.TEXTURE_2D,va,ja,z.width,z.height),c.texSubImage2D(a.TEXTURE_2D,0,0,0,X,aa,z)):c.texImage2D(a.TEXTURE_2D,0,ja,X,aa,z);l(F,T)&&a.generateMipmap(N);A.__version=F.version;if(F.onUpdate)F.onUpdate(F)}function J(A,F,T,N,z){const X=f.convert(T.format),aa=f.convert(T.type),ja=m(T.internalFormat,X,aa,T.encoding);d.get(F).__hasExternalTextures||(z===a.TEXTURE_3D||z===a.TEXTURE_2D_ARRAY?c.texImage3D(z,0,ja,F.width,F.height,F.depth,0,X,aa,null):c.texImage2D(z,0,ja,F.width,F.height,0,X,
aa,null));c.bindFramebuffer(a.FRAMEBUFFER,A);F.useRenderToTexture?ya.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,N,z,d.get(T).__webglTexture,0,P(F)):a.framebufferTexture2D(a.FRAMEBUFFER,N,z,d.get(T).__webglTexture,0);c.bindFramebuffer(a.FRAMEBUFFER,null)}function K(A,F,T){a.bindRenderbuffer(a.RENDERBUFFER,A);if(F.depthBuffer&&!F.stencilBuffer){var N=a.DEPTH_COMPONENT16;T||F.useRenderToTexture?((T=F.depthTexture)&&T.isDepthTexture&&(1015===T.type?N=a.DEPTH_COMPONENT32F:1014===T.type&&(N=a.DEPTH_COMPONENT24)),
T=P(F),F.useRenderToTexture?ya.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,T,N,F.width,F.height):a.renderbufferStorageMultisample(a.RENDERBUFFER,T,N,F.width,F.height)):a.renderbufferStorage(a.RENDERBUFFER,N,F.width,F.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,A)}else if(F.depthBuffer&&F.stencilBuffer)N=P(F),T&&F.useRenderbuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,N,a.DEPTH24_STENCIL8,F.width,F.height):F.useRenderToTexture?ya.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,
N,a.DEPTH24_STENCIL8,F.width,F.height):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,F.width,F.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,A);else{A=!0===F.isWebGLMultipleRenderTargets?F.texture[0]:F.texture;N=f.convert(A.format);const z=f.convert(A.type);A=m(A.internalFormat,N,z,A.encoding);N=P(F);T&&F.useRenderbuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,N,A,F.width,F.height):F.useRenderToTexture?ya.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,
N,A,F.width,F.height):a.renderbufferStorage(a.RENDERBUFFER,A,F.width,F.height)}a.bindRenderbuffer(a.RENDERBUFFER,null)}function S(A){var F=d.get(A),T=!0===A.isWebGLCubeRenderTarget;if(A.depthTexture&&!F.__autoAllocateDepthBuffer){if(T)throw Error("target.depthTexture not supported in Cube render targets");if(A&&A.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");c.bindFramebuffer(a.FRAMEBUFFER,F.__webglFramebuffer);if(!A.depthTexture||!A.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
d.get(A.depthTexture).__webglTexture&&A.depthTexture.image.width===A.width&&A.depthTexture.image.height===A.height||(A.depthTexture.image.width=A.width,A.depthTexture.image.height=A.height,A.depthTexture.needsUpdate=!0);y(A.depthTexture,0);F=d.get(A.depthTexture).__webglTexture;T=P(A);if(1026===A.depthTexture.format)A.useRenderToTexture?ya.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,F,0,T):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,F,
0);else if(1027===A.depthTexture.format)A.useRenderToTexture?ya.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,F,0,T):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,F,0);else throw Error("Unknown depthTexture format");}else if(T)for(F.__webglDepthbuffer=[],T=0;6>T;T++)c.bindFramebuffer(a.FRAMEBUFFER,F.__webglFramebuffer[T]),F.__webglDepthbuffer[T]=a.createRenderbuffer(),K(F.__webglDepthbuffer[T],A,!1);else c.bindFramebuffer(a.FRAMEBUFFER,
F.__webglFramebuffer),F.__webglDepthbuffer=a.createRenderbuffer(),K(F.__webglDepthbuffer,A,!1);c.bindFramebuffer(a.FRAMEBUFFER,null)}function P(A){return U&&(A.useRenderbuffer||A.useRenderToTexture)?Math.min(ka,A.samples):0}const U=e.isWebGL2,V=e.maxTextures,W=e.maxCubemapSize,da=e.maxTextureSize,ka=e.maxSamples,ya=b.has("WEBGL_multisampled_render_to_texture")?b.get("WEBGL_multisampled_render_to_texture"):void 0,pa=new WeakMap;let Ia,wa=!1;try{wa="undefined"!==typeof OffscreenCanvas&&null!==(new OffscreenCanvas(1,
1)).getContext("2d")}catch(A){}let na=0;const qa={[1E3]:a.REPEAT,[1001]:a.CLAMP_TO_EDGE,[1002]:a.MIRRORED_REPEAT},Ca={[1003]:a.NEAREST,[1004]:a.NEAREST_MIPMAP_NEAREST,[1005]:a.NEAREST_MIPMAP_LINEAR,[1006]:a.LINEAR,[1007]:a.LINEAR_MIPMAP_NEAREST,[1008]:a.LINEAR_MIPMAP_LINEAR};let Qa=!1,Ea=!1;this.allocateTextureUnit=function(){const A=na;A>=V&&console.warn("THREE.WebGLTextures: Trying to use "+A+" texture units while this GPU supports only "+V);na+=1;return A};this.resetTextureUnits=function(){na=
0};this.setTexture2D=y;this.setTexture2DArray=function(A,F){const T=d.get(A);0<A.version&&T.__version!==A.version?H(T,A,F):(c.activeTexture(a.TEXTURE0+F),c.bindTexture(a.TEXTURE_2D_ARRAY,T.__webglTexture))};this.setTexture3D=function(A,F){const T=d.get(A);0<A.version&&T.__version!==A.version?H(T,A,F):(c.activeTexture(a.TEXTURE0+F),c.bindTexture(a.TEXTURE_3D,T.__webglTexture))};this.setTextureCube=E;this.rebindTextures=function(A,F,T){const N=d.get(A);void 0!==F&&J(N.__webglFramebuffer,A,A.texture,
a.COLOR_ATTACHMENT0,a.TEXTURE_2D);void 0!==T&&S(A)};this.setupRenderTarget=function(A){var F=A.texture;const T=d.get(A);var N=d.get(F);A.addEventListener("dispose",t);!0!==A.isWebGLMultipleRenderTargets&&(void 0===N.__webglTexture&&(N.__webglTexture=a.createTexture()),N.__version=F.version,g.memory.textures++);var z=!0===A.isWebGLCubeRenderTarget;const X=!0===A.isWebGLMultipleRenderTargets;var aa=F.isDataTexture3D||F.isDataTexture2DArray;const ja=k(A)||U;!U||1022!==F.format||1015!==F.type&&1016!==
F.type||(F.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead."));if(z){T.__webglFramebuffer=[];for(var ha=0;6>ha;ha++)T.__webglFramebuffer[ha]=a.createFramebuffer()}else if(T.__webglFramebuffer=a.createFramebuffer(),X)if(e.drawBuffers){ha=A.texture;for(let Fa=0,va=ha.length;Fa<va;Fa++){var Aa=d.get(ha[Fa]);void 0===Aa.__webglTexture&&(Aa.__webglTexture=a.createTexture(),g.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");
else A.useRenderbuffer&&(U?(T.__webglMultisampledFramebuffer=a.createFramebuffer(),T.__webglColorRenderbuffer=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,T.__webglColorRenderbuffer),ha=f.convert(F.format),Aa=f.convert(F.type),ha=m(F.internalFormat,ha,Aa,F.encoding),Aa=P(A),a.renderbufferStorageMultisample(a.RENDERBUFFER,Aa,ha,A.width,A.height),c.bindFramebuffer(a.FRAMEBUFFER,T.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,T.__webglColorRenderbuffer),
a.bindRenderbuffer(a.RENDERBUFFER,null),A.depthBuffer&&(T.__webglDepthRenderbuffer=a.createRenderbuffer(),K(T.__webglDepthRenderbuffer,A,!0)),c.bindFramebuffer(a.FRAMEBUFFER,null)):console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."));if(z){c.bindTexture(a.TEXTURE_CUBE_MAP,N.__webglTexture);M(a.TEXTURE_CUBE_MAP,F,ja);for(N=0;6>N;N++)J(T.__webglFramebuffer[N],A,F,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+N);l(F,ja)&&a.generateMipmap(a.TEXTURE_CUBE_MAP)}else if(X){F=
A.texture;for(let Fa=0,va=F.length;Fa<va;Fa++)N=F[Fa],aa=d.get(N),c.bindTexture(a.TEXTURE_2D,aa.__webglTexture),M(a.TEXTURE_2D,N,ja),J(T.__webglFramebuffer,A,N,a.COLOR_ATTACHMENT0+Fa,a.TEXTURE_2D),l(N,ja)&&a.generateMipmap(a.TEXTURE_2D)}else z=a.TEXTURE_2D,aa&&(U?z=F.isDataTexture3D?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),c.bindTexture(z,N.__webglTexture),M(z,F,ja),J(T.__webglFramebuffer,A,F,a.COLOR_ATTACHMENT0,
z),l(F,ja)&&a.generateMipmap(z);c.unbindTexture();A.depthBuffer&&S(A)};this.updateRenderTargetMipmap=function(A){const F=k(A)||U,T=!0===A.isWebGLMultipleRenderTargets?A.texture:[A.texture];for(let z=0,X=T.length;z<X;z++){var N=T[z];if(l(N,F)){const aa=A.isWebGLCubeRenderTarget?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D;N=d.get(N).__webglTexture;c.bindTexture(aa,N);a.generateMipmap(aa);c.unbindTexture()}}};this.updateMultisampleRenderTarget=function(A){if(A.useRenderbuffer)if(U){const F=A.width,T=A.height;let N=
a.COLOR_BUFFER_BIT;const z=[a.COLOR_ATTACHMENT0],X=A.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT;A.depthBuffer&&z.push(X);A.ignoreDepthForMultisampleCopy||(A.depthBuffer&&(N|=a.DEPTH_BUFFER_BIT),A.stencilBuffer&&(N|=a.STENCIL_BUFFER_BIT));const aa=d.get(A);c.bindFramebuffer(a.READ_FRAMEBUFFER,aa.__webglMultisampledFramebuffer);c.bindFramebuffer(a.DRAW_FRAMEBUFFER,aa.__webglFramebuffer);A.ignoreDepthForMultisampleCopy&&(a.invalidateFramebuffer(a.READ_FRAMEBUFFER,[X]),a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,
[X]));a.blitFramebuffer(0,0,F,T,0,0,F,T,N,a.NEAREST);a.invalidateFramebuffer(a.READ_FRAMEBUFFER,z);c.bindFramebuffer(a.READ_FRAMEBUFFER,null);c.bindFramebuffer(a.DRAW_FRAMEBUFFER,aa.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")};this.setupDepthRenderbuffer=S;this.setupFrameBufferTexture=J;this.safeSetTexture2D=function(A,F){A&&A.isWebGLRenderTarget&&(!1===Qa&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),
Qa=!0),A=A.texture);y(A,F)};this.safeSetTextureCube=function(A,F){A&&A.isWebGLCubeRenderTarget&&(!1===Ea&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Ea=!0),A=A.texture);E(A,F)}}function Ai(a,b,c){const d=c.isWebGL2;return{convert:function(e){let f;if(1009===e)return a.UNSIGNED_BYTE;if(1017===e)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===e)return a.UNSIGNED_SHORT_5_5_5_1;if(1019===e)return a.UNSIGNED_SHORT_5_6_5;
if(1010===e)return a.BYTE;if(1011===e)return a.SHORT;if(1012===e)return a.UNSIGNED_SHORT;if(1013===e)return a.INT;if(1014===e)return a.UNSIGNED_INT;if(1015===e)return a.FLOAT;if(1016===e){if(d)return a.HALF_FLOAT;f=b.get("OES_texture_half_float");return null!==f?f.HALF_FLOAT_OES:null}if(1021===e)return a.ALPHA;if(1022===e)return a.RGB;if(1023===e)return a.RGBA;if(1024===e)return a.LUMINANCE;if(1025===e)return a.LUMINANCE_ALPHA;if(1026===e)return a.DEPTH_COMPONENT;if(1027===e)return a.DEPTH_STENCIL;
if(1028===e)return a.RED;if(1029===e)return a.RED_INTEGER;if(1030===e)return a.RG;if(1031===e)return a.RG_INTEGER;if(1032===e)return a.RGB_INTEGER;if(1033===e)return a.RGBA_INTEGER;if(33776===e||33777===e||33778===e||33779===e)if(f=b.get("WEBGL_compressed_texture_s3tc"),null!==f){if(33776===e)return f.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return f.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return f.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return f.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;
if(35840===e||35841===e||35842===e||35843===e)if(f=b.get("WEBGL_compressed_texture_pvrtc"),null!==f){if(35840===e)return f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===e)return f=b.get("WEBGL_compressed_texture_etc1"),null!==f?f.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===e||37496===e)if(f=b.get("WEBGL_compressed_texture_etc"),
null!==f){if(37492===e)return f.COMPRESSED_RGB8_ETC2;if(37496===e)return f.COMPRESSED_RGBA8_ETC2_EAC}if(37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e)return f=b.get("WEBGL_compressed_texture_astc"),null!==f?e:null;if(36492===e)return f=b.get("EXT_texture_compression_bptc"),
null!==f?e:null;if(1020===e){if(d)return a.UNSIGNED_INT_24_8;f=b.get("WEBGL_depth_texture");return null!==f?f.UNSIGNED_INT_24_8_WEBGL:null}}}}function ul(a){function b(d,e){d.opacity.value=e.opacity;e.color&&d.diffuse.value.copy(e.color);e.emissive&&d.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity);e.map&&(d.map.value=e.map);e.alphaMap&&(d.alphaMap.value=e.alphaMap);e.specularMap&&(d.specularMap.value=e.specularMap);0<e.alphaTest&&(d.alphaTest.value=e.alphaTest);const f=a.get(e).envMap;
f&&(d.envMap.value=f,d.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,d.reflectivity.value=e.reflectivity,d.ior.value=e.ior,d.refractionRatio.value=e.refractionRatio);e.lightMap&&(d.lightMap.value=e.lightMap,d.lightMapIntensity.value=e.lightMapIntensity);e.aoMap&&(d.aoMap.value=e.aoMap,d.aoMapIntensity.value=e.aoMapIntensity);let g;e.map?g=e.map:e.specularMap?g=e.specularMap:e.displacementMap?g=e.displacementMap:e.normalMap?g=e.normalMap:e.bumpMap?g=e.bumpMap:e.roughnessMap?g=
e.roughnessMap:e.metalnessMap?g=e.metalnessMap:e.alphaMap?g=e.alphaMap:e.emissiveMap?g=e.emissiveMap:e.clearcoatMap?g=e.clearcoatMap:e.clearcoatNormalMap?g=e.clearcoatNormalMap:e.clearcoatRoughnessMap?g=e.clearcoatRoughnessMap:e.specularIntensityMap?g=e.specularIntensityMap:e.specularColorMap?g=e.specularColorMap:e.transmissionMap?g=e.transmissionMap:e.thicknessMap?g=e.thicknessMap:e.sheenColorMap?g=e.sheenColorMap:e.sheenRoughnessMap&&(g=e.sheenRoughnessMap);void 0!==g&&(g.isWebGLRenderTarget&&(g=
g.texture),!0===g.matrixAutoUpdate&&g.updateMatrix(),d.uvTransform.value.copy(g.matrix));let h;e.aoMap?h=e.aoMap:e.lightMap&&(h=e.lightMap);void 0!==h&&(h.isWebGLRenderTarget&&(h=h.texture),!0===h.matrixAutoUpdate&&h.updateMatrix(),d.uv2Transform.value.copy(h.matrix))}function c(d,e){d.roughness.value=e.roughness;d.metalness.value=e.metalness;e.roughnessMap&&(d.roughnessMap.value=e.roughnessMap);e.metalnessMap&&(d.metalnessMap.value=e.metalnessMap);e.emissiveMap&&(d.emissiveMap.value=e.emissiveMap);
e.bumpMap&&(d.bumpMap.value=e.bumpMap,d.bumpScale.value=e.bumpScale,1===e.side&&(d.bumpScale.value*=-1));e.normalMap&&(d.normalMap.value=e.normalMap,d.normalScale.value.copy(e.normalScale),1===e.side&&d.normalScale.value.negate());e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias);a.get(e).envMap&&(d.envMapIntensity.value=e.envMapIntensity)}return{refreshFogUniforms:function(d,e){d.fogColor.value.copy(e.color);
e.isFog?(d.fogNear.value=e.near,d.fogFar.value=e.far):e.isFogExp2&&(d.fogDensity.value=e.density)},refreshMaterialUniforms:function(d,e,f,g,h){if(e.isMeshBasicMaterial)b(d,e);else if(e.isMeshLambertMaterial)b(d,e),e.emissiveMap&&(d.emissiveMap.value=e.emissiveMap);else if(e.isMeshToonMaterial)b(d,e),e.gradientMap&&(d.gradientMap.value=e.gradientMap),e.emissiveMap&&(d.emissiveMap.value=e.emissiveMap),e.bumpMap&&(d.bumpMap.value=e.bumpMap,d.bumpScale.value=e.bumpScale,1===e.side&&(d.bumpScale.value*=
-1)),e.normalMap&&(d.normalMap.value=e.normalMap,d.normalScale.value.copy(e.normalScale),1===e.side&&d.normalScale.value.negate()),e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias);else if(e.isMeshPhongMaterial)b(d,e),d.specular.value.copy(e.specular),d.shininess.value=Math.max(e.shininess,1E-4),e.emissiveMap&&(d.emissiveMap.value=e.emissiveMap),e.bumpMap&&(d.bumpMap.value=e.bumpMap,d.bumpScale.value=
e.bumpScale,1===e.side&&(d.bumpScale.value*=-1)),e.normalMap&&(d.normalMap.value=e.normalMap,d.normalScale.value.copy(e.normalScale),1===e.side&&d.normalScale.value.negate()),e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias);else if(e.isMeshStandardMaterial)b(d,e),e.isMeshPhysicalMaterial?(c(d,e),d.ior.value=e.ior,0<e.sheen&&(d.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),d.sheenRoughness.value=
e.sheenRoughness,e.sheenColorMap&&(d.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(d.sheenRoughnessMap.value=e.sheenRoughnessMap)),0<e.clearcoat&&(d.clearcoat.value=e.clearcoat,d.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(d.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(d.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(d.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),d.clearcoatNormalMap.value=e.clearcoatNormalMap,
1===e.side&&d.clearcoatNormalScale.value.negate())),0<e.transmission&&(d.transmission.value=e.transmission,d.transmissionSamplerMap.value=h.texture,d.transmissionSamplerSize.value.set(h.width,h.height),e.transmissionMap&&(d.transmissionMap.value=e.transmissionMap),d.thickness.value=e.thickness,e.thicknessMap&&(d.thicknessMap.value=e.thicknessMap),d.attenuationDistance.value=e.attenuationDistance,d.attenuationColor.value.copy(e.attenuationColor)),d.specularIntensity.value=e.specularIntensity,d.specularColor.value.copy(e.specularColor),
e.specularIntensityMap&&(d.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(d.specularColorMap.value=e.specularColorMap)):c(d,e);else if(e.isMeshMatcapMaterial)b(d,e),e.matcap&&(d.matcap.value=e.matcap),e.bumpMap&&(d.bumpMap.value=e.bumpMap,d.bumpScale.value=e.bumpScale,1===e.side&&(d.bumpScale.value*=-1)),e.normalMap&&(d.normalMap.value=e.normalMap,d.normalScale.value.copy(e.normalScale),1===e.side&&d.normalScale.value.negate()),e.displacementMap&&(d.displacementMap.value=
e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias);else if(e.isMeshDepthMaterial)b(d,e),e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias);else if(e.isMeshDistanceMaterial)b(d,e),e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias),d.referencePosition.value.copy(e.referencePosition),
d.nearDistance.value=e.nearDistance,d.farDistance.value=e.farDistance;else if(e.isMeshNormalMaterial)b(d,e),e.bumpMap&&(d.bumpMap.value=e.bumpMap,d.bumpScale.value=e.bumpScale,1===e.side&&(d.bumpScale.value*=-1)),e.normalMap&&(d.normalMap.value=e.normalMap,d.normalScale.value.copy(e.normalScale),1===e.side&&d.normalScale.value.negate()),e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias);else if(e.isLineBasicMaterial)d.diffuse.value.copy(e.color),
d.opacity.value=e.opacity,e.isLineDashedMaterial&&(d.dashSize.value=e.dashSize,d.totalSize.value=e.dashSize+e.gapSize,d.scale.value=e.scale);else if(e.isPointsMaterial){d.diffuse.value.copy(e.color);d.opacity.value=e.opacity;d.size.value=e.size*f;d.scale.value=.5*g;e.map&&(d.map.value=e.map);e.alphaMap&&(d.alphaMap.value=e.alphaMap);0<e.alphaTest&&(d.alphaTest.value=e.alphaTest);let k;e.map?k=e.map:e.alphaMap&&(k=e.alphaMap);void 0!==k&&(!0===k.matrixAutoUpdate&&k.updateMatrix(),d.uvTransform.value.copy(k.matrix))}else if(e.isSpriteMaterial){d.diffuse.value.copy(e.color);
d.opacity.value=e.opacity;d.rotation.value=e.rotation;e.map&&(d.map.value=e.map);e.alphaMap&&(d.alphaMap.value=e.alphaMap);0<e.alphaTest&&(d.alphaTest.value=e.alphaTest);let k;e.map?k=e.map:e.alphaMap&&(k=e.alphaMap);void 0!==k&&(!0===k.matrixAutoUpdate&&k.updateMatrix(),d.uvTransform.value.copy(k.matrix))}else e.isShadowMaterial?(d.color.value.copy(e.color),d.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}}}function vl(){const a=bc("canvas");a.style.display="block";return a}
function db(a){function b(B,Y){for(let ea=0;ea<B.length;ea++){const ba=t.getContext(B[ea],Y);if(null!==ba)return ba}return null}function c(){vb=new mb(ca);ob=new Kd(ca,vb,a);vb.init(ob);gc=new Ai(ca,vb,ob);gb=new sl(ca,vb,ob);ha[0]=ca.BACK;$b=new xc(ca);lb=new jl;Fb=new tl(ca,vb,gb,lb,ob,gc,$b);Pd=new Ld(ka);we=new Za(ka);xe=new jd(ca,ob);md=new pe(ca,vb,xe,ob);Jg=new Vc(ca,xe,$b,md);Qd=new ec(ca,Jg,xe,$b);Bi=new Eb(ca,ob,Fb);zc=new qe(lb);Ac=new hl(ka,Pd,we,vb,ob,md,zc);Kg=new ul(lb);Af=new ll;Bf=
new rl(vb,ob);Xc=new Hd(ka,Pd,gb,Qd,J);hc=new zi(ka,Qd,ob);Ci=new Jd(ca,vb,$b,ob);Di=new Nb(ca,vb,$b,ob);$b.programs=Ac.programs;ka.capabilities=ob;ka.extensions=vb;ka.properties=lb;ka.renderLists=Af;ka.shadowMap=hc;ka.state=gb;ka.info=$b}function d(B){B.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");ya=!0}function e(){console.log("THREE.WebGLRenderer: Context Restored.");ya=!1;const B=$b.autoReset,Y=hc.enabled,ea=hc.autoUpdate,ba=hc.needsUpdate,ma=hc.type;c();$b.autoReset=B;hc.enabled=
Y;hc.autoUpdate=ea;hc.needsUpdate=ba;hc.type=ma}function f(B){B=B.target;B.removeEventListener("dispose",f);g(B);lb.remove(B)}function g(B){const Y=lb.get(B).programs;void 0!==Y&&(Y.forEach(function(ea){Ac.releaseProgram(ea)}),B.isShaderMaterial&&Ac.releaseShaderCache(B))}function h(){nd.stop()}function k(){nd.start()}function l(B,Y,ea,ba){if(!1!==B.visible){if(B.layers.test(Y.layers))if(B.isGroup)ea=B.renderOrder;else if(B.isLOD)!0===B.autoUpdate&&B.update(Y);else if(B.isLight)V.pushLight(B),B.castShadow&&
V.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||Aa.intersectsSprite(B)){ba&&Ob.setFromMatrixPosition(B.matrixWorld).applyMatrix4(ab);var ma=Qd.update(B),Ba=B.material;Ba.visible&&U.push(B,ma,Ba,ea,Ob.z,null)}}else if(B.isMesh||B.isLine||B.isPoints)if(B.isSkinnedMesh&&B.skeleton.frame!==$b.render.frame&&(B.skeleton.update(),B.skeleton.frame=$b.render.frame),!B.frustumCulled||Aa.intersectsObject(B))if(ba&&Ob.setFromMatrixPosition(B.matrixWorld).applyMatrix4(ab),ma=Qd.update(B),Ba=B.material,
Array.isArray(Ba)){const Ka=ma.groups;for(let ta=0,Ga=Ka.length;ta<Ga;ta++){const hb=Ka[ta],jb=Ba[hb.materialIndex];jb&&jb.visible&&U.push(B,ma,jb,ea,Ob.z,hb)}}else Ba.visible&&U.push(B,ma,Ba,ea,Ob.z,null);B=B.children;for(let Ka=0,ta=B.length;Ka<ta;Ka++)l(B[Ka],Y,ea,ba)}}function m(B,Y,ea,ba){const ma=B.opaque,Ba=B.transmissive;B=B.transparent;V.setupLightsView(ea);if(0<Ba.length){null===xa&&(xa=new (!0===H&&!0===ob.isWebGL2?Cf:Rb)(1024,1024,{generateMipmaps:!0,type:null!==gc.convert(1016)?1016:
1009,minFilter:1008,magFilter:1003,wrapS:1001,wrapT:1001,useRenderToTexture:vb.has("WEBGL_multisampled_render_to_texture")}));const Ka=ka.getRenderTarget();ka.setRenderTarget(xa);ka.clear();const ta=ka.toneMapping;ka.toneMapping=0;n(ma,Y,ea);ka.toneMapping=ta;Fb.updateMultisampleRenderTarget(xa);Fb.updateRenderTargetMipmap(xa);ka.setRenderTarget(Ka)}ba&&gb.viewport(Ca.copy(ba));0<ma.length&&n(ma,Y,ea);0<Ba.length&&n(Ba,Y,ea);0<B.length&&n(B,Y,ea)}function n(B,Y,ea){const ba=!0===Y.isScene?Y.overrideMaterial:
null;for(let jb=0,Jb=B.length;jb<Jb;jb++){var ma=B[jb],Ba=ma.object,Ka=ma.geometry,ta=null===ba?ma.material:ba,Ga=ma.group;if(Ba.layers.test(ea.layers)){ma=Y;var hb=ea;Ba.onBeforeRender(ka,ma,hb,Ka,ta,Ga);Ba.modelViewMatrix.multiplyMatrices(hb.matrixWorldInverse,Ba.matrixWorld);Ba.normalMatrix.getNormalMatrix(Ba.modelViewMatrix);ta.onBeforeRender(ka,ma,hb,Ka,Ba,Ga);!0===ta.transparent&&2===ta.side?(ta.side=1,ta.needsUpdate=!0,ka.renderBufferDirect(hb,ma,Ka,ta,Ba,Ga),ta.side=0,ta.needsUpdate=!0,ka.renderBufferDirect(hb,
ma,Ka,ta,Ba,Ga),ta.side=2):ka.renderBufferDirect(hb,ma,Ka,ta,Ba,Ga);Ba.onAfterRender(ka,ma,hb,Ka,ta,Ga)}}}function r(B,Y,ea){!0!==Y.isScene&&(Y=fc);const ba=lb.get(B),ma=V.state.lights,Ba=ma.state.version,Ka=Ac.getParameters(B,ma.state,V.state.shadowsArray,Y,ea),ta=Ac.getProgramCacheKey(Ka);let Ga=ba.programs;ba.environment=B.isMeshStandardMaterial?Y.environment:null;ba.fog=Y.fog;ba.envMap=(B.isMeshStandardMaterial?we:Pd).get(B.envMap||ba.environment);void 0===Ga&&(B.addEventListener("dispose",f),
Ga=new Map,ba.programs=Ga);Y=Ga.get(ta);if(void 0!==Y){if(ba.currentProgram===Y&&ba.lightsStateVersion===Ba)return v(B,Ka),Y}else Ka.uniforms=Ac.getUniforms(B),B.onBuild(ea,Ka,ka),B.onBeforeCompile(Ka,ka),Y=Ac.acquireProgram(Ka,ta),Ga.set(ta,Y),ba.uniforms=Ka.uniforms;ea=ba.uniforms;if(!B.isShaderMaterial&&!B.isRawShaderMaterial||!0===B.clipping)ea.clippingPlanes=zc.uniform;v(B,Ka);ba.needsLights=B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||
B.isShaderMaterial&&!0===B.lights;ba.lightsStateVersion=Ba;ba.needsLights&&(ea.ambientLightColor.value=ma.state.ambient,ea.lightProbe.value=ma.state.probe,ea.directionalLights.value=ma.state.directional,ea.directionalLightShadows.value=ma.state.directionalShadow,ea.spotLights.value=ma.state.spot,ea.spotLightShadows.value=ma.state.spotShadow,ea.rectAreaLights.value=ma.state.rectArea,ea.ltc_1.value=ma.state.rectAreaLTC1,ea.ltc_2.value=ma.state.rectAreaLTC2,ea.pointLights.value=ma.state.point,ea.pointLightShadows.value=
ma.state.pointShadow,ea.hemisphereLights.value=ma.state.hemi,ea.directionalShadowMap.value=ma.state.directionalShadowMap,ea.directionalShadowMatrix.value=ma.state.directionalShadowMatrix,ea.spotShadowMap.value=ma.state.spotShadowMap,ea.spotShadowMatrix.value=ma.state.spotShadowMatrix,ea.pointShadowMap.value=ma.state.pointShadowMap,ea.pointShadowMatrix.value=ma.state.pointShadowMatrix);B=Y.getUniforms();B=Wc.seqWithValue(B.seq,ea);ba.currentProgram=Y;ba.uniformsList=B;return Y}function v(B,Y){B=lb.get(B);
B.outputEncoding=Y.outputEncoding;B.instancing=Y.instancing;B.skinning=Y.skinning;B.morphTargets=Y.morphTargets;B.morphNormals=Y.morphNormals;B.morphTargetsCount=Y.morphTargetsCount;B.numClippingPlanes=Y.numClippingPlanes;B.numIntersection=Y.numClipIntersection;B.vertexAlphas=Y.vertexAlphas;B.vertexTangents=Y.vertexTangents;B.toneMapping=Y.toneMapping}a=void 0===a?{}:a;const t=void 0!==a.canvas?a.canvas:vl();var y=void 0!==a.context?a.context:null,E=void 0!==a.alpha?a.alpha:!1;const M=void 0!==a.depth?
a.depth:!0,q=void 0!==a.stencil?a.stencil:!0,H=void 0!==a.antialias?a.antialias:!1,J=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,K=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,S=void 0!==a.powerPreference?a.powerPreference:"default",P=void 0!==a.failIfMajorPerformanceCaveat?a.failIfMajorPerformanceCaveat:!1;let U=null,V=null;const W=[],da=[];this.domElement=t;this.debug={checkShaderErrors:!0};this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=
!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.outputEncoding=3E3;this.physicallyCorrectLights=!1;this.toneMapping=0;this.toneMappingExposure=1;const ka=this;let ya=!1,pa=0,Ia=0,wa=null,na=-1,qa=null;const Ca=new cb,Qa=new cb;let Ea=null,A=t.width,F=t.height,T=1,N=null,z=null;const X=new cb(0,0,A,F),aa=new cb(0,0,A,F);let ja=!1;const ha=[],Aa=new ve;let Fa=!1,va=!1,xa=null;const ab=new Da,Ob=new C,fc={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ca=
y;try{y={alpha:E,depth:M,stencil:q,antialias:H,premultipliedAlpha:J,preserveDrawingBuffer:K,powerPreference:S,failIfMajorPerformanceCaveat:P};"setAttribute"in t&&t.setAttribute("data-engine","three.js r136");t.addEventListener("webglcontextlost",d,!1);t.addEventListener("webglcontextrestored",e,!1);if(null===ca&&(E=["webgl2","webgl","experimental-webgl"],!0===ka.isWebGL1Renderer&&E.shift(),ca=b(E,y),null===ca)){if(b(E))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.");
}void 0===ca.getShaderPrecisionFormat&&(ca.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B;}let vb,ob,gb,$b,lb,Fb,Pd,we,xe,Jg,Qd,Ac,Kg,Af,Bf,zc,hc,Xc,Bi,Ci,Di,gc,md;c();const Ub=new wl(ka,ca);this.xr=Ub;this.getContext=function(){return ca};this.getContextAttributes=function(){return ca.getContextAttributes()};this.forceContextLoss=function(){const B=vb.get("WEBGL_lose_context");B&&B.loseContext()};this.forceContextRestore=
function(){const B=vb.get("WEBGL_lose_context");B&&B.restoreContext()};this.getPixelRatio=function(){return T};this.setPixelRatio=function(B){void 0!==B&&(T=B,this.setSize(A,F,!1))};this.getSize=function(B){return B.set(A,F)};this.setSize=function(B,Y,ea){Ub.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(A=B,F=Y,t.width=Math.floor(B*T),t.height=Math.floor(Y*T),!1!==ea&&(t.style.width=B+"px",t.style.height=Y+"px"),this.setViewport(0,0,B,Y))};this.getDrawingBufferSize=
function(B){return B.set(A*T,F*T).floor()};this.setDrawingBufferSize=function(B,Y,ea){A=B;F=Y;T=ea;t.width=Math.floor(B*ea);t.height=Math.floor(Y*ea);this.setViewport(0,0,B,Y)};this.getCurrentViewport=function(B){return B.copy(Ca)};this.getViewport=function(B){return B.copy(X)};this.setViewport=function(B,Y,ea,ba){B.isVector4?X.set(B.x,B.y,B.z,B.w):X.set(B,Y,ea,ba);gb.viewport(Ca.copy(X).multiplyScalar(T).floor())};this.getScissor=function(B){return B.copy(aa)};this.setScissor=function(B,Y,ea,ba){B.isVector4?
aa.set(B.x,B.y,B.z,B.w):aa.set(B,Y,ea,ba);gb.scissor(Qa.copy(aa).multiplyScalar(T).floor())};this.getScissorTest=function(){return ja};this.setScissorTest=function(B){gb.setScissorTest(ja=B)};this.setOpaqueSort=function(B){N=B};this.setTransparentSort=function(B){z=B};this.getClearColor=function(B){return B.copy(Xc.getClearColor())};this.setClearColor=function(){Xc.setClearColor.apply(Xc,arguments)};this.getClearAlpha=function(){return Xc.getClearAlpha()};this.setClearAlpha=function(){Xc.setClearAlpha.apply(Xc,
arguments)};this.clear=function(B,Y,ea){let ba=0;if(void 0===B||B)ba|=ca.COLOR_BUFFER_BIT;if(void 0===Y||Y)ba|=ca.DEPTH_BUFFER_BIT;if(void 0===ea||ea)ba|=ca.STENCIL_BUFFER_BIT;ca.clear(ba)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.dispose=function(){t.removeEventListener("webglcontextlost",d,!1);t.removeEventListener("webglcontextrestored",e,!1);Af.dispose();Bf.dispose();lb.dispose();Pd.dispose();
we.dispose();Qd.dispose();md.dispose();Ac.dispose();Ub.dispose();Ub.removeEventListener("sessionstart",h);Ub.removeEventListener("sessionend",k);xa&&(xa.dispose(),xa=null);nd.stop()};this.renderBufferDirect=function(B,Y,ea,ba,ma,Ba){null===Y&&(Y=fc);var Ka=ma.isMesh&&0>ma.matrixWorld.determinant();var ta=Y;!0!==ta.isScene&&(ta=fc);Fb.resetTextureUnits();Y=ta.fog;var Ga=ba.isMeshStandardMaterial?ta.environment:null,hb=null===wa?ka.outputEncoding:wa.texture.encoding,jb=(ba.isMeshStandardMaterial?we:
Pd).get(ba.envMap||Ga),Jb=!0===ba.vertexColors&&!!ea.attributes.color&&4===ea.attributes.color.itemSize,Bc=!!ba.normalMap&&!!ea.attributes.tangent;const Lg=!!ea.morphAttributes.position,Mg=!!ea.morphAttributes.normal,Ng=ea.morphAttributes.position?ea.morphAttributes.position.length:0,od=ba.toneMapped?ka.toneMapping:0;Ga=lb.get(ba);const xl=V.state.lights;!0!==Fa||!0!==va&&B===qa||zc.setState(ba,B,B===qa&&ba.id===na);var Xa=!1;ba.version===Ga.__version?Ga.needsLights&&Ga.lightsStateVersion!==xl.state.version?
Xa=!0:Ga.outputEncoding!==hb?Xa=!0:ma.isInstancedMesh&&!1===Ga.instancing?Xa=!0:ma.isInstancedMesh||!0!==Ga.instancing?ma.isSkinnedMesh&&!1===Ga.skinning?Xa=!0:ma.isSkinnedMesh||!0!==Ga.skinning?Ga.envMap!==jb?Xa=!0:ba.fog&&Ga.fog!==Y?Xa=!0:void 0===Ga.numClippingPlanes||Ga.numClippingPlanes===zc.numPlanes&&Ga.numIntersection===zc.numIntersection?Ga.vertexAlphas!==Jb?Xa=!0:Ga.vertexTangents!==Bc?Xa=!0:Ga.morphTargets!==Lg?Xa=!0:Ga.morphNormals!==Mg?Xa=!0:Ga.toneMapping!==od?Xa=!0:!0===ob.isWebGL2&&
Ga.morphTargetsCount!==Ng&&(Xa=!0):Xa=!0:Xa=!0:Xa=!0:(Xa=!0,Ga.__version=ba.version);hb=Ga.currentProgram;!0===Xa&&(hb=r(ba,ta,ma));Jb=jb=Bc=!1;ta=hb.getUniforms();Xa=Ga.uniforms;gb.useProgram(hb.program)&&(Jb=jb=Bc=!0);ba.id!==na&&(na=ba.id,jb=!0);if(Bc||qa!==B){ta.setValue(ca,"projectionMatrix",B.projectionMatrix);ob.logarithmicDepthBuffer&&ta.setValue(ca,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2));qa!==B&&(qa=B,Jb=jb=!0);if(ba.isShaderMaterial||ba.isMeshPhongMaterial||ba.isMeshToonMaterial||
ba.isMeshStandardMaterial||ba.envMap)Bc=ta.map.cameraPosition,void 0!==Bc&&Bc.setValue(ca,Ob.setFromMatrixPosition(B.matrixWorld));(ba.isMeshPhongMaterial||ba.isMeshToonMaterial||ba.isMeshLambertMaterial||ba.isMeshBasicMaterial||ba.isMeshStandardMaterial||ba.isShaderMaterial)&&ta.setValue(ca,"isOrthographic",!0===B.isOrthographicCamera);(ba.isMeshPhongMaterial||ba.isMeshToonMaterial||ba.isMeshLambertMaterial||ba.isMeshBasicMaterial||ba.isMeshStandardMaterial||ba.isShaderMaterial||ba.isShadowMaterial||
ma.isSkinnedMesh)&&ta.setValue(ca,"viewMatrix",B.matrixWorldInverse)}ma.isSkinnedMesh&&(ta.setOptional(ca,ma,"bindMatrix"),ta.setOptional(ca,ma,"bindMatrixInverse"),B=ma.skeleton)&&(ob.floatVertexTextures?(null===B.boneTexture&&B.computeBoneTexture(),ta.setValue(ca,"boneTexture",B.boneTexture,Fb),ta.setValue(ca,"boneTextureSize",B.boneTextureSize)):ta.setOptional(ca,B,"boneMatrices"));!ea||void 0===ea.morphAttributes.position&&void 0===ea.morphAttributes.normal||Bi.update(ma,ea,ba,hb);if(jb||Ga.receiveShadow!==
ma.receiveShadow)Ga.receiveShadow=ma.receiveShadow,ta.setValue(ca,"receiveShadow",ma.receiveShadow);jb&&(ta.setValue(ca,"toneMappingExposure",ka.toneMappingExposure),Ga.needsLights&&(B=Jb,Xa.ambientLightColor.needsUpdate=B,Xa.lightProbe.needsUpdate=B,Xa.directionalLights.needsUpdate=B,Xa.directionalLightShadows.needsUpdate=B,Xa.pointLights.needsUpdate=B,Xa.pointLightShadows.needsUpdate=B,Xa.spotLights.needsUpdate=B,Xa.spotLightShadows.needsUpdate=B,Xa.rectAreaLights.needsUpdate=B,Xa.hemisphereLights.needsUpdate=
B),Y&&ba.fog&&Kg.refreshFogUniforms(Xa,Y),Kg.refreshMaterialUniforms(Xa,ba,T,F,xa),Wc.upload(ca,Ga.uniformsList,Xa,Fb));ba.isShaderMaterial&&!0===ba.uniformsNeedUpdate&&(Wc.upload(ca,Ga.uniformsList,Xa,Fb),ba.uniformsNeedUpdate=!1);ba.isSpriteMaterial&&ta.setValue(ca,"center",ma.center);ta.setValue(ca,"modelViewMatrix",ma.modelViewMatrix);ta.setValue(ca,"normalMatrix",ma.normalMatrix);ta.setValue(ca,"modelMatrix",ma.matrixWorld);ta=hb;gb.setMaterial(ba,Ka);Y=ea.index;B=ea.attributes.position;if(null===
Y){if(void 0===B||0===B.count)return}else if(0===Y.count)return;Ga=1;!0===ba.wireframe&&(Y=Jg.getWireframeAttribute(ea),Ga=2);md.setup(ma,ba,ta,ea,Y);Ka=Ci;null!==Y&&(ta=xe.get(Y),Ka=Di,Ka.setIndex(ta));hb=ea.drawRange.start*Ga;Xa=null!==Ba?Ba.start*Ga:0;ta=Math.max(hb,Xa);Ba=Math.max(0,Math.min(null!==Y?Y.count:B.count,hb+ea.drawRange.count*Ga,Xa+(null!==Ba?Ba.count*Ga:Infinity))-1-ta+1);0!==Ba&&(ma.isMesh?!0===ba.wireframe?(gb.setLineWidth(ba.wireframeLinewidth*(null===wa?T:1)),Ka.setMode(ca.LINES)):
Ka.setMode(ca.TRIANGLES):ma.isLine?(ba=ba.linewidth,void 0===ba&&(ba=1),gb.setLineWidth(ba*(null===wa?T:1)),ma.isLineSegments?Ka.setMode(ca.LINES):ma.isLineLoop?Ka.setMode(ca.LINE_LOOP):Ka.setMode(ca.LINE_STRIP)):ma.isPoints?Ka.setMode(ca.POINTS):ma.isSprite&&Ka.setMode(ca.TRIANGLES),ma.isInstancedMesh?Ka.renderInstances(ta,Ba,ma.count):ea.isInstancedBufferGeometry?Ka.renderInstances(ta,Ba,Math.min(ea.instanceCount,ea._maxInstanceCount)):Ka.render(ta,Ba))};this.compile=function(B,Y){V=Bf.get(B);V.init();
da.push(V);B.traverseVisible(function(ea){ea.isLight&&ea.layers.test(Y.layers)&&(V.pushLight(ea),ea.castShadow&&V.pushShadow(ea))});V.setupLights(ka.physicallyCorrectLights);B.traverse(function(ea){const ba=ea.material;if(ba)if(Array.isArray(ba))for(let ma=0;ma<ba.length;ma++)r(ba[ma],B,ea);else r(ba,B,ea)});da.pop();V=null};let Og=null;const nd=new Sc;nd.setAnimationLoop(function(B){Og&&Og(B)});"undefined"!==typeof window&&nd.setContext(window);this.setAnimationLoop=function(B){Og=B;Ub.setAnimationLoop(B);
null===B?nd.stop():nd.start()};Ub.addEventListener("sessionstart",h);Ub.addEventListener("sessionend",k);this.render=function(B,Y){if(void 0!==Y&&!0!==Y.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!0!==ya){!0===B.autoUpdate&&B.updateMatrixWorld();null===Y.parent&&Y.updateMatrixWorld();!0===Ub.enabled&&!0===Ub.isPresenting&&(!0===Ub.cameraAutoUpdate&&Ub.updateCamera(Y),Y=Ub.getCamera());if(!0===B.isScene)B.onBeforeRender(ka,B,Y,wa);V=Bf.get(B,
da.length);V.init();da.push(V);ab.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse);Aa.setFromProjectionMatrix(ab);va=this.localClippingEnabled;Fa=zc.init(this.clippingPlanes,va,Y);U=Af.get(B,W.length);U.init();W.push(U);l(B,Y,0,ka.sortObjects);U.finish();!0===ka.sortObjects&&U.sort(N,z);!0===Fa&&zc.beginShadows();hc.render(V.state.shadowsArray,B,Y);!0===Fa&&zc.endShadows();!0===this.info.autoReset&&this.info.reset();Xc.render(U,B);V.setupLights(ka.physicallyCorrectLights);if(Y.isArrayCamera){const ea=
Y.cameras;for(let ba=0,ma=ea.length;ba<ma;ba++){const Ba=ea[ba];m(U,B,Ba,Ba.viewport)}}else m(U,B,Y);null!==wa&&(Fb.updateMultisampleRenderTarget(wa),Fb.updateRenderTargetMipmap(wa));if(!0===B.isScene)B.onAfterRender(ka,B,Y);gb.buffers.depth.setTest(!0);gb.buffers.depth.setMask(!0);gb.buffers.color.setMask(!0);gb.setPolygonOffset(!1);md.resetDefaultState();na=-1;qa=null;da.pop();V=0<da.length?da[da.length-1]:null;W.pop();U=0<W.length?W[W.length-1]:null}};this.getActiveCubeFace=function(){return pa};
this.getActiveMipmapLevel=function(){return Ia};this.getRenderTarget=function(){return wa};this.setRenderTargetTextures=function(B,Y,ea){lb.get(B.texture).__webglTexture=Y;lb.get(B.depthTexture).__webglTexture=ea;Y=lb.get(B);Y.__hasExternalTextures=!0;Y.__hasExternalTextures&&(Y.__autoAllocateDepthBuffer=void 0===ea,!Y.__autoAllocateDepthBuffer&&B.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),B.useRenderToTexture=!1,B.useRenderbuffer=
!0))};this.setRenderTargetFramebuffer=function(B,Y){B=lb.get(B);B.__webglFramebuffer=Y;B.__useDefaultFramebuffer=void 0===Y};this.setRenderTarget=function(B,Y,ea){Y=void 0===Y?0:Y;ea=void 0===ea?0:ea;wa=B;pa=Y;Ia=ea;var ba=!0;if(B){var ma=lb.get(B);void 0!==ma.__useDefaultFramebuffer?(gb.bindFramebuffer(ca.FRAMEBUFFER,null),ba=!1):void 0===ma.__webglFramebuffer?Fb.setupRenderTarget(B):ma.__hasExternalTextures&&Fb.rebindTextures(B,lb.get(B.texture).__webglTexture,lb.get(B.depthTexture).__webglTexture)}var Ba=
null;let Ka=ma=!1;if(B){Ba=B.texture;if(Ba.isDataTexture3D||Ba.isDataTexture2DArray)Ka=!0;Ba=lb.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(Ba=Ba[Y],ma=!0):Ba=B.useRenderbuffer?lb.get(B).__webglMultisampledFramebuffer:Ba;Ca.copy(B.viewport);Qa.copy(B.scissor);Ea=B.scissorTest}else Ca.copy(X).multiplyScalar(T).floor(),Qa.copy(aa).multiplyScalar(T).floor(),Ea=ja;if(gb.bindFramebuffer(ca.FRAMEBUFFER,Ba)&&ob.drawBuffers&&ba){ba=!1;if(B)if(B.isWebGLMultipleRenderTargets){if(Ba=B.texture,ha.length!==
Ba.length||ha[0]!==ca.COLOR_ATTACHMENT0){for(let ta=0,Ga=Ba.length;ta<Ga;ta++)ha[ta]=ca.COLOR_ATTACHMENT0+ta;ha.length=Ba.length;ba=!0}}else{if(1!==ha.length||ha[0]!==ca.COLOR_ATTACHMENT0)ha[0]=ca.COLOR_ATTACHMENT0,ha.length=1,ba=!0}else if(1!==ha.length||ha[0]!==ca.BACK)ha[0]=ca.BACK,ha.length=1,ba=!0;ba&&(ob.isWebGL2?ca.drawBuffers(ha):vb.get("WEBGL_draw_buffers").drawBuffersWEBGL(ha))}gb.viewport(Ca);gb.scissor(Qa);gb.setScissorTest(Ea);ma?(B=lb.get(B.texture),ca.framebufferTexture2D(ca.FRAMEBUFFER,
ca.COLOR_ATTACHMENT0,ca.TEXTURE_CUBE_MAP_POSITIVE_X+Y,B.__webglTexture,ea)):Ka&&(B=lb.get(B.texture),ca.framebufferTextureLayer(ca.FRAMEBUFFER,ca.COLOR_ATTACHMENT0,B.__webglTexture,ea||0,Y||0));na=-1};this.readRenderTargetPixels=function(B,Y,ea,ba,ma,Ba,Ka){if(B&&B.isWebGLRenderTarget){var ta=lb.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget&&void 0!==Ka&&(ta=ta[Ka]);if(ta){gb.bindFramebuffer(ca.FRAMEBUFFER,ta);try{const hb=B.texture,jb=hb.format,Jb=hb.type;if(1023!==jb&&gc.convert(jb)!==ca.getParameter(ca.IMPLEMENTATION_COLOR_READ_FORMAT))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
else{var Ga=1016===Jb&&(vb.has("EXT_color_buffer_half_float")||ob.isWebGL2&&vb.has("EXT_color_buffer_float"));1009===Jb||gc.convert(Jb)===ca.getParameter(ca.IMPLEMENTATION_COLOR_READ_TYPE)||1015===Jb&&(ob.isWebGL2||vb.has("OES_texture_float")||vb.has("WEBGL_color_buffer_float"))||Ga?ca.checkFramebufferStatus(ca.FRAMEBUFFER)===ca.FRAMEBUFFER_COMPLETE?0<=Y&&Y<=B.width-ba&&0<=ea&&ea<=B.height-ma&&ca.readPixels(Y,ea,ba,ma,gc.convert(jb),gc.convert(Jb),Ba):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}}finally{B=null!==wa?lb.get(wa).__webglFramebuffer:null,gb.bindFramebuffer(ca.FRAMEBUFFER,B)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};this.copyFramebufferToTexture=function(B,Y,ea){ea=void 0===ea?0:ea;if(!0!==Y.isFramebufferTexture)console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");
else{var ba=Math.pow(2,-ea),ma=Math.floor(Y.image.width*ba);ba=Math.floor(Y.image.height*ba);Fb.setTexture2D(Y,0);ca.copyTexSubImage2D(ca.TEXTURE_2D,ea,0,0,B.x,B.y,ma,ba);gb.unbindTexture()}};this.copyTextureToTexture=function(B,Y,ea,ba){ba=void 0===ba?0:ba;const ma=Y.image.width,Ba=Y.image.height,Ka=gc.convert(ea.format),ta=gc.convert(ea.type);Fb.setTexture2D(ea,0);ca.pixelStorei(ca.UNPACK_FLIP_Y_WEBGL,ea.flipY);ca.pixelStorei(ca.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ea.premultiplyAlpha);ca.pixelStorei(ca.UNPACK_ALIGNMENT,
ea.unpackAlignment);Y.isDataTexture?ca.texSubImage2D(ca.TEXTURE_2D,ba,B.x,B.y,ma,Ba,Ka,ta,Y.image.data):Y.isCompressedTexture?ca.compressedTexSubImage2D(ca.TEXTURE_2D,ba,B.x,B.y,Y.mipmaps[0].width,Y.mipmaps[0].height,Ka,Y.mipmaps[0].data):ca.texSubImage2D(ca.TEXTURE_2D,ba,B.x,B.y,Ka,ta,Y.image);0===ba&&ea.generateMipmaps&&ca.generateMipmap(ca.TEXTURE_2D);gb.unbindTexture()};this.copyTextureToTexture3D=function(B,Y,ea,ba,ma){ma=void 0===ma?0:ma;if(ka.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");
else{var Ba=B.max.x-B.min.x+1,Ka=B.max.y-B.min.y+1,ta=B.max.z-B.min.z+1,Ga=gc.convert(ba.format),hb=gc.convert(ba.type);if(ba.isDataTexture3D){Fb.setTexture3D(ba,0);var jb=ca.TEXTURE_3D}else if(ba.isDataTexture2DArray)Fb.setTexture2DArray(ba,0),jb=ca.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ca.pixelStorei(ca.UNPACK_FLIP_Y_WEBGL,ba.flipY);ca.pixelStorei(ca.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
ba.premultiplyAlpha);ca.pixelStorei(ca.UNPACK_ALIGNMENT,ba.unpackAlignment);var Jb=ca.getParameter(ca.UNPACK_ROW_LENGTH),Bc=ca.getParameter(ca.UNPACK_IMAGE_HEIGHT),Lg=ca.getParameter(ca.UNPACK_SKIP_PIXELS),Mg=ca.getParameter(ca.UNPACK_SKIP_ROWS),Ng=ca.getParameter(ca.UNPACK_SKIP_IMAGES),od=ea.isCompressedTexture?ea.mipmaps[0]:ea.image;ca.pixelStorei(ca.UNPACK_ROW_LENGTH,od.width);ca.pixelStorei(ca.UNPACK_IMAGE_HEIGHT,od.height);ca.pixelStorei(ca.UNPACK_SKIP_PIXELS,B.min.x);ca.pixelStorei(ca.UNPACK_SKIP_ROWS,
B.min.y);ca.pixelStorei(ca.UNPACK_SKIP_IMAGES,B.min.z);ea.isDataTexture||ea.isDataTexture3D?ca.texSubImage3D(jb,ma,Y.x,Y.y,Y.z,Ba,Ka,ta,Ga,hb,od.data):ea.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ca.compressedTexSubImage3D(jb,ma,Y.x,Y.y,Y.z,Ba,Ka,ta,Ga,od.data)):ca.texSubImage3D(jb,ma,Y.x,Y.y,Y.z,Ba,Ka,ta,Ga,hb,od);ca.pixelStorei(ca.UNPACK_ROW_LENGTH,Jb);ca.pixelStorei(ca.UNPACK_IMAGE_HEIGHT,Bc);ca.pixelStorei(ca.UNPACK_SKIP_PIXELS,
Lg);ca.pixelStorei(ca.UNPACK_SKIP_ROWS,Mg);ca.pixelStorei(ca.UNPACK_SKIP_IMAGES,Ng);0===ma&&ba.generateMipmaps&&ca.generateMipmap(jb);gb.unbindTexture()}};this.initTexture=function(B){Fb.setTexture2D(B,0);gb.unbindTexture()};this.resetState=function(){Ia=pa=0;wa=null;gb.reset();md.reset()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Df(a,b,c,d,e,f){Rd.subVectors(a,c).addScalar(.5).multiply(d);void 0!==e?(ye.x=f*Rd.x-
e*Rd.y,ye.y=e*Rd.x+f*Rd.y):ye.copy(Rd);a.copy(b);a.x+=ye.x;a.y+=ye.y;a.applyMatrix4(Ei)}function Fi(a,b,c,d,e,f,g){const h=Pg.distanceSqToPoint(a);h<c&&(c=new C,Pg.closestPointToPoint(a,c),c.applyMatrix4(d),a=e.ray.origin.distanceTo(c),a<e.near||a>e.far||f.push({distance:a,distanceToRay:Math.sqrt(h),point:c,index:b,face:null,object:g}))}function Qg(){let a=0,b=0,c=0,d=0;return{initCatmullRom:function(e,f,g,h,k){e=k*(g-e);h=k*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,
f,g,h,k,l,m){e=((f-e)/k-(g-e)/(k+l)+(g-f)/l)*l;h=((g-f)/l-(h-f)/(l+m)+(h-g)/m)*l;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){const f=e*e;return a+b*e+c*f+d*f*e}}}function Gi(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);const f=a*a;return(2*c-2*d+b+e)*a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function ze(a,b,c,d){const e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function Ae(a,b,c,d,e){const f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}function Hi(a,b,c,d,e){let f,g=0;for(let h=b,k=c-d;h<c;h+=d)g+=(a[k]-
a[h])*(a[h+1]+a[k+1]),k=h;if(e===0<g)for(e=b;e<c;e+=d)f=Ii(e,a[e],a[e+1],f);else for(e=c-d;e>=b;e-=d)f=Ii(e,a[e],a[e+1],f);f&&Ef(f,f.next)&&(Be(f),f=f.next);return f}function Yc(a,b){if(!a)return a;b||(b=a);let c;do if(c=!1,a.steiner||!Ef(a,a.next)&&0!==nb(a.prev,a,a.next))a=a.next;else{Be(a);a=b=a.prev;if(a===a.next)break;c=!0}while(c||a!==b);return b}function Ce(a,b,c,d,e,f,g){if(a){if(!g&&f){var h=a,k=h;do null===k.z&&(k.z=Rg(k.x,k.y,d,e,f)),k.prevZ=k.prev,k=k.nextZ=k.next;while(k!==h);k.prevZ.nextZ=
null;k.prevZ=null;h=k;var l,m,n;let y;var r=1;do{k=h;var v=h=null;for(m=0;k;){m++;var t=k;for(l=n=0;l<r&&(n++,t=t.nextZ,t);l++);for(y=r;0<n||0<y&&t;)0!==n&&(0===y||!t||k.z<=t.z)?(l=k,k=k.nextZ,n--):(l=t,t=t.nextZ,y--),v?v.nextZ=l:h=l,l.prevZ=v,v=l;k=t}v.nextZ=null;r*=2}while(1<m)}for(h=a;a.prev!==a.next;){k=a.prev;t=a.next;if(f)v=yl(a,d,e,f);else a:if(v=a,m=v.prev,n=v,r=v.next,0<=nb(m,n,r))v=!1;else{for(l=v.next.next;l!==v.prev;){if(Sd(m.x,m.y,n.x,n.y,r.x,r.y,l.x,l.y)&&0<=nb(l.prev,l,l.next)){v=!1;
break a}l=l.next}v=!0}if(v)b.push(k.i/c),b.push(a.i/c),b.push(t.i/c),Be(a),h=a=t.next;else if(a=t,a===h){if(!g)Ce(Yc(a),b,c,d,e,f,1);else if(1===g){a=Yc(a);g=b;h=c;k=a;do t=k.prev,v=k.next.next,!Ef(t,v)&&Ji(t,k,k.next,v)&&De(t,v)&&De(v,t)&&(g.push(t.i/h),g.push(k.i/h),g.push(v.i/h),Be(k),Be(k.next),k=a=v),k=k.next;while(k!==a);a=Yc(k);Ce(a,b,c,d,e,f,2)}else if(2===g)a:{g=a;do{for(h=g.next.next;h!==g.prev;){if(k=g.i!==h.i){k=g;t=h;if(v=k.next.i!==t.i&&k.prev.i!==t.i){b:{v=k;do{if(v.i!==k.i&&v.next.i!==
k.i&&v.i!==t.i&&v.next.i!==t.i&&Ji(v,v.next,k,t)){v=!0;break b}v=v.next}while(v!==k);v=!1}v=!v}if(v){if(v=De(k,t)&&De(t,k)){v=k;m=!1;n=(k.x+t.x)/2;r=(k.y+t.y)/2;do v.y>r!==v.next.y>r&&v.next.y!==v.y&&n<(v.next.x-v.x)*(r-v.y)/(v.next.y-v.y)+v.x&&(m=!m),v=v.next;while(v!==k);v=m}v=v&&(nb(k.prev,k,t.prev)||nb(k,t.prev,t))||Ef(k,t)&&0<nb(k.prev,k,k.next)&&0<nb(t.prev,t,t.next)}k=v}if(k){a=Ki(g,h);g=Yc(g,g.next);a=Yc(a,a.next);Ce(g,b,c,d,e,f);Ce(a,b,c,d,e,f);break a}h=h.next}g=g.next}while(g!==a)}break}}}}
function yl(a,b,c,d){const e=a.prev,f=a.next;if(0<=nb(e,a,f))return!1;const g=e.x>a.x?e.x>f.x?e.x:f.x:a.x>f.x?a.x:f.x,h=e.y>a.y?e.y>f.y?e.y:f.y:a.y>f.y?a.y:f.y,k=Rg(e.x<a.x?e.x<f.x?e.x:f.x:a.x<f.x?a.x:f.x,e.y<a.y?e.y<f.y?e.y:f.y:a.y<f.y?a.y:f.y,b,c,d);b=Rg(g,h,b,c,d);c=a.prevZ;for(d=a.nextZ;c&&c.z>=k&&d&&d.z<=b;){if(c!==a.prev&&c!==a.next&&Sd(e.x,e.y,a.x,a.y,f.x,f.y,c.x,c.y)&&0<=nb(c.prev,c,c.next))return!1;c=c.prevZ;if(d!==a.prev&&d!==a.next&&Sd(e.x,e.y,a.x,a.y,f.x,f.y,d.x,d.y)&&0<=nb(d.prev,d,d.next))return!1;
d=d.nextZ}for(;c&&c.z>=k;){if(c!==a.prev&&c!==a.next&&Sd(e.x,e.y,a.x,a.y,f.x,f.y,c.x,c.y)&&0<=nb(c.prev,c,c.next))return!1;c=c.prevZ}for(;d&&d.z<=b;){if(d!==a.prev&&d!==a.next&&Sd(e.x,e.y,a.x,a.y,f.x,f.y,d.x,d.y)&&0<=nb(d.prev,d,d.next))return!1;d=d.nextZ}return!0}function zl(a,b){return a.x-b.x}function Al(a,b){let c=b;const d=a.x,e=a.y;let f=-Infinity,g;do{if(e<=c.y&&e>=c.next.y&&c.next.y!==c.y){var h=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(h<=d&&h>f){f=h;if(h===d){if(e===c.y)return c;if(e===
c.next.y)return c.next}g=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!g)return null;if(d===f)return g;b=g;h=g.x;const k=g.y;let l=Infinity,m;c=g;do{if(d>=c.x&&c.x>=h&&d!==c.x&&Sd(e<k?d:f,e,h,k,e<k?f:d,e,c.x,c.y)){m=Math.abs(e-c.y)/(d-c.x);var n;if((n=De(c,a))&&!(n=m<l)&&(n=m===l)&&!(n=c.x>g.x)&&(n=c.x===g.x)){n=g;var r=c;n=0>nb(n.prev,n,r.prev)&&0>nb(r.next,n,n.next)}n&&(g=c,l=m)}c=c.next}while(c!==b);return g}function Rg(a,b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=(a|a<<8)&16711935;a=(a|a<<
4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function Sd(a,b,c,d,e,f,g,h){return 0<=(e-g)*(b-h)-(a-g)*(f-h)&&0<=(a-g)*(d-h)-(c-g)*(b-h)&&0<=(c-g)*(f-h)-(e-g)*(d-h)}function nb(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function Ef(a,b){return a.x===b.x&&a.y===b.y}function Ji(a,b,c,d){const e=Ff(nb(a,b,c)),f=Ff(nb(a,b,d)),g=Ff(nb(c,d,a)),h=Ff(nb(c,d,b));return e!==f&&g!==h||0===e&&Gf(a,c,
b)||0===f&&Gf(a,d,b)||0===g&&Gf(c,a,d)||0===h&&Gf(c,b,d)?!0:!1}function Gf(a,b,c){return b.x<=Math.max(a.x,c.x)&&b.x>=Math.min(a.x,c.x)&&b.y<=Math.max(a.y,c.y)&&b.y>=Math.min(a.y,c.y)}function Ff(a){return 0<a?1:0>a?-1:0}function De(a,b){return 0>nb(a.prev,a,a.next)?0<=nb(a,b,a.next)&&0<=nb(a,a.prev,b):0>nb(a,b,a.prev)||0>nb(a,a.next,b)}function Ki(a,b){const c=new Sg(a.i,a.x,a.y),d=new Sg(b.i,b.x,b.y),e=a.next,f=b.prev;a.next=b;b.prev=a;c.next=e;e.prev=c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}
function Ii(a,b,c,d){a=new Sg(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function Be(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Sg(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function Li(a){const b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function Mi(a,b){for(let c=0;c<b.length;c++)a.push(b[c].x),a.push(b[c].y)}function Ni(a,
b,c){const d=`${a.x},${a.y},${a.z}-${b.x},${b.y},${b.z}`;a=`${b.x},${b.y},${b.z}-${a.x},${a.y},${a.z}`;if(!0===c.has(d)||!0===c.has(a))return!1;c.add(d,a);return!0}function Bl(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return Ee;case "vector":case "vector2":case "vector3":case "vector4":return Fe;case "color":return Tg;case "quaternion":return Td;case "bool":case "boolean":return pd;case "string":return qd}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+
a);}function Oi(){return("undefined"===typeof performance?Date:performance).now()}function Pi(a,b){return a.distance-b.distance}function Ug(a,b,c,d){a.layers.test(b.layers)&&a.raycast(b,c);if(!0===d){a=a.children;for(let e=0,f=a.length;e<f;e++)Ug(a[e],b,c,!0)}}function Qi(a){const b=[];a&&a.isBone&&b.push(a);for(let c=0;c<a.children.length;c++)b.push.apply(b,Qi(a.children[c]));return b}function rb(a,b,c,d,e,f,g){Hf.set(e,f,g).unproject(d);a=b[a];if(void 0!==a){c=c.getAttribute("position");for(let h=
0,k=a.length;h<k;h++)c.setXYZ(a[h],Hf.x,Hf.y,Hf.z)}}class Zc{addEventListener(a,b){void 0===this._listeners&&(this._listeners={});const c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)}hasEventListener(a,b){if(void 0===this._listeners)return!1;const c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)}removeEventListener(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))}dispatchEvent(a){if(void 0!==this._listeners){var b=
this._listeners[a.type];if(void 0!==b){a.target=this;b=b.slice(0);for(let c=0,d=b.length;c<d;c++)b[c].call(this,a);a.target=null}}}}const Db=[];for(let a=0;256>a;a++)Db[a]=(16>a?"0":"")+a.toString(16);let If=1234567;const rd=Math.PI/180,Ge=180/Math.PI;var Ri=Object.freeze({__proto__:null,DEG2RAD:rd,RAD2DEG:Ge,generateUUID:Ta,clamp:Ua,euclideanModulo:Mb,mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},inverseLerp:function(a,b,c){return a!==b?(c-a)/(b-a):0},lerp:lc,damp:function(a,b,c,d){return lc(a,
b,1-Math.exp(-c*d))},pingpong:function(a,b){b=void 0===b?1:b;return b-Math.abs(Mb(a,2*b)-b)},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},seededRandom:function(a){void 0!==
a&&(If=a%2147483647);If=16807*If%2147483647;return(If-1)/2147483646},degToRad:function(a){return a*rd},radToDeg:function(a){return a*Ge},isPowerOfTwo:gd,ceilPowerOfTwo:mc,floorPowerOfTwo:Yb,setQuaternionFromProperEuler:function(a,b,c,d,e){var f=Math.cos;const g=Math.sin,h=f(c/2);c=g(c/2);const k=f((b+d)/2),l=g((b+d)/2),m=f((b-d)/2),n=g((b-d)/2);f=f((d-b)/2);b=g((d-b)/2);switch(e){case "XYX":a.set(h*l,c*m,c*n,h*k);break;case "YZY":a.set(c*n,h*l,c*m,h*k);break;case "ZXZ":a.set(c*m,c*n,h*l,h*k);break;
case "XZX":a.set(h*l,c*b,c*f,h*k);break;case "YXY":a.set(c*f,h*l,c*b,h*k);break;case "ZYZ":a.set(c*b,c*f,h*l,h*k);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+e)}}});class la{constructor(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,b){this.x=a;this.y=b;return this}setScalar(a){this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=
a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,this.y)}copy(a){this.x=a.x;this.y=a.y;return this}add(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,
b);this.x+=a.x;this.y+=a.y;return this}addScalar(a){this.x+=a;this.y+=a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;return this}sub(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this}subScalar(a){this.x-=a;this.y-=a;return this}subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this}multiply(a){this.x*=
a.x;this.y*=a.y;return this}multiplyScalar(a){this.x*=a;this.y*=a;return this}divide(a){this.x/=a.x;this.y/=a.y;return this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const b=this.x,c=this.y;a=a.elements;this.x=a[0]*b+a[3]*c+a[6];this.y=a[1]*b+a[4]*c+a[7];return this}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this}clamp(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,
Math.min(b.y,this.y));return this}clampScalar(a,b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));return this}clampLength(a,b){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):
Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this}negate(){this.x=-this.x;this.y=-this.y;return this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const b=
this.x-a.x;a=this.y-a.y;return b*b+a*a}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this}lerpVectors(a,b,c){this.x=a.x+(b.x-a.x)*c;this.y=a.y+(b.y-a.y)*c;return this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,b){b=void 0===b?0:b;this.x=a[b];this.y=a[b+1];return this}toArray(a,b){a=void 0===a?[]:a;b=void 0===b?0:b;a[b]=this.x;a[b+1]=this.y;return a}fromBufferAttribute(a,
b,c){void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);return this}rotateAround(a,b){const c=Math.cos(b);b=Math.sin(b);const d=this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}random(){this.x=Math.random();this.y=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y}}la.prototype.isVector2=!0;class xb{constructor(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(a,
b,c,d,e,f,g,h,k){const l=this.elements;l[0]=a;l[1]=d;l[2]=g;l[3]=b;l[4]=e;l[5]=h;l[6]=c;l[7]=f;l[8]=k;return this}identity(){this.set(1,0,0,0,1,0,0,0,1);return this}copy(a){const b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this}extractBasis(a,b,c){a.setFromMatrix3Column(this,0);b.setFromMatrix3Column(this,1);c.setFromMatrix3Column(this,2);return this}setFromMatrix4(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],
a[2],a[6],a[10]);return this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];const e=c[3],f=c[6],g=c[1],h=c[4],k=c[7],l=c[2],m=c[5];c=c[8];const n=d[0],r=d[3],v=d[6],t=d[1],y=d[4],E=d[7],M=d[2],q=d[5];d=d[8];b[0]=a*n+e*t+f*M;b[3]=a*r+e*y+f*q;b[6]=a*v+e*E+f*d;b[1]=g*n+h*t+k*M;b[4]=g*r+h*y+k*q;b[7]=g*v+h*E+k*d;b[2]=l*n+m*t+c*M;b[5]=l*r+m*y+c*q;b[8]=l*v+m*E+c*d;return this}multiplyScalar(a){const b=
this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this}determinant(){var a=this.elements;const b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7];a=a[8];return b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*h}invert(){const a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],l=a[8],m=l*f-g*k,n=g*h-l*e,r=k*e-f*h;var v=b*m+c*n+d*r;if(0===v)return this.set(0,0,0,0,0,0,0,0,0);v=1/v;a[0]=m*v;a[1]=(d*k-l*c)*v;a[2]=(g*c-d*f)*v;a[3]=n*v;a[4]=(l*b-d*h)*
v;a[5]=(d*e-g*b)*v;a[6]=r*v;a[7]=(c*h-k*b)*v;a[8]=(f*b-c*e)*v;return this}transpose(){let a;const b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this}setUvTransform(a,b,c,d,e,f,g){const h=Math.cos(e);e=Math.sin(e);this.set(c*h,c*e,-c*(h*
f+e*g)+f+a,-d*e,d*h,-d*(-e*f+h*g)+g+b,0,0,1);return this}scale(a,b){const c=this.elements;c[0]*=a;c[3]*=a;c[6]*=a;c[1]*=b;c[4]*=b;c[7]*=b;return this}rotate(a){const b=Math.cos(a);a=Math.sin(a);const c=this.elements,d=c[0],e=c[3],f=c[6],g=c[1],h=c[4],k=c[7];c[0]=b*d+a*g;c[3]=b*e+a*h;c[6]=b*f+a*k;c[1]=-a*d+b*g;c[4]=-a*e+b*h;c[7]=-a*f+b*k;return this}translate(a,b){const c=this.elements;c[0]+=a*c[2];c[3]+=a*c[5];c[6]+=a*c[8];c[1]+=b*c[2];c[4]+=b*c[5];c[7]+=b*c[8];return this}equals(a){const b=this.elements;
a=a.elements;for(let c=0;9>c;c++)if(b[c]!==a[c])return!1;return!0}fromArray(a,b){b=void 0===b?0:b;for(let c=0;9>c;c++)this.elements[c]=a[c+b];return this}toArray(a,b){a=void 0===a?[]:a;b=void 0===b?0:b;const c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}clone(){return(new this.constructor).fromArray(this.elements)}}xb.prototype.isMatrix3=!0;const Ud={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,
Uint32Array,Float32Array,Float64Array};let Vd;class hd{static getDataURL(a){if(/^data:/i.test(a.src)||"undefined"==typeof HTMLCanvasElement)return a.src;if(a instanceof HTMLCanvasElement)var b=a;else void 0===Vd&&(Vd=bc("canvas")),Vd.width=a.width,Vd.height=a.height,b=Vd.getContext("2d"),a instanceof ImageData?b.putImageData(a,0,0):b.drawImage(a,0,0,a.width,a.height),b=Vd;return 2048<b.width||2048<b.height?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",
a),b.toDataURL("image/jpeg",.6)):b.toDataURL("image/png")}}let Cl=0;class yb extends Zc{constructor(a,b,c,d,e,f,g,h,k,l){a=void 0===a?yb.DEFAULT_IMAGE:a;b=void 0===b?yb.DEFAULT_MAPPING:b;c=void 0===c?1001:c;d=void 0===d?1001:d;e=void 0===e?1006:e;f=void 0===f?1008:f;g=void 0===g?1023:g;h=void 0===h?1009:h;k=void 0===k?1:k;l=void 0===l?3E3:l;super();Object.defineProperty(this,"id",{value:Cl++});this.uuid=Ta();this.name="";this.image=a;this.mipmaps=[];this.mapping=b;this.wrapS=c;this.wrapT=d;this.magFilter=
e;this.minFilter=f;this.anisotropy=k;this.format=g;this.internalFormat=null;this.type=h;this.offset=new la(0,0);this.repeat=new la(1,1);this.center=new la(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new xb;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=l;this.userData={};this.version=0;this.onUpdate=null;this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,
this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(a){this.name=a.name;this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.internalFormat=a.internalFormat;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=
a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;this.userData=JSON.parse(JSON.stringify(a.userData));return this}toJSON(a){const b=void 0===a||"string"===typeof a;if(!b&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];const c={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,
repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const d=this.image;void 0===d.uuid&&(d.uuid=Ta());if(!b&&void 0===a.images[d.uuid]){let e;
if(Array.isArray(d)){e=[];for(let f=0,g=d.length;f<g;f++)d[f].isDataTexture?e.push(sc(d[f].image)):e.push(sc(d[f]))}else e=sc(d);a.images[d.uuid]={uuid:d.uuid,url:e}}c.image=d.uuid}"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData);b||(a.textures[this.uuid]=c);return c}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(300!==this.mapping)return a;a.applyMatrix3(this.matrix);if(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;
case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y);return a}set needsUpdate(a){!0===a&&this.version++}}yb.DEFAULT_IMAGE=void 0;yb.DEFAULT_MAPPING=300;yb.prototype.isTexture=!0;class cb{constructor(a,b,c,d){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=
void 0===c?0:c;this.w=void 0===d?1:d}get width(){return this.z}set width(a){this.z=a}get height(){return this.w}set height(a){this.w=a}set(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this}setScalar(a){this.w=this.z=this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=a;return this}setZ(a){this.z=a;return this}setW(a){this.w=a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+
a);}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this}add(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=
a.z;this.w+=a.w;return this}addScalar(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this}sub(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this}subScalar(a){this.x-=
a;this.y-=a;this.z-=a;this.w-=a;return this}subVectors(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this}multiply(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;this.w*=a.w;return this}multiplyScalar(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this}applyMatrix4(a){const b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this}divideScalar(a){return this.multiplyScalar(1/
a)}setAxisAngleFromQuaternion(a){this.w=2*Math.acos(a.w);const b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this}setAxisAngleFromRotationMatrix(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8];const e=a[1];var f=a[5],g=a[9];var h=a[2];var k=a[6];var l=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-k)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+h)&&.1>Math.abs(g+k)&&.1>Math.abs(b+f+l-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+
1)/2;f=(f+1)/2;l=(l+1)/2;c=(c+e)/4;d=(d+h)/4;g=(g+k)/4;b>f&&b>l?.01>b?(k=0,c=h=.707106781):(k=Math.sqrt(b),h=c/k,c=d/k):f>l?.01>f?(k=.707106781,h=0,c=.707106781):(h=Math.sqrt(f),k=c/h,c=g/h):.01>l?(h=k=.707106781,c=0):(c=Math.sqrt(l),k=d/c,h=g/c);this.set(k,h,c,a);return this}a=Math.sqrt((k-g)*(k-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(k-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;this.w=Math.acos((b+f+l-1)/2);return this}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=
Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this}clamp(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this}clampScalar(a,b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));this.z=Math.max(a,Math.min(b,
this.z));this.w=Math.max(a,Math.min(b,this.w));return this}clampLength(a,b){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=
Math.round(this.w);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this}negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this}lerpVectors(a,b,c){this.x=a.x+(b.x-a.x)*c;this.y=a.y+(b.y-a.y)*c;this.z=a.z+(b.z-a.z)*c;this.w=a.w+(b.w-a.w)*c;return this}equals(a){return a.x===
this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w}fromArray(a,b){b=void 0===b?0:b;this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this}toArray(a,b){a=void 0===a?[]:a;b=void 0===b?0:b;a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a}fromBufferAttribute(a,b,c){void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}random(){this.x=Math.random();this.y=Math.random();
this.z=Math.random();this.w=Math.random();return this}*[Symbol.iterator](){yield this.x;yield this.y;yield this.z;yield this.w}}cb.prototype.isVector4=!0;class Rb extends Zc{constructor(a,b,c){c=void 0===c?{}:c;super();this.width=a;this.height=b;this.depth=1;this.scissor=new cb(0,0,a,b);this.scissorTest=!1;this.viewport=new cb(0,0,a,b);this.texture=new yb(void 0,c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.texture.isRenderTargetTexture=!0;this.texture.image=
{width:a,height:b,depth:1};this.texture.generateMipmaps=void 0!==c.generateMipmaps?c.generateMipmaps:!1;this.texture.internalFormat=void 0!==c.internalFormat?c.internalFormat:null;this.texture.minFilter=void 0!==c.minFilter?c.minFilter:1006;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!1;this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}setTexture(a){a.image={width:this.width,height:this.height,depth:this.depth};this.texture=
a}setSize(a,b,c){c=void 0===c?1:c;if(this.width!==a||this.height!==b||this.depth!==c)this.width=a,this.height=b,this.depth=c,this.texture.image.width=a,this.texture.image.height=b,this.texture.image.depth=c,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)}clone(){return(new this.constructor).copy(this)}copy(a){this.width=a.width;this.height=a.height;this.depth=a.depth;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.texture.image=Object.assign({},this.texture.image);
this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this}dispose(){this.dispatchEvent({type:"dispose"})}}Rb.prototype.isWebGLRenderTarget=!0;class Si extends Rb{constructor(a,b,c){super(a,b);a=this.texture;this.texture=[];for(b=0;b<c;b++)this.texture[b]=a.clone()}setSize(a,b,c){c=void 0===c?1:c;if(this.width!==a||this.height!==b||this.depth!==c){this.width=a;this.height=b;this.depth=c;for(let d=0,e=this.texture.length;d<e;d++)this.texture[d].image.width=
a,this.texture[d].image.height=b,this.texture[d].image.depth=c;this.dispose()}this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b);return this}copy(a){this.dispose();this.width=a.width;this.height=a.height;this.depth=a.depth;this.viewport.set(0,0,this.width,this.height);this.scissor.set(0,0,this.width,this.height);this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;this.texture.length=0;for(let b=0,c=a.texture.length;b<c;b++)this.texture[b]=a.texture[b].clone();
return this}}Si.prototype.isWebGLMultipleRenderTargets=!0;class Cf extends Rb{constructor(a,b,c){c=void 0===c?{}:c;super(a,b,c);this.samples=4;this.ignoreDepthForMultisampleCopy=void 0!==c.ignoreDepth?c.ignoreDepth:!0;this.useRenderToTexture=void 0!==c.useRenderToTexture?c.useRenderToTexture:!1;this.useRenderbuffer=!1===this.useRenderToTexture}copy(a){super.copy.call(this,a);this.samples=a.samples;this.useRenderToTexture=a.useRenderToTexture;this.useRenderbuffer=a.useRenderbuffer;return this}}Cf.prototype.isWebGLMultisampleRenderTarget=
!0;class Gb{constructor(a,b,c,d){this._x=void 0===a?0:a;this._y=void 0===b?0:b;this._z=void 0===c?0:c;this._w=void 0===d?1:d}static slerp(a,b,c,d){console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead.");return c.slerpQuaternions(a,b,d)}static slerpFlat(a,b,c,d,e,f,g){let h=c[d+0],k=c[d+1],l=c[d+2];c=c[d+3];d=e[f+0];const m=e[f+1],n=e[f+2];e=e[f+3];if(0===g)a[b+0]=h,a[b+1]=k,a[b+2]=l,a[b+3]=c;else if(1===g)a[b+0]=d,a[b+1]=m,a[b+2]=n,a[b+
3]=e;else{if(c!==e||h!==d||k!==m||l!==n){f=1-g;var r=h*d+k*m+l*n+c*e,v=0<=r?1:-1,t=1-r*r;t>Number.EPSILON&&(t=Math.sqrt(t),r=Math.atan2(t,r*v),f=Math.sin(f*r)/t,g=Math.sin(g*r)/t);v*=g;h=h*f+d*v;k=k*f+m*v;l=l*f+n*v;c=c*f+e*v;f===1-g&&(g=1/Math.sqrt(h*h+k*k+l*l+c*c),h*=g,k*=g,l*=g,c*=g)}a[b]=h;a[b+1]=k;a[b+2]=l;a[b+3]=c}}static multiplyQuaternionsFlat(a,b,c,d,e,f){const g=c[d],h=c[d+1],k=c[d+2];c=c[d+3];d=e[f];const l=e[f+1],m=e[f+2];e=e[f+3];a[b]=g*e+c*d+h*m-k*l;a[b+1]=h*e+c*l+k*d-g*m;a[b+2]=k*e+
c*m+g*l-h*d;a[b+3]=c*e-g*d-h*l-k*m;return a}get x(){return this._x}set x(a){this._x=a;this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a;this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a;this._onChangeCallback()}get w(){return this._w}set w(a){this._w=a;this._onChangeCallback()}set(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this._onChangeCallback();return this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(a){this._x=a.x;this._y=a.y;
this._z=a.z;this._w=a.w;this._onChangeCallback();return this}setFromEuler(a,b){if(!a||!a.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var c=a._x,d=a._y,e=a._z;a=a._order;var f=Math.cos;const g=Math.sin,h=f(c/2),k=f(d/2);f=f(e/2);c=g(c/2);d=g(d/2);e=g(e/2);switch(a){case "XYZ":this._x=c*k*f+h*d*e;this._y=h*d*f-c*k*e;this._z=h*k*e+c*d*f;this._w=h*k*f-c*d*e;break;case "YXZ":this._x=c*k*f+h*d*e;this._y=h*d*f-c*k*e;this._z=h*k*
e-c*d*f;this._w=h*k*f+c*d*e;break;case "ZXY":this._x=c*k*f-h*d*e;this._y=h*d*f+c*k*e;this._z=h*k*e+c*d*f;this._w=h*k*f-c*d*e;break;case "ZYX":this._x=c*k*f-h*d*e;this._y=h*d*f+c*k*e;this._z=h*k*e-c*d*f;this._w=h*k*f+c*d*e;break;case "YZX":this._x=c*k*f+h*d*e;this._y=h*d*f+c*k*e;this._z=h*k*e-c*d*f;this._w=h*k*f-c*d*e;break;case "XZY":this._x=c*k*f-h*d*e;this._y=h*d*f-c*k*e;this._z=h*k*e+c*d*f;this._w=h*k*f+c*d*e;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+
a)}!1!==b&&this._onChangeCallback();return this}setFromAxisAngle(a,b){b/=2;const c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this._onChangeCallback();return this}setFromRotationMatrix(a){var b=a.elements,c=b[0];a=b[4];const d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6];b=b[10];const l=c+f+b;0<l?(c=.5/Math.sqrt(l+1),this._w=.25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/
c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=.25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this._onChangeCallback();return this}setFromUnitVectors(a,b){let c=a.dot(b)+1;c<Number.EPSILON?(c=0,Math.abs(a.x)>Math.abs(a.z)?(this._x=-a.y,this._y=a.x,this._z=0):(this._x=0,this._y=-a.z,this._z=a.y)):(this._x=a.y*b.z-a.z*b.y,this._y=a.z*b.x-a.x*b.z,this._z=a.x*b.y-a.y*b.x);this._w=c;return this.normalize()}angleTo(a){return 2*
Math.acos(Math.abs(Ua(this.dot(a),-1,1)))}rotateTowards(a,b){const c=this.angleTo(a);if(0===c)return this;this.slerp(a,Math.min(1,b/c));return this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){this._x*=-1;this._y*=-1;this._z*=-1;this._onChangeCallback();return this}dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+
this._z*this._z+this._w*this._w)}normalize(){let a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this._onChangeCallback();return this}multiply(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)}premultiply(a){return this.multiplyQuaternions(a,this)}multiplyQuaternions(a,b){const c=
a._x,d=a._y,e=a._z;a=a._w;const f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this._onChangeCallback();return this}slerp(a,b){if(0===b)return this;if(1===b)return this.copy(a);const c=this._x,d=this._y,e=this._z,f=this._w;var g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;a=1-g*g;if(a<=Number.EPSILON)return g=
1-b,this._w=g*f+b*this._w,this._x=g*c+b*this._x,this._y=g*d+b*this._y,this._z=g*e+b*this._z,this.normalize(),this._onChangeCallback(),this;a=Math.sqrt(a);const h=Math.atan2(a,g);g=Math.sin((1-b)*h)/a;b=Math.sin(b*h)/a;this._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this._onChangeCallback();return this}slerpQuaternions(a,b,c){this.copy(a).slerp(b,c)}random(){var a=Math.random();const b=Math.sqrt(1-a);a=Math.sqrt(a);const c=2*Math.PI*Math.random(),d=2*Math.PI*
Math.random();return this.set(b*Math.cos(c),a*Math.sin(d),a*Math.cos(d),b*Math.sin(c))}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w}fromArray(a,b){b=void 0===b?0:b;this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this._onChangeCallback();return this}toArray(a,b){a=void 0===a?[]:a;b=void 0===b?0:b;a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a}fromBufferAttribute(a,b){this._x=a.getX(b);this._y=a.getY(b);this._z=a.getZ(b);this._w=a.getW(b);
return this}_onChange(a){this._onChangeCallback=a;return this}_onChangeCallback(){}}Gb.prototype.isQuaternion=!0;class C{constructor(a,b,c){this.x=void 0===a?0:a;this.y=void 0===b?0:b;this.z=void 0===c?0:c}set(a,b,c){void 0===c&&(c=this.z);this.x=a;this.y=b;this.z=c;return this}setScalar(a){this.z=this.y=this.x=a;return this}setX(a){this.x=a;return this}setY(a){this.y=a;return this}setZ(a){this.z=a;return this}setComponent(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;
break;default:throw Error("index is out of range: "+a);}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(a){this.x=a.x;this.y=a.y;this.z=a.z;return this}add(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=
a.z;return this}addScalar(a){this.x+=a;this.y+=a;this.z+=a;return this}addVectors(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this}addScaledVector(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this}sub(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this}subScalar(a){this.x-=a;this.y-=a;this.z-=a;return this}subVectors(a,b){this.x=a.x-
b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this}multiply(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this}multiplyScalar(a){this.x*=a;this.y*=a;this.z*=a;return this}multiplyVectors(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this}applyEuler(a){a&&a.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");
return this.applyQuaternion(Ti.setFromEuler(a))}applyAxisAngle(a,b){return this.applyQuaternion(Ti.setFromAxisAngle(a,b))}applyMatrix3(a){const b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this}applyNormalMatrix(a){return this.applyMatrix3(a).normalize()}applyMatrix4(a){const b=this.x,c=this.y,d=this.z;a=a.elements;const e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*
c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this}applyQuaternion(a){var b=this.x;const c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;const h=a*b+f*d-g*c,k=a*c+g*b-e*d,l=a*d+e*c-f*b;b=-e*b-f*c-g*d;this.x=h*a+b*-e+k*-g-l*-f;this.y=k*a+b*-f+l*-e-h*-g;this.z=l*a+b*-g+h*-f-k*-e;return this}project(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)}unproject(a){return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(a.matrixWorld)}transformDirection(a){const b=
this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()}divide(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this}divideScalar(a){return this.multiplyScalar(1/a)}min(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this}max(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this}clamp(a,b){this.x=Math.max(a.x,Math.min(b.x,
this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this}clampScalar(a,b){this.x=Math.max(a,Math.min(b,this.x));this.y=Math.max(a,Math.min(b,this.y));this.z=Math.max(a,Math.min(b,this.z));return this}clampLength(a,b){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))}floor(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this}ceil(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);
this.z=Math.ceil(this.z);return this}round(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this}roundToZero(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this}negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this}lerpVectors(a,b,c){this.x=a.x+(b.x-a.x)*c;this.y=a.y+(b.y-a.y)*c;this.z=a.z+(b.z-a.z)*c;return this}cross(a,b){return void 0!==b?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
this.crossVectors(a,b)):this.crossVectors(this,a)}crossVectors(a,b){const c=a.x,d=a.y;a=a.z;const e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this}projectOnVector(a){var b=a.lengthSq();if(0===b)return this.set(0,0,0);b=a.dot(this)/b;return this.copy(a).multiplyScalar(b)}projectOnPlane(a){Vg.copy(this).projectOnVector(a);return this.sub(Vg)}reflect(a){return this.sub(Vg.copy(a).multiplyScalar(2*this.dot(a)))}angleTo(a){const b=Math.sqrt(this.lengthSq()*a.lengthSq());if(0===
b)return Math.PI/2;a=this.dot(a)/b;return Math.acos(Ua(a,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)}setFromSpherical(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)}setFromSphericalCoords(a,b,c){const d=Math.sin(b)*a;this.x=d*Math.sin(c);this.y=Math.cos(b)*a;this.z=d*Math.cos(c);return this}setFromCylindrical(a){return this.setFromCylindricalCoords(a.radius,
a.theta,a.y)}setFromCylindricalCoords(a,b,c){this.x=a*Math.sin(b);this.y=c;this.z=a*Math.cos(b);return this}setFromMatrixPosition(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this}setFromMatrixScale(a){const b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this}setFromMatrixColumn(a,b){return this.fromArray(a.elements,4*b)}setFromMatrix3Column(a,b){return this.fromArray(a.elements,
3*b)}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z}fromArray(a,b){b=void 0===b?0:b;this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this}toArray(a,b){a=void 0===a?[]:a;b=void 0===b?0:b;a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a}fromBufferAttribute(a,b,c){void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}random(){this.x=Math.random();this.y=Math.random();this.z=Math.random();
return this}randomDirection(){const a=2*(Math.random()-.5),b=Math.random()*Math.PI*2,c=Math.sqrt(1-Math.pow(a,2));this.x=c*Math.cos(b);this.y=c*Math.sin(b);this.z=a;return this}*[Symbol.iterator](){yield this.x;yield this.y;yield this.z}}C.prototype.isVector3=!0;const Vg=new C,Ti=new Gb;class Vb{constructor(a,b){a=void 0===a?new C(Infinity,Infinity,Infinity):a;b=void 0===b?new C(-Infinity,-Infinity,-Infinity):b;this.min=a;this.max=b}set(a,b){this.min.copy(a);this.max.copy(b);return this}setFromArray(a){let b=
Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity;for(let h=0,k=a.length;h<k;h+=3){const l=a[h],m=a[h+1],n=a[h+2];l<b&&(b=l);m<c&&(c=m);n<d&&(d=n);l>e&&(e=l);m>f&&(f=m);n>g&&(g=n)}this.min.set(b,c,d);this.max.set(e,f,g);return this}setFromBufferAttribute(a){let b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity;for(let h=0,k=a.count;h<k;h++){const l=a.getX(h),m=a.getY(h),n=a.getZ(h);l<b&&(b=l);m<c&&(c=m);n<d&&(d=n);l>e&&(e=l);m>f&&(f=m);n>g&&(g=n)}this.min.set(b,
c,d);this.max.set(e,f,g);return this}setFromPoints(a){this.makeEmpty();for(let b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this}setFromCenterAndSize(a,b){b=He.copy(b).multiplyScalar(.5);this.min.copy(a).sub(b);this.max.copy(a).add(b);return this}setFromObject(a){this.makeEmpty();return this.expandByObject(a)}clone(){return(new this.constructor).copy(this)}copy(a){this.min.copy(a.min);this.max.copy(a.max);return this}makeEmpty(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=
this.max.z=-Infinity;return this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(a){return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)}expandByPoint(a){this.min.min(a);this.max.max(a);return this}expandByVector(a){this.min.sub(a);this.max.add(a);return this}expandByScalar(a){this.min.addScalar(-a);this.max.addScalar(a);return this}expandByObject(a){a.updateWorldMatrix(!1,
!1);const b=a.geometry;void 0!==b&&(null===b.boundingBox&&b.computeBoundingBox(),Wg.copy(b.boundingBox),Wg.applyMatrix4(a.matrixWorld),this.union(Wg));a=a.children;for(let c=0,d=a.length;c<d;c++)this.expandByObject(a[c]);return this}containsPoint(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z}getParameter(a,
b){return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0}intersectsSphere(a){this.clampPoint(a.center,He);return He.distanceToSquared(a.center)<=a.radius*a.radius}intersectsPlane(a){let b,c;0<a.normal.x?(b=a.normal.x*this.min.x,c=a.normal.x*this.max.x):(b=a.normal.x*this.max.x,
c=a.normal.x*this.min.x);0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=-a.constant&&c>=-a.constant}intersectsTriangle(a){if(this.isEmpty())return!1;this.getCenter(Ie);Jf.subVectors(this.max,Ie);Wd.subVectors(a.a,Ie);Xd.subVectors(a.b,Ie);Yd.subVectors(a.c,Ie);$c.subVectors(Xd,Wd);ad.subVectors(Yd,Xd);sd.subVectors(Wd,
Yd);a=[0,-$c.z,$c.y,0,-ad.z,ad.y,0,-sd.z,sd.y,$c.z,0,-$c.x,ad.z,0,-ad.x,sd.z,0,-sd.x,-$c.y,$c.x,0,-ad.y,ad.x,0,-sd.y,sd.x,0];if(!tc(a,Wd,Xd,Yd,Jf))return!1;a=[1,0,0,0,1,0,0,0,1];if(!tc(a,Wd,Xd,Yd,Jf))return!1;Kf.crossVectors($c,ad);a=[Kf.x,Kf.y,Kf.z];return tc(a,Wd,Xd,Yd,Jf)}clampPoint(a,b){return b.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return He.copy(a).clamp(this.min,this.max).sub(a).length()}getBoundingSphere(a){this.getCenter(a.center);a.radius=.5*this.getSize(He).length();return a}intersect(a){this.min.max(a.min);
this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this}union(a){this.min.min(a.min);this.max.max(a.max);return this}applyMatrix4(a){if(this.isEmpty())return this;Cc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a);Cc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a);Cc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a);Cc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a);Cc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a);Cc[5].set(this.max.x,this.min.y,
this.max.z).applyMatrix4(a);Cc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a);Cc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(a);this.setFromPoints(Cc);return this}translate(a){this.min.add(a);this.max.add(a);return this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}Vb.prototype.isBox3=!0;const Cc=[new C,new C,new C,new C,new C,new C,new C,new C],He=new C,Wg=new Vb,Wd=new C,Xd=new C,Yd=new C,$c=new C,ad=new C,sd=new C,Ie=new C,Jf=new C,Kf=new C,id=new C,Dl=new Vb,
Ui=new C,Lf=new C,Xg=new C;class bd{constructor(a,b){this.center=a=void 0===a?new C:a;this.radius=void 0===b?-1:b}set(a,b){this.center.copy(a);this.radius=b;return this}setFromPoints(a,b){const c=this.center;void 0!==b?c.copy(b):Dl.setFromPoints(a).getCenter(c);b=0;for(let d=0,e=a.length;d<e;d++)b=Math.max(b,c.distanceToSquared(a[d]));this.radius=Math.sqrt(b);return this}copy(a){this.center.copy(a.center);this.radius=a.radius;return this}isEmpty(){return 0>this.radius}makeEmpty(){this.center.set(0,
0,0);this.radius=-1;return this}containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(a){return a.distanceTo(this.center)-this.radius}intersectsSphere(a){const b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b}intersectsBox(a){return a.intersectsSphere(this)}intersectsPlane(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius}clampPoint(a,b){const c=this.center.distanceToSquared(a);b.copy(a);c>this.radius*this.radius&&
(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b}getBoundingBox(a){if(this.isEmpty())return a.makeEmpty(),a;a.set(this.center,this.center);a.expandByScalar(this.radius);return a}applyMatrix4(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this}translate(a){this.center.add(a);return this}expandByPoint(a){Xg.subVectors(a,this.center);a=Xg.lengthSq();if(a>this.radius*this.radius){a=Math.sqrt(a);const b=.5*(a-this.radius);this.center.add(Xg.multiplyScalar(b/
a));this.radius+=b}return this}union(a){!0===this.center.equals(a.center)?Lf.set(0,0,1).multiplyScalar(a.radius):Lf.subVectors(a.center,this.center).normalize().multiplyScalar(a.radius);this.expandByPoint(Ui.copy(a.center).add(Lf));this.expandByPoint(Ui.copy(a.center).sub(Lf));return this}equals(a){return a.center.equals(this.center)&&a.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Dc=new C,Yg=new C,Mf=new C,cd=new C,Zg=new C,Nf=new C,$g=new C;class dd{constructor(a,
b){a=void 0===a?new C:a;b=void 0===b?new C(0,0,-1):b;this.origin=a;this.direction=b}set(a,b){this.origin.copy(a);this.direction.copy(b);return this}copy(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this}at(a,b){return b.copy(this.direction).multiplyScalar(a).add(this.origin)}lookAt(a){this.direction.copy(a).sub(this.origin).normalize();return this}recast(a){this.origin.copy(this.at(a,Dc));return this}closestPointToPoint(a,b){b.subVectors(a,this.origin);a=b.dot(this.direction);
return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)}distanceToPoint(a){return Math.sqrt(this.distanceSqToPoint(a))}distanceSqToPoint(a){const b=Dc.subVectors(a,this.origin).dot(this.direction);if(0>b)return this.origin.distanceToSquared(a);Dc.copy(this.direction).multiplyScalar(b).add(this.origin);return Dc.distanceToSquared(a)}distanceSqToSegment(a,b,c,d){Yg.copy(a).add(b).multiplyScalar(.5);Mf.copy(b).sub(a).normalize();cd.copy(this.origin).sub(Yg);var e=.5*
a.distanceTo(b),f=-this.direction.dot(Mf);const g=cd.dot(this.direction),h=-cd.dot(Mf),k=cd.lengthSq(),l=Math.abs(1-f*f);let m;0<l?(a=f*h-g,b=f*g-h,m=e*l,0<=a?b>=-m?b<=m?(e=1/l,a*=e,b*=e,f=a*(a+f*b+2*g)+b*(f*a+b+2*h)+k):(b=e,a=Math.max(0,-(f*b+g)),f=-a*a+b*(b+2*h)+k):(b=-e,a=Math.max(0,-(f*b+g)),f=-a*a+b*(b+2*h)+k):b<=-m?(a=Math.max(0,-(-f*e+g)),b=0<a?-e:Math.min(Math.max(-e,-h),e),f=-a*a+b*(b+2*h)+k):b<=m?(a=0,b=Math.min(Math.max(-e,-h),e),f=b*(b+2*h)+k):(a=Math.max(0,-(f*e+g)),b=0<a?e:Math.min(Math.max(-e,
-h),e),f=-a*a+b*(b+2*h)+k)):(b=0<f?-e:e,a=Math.max(0,-(f*b+g)),f=-a*a+b*(b+2*h)+k);c&&c.copy(this.direction).multiplyScalar(a).add(this.origin);d&&d.copy(Mf).multiplyScalar(b).add(Yg);return f}intersectSphere(a,b){Dc.subVectors(a.center,this.origin);var c=Dc.dot(this.direction),d=Dc.dot(Dc)-c*c;a=a.radius*a.radius;if(d>a)return null;a=Math.sqrt(a-d);d=c-a;c+=a;return 0>d&&0>c?null:0>d?this.at(c,b):this.at(d,b)}intersectsSphere(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius}distanceToPlane(a){const b=
a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null}intersectPlane(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)}intersectsPlane(a){const b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1}intersectBox(a,b){let c;var d=1/this.direction.x;var e=1/this.direction.y;const f=1/this.direction.z,g=this.origin;0<=d?(c=(a.min.x-g.x)*d,d*=a.max.x-g.x):(c=(a.max.x-
g.x)*d,d*=a.min.x-g.x);if(0<=e){var h=(a.min.y-g.y)*e;e*=a.max.y-g.y}else h=(a.max.y-g.y)*e,e*=a.min.y-g.y;if(c>e||h>d)return null;if(h>c||c!==c)c=h;if(e<d||d!==d)d=e;0<=f?(h=(a.min.z-g.z)*f,a=(a.max.z-g.z)*f):(h=(a.max.z-g.z)*f,a=(a.min.z-g.z)*f);if(c>a||h>d)return null;if(h>c||c!==c)c=h;if(a<d||d!==d)d=a;return 0>d?null:this.at(0<=c?c:d,b)}intersectsBox(a){return null!==this.intersectBox(a,Dc)}intersectTriangle(a,b,c,d,e){Zg.subVectors(b,a);Nf.subVectors(c,a);$g.crossVectors(Zg,Nf);b=this.direction.dot($g);
if(0<b){if(d)return null;d=1}else if(0>b)d=-1,b=-b;else return null;cd.subVectors(this.origin,a);a=d*this.direction.dot(Nf.crossVectors(cd,Nf));if(0>a)return null;c=d*this.direction.dot(Zg.cross(cd));if(0>c||a+c>b)return null;a=-d*cd.dot($g);return 0>a?null:this.at(a/b,e)}applyMatrix4(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this}equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Da{constructor(){this.elements=
[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(a,b,c,d,e,f,g,h,k,l,m,n,r,v,t,y){const E=this.elements;E[0]=a;E[4]=b;E[8]=c;E[12]=d;E[1]=e;E[5]=f;E[9]=g;E[13]=h;E[2]=k;E[6]=l;E[10]=m;E[14]=n;E[3]=r;E[7]=v;E[11]=t;E[15]=y;return this}identity(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this}clone(){return(new Da).fromArray(this.elements)}copy(a){const b=this.elements;a=a.elements;b[0]=a[0];
b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this}copyPosition(a){const b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this}setFromMatrix3(a){a=a.elements;this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1);return this}extractBasis(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this}makeBasis(a,
b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this}extractRotation(a){const b=this.elements,c=a.elements,d=1/Zd.setFromMatrixColumn(a,0).length(),e=1/Zd.setFromMatrixColumn(a,1).length();a=1/Zd.setFromMatrixColumn(a,2).length();b[0]=c[0]*d;b[1]=c[1]*d;b[2]=c[2]*d;b[3]=0;b[4]=c[4]*e;b[5]=c[5]*e;b[6]=c[6]*e;b[7]=0;b[8]=c[8]*a;b[9]=c[9]*a;b[10]=c[10]*a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this}makeRotationFromEuler(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
const b=this.elements;var c=a.x,d=a.y,e=a.z;const f=Math.cos(c);c=Math.sin(c);const g=Math.cos(d);d=Math.sin(d);const h=Math.cos(e);e=Math.sin(e);if("XYZ"===a.order){a=f*h;var k=f*e,l=c*h,m=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=k+l*d;b[5]=a-m*d;b[9]=-c*g;b[2]=m-a*d;b[6]=l+k*d;b[10]=f*g}else"YXZ"===a.order?(a=g*h,k=g*e,l=d*h,m=d*e,b[0]=a+m*c,b[4]=l*c-k,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=k*c-l,b[6]=m+a*c,b[10]=f*g):"ZXY"===a.order?(a=g*h,k=g*e,l=d*h,m=d*e,b[0]=a-m*c,b[4]=-f*e,b[8]=l+k*c,b[1]=k+l*
c,b[5]=f*h,b[9]=m-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,k=f*e,l=c*h,m=c*e,b[0]=g*h,b[4]=l*d-k,b[8]=a*d+m,b[1]=g*e,b[5]=m*d+a,b[9]=k*d-l,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,k=f*d,l=c*g,m=c*d,b[0]=g*h,b[4]=m-a*e,b[8]=l*e+k,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=k*e+l,b[10]=a-m*e):"XZY"===a.order&&(a=f*g,k=f*d,l=c*g,m=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+m,b[5]=f*h,b[9]=k*e-l,b[2]=l*e-k,b[6]=c*h,b[10]=m*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this}makeRotationFromQuaternion(a){return this.compose(El,
a,Fl)}lookAt(a,b,c){const d=this.elements;Kb.subVectors(a,b);0===Kb.lengthSq()&&(Kb.z=1);Kb.normalize();ed.crossVectors(c,Kb);0===ed.lengthSq()&&(1===Math.abs(c.z)?Kb.x+=1E-4:Kb.z+=1E-4,Kb.normalize(),ed.crossVectors(c,Kb));ed.normalize();Of.crossVectors(Kb,ed);d[0]=ed.x;d[4]=Of.x;d[8]=Kb.x;d[1]=ed.y;d[5]=Of.y;d[9]=Kb.y;d[2]=ed.z;d[6]=Of.z;d[10]=Kb.z;return this}multiply(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),
this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];const e=c[4],f=c[8],g=c[12],h=c[1],k=c[5],l=c[9],m=c[13],n=c[2],r=c[6],v=c[10],t=c[14],y=c[3],E=c[7],M=c[11];c=c[15];const q=d[0],H=d[4],J=d[8],K=d[12],S=d[1],P=d[5],U=d[9],V=d[13],W=d[2],da=d[6],ka=d[10],ya=d[14],pa=d[3],Ia=d[7],wa=d[11];d=d[15];b[0]=a*q+e*S+f*W+g*pa;b[4]=a*H+e*P+f*da+g*Ia;b[8]=a*J+e*U+f*ka+g*wa;b[12]=
a*K+e*V+f*ya+g*d;b[1]=h*q+k*S+l*W+m*pa;b[5]=h*H+k*P+l*da+m*Ia;b[9]=h*J+k*U+l*ka+m*wa;b[13]=h*K+k*V+l*ya+m*d;b[2]=n*q+r*S+v*W+t*pa;b[6]=n*H+r*P+v*da+t*Ia;b[10]=n*J+r*U+v*ka+t*wa;b[14]=n*K+r*V+v*ya+t*d;b[3]=y*q+E*S+M*W+c*pa;b[7]=y*H+E*P+M*da+c*Ia;b[11]=y*J+E*U+M*ka+c*wa;b[15]=y*K+E*V+M*ya+c*d;return this}multiplyScalar(a){const b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this}determinant(){const a=
this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],k=a[13],l=a[2],m=a[6],n=a[10],r=a[14];return a[3]*(+e*h*m-d*k*m-e*g*n+c*k*n+d*g*r-c*h*r)+a[7]*(+b*h*r-b*k*n+e*f*n-d*f*r+d*k*l-e*h*l)+a[11]*(+b*k*m-b*g*r-e*f*m+c*f*r+e*g*l-c*k*l)+a[15]*(-d*g*l-b*h*m+b*g*n+d*f*m-c*f*n+c*h*l)}transpose(){const a=this.elements;let b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this}setPosition(a,
b,c){const d=this.elements;a.isVector3?(d[12]=a.x,d[13]=a.y,d[14]=a.z):(d[12]=a,d[13]=b,d[14]=c);return this}invert(){const a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],l=a[8],m=a[9],n=a[10],r=a[11],v=a[12],t=a[13],y=a[14],E=a[15],M=m*y*k-t*n*k+t*h*r-g*y*r-m*h*E+g*n*E,q=v*n*k-l*y*k-v*h*r+f*y*r+l*h*E-f*n*E,H=l*t*k-v*m*k+v*g*r-f*t*r-l*g*E+f*m*E,J=v*m*h-l*t*h-v*g*n+f*t*n+l*g*y-f*m*y;var K=b*M+c*q+d*H+e*J;if(0===K)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);K=1/K;a[0]=
M*K;a[1]=(t*n*e-m*y*e-t*d*r+c*y*r+m*d*E-c*n*E)*K;a[2]=(g*y*e-t*h*e+t*d*k-c*y*k-g*d*E+c*h*E)*K;a[3]=(m*h*e-g*n*e-m*d*k+c*n*k+g*d*r-c*h*r)*K;a[4]=q*K;a[5]=(l*y*e-v*n*e+v*d*r-b*y*r-l*d*E+b*n*E)*K;a[6]=(v*h*e-f*y*e-v*d*k+b*y*k+f*d*E-b*h*E)*K;a[7]=(f*n*e-l*h*e+l*d*k-b*n*k-f*d*r+b*h*r)*K;a[8]=H*K;a[9]=(v*m*e-l*t*e-v*c*r+b*t*r+l*c*E-b*m*E)*K;a[10]=(f*t*e-v*g*e+v*c*k-b*t*k-f*c*E+b*g*E)*K;a[11]=(l*g*e-f*m*e-l*c*k+b*m*k+f*c*r-b*g*r)*K;a[12]=J*K;a[13]=(l*t*d-v*m*d+v*c*n-b*t*n-l*c*y+b*m*y)*K;a[14]=(v*g*d-f*t*
d-v*c*h+b*t*h+f*c*y-b*g*y)*K;a[15]=(f*m*d-l*g*d+l*c*h-b*m*h-f*c*n+b*g*n)*K;return this}scale(a){const b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this}getMaxScaleOnAxis(){const a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))}makeTranslation(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this}makeRotationX(a){const b=
Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this}makeRotationY(a){const b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this}makeRotationZ(a){const b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this}makeRotationAxis(a,b){const c=Math.cos(b);b=Math.sin(b);const d=1-c,e=a.x,f=a.y;a=a.z;const g=d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0,0,0,1);return this}makeScale(a,
b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this}makeShear(a,b,c,d,e,f){this.set(1,c,e,0,a,1,f,0,b,d,1,0,0,0,0,1);return this}compose(a,b,c){const d=this.elements;var e=b._x,f=b._y,g=b._z,h=b._w,k=e+e,l=f+f,m=g+g;b=e*k;const n=e*l;e*=m;const r=f*l;f*=m;g*=m;k*=h;l*=h;h*=m;m=c.x;const v=c.y;c=c.z;d[0]=(1-(r+g))*m;d[1]=(n+h)*m;d[2]=(e-l)*m;d[3]=0;d[4]=(n-h)*v;d[5]=(1-(b+g))*v;d[6]=(f+k)*v;d[7]=0;d[8]=(e+l)*c;d[9]=(f-k)*c;d[10]=(1-(b+r))*c;d[11]=0;d[12]=a.x;d[13]=a.y;d[14]=a.z;d[15]=1;return this}decompose(a,
b,c){var d=this.elements;let e=Zd.set(d[0],d[1],d[2]).length();const f=Zd.set(d[4],d[5],d[6]).length(),g=Zd.set(d[8],d[9],d[10]).length();0>this.determinant()&&(e=-e);a.x=d[12];a.y=d[13];a.z=d[14];wb.copy(this);a=1/e;d=1/f;const h=1/g;wb.elements[0]*=a;wb.elements[1]*=a;wb.elements[2]*=a;wb.elements[4]*=d;wb.elements[5]*=d;wb.elements[6]*=d;wb.elements[8]*=h;wb.elements[9]*=h;wb.elements[10]*=h;b.setFromRotationMatrix(wb);c.x=e;c.y=f;c.z=g;return this}makePerspective(a,b,c,d,e,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
const g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this}makeOrthographic(a,b,c,d,e,f){const g=this.elements,h=1/(b-a),k=1/(c-d),l=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((c+d)*k);g[2]=0;g[6]=0;g[10]=-2*l;g[14]=-((f+e)*l);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this}equals(a){const b=this.elements;a=a.elements;
for(let c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0}fromArray(a,b){b=void 0===b?0:b;for(let c=0;16>c;c++)this.elements[c]=a[c+b];return this}toArray(a,b){a=void 0===a?[]:a;b=void 0===b?0:b;const c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}}Da.prototype.isMatrix4=!0;const Zd=new C,wb=new Da,El=new C(0,0,0),Fl=new C(1,
1,1),ed=new C,Of=new C,Kb=new C,Vi=new Da,Wi=new Gb;class $d{constructor(a,b,c,d){d=void 0===d?$d.DefaultOrder:d;this._x=void 0===a?0:a;this._y=void 0===b?0:b;this._z=void 0===c?0:c;this._order=d}get x(){return this._x}set x(a){this._x=a;this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a;this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a;this._onChangeCallback()}get order(){return this._order}set order(a){this._order=a;this._onChangeCallback()}set(a,b,c,d){d=void 0===
d?this._order:d;this._x=a;this._y=b;this._z=c;this._order=d;this._onChangeCallback();return this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this._onChangeCallback();return this}setFromRotationMatrix(a,b,c){b=void 0===b?this._order:b;c=void 0===c?!0:c;var d=a.elements;a=d[0];const e=d[4],f=d[8],g=d[1],h=d[5],k=d[9],l=d[2],m=d[6];d=d[10];switch(b){case "XYZ":this._y=Math.asin(Ua(f,-1,1));.9999999>Math.abs(f)?
(this._x=Math.atan2(-k,d),this._z=Math.atan2(-e,a)):(this._x=Math.atan2(m,h),this._z=0);break;case "YXZ":this._x=Math.asin(-Ua(k,-1,1));.9999999>Math.abs(k)?(this._y=Math.atan2(f,d),this._z=Math.atan2(g,h)):(this._y=Math.atan2(-l,a),this._z=0);break;case "ZXY":this._x=Math.asin(Ua(m,-1,1));.9999999>Math.abs(m)?(this._y=Math.atan2(-l,d),this._z=Math.atan2(-e,h)):(this._y=0,this._z=Math.atan2(g,a));break;case "ZYX":this._y=Math.asin(-Ua(l,-1,1));.9999999>Math.abs(l)?(this._x=Math.atan2(m,d),this._z=
Math.atan2(g,a)):(this._x=0,this._z=Math.atan2(-e,h));break;case "YZX":this._z=Math.asin(Ua(g,-1,1));.9999999>Math.abs(g)?(this._x=Math.atan2(-k,h),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(f,d));break;case "XZY":this._z=Math.asin(-Ua(e,-1,1));.9999999>Math.abs(e)?(this._x=Math.atan2(m,h),this._y=Math.atan2(f,a)):(this._x=Math.atan2(-k,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+b)}this._order=b;!0===c&&this._onChangeCallback();
return this}setFromQuaternion(a,b,c){Vi.makeRotationFromQuaternion(a);return this.setFromRotationMatrix(Vi,b,c)}setFromVector3(a,b){b=void 0===b?this._order:b;return this.set(a.x,a.y,a.z,b)}reorder(a){Wi.setFromEuler(this);return this.setFromQuaternion(Wi,a)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order}fromArray(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this._onChangeCallback();return this}toArray(a,b){a=void 0===a?[]:a;
b=void 0===b?0:b;a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a}toVector3(a){return a?a.set(this._x,this._y,this._z):new C(this._x,this._y,this._z)}_onChange(a){this._onChangeCallback=a;return this}_onChangeCallback(){}}$d.prototype.isEuler=!0;$d.DefaultOrder="XYZ";$d.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");class xf{constructor(){this.mask=1}set(a){this.mask=(1<<a|0)>>>0}enable(a){this.mask=this.mask|1<<a|0}enableAll(){this.mask=-1}toggle(a){this.mask^=1<<a|0}disable(a){this.mask&=
~(1<<a|0)}disableAll(){this.mask=0}test(a){return 0!==(this.mask&a.mask)}isEnabled(a){return 0!==(this.mask&(1<<a|0))}}let Gl=0;const Xi=new C,ae=new Gb,Ec=new Da,Pf=new C,Je=new C,Hl=new C,Il=new Gb,Yi=new C(1,0,0),Zi=new C(0,1,0),$i=new C(0,0,1),Jl={type:"added"},aj={type:"removed"};class Va extends Zc{constructor(){super();Object.defineProperty(this,"id",{value:Gl++});this.uuid=Ta();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=Va.DefaultUp.clone();const a=new C,b=
new $d,c=new Gb,d=new C(1,1,1);b._onChange(function(){c.setFromEuler(b,!1)});c._onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:b},quaternion:{configurable:!0,enumerable:!0,value:c},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new Da},normalMatrix:{value:new xb}});this.matrix=new Da;this.matrixWorld=new Da;this.matrixAutoUpdate=Va.DefaultMatrixAutoUpdate;
this.matrixWorldNeedsUpdate=!1;this.layers=new xf;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.animations=[];this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(a){this.matrixAutoUpdate&&this.updateMatrix();this.matrix.premultiply(a);this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(a){this.quaternion.premultiply(a);return this}setRotationFromAxisAngle(a,b){this.quaternion.setFromAxisAngle(a,b)}setRotationFromEuler(a){this.quaternion.setFromEuler(a,
!0)}setRotationFromMatrix(a){this.quaternion.setFromRotationMatrix(a)}setRotationFromQuaternion(a){this.quaternion.copy(a)}rotateOnAxis(a,b){ae.setFromAxisAngle(a,b);this.quaternion.multiply(ae);return this}rotateOnWorldAxis(a,b){ae.setFromAxisAngle(a,b);this.quaternion.premultiply(ae);return this}rotateX(a){return this.rotateOnAxis(Yi,a)}rotateY(a){return this.rotateOnAxis(Zi,a)}rotateZ(a){return this.rotateOnAxis($i,a)}translateOnAxis(a,b){Xi.copy(a).applyQuaternion(this.quaternion);this.position.add(Xi.multiplyScalar(b));
return this}translateX(a){return this.translateOnAxis(Yi,a)}translateY(a){return this.translateOnAxis(Zi,a)}translateZ(a){return this.translateOnAxis($i,a)}localToWorld(a){return a.applyMatrix4(this.matrixWorld)}worldToLocal(a){return a.applyMatrix4(Ec.copy(this.matrixWorld).invert())}lookAt(a,b,c){a.isVector3?Pf.copy(a):Pf.set(a,b,c);a=this.parent;this.updateWorldMatrix(!0,!1);Je.setFromMatrixPosition(this.matrixWorld);this.isCamera||this.isLight?Ec.lookAt(Je,Pf,this.up):Ec.lookAt(Pf,Je,this.up);
this.quaternion.setFromRotationMatrix(Ec);a&&(Ec.extractRotation(a.matrixWorld),ae.setFromRotationMatrix(Ec),this.quaternion.premultiply(ae.invert()))}add(a){if(1<arguments.length){for(let b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(Jl)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",
a);return this}remove(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}b=this.children.indexOf(a);-1!==b&&(a.parent=null,this.children.splice(b,1),a.dispatchEvent(aj));return this}removeFromParent(){const a=this.parent;null!==a&&a.remove(this);return this}clear(){for(let a=0;a<this.children.length;a++){const b=this.children[a];b.parent=null;b.dispatchEvent(aj)}this.children.length=0;return this}attach(a){this.updateWorldMatrix(!0,!1);Ec.copy(this.matrixWorld).invert();
null!==a.parent&&(a.parent.updateWorldMatrix(!0,!1),Ec.multiply(a.parent.matrixWorld));a.applyMatrix4(Ec);this.add(a);a.updateWorldMatrix(!1,!0);return this}getObjectById(a){return this.getObjectByProperty("id",a)}getObjectByName(a){return this.getObjectByProperty("name",a)}getObjectByProperty(a,b){if(this[a]===b)return this;for(let c=0,d=this.children.length;c<d;c++){const e=this.children[c].getObjectByProperty(a,b);if(void 0!==e)return e}}getWorldPosition(a){this.updateWorldMatrix(!0,!1);return a.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(a){this.updateWorldMatrix(!0,
!1);this.matrixWorld.decompose(Je,a,Hl);return a}getWorldScale(a){this.updateWorldMatrix(!0,!1);this.matrixWorld.decompose(Je,Il,a);return a}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const b=this.matrixWorld.elements;return a.set(b[8],b[9],b[10]).normalize()}raycast(){}traverse(a){a(this);const b=this.children;for(let c=0,d=b.length;c<d;c++)b[c].traverse(a)}traverseVisible(a){if(!1!==this.visible){a(this);var b=this.children;for(let c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}}traverseAncestors(a){const b=
this.parent;null!==b&&(a(b),b.traverseAncestors(a))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;const b=this.children;for(let c=0,d=b.length;c<d;c++)b[c].updateMatrixWorld(a)}updateWorldMatrix(a,
b){const c=this.parent;!0===a&&null!==c&&c.updateWorldMatrix(!0,!1);this.matrixAutoUpdate&&this.updateMatrix();null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if(!0===b){a=this.children;for(let d=0,e=a.length;d<e;d++)a[d].updateWorldMatrix(!1,!0)}}toJSON(a){function b(h,k){void 0===h[k.uuid]&&(h[k.uuid]=k.toJSON(a));return k.uuid}function c(h){const k=[];for(const l in h){const m=h[l];delete m.metadata;k.push(m)}return k}
var d=void 0===a||"string"===typeof a;const e={};d&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const f={};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);!1===this.frustumCulled&&(f.frustumCulled=!1);0!==this.renderOrder&&(f.renderOrder=this.renderOrder);
"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData);f.layers=this.layers.mask;f.matrix=this.matrix.toArray();!1===this.matrixAutoUpdate&&(f.matrixAutoUpdate=!1);this.isInstancedMesh&&(f.type="InstancedMesh",f.count=this.count,f.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(f.instanceColor=this.instanceColor.toJSON()));if(this.isScene)this.background&&(this.background.isColor?f.background=this.background.toJSON():this.background.isTexture&&(f.background=this.background.toJSON(a).uuid)),
this.environment&&this.environment.isTexture&&(f.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){f.geometry=b(a.geometries,this.geometry);var g=this.geometry.parameters;if(void 0!==g&&void 0!==g.shapes)if(g=g.shapes,Array.isArray(g))for(let h=0,k=g.length;h<k;h++)b(a.shapes,g[h]);else b(a.shapes,g)}this.isSkinnedMesh&&(f.bindMode=this.bindMode,f.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(b(a.skeletons,this.skeleton),f.skeleton=this.skeleton.uuid));
if(void 0!==this.material)if(Array.isArray(this.material)){g=[];for(let h=0,k=this.material.length;h<k;h++)g.push(b(a.materials,this.material[h]));f.material=g}else f.material=b(a.materials,this.material);if(0<this.children.length)for(f.children=[],g=0;g<this.children.length;g++)f.children.push(this.children[g].toJSON(a).object);if(0<this.animations.length)for(f.animations=[],g=0;g<this.animations.length;g++)f.animations.push(b(a.animations,this.animations[g]));if(d){d=c(a.geometries);g=c(a.materials);
const h=c(a.textures),k=c(a.images),l=c(a.shapes),m=c(a.skeletons),n=c(a.animations);0<d.length&&(e.geometries=d);0<g.length&&(e.materials=g);0<h.length&&(e.textures=h);0<k.length&&(e.images=k);0<l.length&&(e.shapes=l);0<m.length&&(e.skeletons=m);0<n.length&&(e.animations=n)}e.object=f;return e}clone(a){return(new this.constructor).copy(this,a)}copy(a,b){b=void 0===b?!0:b;this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.rotation.order=a.rotation.order;this.quaternion.copy(a.quaternion);
this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}}
Va.DefaultUp=new C(0,1,0);Va.DefaultMatrixAutoUpdate=!0;Va.prototype.isObject3D=!0;const ic=new C,Fc=new C,ah=new C,Gc=new C,be=new C,ce=new C,bj=new C,bh=new C,ch=new C,dh=new C;class tb{constructor(a,b,c){a=void 0===a?new C:a;b=void 0===b?new C:b;c=void 0===c?new C:c;this.a=a;this.b=b;this.c=c}static getNormal(a,b,c,d){d.subVectors(c,b);ic.subVectors(a,b);d.cross(ic);a=d.lengthSq();return 0<a?d.multiplyScalar(1/Math.sqrt(a)):d.set(0,0,0)}static getBarycoord(a,b,c,d,e){ic.subVectors(d,b);Fc.subVectors(c,
b);ah.subVectors(a,b);a=ic.dot(ic);b=ic.dot(Fc);c=ic.dot(ah);var f=Fc.dot(Fc);d=Fc.dot(ah);var g=a*f-b*b;if(0===g)return e.set(-2,-1,-1);g=1/g;f=(f*c-b*d)*g;a=(a*d-b*c)*g;return e.set(1-f-a,a,f)}static containsPoint(a,b,c,d){this.getBarycoord(a,b,c,d,Gc);return 0<=Gc.x&&0<=Gc.y&&1>=Gc.x+Gc.y}static getUV(a,b,c,d,e,f,g,h){this.getBarycoord(a,b,c,d,Gc);h.set(0,0);h.addScaledVector(e,Gc.x);h.addScaledVector(f,Gc.y);h.addScaledVector(g,Gc.z);return h}static isFrontFacing(a,b,c,d){ic.subVectors(c,b);Fc.subVectors(a,
b);return 0>ic.cross(Fc).dot(d)?!0:!1}set(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this}setFromPointsAndIndices(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this}setFromAttributeAndIndices(a,b,c,d){this.a.fromBufferAttribute(a,b);this.b.fromBufferAttribute(a,c);this.c.fromBufferAttribute(a,d);return this}clone(){return(new this.constructor).copy(this)}copy(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this}getArea(){ic.subVectors(this.c,this.b);
Fc.subVectors(this.a,this.b);return.5*ic.cross(Fc).length()}getMidpoint(a){return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return tb.getNormal(this.a,this.b,this.c,a)}getPlane(a){return a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,b){return tb.getBarycoord(a,this.a,this.b,this.c,b)}getUV(a,b,c,d,e){return tb.getUV(a,this.a,this.b,this.c,b,c,d,e)}containsPoint(a){return tb.containsPoint(a,this.a,this.b,this.c)}isFrontFacing(a){return tb.isFrontFacing(this.a,
this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,b){const c=this.a;var d=this.b,e=this.c;be.subVectors(d,c);ce.subVectors(e,c);bh.subVectors(a,c);var f=be.dot(bh),g=ce.dot(bh);if(0>=f&&0>=g)return b.copy(c);ch.subVectors(a,d);const h=be.dot(ch),k=ce.dot(ch);if(0<=h&&k<=h)return b.copy(d);var l=f*k-h*g;if(0>=l&&0<=f&&0>=h)return d=f/(f-h),b.copy(c).addScaledVector(be,d);dh.subVectors(a,e);a=be.dot(dh);const m=ce.dot(dh);if(0<=m&&a<=m)return b.copy(e);f=a*g-
f*m;if(0>=f&&0<=g&&0>=m)return l=g/(g-m),b.copy(c).addScaledVector(ce,l);g=h*m-a*k;if(0>=g&&0<=k-h&&0<=a-m)return bj.subVectors(e,d),l=(k-h)/(k-h+(a-m)),b.copy(d).addScaledVector(bj,l);e=1/(g+f+l);d=f*e;l*=e;return b.copy(c).addScaledVector(be,d).addScaledVector(ce,l)}equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}let Kl=0;class zb extends Zc{constructor(){super();Object.defineProperty(this,"id",{value:Kl++});this.uuid=Ta();this.name="";this.type="Material";this.fog=
!0;this.blending=1;this.side=0;this.vertexColors=!1;this.opacity=1;this.format=1023;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.stencilWriteMask=255;this.stencilFunc=519;this.stencilRef=0;this.stencilFuncMask=255;this.stencilZPass=this.stencilZFail=this.stencilFail=7680;this.stencilWrite=!1;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=
!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.premultipliedAlpha=this.alphaToCoverage=this.dithering=!1;this.toneMapped=this.visible=!0;this.userData={};this._alphaTest=this.version=0}get alphaTest(){return this._alphaTest}set alphaTest(a){0<this._alphaTest!==0<a&&this.version++;this._alphaTest=a}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(a){if(void 0!==
a)for(const b in a){const c=a[b];if(void 0===c){console.warn("THREE.Material: '"+b+"' parameter is undefined.");continue}if("shading"===b){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===c?!0:!1;continue}const d=this[b];void 0===d?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]=c}}toJSON(a){function b(e){const f=[];for(const g in e){const h=
e[g];delete h.metadata;f.push(h)}return f}var c=void 0===a||"string"===typeof a;c&&(a={textures:{},images:{}});const d={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);void 0!==this.sheen&&(d.sheen=this.sheen);this.sheenColor&&this.sheenColor.isColor&&
(d.sheenColor=this.sheenColor.getHex());void 0!==this.sheenRoughness&&(d.sheenRoughness=this.sheenRoughness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());this.emissiveIntensity&&1!==this.emissiveIntensity&&(d.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void 0!==this.specularIntensity&&(d.specularIntensity=this.specularIntensity);this.specularColor&&this.specularColor.isColor&&(d.specularColor=this.specularColor.getHex());
void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearcoat&&(d.clearcoat=this.clearcoat);void 0!==this.clearcoatRoughness&&(d.clearcoatRoughness=this.clearcoatRoughness);this.clearcoatMap&&this.clearcoatMap.isTexture&&(d.clearcoatMap=this.clearcoatMap.toJSON(a).uuid);this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(d.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid);this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(d.clearcoatNormalMap=
this.clearcoatNormalMap.toJSON(a).uuid,d.clearcoatNormalScale=this.clearcoatNormalScale.toArray());this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid);this.matcap&&this.matcap.isTexture&&(d.matcap=this.matcap.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(a).uuid,d.lightMapIntensity=this.lightMapIntensity);this.aoMap&&this.aoMap.isTexture&&(d.aoMap=this.aoMap.toJSON(a).uuid,
d.aoMapIntensity=this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalMapType=this.normalMapType,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&
this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(d.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid);this.specularColorMap&&
this.specularColorMap.isTexture&&(d.specularColorMap=this.specularColorMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,void 0!==this.combine&&(d.combine=this.combine));void 0!==this.envMapIntensity&&(d.envMapIntensity=this.envMapIntensity);void 0!==this.reflectivity&&(d.reflectivity=this.reflectivity);void 0!==this.refractionRatio&&(d.refractionRatio=this.refractionRatio);this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(a).uuid);
void 0!==this.transmission&&(d.transmission=this.transmission);this.transmissionMap&&this.transmissionMap.isTexture&&(d.transmissionMap=this.transmissionMap.toJSON(a).uuid);void 0!==this.thickness&&(d.thickness=this.thickness);this.thicknessMap&&this.thicknessMap.isTexture&&(d.thicknessMap=this.thicknessMap.toJSON(a).uuid);void 0!==this.attenuationDistance&&(d.attenuationDistance=this.attenuationDistance);void 0!==this.attenuationColor&&(d.attenuationColor=this.attenuationColor.getHex());void 0!==
this.size&&(d.size=this.size);null!==this.shadowSide&&(d.shadowSide=this.shadowSide);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);0!==this.side&&(d.side=this.side);this.vertexColors&&(d.vertexColors=!0);1>this.opacity&&(d.opacity=this.opacity);1023!==this.format&&(d.format=this.format);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=this.depthWrite;d.colorWrite=
this.colorWrite;d.stencilWrite=this.stencilWrite;d.stencilWriteMask=this.stencilWriteMask;d.stencilFunc=this.stencilFunc;d.stencilRef=this.stencilRef;d.stencilFuncMask=this.stencilFuncMask;d.stencilFail=this.stencilFail;d.stencilZFail=this.stencilZFail;d.stencilZPass=this.stencilZPass;this.rotation&&0!==this.rotation&&(d.rotation=this.rotation);!0===this.polygonOffset&&(d.polygonOffset=!0);0!==this.polygonOffsetFactor&&(d.polygonOffsetFactor=this.polygonOffsetFactor);0!==this.polygonOffsetUnits&&
(d.polygonOffsetUnits=this.polygonOffsetUnits);this.linewidth&&1!==this.linewidth&&(d.linewidth=this.linewidth);void 0!==this.dashSize&&(d.dashSize=this.dashSize);void 0!==this.gapSize&&(d.gapSize=this.gapSize);void 0!==this.scale&&(d.scale=this.scale);!0===this.dithering&&(d.dithering=!0);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.alphaToCoverage&&(d.alphaToCoverage=this.alphaToCoverage);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&
(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===this.flatShading&&(d.flatShading=this.flatShading);!1===this.visible&&(d.visible=!1);!1===this.toneMapped&&(d.toneMapped=!1);"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=
c),0<a.length&&(d.images=a));return d}clone(){return(new this.constructor).copy(this)}copy(a){this.name=a.name;this.fog=a.fog;this.blending=a.blending;this.side=a.side;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.format=a.format;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;
this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.stencilWriteMask=a.stencilWriteMask;this.stencilFunc=a.stencilFunc;this.stencilRef=a.stencilRef;this.stencilFuncMask=a.stencilFuncMask;this.stencilFail=a.stencilFail;this.stencilZFail=a.stencilZFail;this.stencilZPass=a.stencilZPass;this.stencilWrite=a.stencilWrite;const b=a.clippingPlanes;let c=null;if(null!==b){const d=b.length;c=Array(d);for(let e=0;e!==d;++e)c[e]=b[e].clone()}this.clippingPlanes=c;this.clipIntersection=a.clipIntersection;
this.clipShadows=a.clipShadows;this.shadowSide=a.shadowSide;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.alphaToCoverage=a.alphaToCoverage;this.premultipliedAlpha=a.premultipliedAlpha;this.visible=a.visible;this.toneMapped=a.toneMapped;this.userData=JSON.parse(JSON.stringify(a.userData));return this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(a){!0===
a&&this.version++}}zb.prototype.isMaterial=!0;const cj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,
darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,
green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,
lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,
palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,
steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Pb={h:0,s:0,l:0},Qf={h:0,s:0,l:0};class ua{constructor(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)}set(a){a&&a.isColor?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this}setScalar(a){this.b=this.g=this.r=a;return this}setHex(a){a=Math.floor(a);
this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this}setRGB(a,b,c){this.r=a;this.g=b;this.b=c;return this}setHSL(a,b,c){a=Mb(a,1);b=Ua(b,0,1);c=Ua(c,0,1);0===b?this.r=this.g=this.b=c:(b=.5>=c?c*(1+b):c+b-c*b,c=2*c-b,this.r=ia(c,b,a+1/3),this.g=ia(c,b,a),this.b=ia(c,b,a-1/3));return this}setStyle(a){function b(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=
/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[4]),this;if(c=/^\s*(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[4]),this;break;case "hsl":case "hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d)){d=
parseFloat(c[1])/360;const e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[4]);return this.setHSL(d,e,f)}}}else if(c=/^#([A-Fa-f\d]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return a&&
0<a.length?this.setColorName(a):this}setColorName(a){const b=cj[a.toLowerCase()];void 0!==b?this.setHex(b):console.warn("THREE.Color: Unknown color "+a);return this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(a){this.r=a.r;this.g=a.g;this.b=a.b;return this}copySRGBToLinear(a){this.r=Oc(a.r);this.g=Oc(a.g);this.b=Oc(a.b);return this}copyLinearToSRGB(a){this.r=Pa(a.r);this.g=Pa(a.g);this.b=Pa(a.b);return this}convertSRGBToLinear(){this.copySRGBToLinear(this);return this}convertLinearToSRGB(){this.copyLinearToSRGB(this);
return this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(a){const b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d);var f=Math.min(b,c,d);let g;const h=(f+e)/2;if(f===e)f=g=0;else{const k=e-f;f=.5>=h?k/(e+f):k/(2-e-f);switch(e){case b:g=(c-d)/k+(c<d?6:0);break;case c:g=(d-b)/k+2;break;case d:g=(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return a}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(a,
b,c){this.getHSL(Pb);Pb.h+=a;Pb.s+=b;Pb.l+=c;this.setHSL(Pb.h,Pb.s,Pb.l);return this}add(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this}addColors(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this}addScalar(a){this.r+=a;this.g+=a;this.b+=a;return this}sub(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this}multiply(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this}multiplyScalar(a){this.r*=a;this.g*=a;this.b*=a;return this}lerp(a,
b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this}lerpColors(a,b,c){this.r=a.r+(b.r-a.r)*c;this.g=a.g+(b.g-a.g)*c;this.b=a.b+(b.b-a.b)*c;return this}lerpHSL(a,b){this.getHSL(Pb);a.getHSL(Qf);a=lc(Pb.h,Qf.h,b);const c=lc(Pb.s,Qf.s,b);b=lc(Pb.l,Qf.l,b);this.setHSL(a,c,b);return this}equals(a){return a.r===this.r&&a.g===this.g&&a.b===this.b}fromArray(a,b){b=void 0===b?0:b;this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this}toArray(a,b){a=void 0===a?[]:a;b=void 0===b?
0:b;a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a}fromBufferAttribute(a,b){this.r=a.getX(b);this.g=a.getY(b);this.b=a.getZ(b);!0===a.normalized&&(this.r/=255,this.g/=255,this.b/=255);return this}toJSON(){return this.getHex()}}ua.NAMES=cj;ua.prototype.isColor=!0;ua.prototype.r=1;ua.prototype.g=1;ua.prototype.b=1;class Hc extends zb{constructor(a){super();this.type="MeshBasicMaterial";this.color=new ua(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=
1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=
a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;return this}}Hc.prototype.isMeshBasicMaterial=!0;const ib=new C,Rf=new la;class $a{constructor(a,b,c){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="";this.array=a;this.itemSize=b;this.count=void 0!==a?
a.length/b:0;this.normalized=!0===c;this.usage=35044;this.updateRange={offset:0,count:-1};this.version=0}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}setUsage(a){this.usage=a;return this}copy(a){this.name=a.name;this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;this.usage=a.usage;return this}copyAt(a,b,c){a*=this.itemSize;c*=b.itemSize;for(let d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this}copyArray(a){this.array.set(a);
return this}copyColorsArray(a){const b=this.array;let c=0;for(let d=0,e=a.length;d<e;d++){let f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),f=new ua);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this}copyVector2sArray(a){const b=this.array;let c=0;for(let d=0,e=a.length;d<e;d++){let f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),f=new la);b[c++]=f.x;b[c++]=f.y}return this}copyVector3sArray(a){const b=
this.array;let c=0;for(let d=0,e=a.length;d<e;d++){let f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),f=new C);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this}copyVector4sArray(a){const b=this.array;let c=0;for(let d=0,e=a.length;d<e;d++){let f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),f=new cb);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this}applyMatrix3(a){if(2===this.itemSize)for(let b=
0,c=this.count;b<c;b++)Rf.fromBufferAttribute(this,b),Rf.applyMatrix3(a),this.setXY(b,Rf.x,Rf.y);else if(3===this.itemSize)for(let b=0,c=this.count;b<c;b++)ib.fromBufferAttribute(this,b),ib.applyMatrix3(a),this.setXYZ(b,ib.x,ib.y,ib.z);return this}applyMatrix4(a){for(let b=0,c=this.count;b<c;b++)ib.x=this.getX(b),ib.y=this.getY(b),ib.z=this.getZ(b),ib.applyMatrix4(a),this.setXYZ(b,ib.x,ib.y,ib.z);return this}applyNormalMatrix(a){for(let b=0,c=this.count;b<c;b++)ib.x=this.getX(b),ib.y=this.getY(b),
ib.z=this.getZ(b),ib.applyNormalMatrix(a),this.setXYZ(b,ib.x,ib.y,ib.z);return this}transformDirection(a){for(let b=0,c=this.count;b<c;b++)ib.x=this.getX(b),ib.y=this.getY(b),ib.z=this.getZ(b),ib.transformDirection(a),this.setXYZ(b,ib.x,ib.y,ib.z);return this}set(a,b){this.array.set(a,void 0===b?0:b);return this}getX(a){return this.array[a*this.itemSize]}setX(a,b){this.array[a*this.itemSize]=b;return this}getY(a){return this.array[a*this.itemSize+1]}setY(a,b){this.array[a*this.itemSize+1]=b;return this}getZ(a){return this.array[a*
this.itemSize+2]}setZ(a,b){this.array[a*this.itemSize+2]=b;return this}getW(a){return this.array[a*this.itemSize+3]}setW(a,b){this.array[a*this.itemSize+3]=b;return this}setXY(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this}setXYZ(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this}setXYZW(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this}onUpload(a){this.onUploadCallback=
a;return this}clone(){return(new this.constructor(this.array,this.itemSize)).copy(this)}toJSON(){const a={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};""!==this.name&&(a.name=this.name);35044!==this.usage&&(a.usage=this.usage);if(0!==this.updateRange.offset||-1!==this.updateRange.count)a.updateRange=this.updateRange;return a}}$a.prototype.isBufferAttribute=!0;class dj extends $a{constructor(a,b,c){super(new Int8Array(a),
b,c)}}class ej extends $a{constructor(a,b,c){super(new Uint8Array(a),b,c)}}class fj extends $a{constructor(a,b,c){super(new Uint8ClampedArray(a),b,c)}}class gj extends $a{constructor(a,b,c){super(new Int16Array(a),b,c)}}class vf extends $a{constructor(a,b,c){super(new Uint16Array(a),b,c)}}class hj extends $a{constructor(a,b,c){super(new Int32Array(a),b,c)}}class uf extends $a{constructor(a,b,c){super(new Uint32Array(a),b,c)}}class ij extends $a{constructor(a,b,c){super(new Uint16Array(a),b,c)}}ij.prototype.isFloat16BufferAttribute=
!0;class za extends $a{constructor(a,b,c){super(new Float32Array(a),b,c)}}class jj extends $a{constructor(a,b,c){super(new Float64Array(a),b,c)}}let Ll=0;const ac=new Da,eh=new Va,de=new C,Wb=new Vb,Ke=new Vb,Ab=new C;class Ma extends Zc{constructor(){super();Object.defineProperty(this,"id",{value:Ll++});this.uuid=Ta();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.morphTargetsRelative=!1;this.groups=[];this.boundingSphere=this.boundingBox=
null;this.drawRange={start:0,count:Infinity};this.userData={}}getIndex(){return this.index}setIndex(a){Array.isArray(a)?this.index=new (65535<nc(a)?uf:vf)(a,1):this.index=a;return this}getAttribute(a){return this.attributes[a]}setAttribute(a,b){this.attributes[a]=b;return this}deleteAttribute(a){delete this.attributes[a];return this}hasAttribute(a){return void 0!==this.attributes[a]}addGroup(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0===c?0:c})}clearGroups(){this.groups=[]}setDrawRange(a,
b){this.drawRange.start=a;this.drawRange.count=b}applyMatrix4(a){var b=this.attributes.position;void 0!==b&&(b.applyMatrix4(a),b.needsUpdate=!0);b=this.attributes.normal;if(void 0!==b){const c=(new xb).getNormalMatrix(a);b.applyNormalMatrix(c);b.needsUpdate=!0}b=this.attributes.tangent;void 0!==b&&(b.transformDirection(a),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this}applyQuaternion(a){ac.makeRotationFromQuaternion(a);
this.applyMatrix4(ac);return this}rotateX(a){ac.makeRotationX(a);this.applyMatrix4(ac);return this}rotateY(a){ac.makeRotationY(a);this.applyMatrix4(ac);return this}rotateZ(a){ac.makeRotationZ(a);this.applyMatrix4(ac);return this}translate(a,b,c){ac.makeTranslation(a,b,c);this.applyMatrix4(ac);return this}scale(a,b,c){ac.makeScale(a,b,c);this.applyMatrix4(ac);return this}lookAt(a){eh.lookAt(a);eh.updateMatrix();this.applyMatrix4(eh.matrix);return this}center(){this.computeBoundingBox();this.boundingBox.getCenter(de).negate();
this.translate(de.x,de.y,de.z);return this}setFromPoints(a){const b=[];for(let c=0,d=a.length;c<d;c++){const e=a[c];b.push(e.x,e.y,e.z||0)}this.setAttribute("position",new za(b,3));return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Vb);const a=this.attributes.position,b=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',
this),this.boundingBox.set(new C(-Infinity,-Infinity,-Infinity),new C(Infinity,Infinity,Infinity));else{if(void 0!==a){if(this.boundingBox.setFromBufferAttribute(a),b)for(let c=0,d=b.length;c<d;c++)Wb.setFromBufferAttribute(b[c]),this.morphTargetsRelative?(Ab.addVectors(this.boundingBox.min,Wb.min),this.boundingBox.expandByPoint(Ab),Ab.addVectors(this.boundingBox.max,Wb.max),this.boundingBox.expandByPoint(Ab)):(this.boundingBox.expandByPoint(Wb.min),this.boundingBox.expandByPoint(Wb.max))}else this.boundingBox.makeEmpty();
(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new bd);const a=this.attributes.position,b=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
this),this.boundingSphere.set(new C,Infinity);else if(a){const c=this.boundingSphere.center;Wb.setFromBufferAttribute(a);if(b)for(let e=0,f=b.length;e<f;e++)Ke.setFromBufferAttribute(b[e]),this.morphTargetsRelative?(Ab.addVectors(Wb.min,Ke.min),Wb.expandByPoint(Ab),Ab.addVectors(Wb.max,Ke.max),Wb.expandByPoint(Ab)):(Wb.expandByPoint(Ke.min),Wb.expandByPoint(Ke.max));Wb.getCenter(c);let d=0;for(let e=0,f=a.count;e<f;e++)Ab.fromBufferAttribute(a,e),d=Math.max(d,c.distanceToSquared(Ab));if(b)for(let e=
0,f=b.length;e<f;e++){const g=b[e],h=this.morphTargetsRelative;for(let k=0,l=g.count;k<l;k++)Ab.fromBufferAttribute(g,k),h&&(de.fromBufferAttribute(a,k),Ab.add(de)),d=Math.max(d,c.distanceToSquared(Ab))}this.boundingSphere.radius=Math.sqrt(d);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){function a(U,V,W){n.fromArray(e,3*U);r.fromArray(e,3*V);v.fromArray(e,
3*W);t.fromArray(g,2*U);y.fromArray(g,2*V);E.fromArray(g,2*W);r.sub(n);v.sub(n);y.sub(t);E.sub(t);const da=1/(y.x*E.y-E.x*y.y);isFinite(da)&&(M.copy(r).multiplyScalar(E.y).addScaledVector(v,-y.y).multiplyScalar(da),q.copy(v).multiplyScalar(y.x).addScaledVector(r,-E.x).multiplyScalar(da),l[U].add(M),l[V].add(M),l[W].add(M),m[U].add(q),m[V].add(q),m[W].add(q))}function b(U){S.fromArray(f,3*U);P.copy(S);var V=l[U];J.copy(V);J.sub(S.multiplyScalar(S.dot(V))).normalize();K.crossVectors(P,V);V=K.dot(m[U]);
k[4*U]=J.x;k[4*U+1]=J.y;k[4*U+2]=J.z;k[4*U+3]=0>V?-1:1}var c=this.index,d=this.attributes;if(null===c||void 0===d.position||void 0===d.normal||void 0===d.uv)console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");else{c=c.array;var e=d.position.array,f=d.normal.array,g=d.uv.array,h=e.length/3;void 0===d.tangent&&this.setAttribute("tangent",new $a(new Float32Array(4*h),4));var k=d.tangent.array,l=[],m=[];for(d=0;d<h;d++)l[d]=new C,
m[d]=new C;var n=new C,r=new C,v=new C,t=new la,y=new la,E=new la,M=new C,q=new C;d=this.groups;0===d.length&&(d=[{start:0,count:c.length}]);for(let U=0,V=d.length;U<V;++U){var H=d[U];h=H.start;H=H.count;for(let W=h,da=h+H;W<da;W+=3)a(c[W+0],c[W+1],c[W+2])}var J=new C,K=new C,S=new C,P=new C;for(let U=0,V=d.length;U<V;++U){H=d[U];h=H.start;H=H.count;for(let W=h,da=h+H;W<da;W+=3)b(c[W+0]),b(c[W+1]),b(c[W+2])}}}computeVertexNormals(){const a=this.index,b=this.getAttribute("position");if(void 0!==b){let c=
this.getAttribute("normal");if(void 0===c)c=new $a(new Float32Array(3*b.count),3),this.setAttribute("normal",c);else for(let n=0,r=c.count;n<r;n++)c.setXYZ(n,0,0,0);const d=new C,e=new C,f=new C,g=new C,h=new C,k=new C,l=new C,m=new C;if(a)for(let n=0,r=a.count;n<r;n+=3){const v=a.getX(n+0),t=a.getX(n+1),y=a.getX(n+2);d.fromBufferAttribute(b,v);e.fromBufferAttribute(b,t);f.fromBufferAttribute(b,y);l.subVectors(f,e);m.subVectors(d,e);l.cross(m);g.fromBufferAttribute(c,v);h.fromBufferAttribute(c,t);
k.fromBufferAttribute(c,y);g.add(l);h.add(l);k.add(l);c.setXYZ(v,g.x,g.y,g.z);c.setXYZ(t,h.x,h.y,h.z);c.setXYZ(y,k.x,k.y,k.z)}else for(let n=0,r=b.count;n<r;n+=3)d.fromBufferAttribute(b,n+0),e.fromBufferAttribute(b,n+1),f.fromBufferAttribute(b,n+2),l.subVectors(f,e),m.subVectors(d,e),l.cross(m),c.setXYZ(n+0,l.x,l.y,l.z),c.setXYZ(n+1,l.x,l.y,l.z),c.setXYZ(n+2,l.x,l.y,l.z);this.normalizeNormals();c.needsUpdate=!0}}merge(a,b){if(a&&a.isBufferGeometry){void 0===b&&(b=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset\x3d0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));
var c=this.attributes;for(const e in c){if(void 0===a.attributes[e])continue;const f=c[e].array;var d=a.attributes[e];const g=d.array;d=d.itemSize*b;const h=Math.min(g.length,f.length-d);for(let k=0,l=d;k<h;k++,l++)f[l]=g[k]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)}normalizeNormals(){const a=this.attributes.normal;for(let b=0,c=a.count;b<c;b++)Ab.fromBufferAttribute(a,b),Ab.normalize(),a.setXYZ(b,Ab.x,Ab.y,Ab.z)}toNonIndexed(){function a(h,
k){const l=h.array,m=h.itemSize,n=h.normalized,r=new l.constructor(k.length*m);let v,t=0;for(let y=0,E=k.length;y<E;y++){v=h.isInterleavedBufferAttribute?k[y]*h.data.stride+h.offset:k[y]*m;for(let M=0;M<m;M++)r[t++]=l[v++]}return new $a(r,m,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const b=new Ma;var c=this.index.array,d=this.attributes;for(var e in d){var f=a(d[e],c);b.setAttribute(e,f)}d=this.morphAttributes;for(var g in d){e=
[];f=d[g];for(let h=0,k=f.length;h<k;h++){const l=a(f[h],c);e.push(l)}b.morphAttributes[g]=e}b.morphTargetsRelative=this.morphTargetsRelative;c=this.groups;for(let h=0,k=c.length;h<k;h++)g=c[h],b.addGroup(g.start,g.count,g.materialIndex);return b}toJSON(){const a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);0<Object.keys(this.userData).length&&(a.userData=this.userData);if(void 0!==this.parameters){var b=
this.parameters;for(var c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};c=this.index;null!==c&&(a.data.index={type:c.array.constructor.name,array:Array.prototype.slice.call(c.array)});c=this.attributes;for(var d in c)a.data.attributes[d]=c[d].toJSON(a.data);d={};c=!1;for(b in this.morphAttributes){const e=this.morphAttributes[b],f=[];for(let g=0,h=e.length;g<h;g++)f.push(e[g].toJSON(a.data));0<f.length&&(d[b]=f,c=!0)}c&&(a.data.morphAttributes=d,a.data.morphTargetsRelative=this.morphTargetsRelative);
b=this.groups;0<b.length&&(a.data.groups=JSON.parse(JSON.stringify(b)));b=this.boundingSphere;null!==b&&(a.data.boundingSphere={center:b.center.toArray(),radius:b.radius});return a}clone(){return(new this.constructor).copy(this)}copy(a){this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;var b={};this.name=a.name;var c=a.index;null!==c&&this.setIndex(c.clone(b));c=a.attributes;for(var d in c)this.setAttribute(d,c[d].clone(b));d=a.morphAttributes;
for(var e in d){c=[];const f=d[e];for(let g=0,h=f.length;g<h;g++)c.push(f[g].clone(b));this.morphAttributes[e]=c}this.morphTargetsRelative=a.morphTargetsRelative;b=a.groups;for(let f=0,g=b.length;f<g;f++)e=b[f],this.addGroup(e.start,e.count,e.materialIndex);b=a.boundingBox;null!==b&&(this.boundingBox=b.clone());b=a.boundingSphere;null!==b&&(this.boundingSphere=b.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;this.userData=a.userData;void 0!==a.parameters&&(this.parameters=
Object.assign({},a.parameters));return this}dispose(){this.dispatchEvent({type:"dispose"})}}Ma.prototype.isBufferGeometry=!0;const kj=new Da,ee=new dd,fh=new bd,Pc=new C,Qc=new C,Rc=new C,xg=new C,yg=new C,zg=new C,lf=new C,mf=new C,nf=new C,pf=new la,qf=new la,rf=new la,Ag=new C,of=new C;class ub extends Va{constructor(a,b){a=void 0===a?new Ma:a;b=void 0===b?new Hc:b;super();this.type="Mesh";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a){super.copy(a);void 0!==a.morphTargetInfluences&&
(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));this.material=a.material;this.geometry=a.geometry;return this}updateMorphTargets(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(let c=0,d=a.length;c<d;c++)b=a[c].name||String(c),this.morphTargetInfluences.push(0),
this.morphTargetDictionary[b]=c}}else a=a.morphTargets,void 0!==a&&0<a.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}raycast(a,b){var c=this.geometry;const d=this.material;var e=this.matrixWorld;if(void 0!==d&&(null===c.boundingSphere&&c.computeBoundingSphere(),fh.copy(c.boundingSphere),fh.applyMatrix4(e),!1!==a.ray.intersectsSphere(fh)&&(kj.copy(e).invert(),ee.copy(a.ray).applyMatrix4(kj),null===c.boundingBox||!1!==ee.intersectsBox(c.boundingBox))))if(c.isBufferGeometry){var f=
c.index;e=c.attributes.position;const n=c.morphAttributes.position,r=c.morphTargetsRelative,v=c.attributes.uv,t=c.attributes.uv2;var g=c.groups;c=c.drawRange;if(null!==f)if(Array.isArray(d))for(let y=0,E=g.length;y<E;y++){var h=g[y],k=d[h.materialIndex];var l=Math.max(h.start,c.start);var m=Math.min(f.count,Math.min(h.start+h.count,c.start+c.count));for(let M=l,q=m;M<q;M+=3){l=f.getX(M);m=f.getX(M+1);const H=f.getX(M+2);if(l=uc(this,k,a,ee,e,n,r,v,t,l,m,H))l.faceIndex=Math.floor(M/3),l.face.materialIndex=
h.materialIndex,b.push(l)}}else{g=Math.max(0,c.start);c=Math.min(f.count,c.start+c.count);for(let y=g,E=c;y<E;y+=3)if(c=f.getX(y),g=f.getX(y+1),h=f.getX(y+2),l=uc(this,d,a,ee,e,n,r,v,t,c,g,h))l.faceIndex=Math.floor(y/3),b.push(l)}else if(void 0!==e)if(Array.isArray(d))for(let y=0,E=g.length;y<E;y++){f=g[y];h=d[f.materialIndex];k=Math.max(f.start,c.start);l=Math.min(e.count,Math.min(f.start+f.count,c.start+c.count));for(let M=k,q=l;M<q;M+=3)if(l=uc(this,h,a,ee,e,n,r,v,t,M,M+1,M+2))l.faceIndex=Math.floor(M/
3),l.face.materialIndex=f.materialIndex,b.push(l)}else{f=Math.max(0,c.start);c=Math.min(e.count,c.start+c.count);for(let y=f,E=c;y<E;y+=3)if(l=uc(this,d,a,ee,e,n,r,v,t,y,y+1,y+2))l.faceIndex=Math.floor(y/3),b.push(l)}}else c.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}ub.prototype.isMesh=!0;class Tc extends Ma{constructor(a,b,c,d,e,f){function g(t,y,E,M,q,H,J,K,S,P,U){const V=H/S,W=J/P,da=H/2,ka=J/2,ya=K/2;J=S+1;const pa=
P+1;let Ia=H=0;const wa=new C;for(let na=0;na<pa;na++){const qa=na*W-ka;for(let Ca=0;Ca<J;Ca++)wa[t]=(Ca*V-da)*M,wa[y]=qa*q,wa[E]=ya,l.push(wa.x,wa.y,wa.z),wa[t]=0,wa[y]=0,wa[E]=0<K?1:-1,m.push(wa.x,wa.y,wa.z),n.push(Ca/S),n.push(1-na/P),H+=1}for(t=0;t<P;t++)for(y=0;y<S;y++)E=r+y+J*(t+1),M=r+(y+1)+J*(t+1),q=r+(y+1)+J*t,k.push(r+y+J*t,E,q),k.push(E,M,q),Ia+=6;h.addGroup(v,Ia,U);v+=Ia;r+=H}a=void 0===a?1:a;b=void 0===b?1:b;c=void 0===c?1:c;d=void 0===d?1:d;e=void 0===e?1:e;f=void 0===f?1:f;super();
this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};const h=this;d=Math.floor(d);e=Math.floor(e);f=Math.floor(f);const k=[],l=[],m=[],n=[];let r=0,v=0;g("z","y","x",-1,-1,c,b,a,f,e,0);g("z","y","x",1,-1,c,b,-a,f,e,1);g("x","z","y",1,1,a,c,b,d,f,2);g("x","z","y",1,-1,a,c,-b,d,f,3);g("x","y","z",1,-1,a,b,c,d,e,4);g("x","y","z",-1,-1,a,b,-c,d,e,5);this.setIndex(k);this.setAttribute("position",new za(l,3));this.setAttribute("normal",new za(m,
3));this.setAttribute("uv",new za(n,2))}static fromJSON(a){return new Tc(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}const vi={clone:cc,merge:qb};class vc extends zb{constructor(a){super();this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position \x3d projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor \x3d vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=
1;this.wireframe=!1;this.wireframeLinewidth=1;this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=!1;this.glslVersion=null;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}copy(a){super.copy(a);this.fragmentShader=
a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=cc(a.uniforms);this.defines=Object.assign({},a.defines);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.extensions=Object.assign({},a.extensions);this.glslVersion=a.glslVersion;return this}toJSON(a){const b=super.toJSON(a);b.glslVersion=this.glslVersion;b.uniforms={};for(const c in this.uniforms){const d=this.uniforms[c].value;b.uniforms[c]=d&&d.isTexture?{type:"t",
value:d.toJSON(a).uuid}:d&&d.isColor?{type:"c",value:d.getHex()}:d&&d.isVector2?{type:"v2",value:d.toArray()}:d&&d.isVector3?{type:"v3",value:d.toArray()}:d&&d.isVector4?{type:"v4",value:d.toArray()}:d&&d.isMatrix3?{type:"m3",value:d.toArray()}:d&&d.isMatrix4?{type:"m4",value:d.toArray()}:{value:d}}0<Object.keys(this.defines).length&&(b.defines=this.defines);b.vertexShader=this.vertexShader;b.fragmentShader=this.fragmentShader;a={};for(const c in this.extensions)!0===this.extensions[c]&&(a[c]=!0);
0<Object.keys(a).length&&(b.extensions=a);return b}}vc.prototype.isShaderMaterial=!0;class Le extends Va{constructor(){super();this.type="Camera";this.matrixWorldInverse=new Da;this.projectionMatrix=new Da;this.projectionMatrixInverse=new Da}copy(a,b){super.copy(a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);this.projectionMatrixInverse.copy(a.projectionMatrixInverse);return this}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const b=this.matrixWorld.elements;
return a.set(-b[8],-b[9],-b[10]).normalize()}updateMatrixWorld(a){super.updateMatrixWorld(a);this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(a,b){super.updateWorldMatrix(a,b);this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Le.prototype.isCamera=!0;class Bb extends Le{constructor(a,b,c,d){a=void 0===a?50:a;b=void 0===b?1:b;c=void 0===c?.1:c;d=void 0===d?2E3:d;super();this.type="PerspectiveCamera";this.fov=a;this.zoom=
1;this.near=c;this.far=d;this.focus=10;this.aspect=b;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}copy(a,b){super.copy(a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this}setFocalLength(a){a=.5*this.getFilmHeight()/a;this.fov=2*Ge*Math.atan(a);this.updateProjectionMatrix()}getFocalLength(){const a=
Math.tan(.5*rd*this.fov);return.5*this.getFilmHeight()/a}getEffectiveFOV(){return 2*Ge*Math.atan(Math.tan(.5*rd*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(a,b,c,d,e,f){this.aspect=a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=
d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()}updateProjectionMatrix(){const a=this.near;let b=a*Math.tan(.5*rd*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d;var f=this.view;if(null!==this.view&&this.view.enabled){const g=f.fullWidth,h=f.fullHeight;e+=f.offsetX*d/g;b-=f.offsetY*c/h;d*=f.width/g;c*=f.height/h}f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());this.projectionMatrix.makePerspective(e,
e+d,b,b-c,a,this.far);this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){a=super.toJSON(a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}}Bb.prototype.isPerspectiveCamera=!0;class Sf extends Va{constructor(a,b,c){super();this.type="CubeCamera";
!0!==c.isWebGLCubeRenderTarget?console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."):(this.renderTarget=c,c=new Bb(90,1,a,b),c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new C(1,0,0)),this.add(c),c=new Bb(90,1,a,b),c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new C(-1,0,0)),this.add(c),c=new Bb(90,1,a,b),c.layers=this.layers,c.up.set(0,0,1),c.lookAt(new C(0,1,0)),this.add(c),c=new Bb(90,1,a,b),c.layers=this.layers,c.up.set(0,0,
-1),c.lookAt(new C(0,-1,0)),this.add(c),c=new Bb(90,1,a,b),c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new C(0,0,1)),this.add(c),a=new Bb(90,1,a,b),a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new C(0,0,-1)),this.add(a))}update(a,b){null===this.parent&&this.updateMatrixWorld();const c=this.renderTarget,[d,e,f,g,h,k]=this.children,l=a.xr.enabled,m=a.getRenderTarget();a.xr.enabled=!1;const n=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;a.setRenderTarget(c,0);a.render(b,d);a.setRenderTarget(c,
1);a.render(b,e);a.setRenderTarget(c,2);a.render(b,f);a.setRenderTarget(c,3);a.render(b,g);a.setRenderTarget(c,4);a.render(b,h);c.texture.generateMipmaps=n;a.setRenderTarget(c,5);a.render(b,k);a.setRenderTarget(m);a.xr.enabled=l}}class fe extends yb{constructor(a,b,c,d,e,f,g,h,k,l){a=void 0!==a?a:[];super(a,void 0!==b?b:301,c,d,e,f,g,h,k,l);this.flipY=!1}get images(){return this.image}set images(a){this.image=a}}fe.prototype.isCubeTexture=!0;class sf extends Rb{constructor(a,b,c){Number.isInteger(b)&&
(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),b=c);super(a,a,b);b=b||{};this.texture=new fe(void 0,b.mapping,b.wrapS,b.wrapT,b.magFilter,b.minFilter,b.format,b.type,b.anisotropy,b.encoding);this.texture.isRenderTargetTexture=!0;this.texture.generateMipmaps=void 0!==b.generateMipmaps?b.generateMipmaps:!1;this.texture.minFilter=void 0!==b.minFilter?b.minFilter:1006;this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(a,b){this.texture.type=
b.type;this.texture.format=1023;this.texture.encoding=b.encoding;this.texture.generateMipmaps=b.generateMipmaps;this.texture.minFilter=b.minFilter;this.texture.magFilter=b.magFilter;var c=new Tc(5,5,5),d=new vc({name:"CubemapFromEquirect",uniforms:cc({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include \x3cbegin_vertex\x3e\n\t\t\t\t\t#include \x3cproject_vertex\x3e\n\n\t\t\t\t}\n\t\t\t",
fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include \x3ccommon\x3e\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction \x3d normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV \x3d equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor \x3d texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});d.uniforms.tEquirect.value=b;c=new ub(c,d);d=b.minFilter;1008===b.minFilter&&(b.minFilter=1006);(new Sf(1,10,this)).update(a,
c);b.minFilter=d;c.geometry.dispose();c.material.dispose();return this}clear(a,b,c,d){const e=a.getRenderTarget();for(let f=0;6>f;f++)a.setRenderTarget(this,f),a.clear(b,c,d);a.setRenderTarget(e)}}sf.prototype.isWebGLCubeRenderTarget=!0;const gh=new C,Ml=new C,Nl=new xb;class oc{constructor(a,b){this.normal=a=void 0===a?new C(1,0,0):a;this.constant=void 0===b?0:b}set(a,b){this.normal.copy(a);this.constant=b;return this}setComponents(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this}setFromNormalAndCoplanarPoint(a,
b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this}setFromCoplanarPoints(a,b,c){b=gh.subVectors(c,b).cross(Ml.subVectors(a,b)).normalize();this.setFromNormalAndCoplanarPoint(b,a);return this}copy(a){this.normal.copy(a.normal);this.constant=a.constant;return this}normalize(){const a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this}negate(){this.constant*=-1;this.normal.negate();return this}distanceToPoint(a){return this.normal.dot(a)+this.constant}distanceToSphere(a){return this.distanceToPoint(a.center)-
a.radius}projectPoint(a,b){return b.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)}intersectLine(a,b){const c=a.delta(gh);var d=this.normal.dot(c);if(0===d)return 0===this.distanceToPoint(a.start)?b.copy(a.start):null;d=-(a.start.dot(this.normal)+this.constant)/d;return 0>d||1<d?null:b.copy(c).multiplyScalar(d).add(a.start)}intersectsLine(a){const b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b}intersectsBox(a){return a.intersectsPlane(this)}intersectsSphere(a){return a.intersectsPlane(this)}coplanarPoint(a){return a.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(a,
b){b=b||Nl.getNormalMatrix(a);a=this.coplanarPoint(gh).applyMatrix4(a);b=this.normal.applyMatrix3(b).normalize();this.constant=-a.dot(b);return this}translate(a){this.constant-=a.dot(this.normal);return this}equals(a){return a.normal.equals(this.normal)&&a.constant===this.constant}clone(){return(new this.constructor).copy(this)}}oc.prototype.isPlane=!0;const ge=new bd,Tf=new C;class ve{constructor(a,b,c,d,e,f){a=void 0===a?new oc:a;b=void 0===b?new oc:b;c=void 0===c?new oc:c;d=void 0===d?new oc:d;
e=void 0===e?new oc:e;f=void 0===f?new oc:f;this.planes=[a,b,c,d,e,f]}set(a,b,c,d,e,f){const g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return this}copy(a){const b=this.planes;for(let c=0;6>c;c++)b[c].copy(a.planes[c]);return this}setFromProjectionMatrix(a){const b=this.planes;var c=a.elements;a=c[0];const d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],l=c[7],m=c[8],n=c[9],r=c[10],v=c[11],t=c[12],y=c[13],E=c[14];c=c[15];b[0].setComponents(f-a,l-g,v-m,c-
t).normalize();b[1].setComponents(f+a,l+g,v+m,c+t).normalize();b[2].setComponents(f+d,l+h,v+n,c+y).normalize();b[3].setComponents(f-d,l-h,v-n,c-y).normalize();b[4].setComponents(f-e,l-k,v-r,c-E).normalize();b[5].setComponents(f+e,l+k,v+r,c+E).normalize();return this}intersectsObject(a){const b=a.geometry;null===b.boundingSphere&&b.computeBoundingSphere();ge.copy(b.boundingSphere).applyMatrix4(a.matrixWorld);return this.intersectsSphere(ge)}intersectsSprite(a){ge.center.set(0,0,0);ge.radius=.7071067811865476;
ge.applyMatrix4(a.matrixWorld);return this.intersectsSphere(ge)}intersectsSphere(a){const b=this.planes,c=a.center;a=-a.radius;for(let d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0}intersectsBox(a){const b=this.planes;for(let c=0;6>c;c++){const d=b[c];Tf.x=0<d.normal.x?a.max.x:a.min.x;Tf.y=0<d.normal.y?a.max.y:a.min.y;Tf.z=0<d.normal.z?a.max.z:a.min.z;if(0>d.distanceToPoint(Tf))return!1}return!0}containsPoint(a){const b=this.planes;for(let c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;
return!0}clone(){return(new this.constructor).copy(this)}}class Id extends Ma{constructor(a,b,c,d){a=void 0===a?1:a;b=void 0===b?1:b;c=void 0===c?1:c;d=void 0===d?1:d;super();this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,f=b/2;c=Math.floor(c);d=Math.floor(d);const g=c+1;var h=d+1,k=a/c,l=b/d;b=[];a=[];const m=[],n=[];for(let r=0;r<h;r++){const v=r*l-f;for(let t=0;t<g;t++)a.push(t*k-e,-v,0),m.push(0,0,1),n.push(t/c),n.push(1-r/d)}for(e=0;e<
d;e++)for(f=0;f<c;f++)h=f+g*(e+1),k=f+1+g*(e+1),l=f+1+g*e,b.push(f+g*e,h,l),b.push(h,k,l);this.setIndex(b);this.setAttribute("position",new za(a,3));this.setAttribute("normal",new za(m,3));this.setAttribute("uv",new za(n,2))}static fromJSON(a){return new Id(a.width,a.height,a.widthSegments,a.heightSegments)}}const Sa={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a \x3c alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion \x3d ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *\x3d ambientOcclusion;\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( STANDARD )\n\t\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *\x3d computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed \x3d vec3( position );",beginnormal_vertex:"vec3 objectNormal \x3d vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent \x3d vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel \x3d exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gv \x3d dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl \x3d dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat denom \x3d pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha \x3d pow2( roughness );\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNL \x3d saturate( dot( normal, lightDir ) );\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat dotVH \x3d saturate( dot( viewDir, halfDir ) );\n\tvec3 F \x3d F_Schlick( f0, f90, dotVH );\n\tfloat V \x3d V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D \x3d D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE \x3d 64.0;\n\tconst float LUT_SCALE \x3d ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS \x3d 0.5 / LUT_SIZE;\n\tfloat dotNV \x3d saturate( dot( N, V ) );\n\tvec2 uv \x3d vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv \x3d uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l \x3d length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x \x3d dot( v1, v2 );\n\tfloat y \x3d abs( x );\n\tfloat a \x3d 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b \x3d 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v \x3d a / b;\n\tfloat theta_sintheta \x3d ( x \x3e 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 \x3d rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 \x3d rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal \x3d cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) \x3c 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 \x3d normalize( V - N * dot( V, N ) );\n\tT2 \x3d - cross( N, T1 );\n\tmat3 mat \x3d mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] \x3d mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] \x3d mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] \x3d mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] \x3d mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] \x3d normalize( coords[ 0 ] );\n\tcoords[ 1 ] \x3d normalize( coords[ 1 ] );\n\tcoords[ 2 ] \x3d normalize( coords[ 2 ] );\n\tcoords[ 3 ] \x3d normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor \x3d vec3( 0.0 );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result \x3d LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat dotVH \x3d saturate( dot( viewDir, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G \x3d G_BlinnPhong_Implicit( );\n\tfloat D \x3d D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha \x3d pow2( roughness );\n\tfloat invAlpha \x3d 1.0 / alpha;\n\tfloat cos2h \x3d dotNH * dotNH;\n\tfloat sin2h \x3d max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir \x3d normalize( lightDir + viewDir );\n\tfloat dotNL \x3d saturate( dot( normal, lightDir ) );\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat dotNH \x3d saturate( dot( normal, halfDir ) );\n\tfloat D \x3d D_Charlie( sheenRoughness, dotNH );\n\tfloat V \x3d V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx \x3d dFdx( vUv );\n\t\tvec2 dSTdy \x3d dFdy( vUv );\n\t\tfloat Hll \x3d bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx \x3d bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy \x3d bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX \x3d vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY \x3d vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN \x3d surf_norm;\n\t\tvec3 R1 \x3d cross( vSigmaY, vN );\n\t\tvec3 R2 \x3d cross( vN, vSigmaX );\n\t\tfloat fDet \x3d dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad \x3d sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane \x3d clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) \x3e plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES \x3c NUM_CLIPPING_PLANES\n\t\tbool clipped \x3d true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d UNION_CLIPPING_PLANES; i \x3c NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane \x3d clippingPlanes[ i ];\n\t\t\tclipped \x3d ( dot( vClipPosition, plane.xyz ) \x3e plane.w ) \x26\x26 clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES \x3e 0\n\tvClipPosition \x3d - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *\x3d vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *\x3d vColor;\n#endif",
color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor \x3d vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor \x3d vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *\x3d color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *\x3d instanceColor.xyz;\n#endif",
common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 \x3d x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a \x3d 12.9898, b \x3d 78.233, c \x3d 43758.5453;\n\thighp float dt \x3d dot( uv.xy, vec2( a,b ) ), sn \x3d mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent \x3d max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] \x3d vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] \x3d vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] \x3d vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights \x3d vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] \x3d\x3d - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u \x3d atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v \x3d asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection \x3d abs( direction );\n\t\tfloat face \x3d - 1.0;\n\t\tif ( absDirection.x \x3e absDirection.z ) {\n\t\t\tif ( absDirection.x \x3e absDirection.y )\n\t\t\t\tface \x3d direction.x \x3e 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface \x3d direction.y \x3e 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z \x3e absDirection.y )\n\t\t\t\tface \x3d direction.z \x3e 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface \x3d direction.y \x3e 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face \x3d\x3d 0.0 ) {\n\t\t\tuv \x3d vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face \x3d\x3d 1.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face \x3d\x3d 2.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face \x3d\x3d 3.0 ) {\n\t\t\tuv \x3d vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face \x3d\x3d 4.0 ) {\n\t\t\tuv \x3d vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv \x3d vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face \x3d getFace( direction );\n\t\tfloat filterInt \x3d max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt \x3d max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize \x3d exp2( mipInt );\n\t\tfloat texelSize \x3d 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv \x3d getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face \x3e 2.0 ) {\n\t\t\tuv.y +\x3d faceSize;\n\t\t\tface -\x3d 3.0;\n\t\t}\n\t\tuv.x +\x3d face * faceSize;\n\t\tif ( mipInt \x3c cubeUV_maxMipLevel ) {\n\t\t\tuv.y +\x3d 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y +\x3d filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x +\x3d 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *\x3d texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip \x3d 0.0;\n\t\tif ( roughness \x3e\x3d r1 ) {\n\t\t\tmip \x3d ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness \x3e\x3d r4 ) {\n\t\t\tmip \x3d ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness \x3e\x3d r5 ) {\n\t\t\tmip \x3d ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness \x3e\x3d r6 ) {\n\t\t\tmip \x3d ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip \x3d - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip \x3d clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF \x3d fract( mip );\n\t\tfloat mipInt \x3d floor( mip );\n\t\tvec3 color0 \x3d bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF \x3d\x3d 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 \x3d bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal \x3d objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m \x3d mat3( instanceMatrix );\n\ttransformedNormal /\x3d vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal \x3d m * transformedNormal;\n#endif\ntransformedNormal \x3d normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal \x3d - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent \x3d ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent \x3d - transformedTangent;\n\t#endif\n#endif",
displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed +\x3d normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor \x3d texture2D( emissiveMap, vUv );\n\temissiveColor.rgb \x3d emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *\x3d emissiveColor.rgb;\n#endif",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor \x3d linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag \x3d normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag \x3d normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec \x3d vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor \x3d textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor \x3d envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor \x3d textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor \x3d vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight \x3d mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight \x3d mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight +\x3d envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec \x3d reflect( - viewDir, normal );\n\t\t\t\treflectVec \x3d normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec \x3d refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec \x3d inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition \x3d worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex \x3d normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex \x3d normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tvFogDepth \x3d - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor \x3d 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor \x3d smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb \x3d mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL \x3d dot( normal, lightDirection );\n\tvec2 coord \x3d vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x \x3c 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel \x3d texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance \x3d lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *\x3d PI;\n\t#endif\n\treflectedLight.indirectDiffuse +\x3d lightMapIrradiance;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse \x3d vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position \x3d mvPosition.xyz;\ngeometry.normal \x3d normalize( transformedNormal );\ngeometry.viewDir \x3d ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position \x3d geometry.position;\nbackGeometry.normal \x3d -geometry.normal;\nbackGeometry.viewDir \x3d geometry.viewDir;\nvLightFront \x3d vec3( 0.0 );\nvIndirectFront \x3d vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack \x3d vec3( 0.0 );\n\tvIndirectBack \x3d vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront +\x3d getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront +\x3d getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack +\x3d getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack +\x3d getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS \x3e 0\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS \x3e 0\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",
lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x \x3d normal.x, y \x3d normal.y, z \x3d normal.z;\n\tvec3 result \x3d shCoefficients[ 0 ] * 0.886227;\n\tresult +\x3d shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult +\x3d shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult +\x3d shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult +\x3d shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult +\x3d shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult +\x3d shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult +\x3d shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult +\x3d shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance \x3d shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance \x3d ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff \x3d 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance \x3e 0.0 ) {\n\t\t\tdistanceFalloff *\x3d pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance \x3e 0.0 \x26\x26 decayExponent \x3e 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS \x3e 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color \x3d directionalLight.color;\n\t\tlight.direction \x3d directionalLight.direction;\n\t\tlight.visible \x3d true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS \x3e 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector \x3d pointLight.position - geometry.position;\n\t\tlight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tlight.color \x3d pointLight.color;\n\t\tlight.color *\x3d getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible \x3d ( light.color !\x3d vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector \x3d spotLight.position - geometry.position;\n\t\tlight.direction \x3d normalize( lVector );\n\t\tfloat angleCos \x3d dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation \x3d getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation \x3e 0.0 ) {\n\t\t\tfloat lightDistance \x3d length( lVector );\n\t\t\tlight.color \x3d spotLight.color * spotAttenuation;\n\t\t\tlight.color *\x3d getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible \x3d ( light.color !\x3d vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color \x3d vec3( 0.0 );\n\t\t\tlight.visible \x3d false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL \x3d dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight \x3d 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance \x3d mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",
lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance \x3d getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularColor \x3d specular;\nmaterial.specularShininess \x3d shininess;\nmaterial.specularStrength \x3d specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy \x3d max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness \x3d max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness \x3d max( roughnessFactor, 0.0525 );material.roughness +\x3d geometryRoughness;\nmaterial.roughness \x3d min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor \x3d specularIntensity;\n\t\tvec3 specularColorFactor \x3d specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *\x3d texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *\x3d specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 \x3d mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor \x3d 1.0;\n\t\tvec3 specularColorFactor \x3d vec3( 1.0 );\n\t\tmaterial.specularF90 \x3d 1.0;\n\t#endif\n\tmaterial.specularColor \x3d mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor \x3d mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 \x3d 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat \x3d clearcoat;\n\tmaterial.clearcoatRoughness \x3d clearcoatRoughness;\n\tmaterial.clearcoatF0 \x3d vec3( 0.04 );\n\tmaterial.clearcoatF90 \x3d 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *\x3d texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *\x3d texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat \x3d saturate( material.clearcoat );\tmaterial.clearcoatRoughness \x3d max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness +\x3d geometryRoughness;\n\tmaterial.clearcoatRoughness \x3d min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor \x3d sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *\x3d sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness \x3d clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *\x3d texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular \x3d vec3( 0.0 );\nvec3 sheenSpecular \x3d vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tfloat r2 \x3d roughness * roughness;\n\tfloat a \x3d roughness \x3c 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b \x3d roughness \x3c 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG \x3d exp( a * dotNV + b ) + ( roughness \x3c 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV \x3d saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 \x3d vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 \x3d vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r \x3d roughness * c0 + c1;\n\tfloat a004 \x3d min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab \x3d vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab \x3d DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab \x3d DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss \x3d specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess \x3d fab.x + fab.y;\n\tfloat Ems \x3d 1.0 - Ess;\n\tvec3 Favg \x3d specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms \x3d FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter +\x3d FssEss;\n\tmultiScatter +\x3d Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal \x3d geometry.normal;\n\t\tvec3 viewDir \x3d geometry.viewDir;\n\t\tvec3 position \x3d geometry.position;\n\t\tvec3 lightPos \x3d rectAreaLight.position;\n\t\tvec3 halfWidth \x3d rectAreaLight.halfWidth;\n\t\tvec3 halfHeight \x3d rectAreaLight.halfHeight;\n\t\tvec3 lightColor \x3d rectAreaLight.color;\n\t\tfloat roughness \x3d material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] \x3d lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] \x3d lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] \x3d lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] \x3d lightPos + halfWidth + halfHeight;\n\t\tvec2 uv \x3d LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 \x3d texture2D( ltc_1, uv );\n\t\tvec4 t2 \x3d texture2D( ltc_2, uv );\n\t\tmat3 mInv \x3d mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel \x3d ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular +\x3d lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse +\x3d lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc \x3d saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance \x3d dotNLcc * directLight.color;\n\t\tclearcoatSpecular +\x3d ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular +\x3d irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular +\x3d clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular +\x3d irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering \x3d vec3( 0.0 );\n\tvec3 multiScattering \x3d vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance \x3d irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse \x3d material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular +\x3d radiance * singleScattering;\n\treflectedLight.indirectSpecular +\x3d multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse +\x3d diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position \x3d - vViewPosition;\ngeometry.normal \x3d normal;\ngeometry.viewDir \x3d ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal \x3d clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_POINT_LIGHT_SHADOWS \x3e 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow \x3d pointLightShadows[ i ];\n\t\tdirectLight.color *\x3d all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow \x3d spotLightShadows[ i ];\n\t\tdirectLight.color *\x3d all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) \x26\x26 NUM_DIR_LIGHT_SHADOWS \x3e 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) \x26\x26 ( UNROLLED_LOOP_INDEX \x3c NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow \x3d directionalLightShadows[ i ];\n\t\tdirectLight.color *\x3d all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight \x3d rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance \x3d vec3( 0.0 );\n\tvec3 irradiance \x3d getAmbientLightIrradiance( ambientLightColor );\n\tirradiance +\x3d getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS \x3e 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance \x3d vec3( 0.0 );\n\tvec3 clearcoatRadiance \x3d vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel \x3d texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance \x3d lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *\x3d PI;\n\t\t#endif\n\t\tirradiance +\x3d lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( STANDARD ) \x26\x26 defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance +\x3d getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) \x26\x26 defined( RE_IndirectSpecular )\n\tradiance +\x3d getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance +\x3d getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) \x26\x26 defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT \x3d vIsPerspective \x3d\x3d 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",
logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) \x26\x26 defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth \x3d 1.0 + gl_Position.w;\n\t\tvIsPerspective \x3d float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z \x3d log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *\x3d gl_Position.w;\n\t\t}\n\t#endif\n#endif",
map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor \x3d texture2D( map, vUv );\n\ttexelColor \x3d mapTexelToLinear( texelColor );\n\tdiffuseColor *\x3d texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv \x3d ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel \x3d texture2D( map, uv );\n\tdiffuseColor *\x3d mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, uv ).g;\n#endif",
map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor \x3d metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness \x3d texture2D( metalnessMap, vUv );\n\tmetalnessFactor *\x3d texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *\x3d morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] \x3e 0.0 ) objectNormal +\x3d getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal +\x3d morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal +\x3d morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal +\x3d morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal +\x3d morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",
morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex \x3d float( vertexIndex * stride + offset );\n\t\t\tfloat y \x3d floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x \x3d texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV \x3d vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *\x3d morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i \x3d 0; i \x3c MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] \x3e 0.0 ) transformed +\x3d getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] \x3e 0.0 ) transformed +\x3d getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed +\x3d morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed +\x3d morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed +\x3d morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed +\x3d morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed +\x3d morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed +\x3d morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed +\x3d morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed +\x3d morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",
normal_fragment_begin:"float faceDirection \x3d gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx \x3d vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy \x3d vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal \x3d normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal \x3d normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal \x3d normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent \x3d normalize( vTangent );\n\t\tvec3 bitangent \x3d normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent \x3d tangent * faceDirection;\n\t\t\tbitangent \x3d bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN \x3d mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal \x3d normal;",
normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal \x3d - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal \x3d normal * faceDirection;\n\t#endif\n\tnormal \x3d normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *\x3d normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal \x3d normalize( vTBN * mapN );\n\t#else\n\t\tnormal \x3d perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal \x3d perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",
normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent \x3d normalize( transformedTangent );\n\t\tvBitangent \x3d normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) \x26\x26 ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 \x3d vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 \x3d vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 \x3d dFdx( vUv.st );\n\t\tvec2 st1 \x3d dFdy( vUv.st );\n\t\tvec3 N \x3d surf_norm;\n\t\tvec3 q1perp \x3d cross( q1, N );\n\t\tvec3 q0perp \x3d cross( N, q0 );\n\t\tvec3 T \x3d q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B \x3d q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det \x3d max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale \x3d ( det \x3d\x3d 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",
clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal \x3d geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN \x3d texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *\x3d clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal \x3d normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal \x3d perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",
clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a \x3d 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *\x3d transmissionAlpha + 0.1;\n#endif\ngl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale \x3d 256. / 255.;const float UnpackDownscale \x3d 255. / 256.;\nconst vec3 PackFactors \x3d vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors \x3d UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 \x3d 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r \x3d vec4( fract( v * PackFactors ), v );\n\tr.yzw -\x3d r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r \x3d vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *\x3d gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition \x3d vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition \x3d instanceMatrix * mvPosition;\n#endif\nmvPosition \x3d modelViewMatrix * mvPosition;\ngl_Position \x3d projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb \x3d dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position \x3d rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB \x3d vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB \x3d mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor \x3d roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness \x3d texture2D( roughnessMap, vUv );\n\troughnessFactor *\x3d texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion \x3d 1.0;\n\t\tvec2 distribution \x3d texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow \x3d step( compare , distribution.x );\n\t\tif (hard_shadow !\x3d 1.0 ) {\n\t\t\tfloat distance \x3d compare - distribution.x ;\n\t\t\tfloat variance \x3d max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability \x3d variance / (variance + distance * distance );\t\t\tsoftness_probability \x3d clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion \x3d clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow \x3d 1.0;\n\t\tshadowCoord.xyz /\x3d shadowCoord.w;\n\t\tshadowCoord.z +\x3d shadowBias;\n\t\tbvec4 inFrustumVec \x3d bvec4 ( shadowCoord.x \x3e\x3d 0.0, shadowCoord.x \x3c\x3d 1.0, shadowCoord.y \x3e\x3d 0.0, shadowCoord.y \x3c\x3d 1.0 );\n\t\tbool inFrustum \x3d all( inFrustumVec );\n\t\tbvec2 frustumTestVec \x3d bvec2( inFrustum, shadowCoord.z \x3c\x3d 1.0 );\n\t\tbool frustumTest \x3d all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 \x3d dx0 / 2.0;\n\t\t\tfloat dy2 \x3d dy0 / 2.0;\n\t\t\tfloat dx3 \x3d dx1 / 2.0;\n\t\t\tfloat dy3 \x3d dy1 / 2.0;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx \x3d texelSize.x;\n\t\t\tfloat dy \x3d texelSize.y;\n\t\t\tvec2 uv \x3d shadowCoord.xy;\n\t\t\tvec2 f \x3d fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -\x3d f * texelSize;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow \x3d VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow \x3d texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV \x3d abs( v );\n\t\tfloat scaleToCube \x3d 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *\x3d scaleToCube;\n\t\tv *\x3d scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar \x3d v.xy;\n\t\tfloat almostATexel \x3d 1.5 * texelSizeY;\n\t\tfloat almostOne \x3d 1.0 - almostATexel;\n\t\tif ( absV.z \x3e\x3d almostOne ) {\n\t\t\tif ( v.z \x3e 0.0 )\n\t\t\t\tplanar.x \x3d 4.0 - v.x;\n\t\t} else if ( absV.x \x3e\x3d almostOne ) {\n\t\t\tfloat signX \x3d sign( v.x );\n\t\t\tplanar.x \x3d v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y \x3e\x3d almostOne ) {\n\t\t\tfloat signY \x3d sign( v.y );\n\t\t\tplanar.x \x3d v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y \x3d v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition \x3d shadowCoord.xyz;\n\t\tfloat dp \x3d ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp +\x3d shadowBias;\n\t\tvec3 bd3D \x3d normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset \x3d vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0 || NUM_SPOT_LIGHT_SHADOWS \x3e 0 || NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t\tvec3 shadowWorldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition \x3d worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] \x3d directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition \x3d worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] \x3d spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition \x3d worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] \x3d pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow \x3d 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS \x3e 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS \x3e 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight \x3d spotLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS \x3e 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight \x3d pointLightShadows[ i ];\n\t\tshadow *\x3d receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX \x3d getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY \x3d getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ \x3d getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW \x3d getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j \x3d i * 4.0;\n\t\t\tfloat x \x3d mod( j, float( boneTextureSize ) );\n\t\t\tfloat y \x3d floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx \x3d 1.0 / float( boneTextureSize );\n\t\t\tfloat dy \x3d 1.0 / float( boneTextureSize );\n\t\t\ty \x3d dy * ( y + 0.5 );\n\t\t\tvec4 v1 \x3d texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 \x3d texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 \x3d texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 \x3d texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone \x3d mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone \x3d boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex \x3d bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned \x3d vec4( 0.0 );\n\tskinned +\x3d boneMatX * skinVertex * skinWeight.x;\n\tskinned +\x3d boneMatY * skinVertex * skinWeight.y;\n\tskinned +\x3d boneMatZ * skinVertex * skinWeight.z;\n\tskinned +\x3d boneMatW * skinVertex * skinWeight.w;\n\ttransformed \x3d ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix \x3d mat4( 0.0 );\n\tskinMatrix +\x3d skinWeight.x * boneMatX;\n\tskinMatrix +\x3d skinWeight.y * boneMatY;\n\tskinMatrix +\x3d skinWeight.z * boneMatZ;\n\tskinMatrix +\x3d skinWeight.w * boneMatW;\n\tskinMatrix \x3d bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal \x3d vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent \x3d vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular \x3d texture2D( specularMap, vUv );\n\tspecularStrength \x3d texelSpecular.r;\n#else\n\tspecularStrength \x3d 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb \x3d toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\tcolor \x3d max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a \x3d v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b \x3d v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat \x3d mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat \x3d mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *\x3d toneMappingExposure / 0.6;\n\tcolor \x3d ACESInputMat * color;\n\tcolor \x3d RRTAndODTFit( color );\n\tcolor \x3d ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha \x3d 1.0;\n\tfloat transmissionFactor \x3d transmission;\n\tfloat thicknessFactor \x3d thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *\x3d texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *\x3d texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos \x3d vWorldPosition;\n\tvec3 v \x3d normalize( cameraPosition - pos );\n\tvec3 n \x3d inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission \x3d getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse \x3d mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha \x3d mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",
transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector \x3d refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x \x3d length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y \x3d length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z \x3d length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod \x3d log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance \x3d\x3d 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient \x3d -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance \x3d exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay \x3d getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit \x3d position + transmissionRay;\n\t\tvec4 ndcPos \x3d projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords \x3d ndcPos.xy / ndcPos.w;\n\t\trefractionCoords +\x3d 1.0;\n\t\trefractionCoords /\x3d 2.0;\n\t\tvec4 transmittedLight \x3d getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor \x3d applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F \x3d EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",
uv_pars_fragment:"#if ( defined( USE_UV ) \x26\x26 ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv \x3d ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",
uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 \x3d ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition \x3d vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition \x3d instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition \x3d modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv \x3d ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position \x3d vec4( position.xy, 1.0, 1.0 );\n}",
background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor \x3d texture2D( t2D, vUv );\n\tgl_FragColor \x3d mapTexelToLinear( texColor );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",cube_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_Position.z \x3d gl_Position.w;\n}",
cube_frag:"#include \x3cenvmap_common_pars_fragment\x3e\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include \x3ccube_uv_reflection_fragment\x3e\nvoid main() {\n\tvec3 vReflect \x3d vWorldDirection;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d envColor;\n\tgl_FragColor.a *\x3d opacity;\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",depth_vert:"#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvHighPrecisionZW \x3d gl_Position.zw;\n}",
depth_frag:"#if DEPTH_PACKING \x3d\x3d 3200\n\tuniform float opacity;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tdiffuseColor.a \x3d opacity;\n\t#endif\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\tfloat fragCoordZ \x3d 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tgl_FragColor \x3d vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING \x3d\x3d 3201\n\t\tgl_FragColor \x3d packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvWorldPosition \x3d worldPosition.xyz;\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main () {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\tfloat dist \x3d length( vWorldPosition - referencePosition );\n\tdist \x3d ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist \x3d saturate( dist );\n\tgl_FragColor \x3d packDepthToRGBA( dist );\n}",
equirect_vert:"varying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldDirection \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include \x3ccommon\x3e\nvoid main() {\n\tvec3 direction \x3d normalize( vWorldDirection );\n\tvec2 sampleUV \x3d equirectUv( direction );\n\tvec4 texColor \x3d texture2D( tEquirect, sampleUV );\n\tgl_FragColor \x3d mapTexelToLinear( texColor );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\tvLineDistance \x3d scale * lineDistance;\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tif ( mod( vLineDistance, totalSize ) \x3e dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n}",
meshbasic_vert:"#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinbase_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t\t#include \x3cdefaultnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3ccube_uv_reflection_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel\x3d texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse +\x3d lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse +\x3d vec3( 1.0 );\n\t#endif\n\t#include \x3caomap_fragment\x3e\n\treflectedLight.indirectDiffuse *\x3d diffuseColor.rgb;\n\tvec3 outgoingLight \x3d reflectedLight.indirectDiffuse;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3clights_lambert_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3ccube_uv_reflection_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse +\x3d ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse +\x3d vIndirectFront;\n\t#endif\n\t#include \x3clightmap_fragment\x3e\n\treflectedLight.indirectDiffuse *\x3d BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse \x3d ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse \x3d vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *\x3d BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\tvec3 viewDir \x3d normalize( vViewPosition );\n\tvec3 x \x3d normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y \x3d cross( viewDir, x );\n\tvec2 uv \x3d vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor \x3d texture2D( matcap, uv );\n\t\tmatcapColor \x3d matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor \x3d vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight \x3d diffuseColor.rgb * matcapColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition \x3d - mvPosition.xyz;\n#endif\n}",
meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\tgl_FragColor \x3d vec4( packNormalToRGB( normal ), opacity );\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3ccube_uv_reflection_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_phong_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_phong_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n#ifdef USE_TRANSMISSION\n\tvWorldPosition \x3d worldPosition.xyz;\n#endif\n}",
meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3ccube_uv_reflection_fragment\x3e\n#include \x3cenvmap_common_pars_fragment\x3e\n#include \x3cenvmap_physical_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_physical_pars_fragment\x3e\n#include \x3ctransmission_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cclearcoat_pars_fragment\x3e\n#include \x3croughnessmap_pars_fragment\x3e\n#include \x3cmetalnessmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3croughnessmap_fragment\x3e\n\t#include \x3cmetalnessmap_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cclearcoat_normal_fragment_begin\x3e\n\t#include \x3cclearcoat_normal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_physical_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 totalDiffuse \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular \x3d reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include \x3ctransmission_fragment\x3e\n\tvec3 outgoingLight \x3d totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp \x3d 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight \x3d outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc \x3d saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc \x3d F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight \x3d outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cnormal_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cgradientmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cnormal_pars_fragment\x3e\n#include \x3clights_toon_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cnormal_fragment_begin\x3e\n\t#include \x3cnormal_fragment_maps\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_toon_fragment\x3e\n\t#include \x3clights_fragment_begin\x3e\n\t#include \x3clights_fragment_maps\x3e\n\t#include \x3clights_fragment_end\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_PointSize \x3d size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective \x3d isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *\x3d ( scale / - mvPosition.z );\n\t#endif\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cmap_particle_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_particle_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n}",
shadow_vert:"#include \x3ccommon\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\nvoid main() {\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars_begin\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\nvoid main() {\n\tgl_FragColor \x3d vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\tvec4 mvPosition \x3d modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x \x3d length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y \x3d length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective \x3d isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *\x3d - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition \x3d ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x \x3d cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y \x3d sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy +\x3d rotatedPosition;\n\tgl_Position \x3d projectionMatrix * mvPosition;\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3calphatest_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\t#include \x3coutput_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}"},
sa={common:{diffuse:{value:new ua(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new xb},uv2Transform:{value:new xb},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},
bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new la(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new ua(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],
properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],
properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ua(16777215)},opacity:{value:1},
size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xb}},sprite:{diffuse:{value:new ua(16777215)},opacity:{value:1},center:{value:new la(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xb}}},dc={basic:{uniforms:qb([sa.common,sa.specularmap,sa.envmap,sa.aomap,sa.lightmap,sa.fog]),vertexShader:Sa.meshbasic_vert,fragmentShader:Sa.meshbasic_frag},lambert:{uniforms:qb([sa.common,sa.specularmap,
sa.envmap,sa.aomap,sa.lightmap,sa.emissivemap,sa.fog,sa.lights,{emissive:{value:new ua(0)}}]),vertexShader:Sa.meshlambert_vert,fragmentShader:Sa.meshlambert_frag},phong:{uniforms:qb([sa.common,sa.specularmap,sa.envmap,sa.aomap,sa.lightmap,sa.emissivemap,sa.bumpmap,sa.normalmap,sa.displacementmap,sa.fog,sa.lights,{emissive:{value:new ua(0)},specular:{value:new ua(1118481)},shininess:{value:30}}]),vertexShader:Sa.meshphong_vert,fragmentShader:Sa.meshphong_frag},standard:{uniforms:qb([sa.common,sa.envmap,
sa.aomap,sa.lightmap,sa.emissivemap,sa.bumpmap,sa.normalmap,sa.displacementmap,sa.roughnessmap,sa.metalnessmap,sa.fog,sa.lights,{emissive:{value:new ua(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Sa.meshphysical_vert,fragmentShader:Sa.meshphysical_frag},toon:{uniforms:qb([sa.common,sa.aomap,sa.lightmap,sa.emissivemap,sa.bumpmap,sa.normalmap,sa.displacementmap,sa.gradientmap,sa.fog,sa.lights,{emissive:{value:new ua(0)}}]),vertexShader:Sa.meshtoon_vert,fragmentShader:Sa.meshtoon_frag},
matcap:{uniforms:qb([sa.common,sa.bumpmap,sa.normalmap,sa.displacementmap,sa.fog,{matcap:{value:null}}]),vertexShader:Sa.meshmatcap_vert,fragmentShader:Sa.meshmatcap_frag},points:{uniforms:qb([sa.points,sa.fog]),vertexShader:Sa.points_vert,fragmentShader:Sa.points_frag},dashed:{uniforms:qb([sa.common,sa.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Sa.linedashed_vert,fragmentShader:Sa.linedashed_frag},depth:{uniforms:qb([sa.common,sa.displacementmap]),vertexShader:Sa.depth_vert,
fragmentShader:Sa.depth_frag},normal:{uniforms:qb([sa.common,sa.bumpmap,sa.normalmap,sa.displacementmap,{opacity:{value:1}}]),vertexShader:Sa.meshnormal_vert,fragmentShader:Sa.meshnormal_frag},sprite:{uniforms:qb([sa.sprite,sa.fog]),vertexShader:Sa.sprite_vert,fragmentShader:Sa.sprite_frag},background:{uniforms:{uvTransform:{value:new xb},t2D:{value:null}},vertexShader:Sa.background_vert,fragmentShader:Sa.background_frag},cube:{uniforms:qb([sa.envmap,{opacity:{value:1}}]),vertexShader:Sa.cube_vert,
fragmentShader:Sa.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Sa.equirect_vert,fragmentShader:Sa.equirect_frag},distanceRGBA:{uniforms:qb([sa.common,sa.displacementmap,{referencePosition:{value:new C},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:Sa.distanceRGBA_vert,fragmentShader:Sa.distanceRGBA_frag},shadow:{uniforms:qb([sa.lights,sa.fog,{color:{value:new ua(0)},opacity:{value:1}}]),vertexShader:Sa.shadow_vert,fragmentShader:Sa.shadow_frag}};dc.physical=
{uniforms:qb([dc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new la(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new ua(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new la},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},
attenuationDistance:{value:0},attenuationColor:{value:new ua(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new ua(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Sa.meshphysical_vert,fragmentShader:Sa.meshphysical_frag};class Me extends Le{constructor(a,b,c,d,e,f){a=void 0===a?-1:a;b=void 0===b?1:b;c=void 0===c?1:c;d=void 0===d?-1:d;e=void 0===e?.1:e;f=void 0===f?2E3:f;super();this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=a;this.right=
b;this.top=c;this.bottom=d;this.near=e;this.far=f;this.updateProjectionMatrix()}copy(a,b){super.copy(a,b);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this}setViewOffset(a,b,c,d,e,f){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=
c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()}updateProjectionMatrix(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2;let e=c-a;c+=a;a=d+b;b=d-b;null!==this.view&&this.view.enabled&&(d=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/
this.zoom,e+=d*this.view.offsetX,c=e+d*this.view.width,a-=b*this.view.offsetY,b=a-b*this.view.height);this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far);this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){a=super.toJSON(a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}}
Me.prototype.isOrthographicCamera=!0;class Md extends vc{constructor(a){super(a);this.type="RawShaderMaterial"}}Md.prototype.isRawShaderMaterial=!0;const pc=Math.pow(2,8),lj=[.125,.215,.35,.446,.526,.582],mj=5+lj.length,tf={[3E3]:0,[3001]:1},hh=new Me,{_lodPlanes:Ne,_sizeLods:nj,_sigmas:Uf}=function(){const a=[],b=[],c=[];let d=8;for(let h=0;h<mj;h++){var e=Math.pow(2,d);b.push(e);var f=1/e;4<h?f=lj[h-8+4-1]:0==h&&(f=0);c.push(f);f=1/(e-1);e=-f/2;f=1+f/2;var g=[e,e,f,e,f,f,e,e,f,f,e,f];e=new Float32Array(108);
f=new Float32Array(72);const k=new Float32Array(36);for(let l=0;6>l;l++){const m=l%3*2/3-1,n=2<l?0:-1;e.set([m,n,0,m+2/3,n,0,m+2/3,n+1,0,m,n,0,m+2/3,n+1,0,m,n+1,0],18*l);f.set(g,12*l);k.set([l,l,l,l,l,l],6*l)}g=new Ma;g.setAttribute("position",new $a(e,3));g.setAttribute("uv",new $a(f,2));g.setAttribute("faceIndex",new $a(k,1));a.push(g);4<d&&d--}return{_lodPlanes:a,_sizeLods:b,_sigmas:c}}(),oj=new ua;let ih=null;const td=(1+Math.sqrt(5))/2,he=1/td,pj=[new C(1,1,1),new C(-1,1,1),new C(1,1,-1),new C(-1,
1,-1),new C(0,td,he),new C(0,td,-he),new C(he,0,td),new C(-he,0,td),new C(td,he,0),new C(-td,he,0)];class ai{constructor(a){this._renderer=a;this._pingPongRenderTarget=null;a=new Float32Array(20);const b=new C(0,1,0);this._blurMaterial=new Md({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:b}},vertexShader:Ya(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${eb()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:0,depthTest:!1,depthWrite:!1});this._cubemapShader=this._equirectShader=null;this._compileMaterial(this._blurMaterial)}fromScene(a,b,c,d){b=void 0===b?0:b;c=void 0===c?.1:c;d=void 0===d?100:d;ih=this._renderer.getRenderTarget();const e=this._allocateTargets();this._sceneToCubeUV(a,c,d,e);0<b&&this._blur(e,0,0,b);this._applyPMREM(e);this._cleanup(e);return e}fromEquirectangular(a){return this._fromTexture(a)}fromCubemap(a){return this._fromTexture(a)}compileCubemapShader(){null===this._cubemapShader&&
(this._cubemapShader=O(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Uc(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose();null!==this._cubemapShader&&this._cubemapShader.dispose();null!==this._equirectShader&&this._equirectShader.dispose();for(let a=0;a<Ne.length;a++)Ne[a].dispose()}_cleanup(a){this._pingPongRenderTarget.dispose();this._renderer.setRenderTarget(ih);a.scissorTest=!1;
wc(a,0,0,a.width,a.height)}_fromTexture(a){ih=this._renderer.getRenderTarget();const b=this._allocateTargets(a);this._textureToCubeUV(a,b);this._applyPMREM(b);this._cleanup(b);return b}_allocateTargets(a){const b={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,encoding:3E3,depthBuffer:!1},c=kd(b);c.depthBuffer=a?!1:!0;this._pingPongRenderTarget=kd(b);return c}_compileMaterial(a){a=new ub(Ne[0],a);this._renderer.compile(a,hh)}_sceneToCubeUV(a,b,c,d){b=new Bb(90,1,b,c);c=[1,
-1,1,1,1,1];const e=[1,1,1,-1,-1,-1],f=this._renderer,g=f.autoClear,h=f.toneMapping;f.getClearColor(oj);f.toneMapping=0;f.autoClear=!1;var k=new Hc({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1});const l=new ub(new Tc,k);let m=!1;const n=a.background;n?n.isColor&&(k.color.copy(n),a.background=null,m=!0):(k.color.copy(oj),m=!0);for(k=0;6>k;k++){const r=k%3;0==r?(b.up.set(0,c[k],0),b.lookAt(e[k],0,0)):1==r?(b.up.set(0,0,c[k]),b.lookAt(0,e[k],0)):(b.up.set(0,c[k],0),b.lookAt(0,0,e[k]));
wc(d,r*pc,2<k?pc:0,pc,pc);f.setRenderTarget(d);m&&f.render(l,b);f.render(a,b)}l.geometry.dispose();l.material.dispose();f.toneMapping=h;f.autoClear=g;a.background=n}_setEncoding(a,b){a.value=!0===this._renderer.capabilities.isWebGL2&&1023===b.format&&1009===b.type&&3001===b.encoding?tf[3E3]:tf[b.encoding]}_textureToCubeUV(a,b){const c=this._renderer,d=301===a.mapping||302===a.mapping;d?null==this._cubemapShader&&(this._cubemapShader=O()):null==this._equirectShader&&(this._equirectShader=Uc());var e=
d?this._cubemapShader:this._equirectShader;const f=new ub(Ne[0],e);e=e.uniforms;e.envMap.value=a;d||e.texelSize.value.set(1/a.image.width,1/a.image.height);this._setEncoding(e.inputEncoding,a);wc(b,0,0,3*pc,2*pc);c.setRenderTarget(b);c.render(f,hh)}_applyPMREM(a){const b=this._renderer,c=b.autoClear;b.autoClear=!1;for(let d=1;d<mj;d++)this._blur(a,d-1,d,Math.sqrt(Uf[d]*Uf[d]-Uf[d-1]*Uf[d-1]),pj[(d-1)%pj.length]);b.autoClear=c}_blur(a,b,c,d,e){const f=this._pingPongRenderTarget;this._halfBlur(a,f,
b,c,d,"latitudinal",e);this._halfBlur(f,a,c,c,d,"longitudinal",e)}_halfBlur(a,b,c,d,e,f,g){const h=this._renderer;var k=this._blurMaterial;"latitudinal"!==f&&"longitudinal"!==f&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new ub(Ne[d],k);k=k.uniforms;var m=nj[c]-1;m=isFinite(e)?Math.PI/(2*m):2*Math.PI/39;var n=e/m;const r=isFinite(e)?1+Math.floor(3*n):20;20<r&&console.warn(`sigmaRadians, ${e}, is too large and will clip, as it requested ${r} samples when the maximum is set to ${20}`);
e=[];let v=0;for(let y=0;20>y;++y){var t=y/n;t=Math.exp(-t*t/2);e.push(t);0==y?v+=t:y<r&&(v+=2*t)}for(n=0;n<e.length;n++)e[n]/=v;k.envMap.value=a.texture;k.samples.value=r;k.weights.value=e;k.latitudinal.value="latitudinal"===f;g&&(k.poleAxis.value=g);k.dTheta.value=m;k.mipInt.value=8-c;a=nj[d];wc(b,3*Math.max(0,pc-2*a),(0===d?0:2*pc)+2*a*(4<d?d-8+4:0),3*a,2*a);h.setRenderTarget(b);h.render(l,hh)}}class wf extends yb{constructor(a,b,c,d){a=void 0===a?null:a;b=void 0===b?1:b;c=void 0===c?1:c;d=void 0===
d?1:d;super(null);this.image={data:a,width:b,height:c,depth:d};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}wf.prototype.isDataTexture2DArray=!0;class jh extends yb{constructor(a,b,c,d){a=void 0===a?null:a;b=void 0===b?1:b;c=void 0===c?1:c;d=void 0===d?1:d;super(null);this.image={data:a,width:b,height:c,depth:d};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}jh.prototype.isDataTexture3D=
!0;const gi=new yb,ji=new wf,hi=new jh,ii=new fe,bi=[],ci=[],fi=new Float32Array(16),ei=new Float32Array(9),di=new Float32Array(4);ki.prototype.updateCache=function(a){const b=this.cache;a instanceof Float32Array&&b.length!==a.length&&(this.cache=new Float32Array(a.length));w(b,a)};li.prototype.setValue=function(a,b,c){const d=this.seq;for(let e=0,f=d.length;e!==f;++e){const g=d[e];g.setValue(a,b[g.id],c)}};const Fg=/(\w+)(\])?(\[|\.)?/g;Wc.prototype.setValue=function(a,b,c,d){b=this.map[b];void 0!==
b&&b.setValue(a,c,d)};Wc.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};Wc.upload=function(a,b,c,d){for(let e=0,f=b.length;e!==f;++e){const g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};Wc.seqWithValue=function(a,b){const c=[];for(let d=0,e=a.length;d!==e;++d){const f=a[d];f.id in b&&c.push(f)}return c};let gl=0;const Hg=/^[ \t]*#include +<([\w\d./]+)>/gm,ui=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,
ti=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;let Ol=0;class il{constructor(){this.shaderCache=new Map;this.materialCache=new Map}update(a){var b=a.fragmentShader;const c=this._getShaderStage(a.vertexShader);b=this._getShaderStage(b);a=this._getShaderCacheForMaterial(a);!1===a.has(c)&&(a.add(c),c.usedTimes++);!1===a.has(b)&&(a.add(b),b.usedTimes++);return this}remove(a){const b=this.materialCache.get(a);
for(const c of b)c.usedTimes--,0===c.usedTimes&&this.shaderCache.delete(c);this.materialCache.delete(a);return this}getVertexShaderID(a){return this._getShaderStage(a.vertexShader).id}getFragmentShaderID(a){return this._getShaderStage(a.fragmentShader).id}dispose(){this.shaderCache.clear();this.materialCache.clear()}_getShaderCacheForMaterial(a){const b=this.materialCache;!1===b.has(a)&&b.set(a,new Set);return b.get(a)}_getShaderStage(a){const b=this.shaderCache;if(!1===b.has(a)){const c=new Pl;b.set(a,
c)}return b.get(a)}}class Pl{constructor(){this.id=Ol++;this.usedTimes=0}}let ql=0;class yf extends zb{constructor(a){super();this.type="MeshDepthMaterial";this.depthPacking=3200;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.fog=!1;this.setValues(a)}copy(a){super.copy(a);this.depthPacking=a.depthPacking;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=
a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this}}yf.prototype.isMeshDepthMaterial=!0;class zf extends zb{constructor(a){super();this.type="MeshDistanceMaterial";this.referencePosition=new C;this.nearDistance=1;this.farDistance=1E3;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.fog=!1;this.setValues(a)}copy(a){super.copy(a);this.referencePosition.copy(a.referencePosition);
this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this}}zf.prototype.isMeshDistanceMaterial=!0;class kh extends Bb{constructor(a){a=void 0===a?[]:a;super();this.cameras=a}}kh.prototype.isArrayCamera=!0;class ud extends Va{constructor(){super();this.type="Group"}}ud.prototype.isGroup=!0;const Ql={type:"move"};class lh{constructor(){this._hand=
this._grip=this._targetRay=null}getHandSpace(){null===this._hand&&(this._hand=new ud,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1});return this._hand}getTargetRaySpace(){null===this._targetRay&&(this._targetRay=new ud,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new C,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new C);return this._targetRay}getGripSpace(){null===
this._grip&&(this._grip=new ud,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new C,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new C);return this._grip}dispatchEvent(a){null!==this._targetRay&&this._targetRay.dispatchEvent(a);null!==this._grip&&this._grip.dispatchEvent(a);null!==this._hand&&this._hand.dispatchEvent(a);return this}disconnect(a){this.dispatchEvent({type:"disconnected",data:a});null!==this._targetRay&&(this._targetRay.visible=
!1);null!==this._grip&&(this._grip.visible=!1);null!==this._hand&&(this._hand.visible=!1);return this}update(a,b,c){let d=null,e=null,f=null;const g=this._targetRay,h=this._grip,k=this._hand;if(a&&"visible-blurred"!==b.session.visibilityState)if(null!==g&&(d=b.getPose(a.targetRaySpace,c),null!==d&&(g.matrix.fromArray(d.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),d.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(d.linearVelocity)):g.hasLinearVelocity=!1,d.angularVelocity?
(g.hasAngularVelocity=!0,g.angularVelocity.copy(d.angularVelocity)):g.hasAngularVelocity=!1,this.dispatchEvent(Ql))),k&&a.hand){f=!0;for(const m of a.hand.values()){const n=b.getJointPose(m,c);if(void 0===k.joints[m.jointName]){var l=new ud;l.matrixAutoUpdate=!1;l.visible=!1;k.joints[m.jointName]=l;k.add(l)}l=k.joints[m.jointName];null!==n&&(l.matrix.fromArray(n.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.jointRadius=n.radius);l.visible=null!==n}b=k.joints["index-finger-tip"].position.distanceTo(k.joints["thumb-tip"].position);
k.inputState.pinching&&.025<b?(k.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:a.handedness,target:this})):!k.inputState.pinching&&.015>=b&&(k.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:a.handedness,target:this}))}else null!==h&&a.gripSpace&&(e=b.getPose(a.gripSpace,c),null!==e&&(h.matrix.fromArray(e.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),e.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(e.linearVelocity)):
h.hasLinearVelocity=!1,e.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(e.angularVelocity)):h.hasAngularVelocity=!1));null!==g&&(g.visible=null!==d);null!==h&&(h.visible=null!==e);null!==k&&(k.visible=null!==f);return this}}class Vf extends yb{constructor(a,b,c,d,e,f,g,h,k,l){l=void 0!==l?l:1026;if(1026!==l&&1027!==l)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&1026===l&&(c=1012);void 0===c&&1027===l&&(c=1020);super(null,
d,e,f,g,h,l,c,k);this.image={width:a,height:b};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=this.flipY=!1}}Vf.prototype.isDepthTexture=!0;class wl extends Zc{constructor(a,b){function c(na){const qa=S.get(na.inputSource);qa&&qa.dispatchEvent({type:na.type,data:na.inputSource})}function d(){S.forEach(function(na,qa){na.disconnect(qa)});S.clear();ka=da=null;a.setRenderTarget(H);J=h=v=t=y=null;wa.stop();g.isPresenting=!1;g.dispatchEvent({type:"sessionend"})}
function e(na){var qa=h.inputSources;for(var Ca=0;Ca<K.length;Ca++)S.set(qa[Ca],K[Ca]);for(qa=0;qa<na.removed.length;qa++){Ca=na.removed[qa];var Qa=S.get(Ca);Qa&&(Qa.dispatchEvent({type:"disconnected",data:Ca}),S.delete(Ca))}for(qa=0;qa<na.added.length;qa++)Ca=na.added[qa],(Qa=S.get(Ca))&&Qa.dispatchEvent({type:"connected",data:Ca})}function f(na,qa){null===qa?na.matrixWorld.copy(na.matrix):na.matrixWorld.multiplyMatrices(qa.matrixWorld,na.matrix);na.matrixWorldInverse.copy(na.matrixWorld).invert()}
super();const g=this;let h=null,k=1,l=null,m="local-floor";const n=a.extensions.has("WEBGL_multisampled_render_to_texture");let r=null,v=null,t=null,y=null,E=!1,M=null;const q=b.getContextAttributes();let H=null,J=null;const K=[],S=new Map,P=new Bb;P.layers.enable(1);P.viewport=new cb;const U=new Bb;U.layers.enable(2);U.viewport=new cb;const V=[P,U],W=new kh;W.layers.enable(1);W.layers.enable(2);let da=null,ka=null;this.cameraAutoUpdate=!0;this.isPresenting=this.enabled=!1;this.getController=function(na){let qa=
K[na];void 0===qa&&(qa=new lh,K[na]=qa);return qa.getTargetRaySpace()};this.getControllerGrip=function(na){let qa=K[na];void 0===qa&&(qa=new lh,K[na]=qa);return qa.getGripSpace()};this.getHand=function(na){let qa=K[na];void 0===qa&&(qa=new lh,K[na]=qa);return qa.getHandSpace()};this.setFramebufferScaleFactor=function(na){k=na;!0===g.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};this.setReferenceSpaceType=function(na){m=na;!0===g.isPresenting&&
console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};this.getReferenceSpace=function(){return l};this.getBaseLayer=function(){return null!==t?t:y};this.getBinding=function(){return v};this.getFrame=function(){return M};this.getSession=function(){return h};this.setSession=function(na){const qa=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){h=na;if(null!==h){H=a.getRenderTarget();h.addEventListener("select",c);h.addEventListener("selectstart",
c);h.addEventListener("selectend",c);h.addEventListener("squeeze",c);h.addEventListener("squeezestart",c);h.addEventListener("squeezeend",c);h.addEventListener("end",d);h.addEventListener("inputsourceschange",e);!0!==q.xrCompatible&&(yield b.makeXRCompatible());if(void 0===h.renderState.layers||!1===a.capabilities.isWebGL2)y=new XRWebGLLayer(h,b,{antialias:void 0===h.renderState.layers?q.antialias:!0,alpha:q.alpha,depth:q.depth,stencil:q.stencil,framebufferScaleFactor:k}),h.updateRenderState({baseLayer:y}),
J=new Rb(y.framebufferWidth,y.framebufferHeight,{format:1023,type:1009,encoding:a.outputEncoding});else{E=q.antialias;let Qa=null,Ea=null;var Ca=null;q.depth&&(Ca=q.stencil?b.DEPTH24_STENCIL8:b.DEPTH_COMPONENT24,Qa=q.stencil?1027:1026,Ea=q.stencil?1020:1012);Ca={colorFormat:q.alpha||E?b.RGBA8:b.RGB8,depthFormat:Ca,scaleFactor:k};v=new XRWebGLBinding(h,b);t=v.createProjectionLayer(Ca);h.updateRenderState({layers:[t]});J=E?new Cf(t.textureWidth,t.textureHeight,{format:1023,type:1009,depthTexture:new Vf(t.textureWidth,
t.textureHeight,Ea,void 0,void 0,void 0,void 0,void 0,void 0,Qa),stencilBuffer:q.stencil,ignoreDepth:t.ignoreDepthValues,useRenderToTexture:n,encoding:a.outputEncoding}):new Rb(t.textureWidth,t.textureHeight,{format:q.alpha?1023:1022,type:1009,depthTexture:new Vf(t.textureWidth,t.textureHeight,Ea,void 0,void 0,void 0,void 0,void 0,void 0,Qa),stencilBuffer:q.stencil,ignoreDepth:t.ignoreDepthValues,encoding:a.outputEncoding})}qa.setFoveation(1);l=yield h.requestReferenceSpace(m);wa.setContext(h);wa.start();
g.isPresenting=!0;g.dispatchEvent({type:"sessionstart"})}})};const ya=new C,pa=new C;this.updateCamera=function(na){if(null!==h){W.near=U.near=P.near=na.near;W.far=U.far=P.far=na.far;if(da!==W.near||ka!==W.far)h.updateRenderState({depthNear:W.near,depthFar:W.far}),da=W.near,ka=W.far;var qa=na.parent,Ca=W.cameras;f(W,qa);for(var Qa=0;Qa<Ca.length;Qa++)f(Ca[Qa],qa);W.matrixWorld.decompose(W.position,W.quaternion,W.scale);na.position.copy(W.position);na.quaternion.copy(W.quaternion);na.scale.copy(W.scale);
na.matrix.copy(W.matrix);na.matrixWorld.copy(W.matrixWorld);na=na.children;for(let z=0,X=na.length;z<X;z++)na[z].updateMatrixWorld(!0);if(2===Ca.length){ya.setFromMatrixPosition(P.matrixWorld);pa.setFromMatrixPosition(U.matrixWorld);Ca=ya.distanceTo(pa);var Ea=P.projectionMatrix.elements,A=U.projectionMatrix.elements,F=Ea[14]/(Ea[10]-1);na=Ea[14]/(Ea[10]+1);qa=(Ea[9]+1)/Ea[5];Qa=(Ea[9]-1)/Ea[5];var T=(Ea[8]-1)/Ea[0],N=(A[8]+1)/A[0];A=F*T;Ea=F*N;N=Ca/(-T+N);T=N*-T;P.matrixWorld.decompose(W.position,
W.quaternion,W.scale);W.translateX(T);W.translateZ(N);W.matrixWorld.compose(W.position,W.quaternion,W.scale);W.matrixWorldInverse.copy(W.matrixWorld).invert();F+=N;N=na+N;W.projectionMatrix.makePerspective(A-T,Ea+(Ca-T),qa*na/N*F,Qa*na/N*F,F,N)}else W.projectionMatrix.copy(P.projectionMatrix)}};this.getCamera=function(){return W};this.getFoveation=function(){if(null!==t)return t.fixedFoveation;if(null!==y)return y.fixedFoveation};this.setFoveation=function(na){null!==t&&(t.fixedFoveation=na);null!==
y&&void 0!==y.fixedFoveation&&(y.fixedFoveation=na)};let Ia=null;const wa=new Sc;wa.setAnimationLoop(function(na,qa){r=qa.getViewerPose(l);M=qa;if(null!==r){var Ca=r.views;null!==y&&(a.setRenderTargetFramebuffer(J,y.framebuffer),a.setRenderTarget(J));var Qa=!1;Ca.length!==W.cameras.length&&(W.cameras.length=0,Qa=!0);for(let A=0;A<Ca.length;A++){const F=Ca[A];let T;if(null!==y)T=y.getViewport(F);else{var Ea=v.getViewSubImage(t,F);T=Ea.viewport;0===A&&(a.setRenderTargetTextures(J,Ea.colorTexture,t.ignoreDepthValues?
void 0:Ea.depthStencilTexture),a.setRenderTarget(J))}Ea=V[A];Ea.matrix.fromArray(F.transform.matrix);Ea.projectionMatrix.fromArray(F.projectionMatrix);Ea.viewport.set(T.x,T.y,T.width,T.height);0===A&&W.matrix.copy(Ea.matrix);!0===Qa&&W.cameras.push(Ea)}}Ca=h.inputSources;for(Qa=0;Qa<K.length;Qa++)K[Qa].update(Ca[Qa],qa,l);Ia&&Ia(na,qa);M=null});this.setAnimationLoop=function(na){Ia=na};this.dispose=function(){}}}db.prototype.isWebGLRenderer=!0;class qj extends db{}qj.prototype.isWebGL1Renderer=!0;
class Wf{constructor(a,b){b=void 0===b?2.5E-4:b;this.name="";this.color=new ua(a);this.density=b}clone(){return new Wf(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Wf.prototype.isFogExp2=!0;class Xf{constructor(a,b,c){b=void 0===b?1:b;c=void 0===c?1E3:c;this.name="";this.color=new ua(a);this.near=b;this.far=c}clone(){return new Xf(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}
Xf.prototype.isFog=!0;class Yf extends Va{constructor(){super();this.type="Scene";this.overrideMaterial=this.fog=this.environment=this.background=null;this.autoUpdate=!0;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(a,b){super.copy(a,b);null!==a.background&&(this.background=a.background.clone());null!==a.environment&&(this.environment=a.environment.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&
(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this}toJSON(a){a=super.toJSON(a);null!==this.fog&&(a.object.fog=this.fog.toJSON());return a}}Yf.prototype.isScene=!0;class vd{constructor(a,b){this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.usage=35044;this.updateRange={offset:0,count:-1};this.version=0;this.uuid=Ta()}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}setUsage(a){this.usage=
a;return this}copy(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.usage=a.usage;return this}copyAt(a,b,c){a*=this.stride;c*=b.stride;for(let d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this}set(a,b){this.array.set(a,void 0===b?0:b);return this}clone(a){void 0===a.arrayBuffers&&(a.arrayBuffers={});void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ta());void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=
this.array.slice(0).buffer);a=new this.array.constructor(a.arrayBuffers[this.array.buffer._uuid]);a=new this.constructor(a,this.stride);a.setUsage(this.usage);return a}onUpload(a){this.onUploadCallback=a;return this}toJSON(a){void 0===a.arrayBuffers&&(a.arrayBuffers={});void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ta());void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer)));return{uuid:this.uuid,
buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}vd.prototype.isInterleavedBuffer=!0;const sb=new C;class wd{constructor(a,b,c,d){this.name="";this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===(void 0===d?!1:d)}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(a){this.data.needsUpdate=a}applyMatrix4(a){for(let b=0,c=this.data.count;b<c;b++)sb.x=this.getX(b),sb.y=this.getY(b),sb.z=this.getZ(b),sb.applyMatrix4(a),this.setXYZ(b,
sb.x,sb.y,sb.z);return this}applyNormalMatrix(a){for(let b=0,c=this.count;b<c;b++)sb.x=this.getX(b),sb.y=this.getY(b),sb.z=this.getZ(b),sb.applyNormalMatrix(a),this.setXYZ(b,sb.x,sb.y,sb.z);return this}transformDirection(a){for(let b=0,c=this.count;b<c;b++)sb.x=this.getX(b),sb.y=this.getY(b),sb.z=this.getZ(b),sb.transformDirection(a),this.setXYZ(b,sb.x,sb.y,sb.z);return this}setX(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this}setY(a,b){this.data.array[a*this.data.stride+this.offset+
1]=b;return this}setZ(a,b){this.data.array[a*this.data.stride+this.offset+2]=b;return this}setW(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this}getX(a){return this.data.array[a*this.data.stride+this.offset]}getY(a){return this.data.array[a*this.data.stride+this.offset+1]}getZ(a){return this.data.array[a*this.data.stride+this.offset+2]}getW(a){return this.data.array[a*this.data.stride+this.offset+3]}setXY(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+
1]=c;return this}setXYZ(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this}setXYZW(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}clone(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");a=[];for(let b=0;b<this.count;b++){const c=b*this.data.stride+
this.offset;for(let d=0;d<this.itemSize;d++)a.push(this.data.array[c+d])}return new $a(new this.array.constructor(a),this.itemSize,this.normalized)}void 0===a.interleavedBuffers&&(a.interleavedBuffers={});void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.clone(a));return new wd(a.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");
a=[];for(let b=0;b<this.count;b++){const c=b*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)a.push(this.data.array[c+d])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:a,normalized:this.normalized}}void 0===a.interleavedBuffers&&(a.interleavedBuffers={});void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.toJSON(a));return{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}
wd.prototype.isInterleavedBufferAttribute=!0;class Zf extends zb{constructor(a){super();this.type="SpriteMaterial";this.color=new ua(16777215);this.alphaMap=this.map=null;this.rotation=0;this.transparent=this.sizeAttenuation=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.alphaMap=a.alphaMap;this.rotation=a.rotation;this.sizeAttenuation=a.sizeAttenuation;return this}}Zf.prototype.isSpriteMaterial=!0;let ie;const Oe=new C,je=new C,ke=new C,Rd=new la,ye=new la,
Ei=new Da,$f=new C,Pe=new C,ag=new C,rj=new la,mh=new la,sj=new la;class bg extends Va{constructor(a){super();this.type="Sprite";if(void 0===ie){ie=new Ma;var b=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);b=new vd(b,5);ie.setIndex([0,1,2,0,2,3]);ie.setAttribute("position",new wd(b,3,0,!1));ie.setAttribute("uv",new wd(b,2,3,!1))}this.geometry=ie;this.material=void 0!==a?a:new Zf;this.center=new la(.5,.5)}raycast(a,b){null===a.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');
je.setFromMatrixScale(this.matrixWorld);Ei.copy(a.camera.matrixWorld);this.modelViewMatrix.multiplyMatrices(a.camera.matrixWorldInverse,this.matrixWorld);ke.setFromMatrixPosition(this.modelViewMatrix);a.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&je.multiplyScalar(-ke.z);var c=this.material.rotation;let d;if(0!==c){d=Math.cos(c);var e=Math.sin(c)}c=this.center;Df($f.set(-.5,-.5,0),ke,c,je,e,d);Df(Pe.set(.5,-.5,0),ke,c,je,e,d);Df(ag.set(.5,.5,0),ke,c,je,e,d);rj.set(0,0);mh.set(1,
0);sj.set(1,1);let f=a.ray.intersectTriangle($f,Pe,ag,!1,Oe);if(null===f&&(Df(Pe.set(-.5,.5,0),ke,c,je,e,d),mh.set(0,1),f=a.ray.intersectTriangle($f,ag,Pe,!1,Oe),null===f))return;e=a.ray.origin.distanceTo(Oe);e<a.near||e>a.far||b.push({distance:e,point:Oe.clone(),uv:tb.getUV(Oe,$f,Pe,ag,rj,mh,sj,new la),face:null,object:this})}copy(a){super.copy(a);void 0!==a.center&&this.center.copy(a.center);this.material=a.material;return this}}bg.prototype.isSprite=!0;const cg=new C,tj=new C;class uj extends Va{constructor(){super();
this._currentLevel=0;this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}});this.autoUpdate=!0}copy(a){super.copy(a,!1);const b=a.levels;for(let c=0,d=b.length;c<d;c++){const e=b[c];this.addLevel(e.object.clone(),e.distance)}this.autoUpdate=a.autoUpdate;return this}addLevel(a,b){b=Math.abs(void 0===b?0:b);const c=this.levels;let d;for(d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a);return this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(a){const b=
this.levels;if(0<b.length){let c,d;c=1;for(d=b.length;c<d&&!(a<b[c].distance);c++);return b[c-1].object}return null}raycast(a,b){if(0<this.levels.length){cg.setFromMatrixPosition(this.matrixWorld);const c=a.ray.origin.distanceTo(cg);this.getObjectForDistance(c).raycast(a,b)}}update(a){const b=this.levels;if(1<b.length){cg.setFromMatrixPosition(a.matrixWorld);tj.setFromMatrixPosition(this.matrixWorld);a=cg.distanceTo(tj)/a.zoom;b[0].object.visible=!0;let c,d;c=1;for(d=b.length;c<d;c++)if(a>=b[c].distance)b[c-
1].object.visible=!1,b[c].object.visible=!0;else break;for(this._currentLevel=c-1;c<d;c++)b[c].object.visible=!1}}toJSON(a){a=super.toJSON(a);!1===this.autoUpdate&&(a.object.autoUpdate=!1);a.object.levels=[];const b=this.levels;for(let c=0,d=b.length;c<d;c++){const e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}}const vj=new C,wj=new cb,xj=new cb,Rl=new C,yj=new Da;class dg extends ub{constructor(a,b){super(a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=
new Da;this.bindMatrixInverse=new Da}copy(a){super.copy(a);this.bindMode=a.bindMode;this.bindMatrix.copy(a.bindMatrix);this.bindMatrixInverse.copy(a.bindMatrixInverse);this.skeleton=a.skeleton;return this}bind(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.copy(b).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const a=new cb,b=this.geometry.attributes.skinWeight;for(let c=
0,d=b.count;c<d;c++){a.x=b.getX(c);a.y=b.getY(c);a.z=b.getZ(c);a.w=b.getW(c);const e=1/a.manhattanLength();Infinity!==e?a.multiplyScalar(e):a.set(1,0,0,0);b.setXYZW(c,a.x,a.y,a.z,a.w)}}updateMatrixWorld(a){super.updateMatrixWorld(a);"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(a,b){const c=this.skeleton;
var d=this.geometry;wj.fromBufferAttribute(d.attributes.skinIndex,a);xj.fromBufferAttribute(d.attributes.skinWeight,a);vj.copy(b).applyMatrix4(this.bindMatrix);b.set(0,0,0);for(a=0;4>a;a++)if(d=xj.getComponent(a),0!==d){const e=wj.getComponent(a);yj.multiplyMatrices(c.bones[e].matrixWorld,c.boneInverses[e]);b.addScaledVector(Rl.copy(vj).applyMatrix4(yj),d)}return b.applyMatrix4(this.bindMatrixInverse)}}dg.prototype.isSkinnedMesh=!0;class eg extends Va{constructor(){super();this.type="Bone"}}eg.prototype.isBone=
!0;class xd extends yb{constructor(a,b,c,d,e,f,g,h,k,l,m,n){a=void 0===a?null:a;b=void 0===b?1:b;c=void 0===c?1:c;k=void 0===k?1003:k;l=void 0===l?1003:l;super(null,f,g,h,k,l,d,e,m,n);this.image={data:a,width:b,height:c};this.magFilter=k;this.minFilter=l;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}}xd.prototype.isDataTexture=!0;const zj=new Da,Sl=new Da;class nh{constructor(a,b){a=void 0===a?[]:a;b=void 0===b?[]:b;this.uuid=Ta();this.bones=a.slice(0);this.boneInverses=b;this.boneTexture=
this.boneMatrices=null;this.boneTextureSize=0;this.frame=-1;this.init()}init(){const a=this.bones,b=this.boneInverses;this.boneMatrices=new Float32Array(16*a.length);if(0===b.length)this.calculateInverses();else if(a.length!==b.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.");this.boneInverses=[];for(let c=0,d=this.bones.length;c<d;c++)this.boneInverses.push(new Da)}}calculateInverses(){this.boneInverses.length=0;for(let a=0,b=this.bones.length;a<
b;a++){const c=new Da;this.bones[a]&&c.copy(this.bones[a].matrixWorld).invert();this.boneInverses.push(c)}}pose(){for(let b=0,c=this.bones.length;b<c;b++){var a=this.bones[b];a&&a.matrixWorld.copy(this.boneInverses[b]).invert()}for(let b=0,c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)}update(){const a=this.bones,
b=this.boneInverses,c=this.boneMatrices,d=this.boneTexture;for(let e=0,f=a.length;e<f;e++)zj.multiplyMatrices(a[e]?a[e].matrixWorld:Sl,b[e]),zj.toArray(c,16*e);null!==d&&(d.needsUpdate=!0)}clone(){return new nh(this.bones,this.boneInverses)}computeBoneTexture(){let a=Math.sqrt(4*this.bones.length);a=mc(a);a=Math.max(a,4);const b=new Float32Array(a*a*4);b.set(this.boneMatrices);const c=new xd(b,a,a,1023,1015);c.needsUpdate=!0;this.boneMatrices=b;this.boneTexture=c;this.boneTextureSize=a;return this}getBoneByName(a){for(let b=
0,c=this.bones.length;b<c;b++){const d=this.bones[b];if(d.name===a)return d}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(a,b){this.uuid=a.uuid;for(let c=0,d=a.bones.length;c<d;c++){const e=a.bones[c];let f=b[e];void 0===f&&(console.warn("THREE.Skeleton: No bone found with UUID:",e),f=new eg);this.bones.push(f);this.boneInverses.push((new Da).fromArray(a.boneInverses[c]))}this.init();return this}toJSON(){const a={metadata:{version:4.5,type:"Skeleton",
generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};a.uuid=this.uuid;const b=this.bones,c=this.boneInverses;for(let d=0,e=b.length;d<e;d++)a.bones.push(b[d].uuid),a.boneInverses.push(c[d].toArray());return a}}class yd extends $a{constructor(a,b,c,d){d=void 0===d?1:d;"number"===typeof c&&(d=c,c=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(a,b,c);this.meshPerAttribute=d}copy(a){super.copy(a);this.meshPerAttribute=a.meshPerAttribute;
return this}toJSON(){const a=super.toJSON();a.meshPerAttribute=this.meshPerAttribute;a.isInstancedBufferAttribute=!0;return a}}yd.prototype.isInstancedBufferAttribute=!0;const Aj=new Da,Bj=new Da,fg=[],Qe=new ub;class oh extends ub{constructor(a,b,c){super(a,b);this.instanceMatrix=new yd(new Float32Array(16*c),16);this.instanceColor=null;this.count=c;this.frustumCulled=!1}copy(a){super.copy(a);this.instanceMatrix.copy(a.instanceMatrix);null!==a.instanceColor&&(this.instanceColor=a.instanceColor.clone());
this.count=a.count;return this}getColorAt(a,b){b.fromArray(this.instanceColor.array,3*a)}getMatrixAt(a,b){b.fromArray(this.instanceMatrix.array,16*a)}raycast(a,b){const c=this.matrixWorld,d=this.count;Qe.geometry=this.geometry;Qe.material=this.material;if(void 0!==Qe.material)for(let e=0;e<d;e++){this.getMatrixAt(e,Aj);Bj.multiplyMatrices(c,Aj);Qe.matrixWorld=Bj;Qe.raycast(a,fg);for(let f=0,g=fg.length;f<g;f++){const h=fg[f];h.instanceId=e;h.object=this;b.push(h)}fg.length=0}}setColorAt(a,b){null===
this.instanceColor&&(this.instanceColor=new yd(new Float32Array(3*this.instanceMatrix.count),3));b.toArray(this.instanceColor.array,3*a)}setMatrixAt(a,b){b.toArray(this.instanceMatrix.array,16*a)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}oh.prototype.isInstancedMesh=!0;class Cb extends zb{constructor(a){super();this.type="LineBasicMaterial";this.color=new ua(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);
this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this}}Cb.prototype.isLineBasicMaterial=!0;const Cj=new C,Dj=new C,Ej=new Da,ph=new dd,Re=new bd;class Ic extends Va{constructor(a,b){a=void 0===a?new Ma:a;b=void 0===b?new Cb:b;super();this.type="Line";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a){super.copy(a);this.material=a.material;this.geometry=a.geometry;return this}computeLineDistances(){const a=this.geometry;if(a.isBufferGeometry)if(null===
a.index){const b=a.attributes.position,c=[0];for(let d=1,e=b.count;d<e;d++)Cj.fromBufferAttribute(b,d-1),Dj.fromBufferAttribute(b,d),c[d]=c[d-1],c[d]+=Cj.distanceTo(Dj);a.setAttribute("lineDistance",new za(c,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else a.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(a,b){var c=this.geometry,
d=this.matrixWorld,e=a.params.Line.threshold,f=c.drawRange;null===c.boundingSphere&&c.computeBoundingSphere();Re.copy(c.boundingSphere);Re.applyMatrix4(d);Re.radius+=e;if(!1!==a.ray.intersectsSphere(Re)){Ej.copy(d).invert();ph.copy(a.ray).applyMatrix4(Ej);d=e/((this.scale.x+this.scale.y+this.scale.z)/3);d*=d;e=new C;var g=new C,h=new C,k=new C,l=this.isLineSegments?2:1;if(c.isBufferGeometry){var m=c.index;c=c.attributes.position;if(null!==m){var n=Math.max(0,f.start);f=Math.min(m.count,f.start+f.count);
for(let r=n,v=f-1;r<v;r+=l)f=m.getX(r),n=m.getX(r+1),e.fromBufferAttribute(c,f),g.fromBufferAttribute(c,n),ph.distanceSqToSegment(e,g,k,h)>d||(k.applyMatrix4(this.matrixWorld),f=a.ray.origin.distanceTo(k),f<a.near||f>a.far||b.push({distance:f,point:h.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this}))}else{m=Math.max(0,f.start);f=Math.min(c.count,f.start+f.count);for(let r=m,v=f-1;r<v;r+=l)e.fromBufferAttribute(c,r),g.fromBufferAttribute(c,r+1),ph.distanceSqToSegment(e,
g,k,h)>d||(k.applyMatrix4(this.matrixWorld),f=a.ray.origin.distanceTo(k),f<a.near||f>a.far||b.push({distance:f,point:h.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this}))}}else c.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}updateMorphTargets(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=
[];this.morphTargetDictionary={};for(let c=0,d=a.length;c<d;c++)b=a[c].name||String(c),this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=c}}else a=a.morphTargets,void 0!==a&&0<a.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}Ic.prototype.isLine=!0;const Fj=new C,Gj=new C;class Qb extends Ic{constructor(a,b){super(a,b);this.type="LineSegments"}computeLineDistances(){const a=this.geometry;if(a.isBufferGeometry)if(null===
a.index){const b=a.attributes.position,c=[];for(let d=0,e=b.count;d<e;d+=2)Fj.fromBufferAttribute(b,d),Gj.fromBufferAttribute(b,d+1),c[d]=0===d?0:c[d-1],c[d+1]=c[d]+Fj.distanceTo(Gj);a.setAttribute("lineDistance",new za(c,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else a.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}
Qb.prototype.isLineSegments=!0;class qh extends Ic{constructor(a,b){super(a,b);this.type="LineLoop"}}qh.prototype.isLineLoop=!0;class zd extends zb{constructor(a){super();this.type="PointsMaterial";this.color=new ua(16777215);this.alphaMap=this.map=null;this.size=1;this.sizeAttenuation=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.alphaMap=a.alphaMap;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this}}zd.prototype.isPointsMaterial=!0;const Hj=
new Da,Pg=new dd,Se=new bd,gg=new C;class Te extends Va{constructor(a,b){a=void 0===a?new Ma:a;b=void 0===b?new zd:b;super();this.type="Points";this.geometry=a;this.material=b;this.updateMorphTargets()}copy(a){super.copy(a);this.material=a.material;this.geometry=a.geometry;return this}raycast(a,b){var c=this.geometry;const d=this.matrixWorld;var e=a.params.Points.threshold,f=c.drawRange;null===c.boundingSphere&&c.computeBoundingSphere();Se.copy(c.boundingSphere);Se.applyMatrix4(d);Se.radius+=e;if(!1!==
a.ray.intersectsSphere(Se))if(Hj.copy(d).invert(),Pg.copy(a.ray).applyMatrix4(Hj),e/=(this.scale.x+this.scale.y+this.scale.z)/3,e*=e,c.isBufferGeometry){var g=c.index;c=c.attributes.position;if(null!==g){const h=Math.max(0,f.start);f=Math.min(g.count,f.start+f.count);for(let k=h,l=f;k<l;k++)f=g.getX(k),gg.fromBufferAttribute(c,f),Fi(gg,f,e,d,a,b,this)}else{g=Math.max(0,f.start);f=Math.min(c.count,f.start+f.count);for(let h=g,k=f;h<k;h++)gg.fromBufferAttribute(c,h),Fi(gg,h,e,d,a,b,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){var a=
this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(let c=0,d=a.length;c<d;c++)b=a[c].name||String(c),this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=c}}else a=a.morphTargets,void 0!==a&&0<a.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}Te.prototype.isPoints=!0;class Ij extends yb{constructor(a,
b,c,d,e,f,g,h,k){function l(){m.needsUpdate=!0;a.requestVideoFrameCallback(l)}super(a,b,c,d,e,f,g,h,k);this.format=void 0!==g?g:1022;this.minFilter=void 0!==f?f:1006;this.magFilter=void 0!==e?e:1006;this.generateMipmaps=!1;const m=this;"requestVideoFrameCallback"in a&&a.requestVideoFrameCallback(l)}clone(){return(new this.constructor(this.image)).copy(this)}update(){const a=this.image;!1==="requestVideoFrameCallback"in a&&a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Ij.prototype.isVideoTexture=
!0;class Jj extends yb{constructor(a,b,c){super({width:a,height:b});this.format=c;this.minFilter=this.magFilter=1003;this.generateMipmaps=!1;this.needsUpdate=!0}}Jj.prototype.isFramebufferTexture=!0;class rh extends yb{constructor(a,b,c,d,e,f,g,h,k,l,m,n){super(null,f,g,h,k,l,d,e,m,n);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}}rh.prototype.isCompressedTexture=!0;class Kj extends yb{constructor(a,b,c,d,e,f,g,h,k){super(a,b,c,d,e,f,g,h,k);this.needsUpdate=!0}}Kj.prototype.isCanvasTexture=
!0;class Ue extends Ma{constructor(a,b,c,d){a=void 0===a?1:a;b=void 0===b?8:b;c=void 0===c?0:c;d=void 0===d?2*Math.PI:d;super();this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};b=Math.max(3,b);const e=[],f=[],g=[],h=[],k=new C,l=new la;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);for(let m=0,n=3;m<=b;m++,n+=3){const r=c+m/b*d;k.x=a*Math.cos(r);k.y=a*Math.sin(r);f.push(k.x,k.y,k.z);g.push(0,0,1);l.x=(f[n]/a+1)/2;l.y=(f[n+1]/a+1)/2;h.push(l.x,l.y)}for(a=1;a<=
b;a++)e.push(a,a+1,0);this.setIndex(e);this.setAttribute("position",new za(f,3));this.setAttribute("normal",new za(g,3));this.setAttribute("uv",new za(h,2))}static fromJSON(a){return new Ue(a.radius,a.segments,a.thetaStart,a.thetaLength)}}class Ad extends Ma{constructor(a,b,c,d,e,f,g,h){function k(q){const H=t;var J=new la,K=new C;let S=0;var P=!0===q?a:b;const U=!0===q?1:-1;for(var V=1;V<=d;V++)n.push(0,E*U,0),r.push(0,U,0),v.push(.5,.5),t++;V=t;for(let da=0;da<=d;da++){var W=da/d*h+g;const ka=Math.cos(W);
W=Math.sin(W);K.x=P*W;K.y=E*U;K.z=P*ka;n.push(K.x,K.y,K.z);r.push(0,U,0);J.x=.5*ka+.5;J.y=.5*W*U+.5;v.push(J.x,J.y);t++}for(J=0;J<d;J++)K=H+J,P=V+J,!0===q?m.push(P,P+1,K):m.push(P+1,P,K),S+=3;l.addGroup(M,S,!0===q?1:2);M+=S}a=void 0===a?1:a;b=void 0===b?1:b;c=void 0===c?1:c;d=void 0===d?8:d;e=void 0===e?1:e;f=void 0===f?!1:f;g=void 0===g?0:g;h=void 0===h?2*Math.PI:h;super();this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,
thetaStart:g,thetaLength:h};const l=this;d=Math.floor(d);e=Math.floor(e);const m=[],n=[],r=[],v=[];let t=0;const y=[],E=c/2;let M=0;(function(){var q=new C,H=new C;let J=0;var K=(b-a)/c;for(var S=0;S<=e;S++){var P=[];const V=S/e,W=V*(b-a)+a;for(let da=0;da<=d;da++){const ka=da/d;var U=ka*h+g;const ya=Math.sin(U);U=Math.cos(U);H.x=W*ya;H.y=-V*c+E;H.z=W*U;n.push(H.x,H.y,H.z);q.set(ya,K,U).normalize();r.push(q.x,q.y,q.z);v.push(ka,1-V);P.push(t++)}y.push(P)}for(q=0;q<d;q++)for(H=0;H<e;H++)K=y[H+1][q],
S=y[H+1][q+1],P=y[H][q+1],m.push(y[H][q],K,P),m.push(K,S,P),J+=6;l.addGroup(M,J,0);M+=J})();!1===f&&(0<a&&k(!0),0<b&&k(!1));this.setIndex(m);this.setAttribute("position",new za(n,3));this.setAttribute("normal",new za(r,3));this.setAttribute("uv",new za(v,2))}static fromJSON(a){return new Ad(a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)}}class Ve extends Ad{constructor(a,b,c,d,e,f,g){a=void 0===a?1:a;b=void 0===b?1:b;c=void 0===c?8:c;
d=void 0===d?1:d;e=void 0===e?!1:e;f=void 0===f?0:f;g=void 0===g?2*Math.PI:g;super(0,a,b,c,d,e,f,g);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}static fromJSON(a){return new Ve(a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength)}}class Jc extends Ma{constructor(a,b,c,d){function e(l){h.push(l.x,l.y,l.z)}function f(l,m){l*=3;m.x=a[l+0];m.y=a[l+1];m.z=a[l+2]}function g(l,
m,n,r){0>r&&1===l.x&&(k[m]=l.x-1);0===n.x&&0===n.z&&(k[m]=r/2/Math.PI+.5)}a=void 0===a?[]:a;b=void 0===b?[]:b;c=void 0===c?1:c;d=void 0===d?0:d;super();this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};const h=[],k=[];(function(l){const m=new C,n=new C,r=new C;for(let E=0;E<b.length;E+=3){f(b[E+0],m);f(b[E+1],n);f(b[E+2],r);var v=m,t=n,y=r;const M=l+1,q=[];for(let H=0;H<=M;H++){q[H]=[];const J=v.clone().lerp(y,H/M),K=t.clone().lerp(y,H/M),S=M-H;for(let P=0;P<=
S;P++)q[H][P]=0===P&&H===M?J:J.clone().lerp(K,P/S)}for(v=0;v<M;v++)for(t=0;t<2*(M-v)-1;t++)y=Math.floor(t/2),0===t%2?(e(q[v][y+1]),e(q[v+1][y]),e(q[v][y])):(e(q[v][y+1]),e(q[v+1][y+1]),e(q[v+1][y]))}})(d);(function(l){const m=new C;for(let n=0;n<h.length;n+=3)m.x=h[n+0],m.y=h[n+1],m.z=h[n+2],m.normalize().multiplyScalar(l),h[n+0]=m.x,h[n+1]=m.y,h[n+2]=m.z})(c);(function(){var l=new C;for(var m=0;m<h.length;m+=3)l.x=h[m+0],l.y=h[m+1],l.z=h[m+2],k.push(Math.atan2(l.z,-l.x)/2/Math.PI+.5,1-(Math.atan2(-l.y,
Math.sqrt(l.x*l.x+l.z*l.z))/Math.PI+.5));l=new C;m=new C;var n=new C,r=new C,v=new la;const t=new la,y=new la;for(let E=0,M=0;E<h.length;E+=9,M+=6){l.set(h[E+0],h[E+1],h[E+2]);m.set(h[E+3],h[E+4],h[E+5]);n.set(h[E+6],h[E+7],h[E+8]);v.set(k[M+0],k[M+1]);t.set(k[M+2],k[M+3]);y.set(k[M+4],k[M+5]);r.copy(l).add(m).add(n).divideScalar(3);const q=Math.atan2(r.z,-r.x);g(v,M+0,l,q);g(t,M+2,m,q);g(y,M+4,n,q)}for(l=0;l<k.length;l+=6)m=k[l+0],n=k[l+2],r=k[l+4],v=Math.min(m,n,r),.9<Math.max(m,n,r)&&.1>v&&(.2>
m&&(k[l+0]+=1),.2>n&&(k[l+2]+=1),.2>r&&(k[l+4]+=1))})();this.setAttribute("position",new za(h,3));this.setAttribute("normal",new za(h.slice(),3));this.setAttribute("uv",new za(k,2));0===d?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(a){return new Jc(a.vertices,a.indices,a.radius,a.details)}}class We extends Jc{constructor(a,b){a=void 0===a?1:a;b=void 0===b?0:b;const c=(1+Math.sqrt(5))/2,d=1/c;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,
0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new We(a.radius,a.detail)}}const hg=new C,ig=new C,sh=new C,jg=
new tb;class th extends Ma{constructor(a,b){a=void 0===a?null:a;b=void 0===b?1:b;super();this.type="EdgesGeometry";this.parameters={geometry:a,thresholdAngle:b};if(null!==a){const d=Math.pow(10,4);b=Math.cos(rd*b);const e=a.getIndex();a=a.getAttribute("position");const f=e?e.count:a.count,g=[0,0,0],h=["a","b","c"],k=Array(3),l={},m=[];for(let n=0;n<f;n+=3){e?(g[0]=e.getX(n),g[1]=e.getX(n+1),g[2]=e.getX(n+2)):(g[0]=n,g[1]=n+1,g[2]=n+2);const {a:r,b:v,c:t}=jg;r.fromBufferAttribute(a,g[0]);v.fromBufferAttribute(a,
g[1]);t.fromBufferAttribute(a,g[2]);jg.getNormal(sh);k[0]=`${Math.round(r.x*d)},${Math.round(r.y*d)},${Math.round(r.z*d)}`;k[1]=`${Math.round(v.x*d)},${Math.round(v.y*d)},${Math.round(v.z*d)}`;k[2]=`${Math.round(t.x*d)},${Math.round(t.y*d)},${Math.round(t.z*d)}`;if(k[0]!==k[1]&&k[1]!==k[2]&&k[2]!==k[0])for(let y=0;3>y;y++){const E=(y+1)%3;var c=k[y];const M=k[E],q=jg[h[y]],H=jg[h[E]],J=`${c}_${M}`;c=`${M}_${c}`;c in l&&l[c]?(sh.dot(l[c].normal)<=b&&(m.push(q.x,q.y,q.z),m.push(H.x,H.y,H.z)),l[c]=null):
J in l||(l[J]={index0:g[y],index1:g[E],normal:sh.clone()})}}for(const n in l)if(l[n]){const {index0:r,index1:v}=l[n];hg.fromBufferAttribute(a,r);ig.fromBufferAttribute(a,v);m.push(hg.x,hg.y,hg.z);m.push(ig.x,ig.y,ig.z)}this.setAttribute("position",new za(m,3))}}}class Xb{constructor(){this.type="Curve";this.arcLengthDivisions=200}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.");return null}getPointAt(a,b){a=this.getUtoTmapping(a);return this.getPoint(a,b)}getPoints(a){a=void 0===
a?5:a;const b=[];for(let c=0;c<=a;c++)b.push(this.getPoint(c/a));return b}getSpacedPoints(a){a=void 0===a?5:a;const b=[];for(let c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b}getLength(){const a=this.getLengths();return a[a.length-1]}getLengths(a){a=void 0===a?this.arcLengthDivisions:a;if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const b=[];let c,d=this.getPoint(0),e=0;b.push(0);for(let f=1;f<=a;f++)c=this.getPoint(f/
a),e+=c.distanceTo(d),b.push(e),d=c;return this.cacheArcLengths=b}updateArcLengths(){this.needsUpdate=!0;this.getLengths()}getUtoTmapping(a,b){const c=this.getLengths(),d=c.length;b=b?b:a*c[d-1];var e=0;let f=d-1,g;for(;e<=f;)if(a=Math.floor(e+(f-e)/2),g=c[a]-b,0>g)e=a+1;else if(0<g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a/(d-1);e=c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)}getTangent(a,b){var c=a-1E-4;a+=1E-4;0>c&&(c=0);1<a&&(a=1);c=this.getPoint(c);a=this.getPoint(a);b=b||(c.isVector2?new la:new C);
b.copy(a).sub(c).normalize();return b}getTangentAt(a,b){a=this.getUtoTmapping(a);return this.getTangent(a,b)}computeFrenetFrames(a,b){var c=new C;const d=[],e=[],f=[];var g=new C;const h=new Da;for(var k=0;k<=a;k++)d[k]=this.getTangentAt(k/a,new C);e[0]=new C;f[0]=new C;k=Number.MAX_VALUE;const l=Math.abs(d[0].x),m=Math.abs(d[0].y),n=Math.abs(d[0].z);l<=k&&(k=l,c.set(1,0,0));m<=k&&(k=m,c.set(0,1,0));n<=k&&c.set(0,0,1);g.crossVectors(d[0],c).normalize();e[0].crossVectors(d[0],g);f[0].crossVectors(d[0],
e[0]);for(c=1;c<=a;c++)e[c]=e[c-1].clone(),f[c]=f[c-1].clone(),g.crossVectors(d[c-1],d[c]),g.length()>Number.EPSILON&&(g.normalize(),k=Math.acos(Ua(d[c-1].dot(d[c]),-1,1)),e[c].applyMatrix4(h.makeRotationAxis(g,k))),f[c].crossVectors(d[c],e[c]);if(!0===b)for(b=Math.acos(Ua(e[0].dot(e[a]),-1,1)),b/=a,0<d[0].dot(g.crossVectors(e[0],e[a]))&&(b=-b),g=1;g<=a;g++)e[g].applyMatrix4(h.makeRotationAxis(d[g],b*g)),f[g].crossVectors(d[g],e[g]);return{tangents:d,normals:e,binormals:f}}clone(){return(new this.constructor).copy(this)}copy(a){this.arcLengthDivisions=
a.arcLengthDivisions;return this}toJSON(){const a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};a.arcLengthDivisions=this.arcLengthDivisions;a.type=this.type;return a}fromJSON(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}}class Xe extends Xb{constructor(a,b,c,d,e,f,g,h){a=void 0===a?0:a;b=void 0===b?0:b;c=void 0===c?1:c;d=void 0===d?1:d;e=void 0===e?0:e;f=void 0===f?2*Math.PI:f;g=void 0===g?!1:g;h=void 0===h?0:h;super();this.type="EllipseCurve";this.aX=a;this.aY=b;
this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=g;this.aRotation=h}getPoint(a,b){b=b||new la;for(var c=2*Math.PI,d=this.aEndAngle-this.aStartAngle,e=Math.abs(d)<Number.EPSILON;0>d;)d+=c;for(;d>c;)d-=c;d<Number.EPSILON&&(d=e?0:c);!0!==this.aClockwise||e||(d=d===c?-c:d-c);c=this.aStartAngle+a*d;a=this.aX+this.xRadius*Math.cos(c);var f=this.aY+this.yRadius*Math.sin(c);0!==this.aRotation&&(c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a-this.aX,f-=this.aY,a=
e*c-f*d+this.aX,f=e*d+f*c+this.aY);return b.set(a,f)}copy(a){super.copy(a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this}toJSON(){const a=super.toJSON();a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=this.aRotation;return a}fromJSON(a){super.fromJSON(a);
this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this}}Xe.prototype.isEllipseCurve=!0;class uh extends Xe{constructor(a,b,c,d,e,f){super(a,b,c,c,d,e,f);this.type="ArcCurve"}}uh.prototype.isArcCurve=!0;const kg=new C,vh=new Qg,wh=new Qg,xh=new Qg;class yh extends Xb{constructor(a,b,c,d){a=void 0===a?[]:a;b=void 0===b?!1:b;c=void 0===c?"centripetal":c;d=void 0===
d?.5:d;super();this.type="CatmullRomCurve3";this.points=a;this.closed=b;this.curveType=c;this.tension=d}getPoint(a,b){b=void 0===b?new C:b;var c=this.points,d=c.length;a*=d-(this.closed?0:1);var e=Math.floor(a);a-=e;this.closed?e+=0<e?0:(Math.floor(Math.abs(e)/d)+1)*d:0===a&&e===d-1&&(e=d-2,a=1);let f;this.closed||0<e?f=c[(e-1)%d]:(kg.subVectors(c[0],c[1]).add(c[0]),f=kg);const g=c[e%d],h=c[(e+1)%d];this.closed||e+2<d?c=c[(e+2)%d]:(kg.subVectors(c[d-1],c[d-2]).add(c[d-1]),c=kg);if("centripetal"===
this.curveType||"chordal"===this.curveType){var k="chordal"===this.curveType?.5:.25;d=Math.pow(f.distanceToSquared(g),k);e=Math.pow(g.distanceToSquared(h),k);k=Math.pow(h.distanceToSquared(c),k);1E-4>e&&(e=1);1E-4>d&&(d=e);1E-4>k&&(k=e);vh.initNonuniformCatmullRom(f.x,g.x,h.x,c.x,d,e,k);wh.initNonuniformCatmullRom(f.y,g.y,h.y,c.y,d,e,k);xh.initNonuniformCatmullRom(f.z,g.z,h.z,c.z,d,e,k)}else"catmullrom"===this.curveType&&(vh.initCatmullRom(f.x,g.x,h.x,c.x,this.tension),wh.initCatmullRom(f.y,g.y,h.y,
c.y,this.tension),xh.initCatmullRom(f.z,g.z,h.z,c.z,this.tension));b.set(vh.calc(a),wh.calc(a),xh.calc(a));return b}copy(a){super.copy(a);this.points=[];for(let b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this}toJSON(){const a=super.toJSON();a.points=[];for(let b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;
return a}fromJSON(a){super.fromJSON(a);this.points=[];for(let b=0,c=a.points.length;b<c;b++){const d=a.points[b];this.points.push((new C).fromArray(d))}this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this}}yh.prototype.isCatmullRomCurve3=!0;class lg extends Xb{constructor(a,b,c,d){a=void 0===a?new la:a;b=void 0===b?new la:b;c=void 0===c?new la:c;d=void 0===d?new la:d;super();this.type="CubicBezierCurve";this.v0=a;this.v1=b;this.v2=c;this.v3=d}getPoint(a,b){b=void 0===
b?new la:b;const c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(Ae(a,c.x,d.x,e.x,f.x),Ae(a,c.y,d.y,e.y,f.y));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this}}lg.prototype.isCubicBezierCurve=
!0;class zh extends Xb{constructor(a,b,c,d){a=void 0===a?new C:a;b=void 0===b?new C:b;c=void 0===c?new C:c;d=void 0===d?new C:d;super();this.type="CubicBezierCurve3";this.v0=a;this.v1=b;this.v2=c;this.v3=d}getPoint(a,b){b=void 0===b?new C:b;const c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(Ae(a,c.x,d.x,e.x,f.x),Ae(a,c.y,d.y,e.y,f.y),Ae(a,c.z,d.z,e.z,f.z));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this}toJSON(){const a=super.toJSON();
a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this}}zh.prototype.isCubicBezierCurve3=!0;class Ye extends Xb{constructor(a,b){a=void 0===a?new la:a;b=void 0===b?new la:b;super();this.type="LineCurve";this.v1=a;this.v2=b}getPoint(a,b){b=void 0===b?new la:b;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));
return b}getPointAt(a,b){return this.getPoint(a,b)}getTangent(a,b){a=b||new la;a.copy(this.v2).sub(this.v1).normalize();return a}copy(a){super.copy(a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}Ye.prototype.isLineCurve=!0;class Lj extends Xb{constructor(a,b){a=void 0===a?new C:a;b=void 0===b?new C:b;super();this.type=
"LineCurve3";this.isLineCurve3=!0;this.v1=a;this.v2=b}getPoint(a,b){b=void 0===b?new C:b;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b}getPointAt(a,b){return this.getPoint(a,b)}copy(a){super.copy(a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}class mg extends Xb{constructor(a,
b,c){a=void 0===a?new la:a;b=void 0===b?new la:b;c=void 0===c?new la:c;super();this.type="QuadraticBezierCurve";this.v0=a;this.v1=b;this.v2=c}getPoint(a,b){b=void 0===b?new la:b;const c=this.v0,d=this.v1,e=this.v2;b.set(ze(a,c.x,d.x,e.x),ze(a,c.y,d.y,e.y));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);
this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}mg.prototype.isQuadraticBezierCurve=!0;class ng extends Xb{constructor(a,b,c){a=void 0===a?new C:a;b=void 0===b?new C:b;c=void 0===c?new C:c;super();this.type="QuadraticBezierCurve3";this.v0=a;this.v1=b;this.v2=c}getPoint(a,b){b=void 0===b?new C:b;const c=this.v0,d=this.v1,e=this.v2;b.set(ze(a,c.x,d.x,e.x),ze(a,c.y,d.y,e.y),ze(a,c.z,d.z,e.z));return b}copy(a){super.copy(a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this}toJSON(){const a=
super.toJSON();a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a}fromJSON(a){super.fromJSON(a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this}}ng.prototype.isQuadraticBezierCurve3=!0;class og extends Xb{constructor(a){a=void 0===a?[]:a;super();this.type="SplineCurve";this.points=a}getPoint(a,b){b=void 0===b?new la:b;var c=this.points,d=(c.length-1)*a;a=Math.floor(d);d-=a;const e=c[0===a?a:a-1],f=c[a],g=c[a>c.length-2?c.length-1:a+1];
c=c[a>c.length-3?c.length-1:a+2];b.set(Gi(d,e.x,f.x,g.x,c.x),Gi(d,e.y,f.y,g.y,c.y));return b}copy(a){super.copy(a);this.points=[];for(let b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());return this}toJSON(){const a=super.toJSON();a.points=[];for(let b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());return a}fromJSON(a){super.fromJSON(a);this.points=[];for(let b=0,c=a.points.length;b<c;b++){const d=a.points[b];this.points.push((new la).fromArray(d))}return this}}
og.prototype.isSplineCurve=!0;var Ah=Object.freeze({__proto__:null,ArcCurve:uh,CatmullRomCurve3:yh,CubicBezierCurve:lg,CubicBezierCurve3:zh,EllipseCurve:Xe,LineCurve:Ye,LineCurve3:Lj,QuadraticBezierCurve:mg,QuadraticBezierCurve3:ng,SplineCurve:og});class Mj extends Xb{constructor(){super();this.type="CurvePath";this.curves=[];this.autoClose=!1}add(a){this.curves.push(a)}closePath(){const a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new Ye(b,
a))}getPoint(a,b){var c=a*this.getLength(),d=this.getCurveLengths();for(a=0;a<d.length;){if(d[a]>=c)return c=d[a]-c,a=this.curves[a],d=a.getLength(),a.getPointAt(0===d?0:1-c/d,b);a++}return null}getLength(){const a=this.getCurveLengths();return a[a.length-1]}updateArcLengths(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const a=[];let b=0;for(let c=0,d=this.curves.length;c<
d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a}getSpacedPoints(a){a=void 0===a?40:a;const b=[];for(let c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b}getPoints(a){a=void 0===a?12:a;const b=[];let c;for(let e=0,f=this.curves;e<f.length;e++){var d=f[e];d=d.getPoints(d&&d.isEllipseCurve?2*a:d&&(d.isLineCurve||d.isLineCurve3)?1:d&&d.isSplineCurve?a*d.points.length:a);for(let g=0;g<d.length;g++){const h=d[g];c&&c.equals(h)||(b.push(h),c=h)}}this.autoClose&&
1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b}copy(a){super.copy(a);this.curves=[];for(let b=0,c=a.curves.length;b<c;b++)this.curves.push(a.curves[b].clone());this.autoClose=a.autoClose;return this}toJSON(){const a=super.toJSON();a.autoClose=this.autoClose;a.curves=[];for(let b=0,c=this.curves.length;b<c;b++)a.curves.push(this.curves[b].toJSON());return a}fromJSON(a){super.fromJSON(a);this.autoClose=a.autoClose;this.curves=[];for(let b=0,c=a.curves.length;b<c;b++){const d=a.curves[b];
this.curves.push((new Ah[d.type]).fromJSON(d))}return this}}class Ze extends Mj{constructor(a){super();this.type="Path";this.currentPoint=new la;a&&this.setFromPoints(a)}setFromPoints(a){this.moveTo(a[0].x,a[0].y);for(let b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y);return this}moveTo(a,b){this.currentPoint.set(a,b);return this}lineTo(a,b){const c=new Ye(this.currentPoint.clone(),new la(a,b));this.curves.push(c);this.currentPoint.set(a,b);return this}quadraticCurveTo(a,b,c,d){a=new mg(this.currentPoint.clone(),
new la(a,b),new la(c,d));this.curves.push(a);this.currentPoint.set(c,d);return this}bezierCurveTo(a,b,c,d,e,f){a=new lg(this.currentPoint.clone(),new la(a,b),new la(c,d),new la(e,f));this.curves.push(a);this.currentPoint.set(e,f);return this}splineThru(a){var b=[this.currentPoint.clone()].concat(a);b=new og(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1]);return this}arc(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f);return this}absarc(a,b,c,d,e,f){this.absellipse(a,
b,c,c,d,e,f);return this}ellipse(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h);return this}absellipse(a,b,c,d,e,f,g,h){a=new Xe(a,b,c,d,e,f,g,h);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a);return this}copy(a){super.copy(a);this.currentPoint.copy(a.currentPoint);return this}toJSON(){const a=super.toJSON();a.currentPoint=this.currentPoint.toArray();
return a}fromJSON(a){super.fromJSON(a);this.currentPoint.fromArray(a.currentPoint);return this}}class qc extends Ze{constructor(a){super(a);this.uuid=Ta();this.type="Shape";this.holes=[]}getPointsHoles(a){const b=[];for(let c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b}extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}copy(a){super.copy(a);this.holes=[];for(let b=0,c=a.holes.length;b<c;b++)this.holes.push(a.holes[b].clone());return this}toJSON(){const a=
super.toJSON();a.uuid=this.uuid;a.holes=[];for(let b=0,c=this.holes.length;b<c;b++)a.holes.push(this.holes[b].toJSON());return a}fromJSON(a){super.fromJSON(a);this.uuid=a.uuid;this.holes=[];for(let b=0,c=a.holes.length;b<c;b++){const d=a.holes[b];this.holes.push((new Ze).fromJSON(d))}return this}}const Tl={triangulate:function(a,b,c){c=void 0===c?2:c;var d=b&&b.length;const e=d?b[0]*c:a.length;var f=Hi(a,0,e,c,!0);const g=[];if(!f||f.next===f.prev)return g;let h,k;var l;if(d){var m=c;d=[];let t;let y;
var n=0;for(t=b.length;n<t;n++){var r=b[n]*m;var v=n<t-1?b[n+1]*m:a.length;y=Hi(a,r,v,m,!1);y===y.next&&(y.steiner=!0);r=d;v=r.push;let E=y,M=y;do{if(E.x<M.x||E.x===M.x&&E.y<M.y)M=E;E=E.next}while(E!==y);v.call(r,M)}d.sort(zl);for(n=0;n<d.length;n++){m=d[n];b=f;if(b=Al(m,b))m=Ki(b,m),Yc(b,b.next),Yc(m,m.next);f=Yc(f,f.next)}}if(a.length>80*c){h=l=a[0];k=d=a[1];for(m=c;m<e;m+=c)n=a[m],b=a[m+1],n<h&&(h=n),b<k&&(k=b),n>l&&(l=n),b>d&&(d=b);l=Math.max(l-h,d-k);l=0!==l?1/l:0}Ce(f,g,c,h,k,l);return g}};
class Kc{static area(a){const b=a.length;let c=0;for(let d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c}static isClockWise(a){return 0>Kc.area(a)}static triangulateShape(a,b){var c=[];const d=[],e=[];Li(a);Mi(c,a);a=a.length;b.forEach(Li);for(let f=0;f<b.length;f++)d.push(a),a+=b[f].length,Mi(c,b[f]);b=Tl.triangulate(c,d);for(c=0;c<b.length;c+=3)e.push(b.slice(c,c+3));return e}}class Lc extends Ma{constructor(a,b){function c(g){function h(N,z,X){z||console.error("THREE.ExtrudeGeometry: vec does not exist");
return z.clone().multiplyScalar(X).add(N)}function k(N,z,X){var aa=N.x-z.x;var ja=N.y-z.y;var ha=X.x-N.x;var Aa=X.y-N.y,Fa=aa*aa+ja*ja;if(Math.abs(aa*Aa-ja*ha)>Number.EPSILON){const va=Math.sqrt(Fa),xa=Math.sqrt(ha*ha+Aa*Aa);Fa=z.x-ja/va;z=z.y+aa/va;Aa=((X.x-Aa/xa-Fa)*Aa-(X.y+ha/xa-z)*ha)/(aa*Aa-ja*ha);ha=Fa+aa*Aa-N.x;aa=z+ja*Aa-N.y;ja=ha*ha+aa*aa;if(2>=ja)return new la(ha,aa);ja=Math.sqrt(ja/2)}else N=!1,aa>Number.EPSILON?ha>Number.EPSILON&&(N=!0):aa<-Number.EPSILON?ha<-Number.EPSILON&&(N=!0):Math.sign(ja)===
Math.sign(Aa)&&(N=!0),N?(ha=-ja,ja=Math.sqrt(Fa)):(ha=aa,aa=ja,ja=Math.sqrt(Fa/2));return new la(ha/ja,aa/ja)}function l(N,z){let X=N.length;for(;0<=--X;){const Aa=X;let Fa=X-1;0>Fa&&(Fa=N.length-1);for(let va=0,xa=E+2*S;va<xa;va++){const ab=qa*va;var aa=qa*(va+1),ja=z+Fa+ab,ha=z+Fa+aa;aa=z+Aa+aa;r(z+Aa+ab);r(ja);r(aa);r(ja);r(ha);r(aa);ja=e.length/3;ja=U.generateSideWallUV(d,e,ja-6,ja-3,ja-2,ja-1);v(ja[0]);v(ja[1]);v(ja[3]);v(ja[1]);v(ja[2]);v(ja[3])}}}function m(N,z,X){t.push(N);t.push(z);t.push(X)}
function n(N,z,X){r(N);r(z);r(X);N=e.length/3;N=U.generateTopUV(d,e,N-3,N-2,N-1);v(N[0]);v(N[1]);v(N[2])}function r(N){e.push(t[3*N]);e.push(t[3*N+1]);e.push(t[3*N+2])}function v(N){f.push(N.x);f.push(N.y)}const t=[];var y=void 0!==b.curveSegments?b.curveSegments:12;const E=void 0!==b.steps?b.steps:1;let M=void 0!==b.depth?b.depth:1,q=void 0!==b.bevelEnabled?b.bevelEnabled:!0,H=void 0!==b.bevelThickness?b.bevelThickness:.2,J=void 0!==b.bevelSize?b.bevelSize:H-.1,K=void 0!==b.bevelOffset?b.bevelOffset:
0,S=void 0!==b.bevelSegments?b.bevelSegments:3;var P=b.extrudePath;const U=void 0!==b.UVGenerator?b.UVGenerator:Ul;void 0!==b.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),M=b.amount);let V,W=!1;if(P){V=P.getSpacedPoints(E);W=!0;q=!1;var da=P.computeFrenetFrames(E,!1);var ka=new C;var ya=new C;var pa=new C}q||(K=J=H=S=0);g=g.extractPoints(y);P=g.shape;const Ia=g.holes;if(!Kc.isClockWise(P)){P=P.reverse();for(let N=0,z=Ia.length;N<z;N++)g=Ia[N],Kc.isClockWise(g)&&
(Ia[N]=g.reverse())}const wa=Kc.triangulateShape(P,Ia),na=P;for(let N=0,z=Ia.length;N<z;N++)P=P.concat(Ia[N]);const qa=P.length,Ca=wa.length;g=[];for(let N=0,z=na.length,X=z-1,aa=N+1;N<z;N++,X++,aa++)X===z&&(X=0),aa===z&&(aa=0),g[N]=k(na[N],na[X],na[aa]);y=[];let Qa=g.concat();for(let N=0,z=Ia.length;N<z;N++){var Ea=Ia[N];var A=[];for(let X=0,aa=Ea.length,ja=aa-1,ha=X+1;X<aa;X++,ja++,ha++)ja===aa&&(ja=0),ha===aa&&(ha=0),A[X]=k(Ea[X],Ea[ja],Ea[ha]);y.push(A);Qa=Qa.concat(A)}for(Ea=0;Ea<S;Ea++){A=Ea/
S;var F=H*Math.cos(A*Math.PI/2),T=J*Math.sin(A*Math.PI/2)+K;for(let N=0,z=na.length;N<z;N++)A=h(na[N],g[N],T),m(A.x,A.y,-F);for(let N=0,z=Ia.length;N<z;N++){const X=Ia[N];A=y[N];for(let aa=0,ja=X.length;aa<ja;aa++){const ha=h(X[aa],A[aa],T);m(ha.x,ha.y,-F)}}}A=J+K;for(Ea=0;Ea<qa;Ea++)F=q?h(P[Ea],Qa[Ea],A):P[Ea],W?(ya.copy(da.normals[0]).multiplyScalar(F.x),ka.copy(da.binormals[0]).multiplyScalar(F.y),pa.copy(V[0]).add(ya).add(ka),m(pa.x,pa.y,pa.z)):m(F.x,F.y,0);for(Ea=1;Ea<=E;Ea++)for(F=0;F<qa;F++)T=
q?h(P[F],Qa[F],A):P[F],W?(ya.copy(da.normals[Ea]).multiplyScalar(T.x),ka.copy(da.binormals[Ea]).multiplyScalar(T.y),pa.copy(V[Ea]).add(ya).add(ka),m(pa.x,pa.y,pa.z)):m(T.x,T.y,M/E*Ea);for(da=S-1;0<=da;da--){ya=da/S;ka=H*Math.cos(ya*Math.PI/2);ya=J*Math.sin(ya*Math.PI/2)+K;for(let N=0,z=na.length;N<z;N++)pa=h(na[N],g[N],ya),m(pa.x,pa.y,M+ka);for(let N=0,z=Ia.length;N<z;N++){pa=Ia[N];A=y[N];for(let X=0,aa=pa.length;X<aa;X++)P=h(pa[X],A[X],ya),W?m(P.x,P.y+V[E-1].y,V[E-1].x+ka):m(P.x,P.y,M+ka)}}(function(){const N=
e.length/3;if(q){var z=0*qa;for(var X=0;X<Ca;X++){var aa=wa[X];n(aa[2]+z,aa[1]+z,aa[0]+z)}z=qa*(E+2*S);for(X=0;X<Ca;X++)aa=wa[X],n(aa[0]+z,aa[1]+z,aa[2]+z)}else{for(z=0;z<Ca;z++)X=wa[z],n(X[2],X[1],X[0]);for(z=0;z<Ca;z++)X=wa[z],n(X[0]+qa*E,X[1]+qa*E,X[2]+qa*E)}d.addGroup(N,e.length/3-N,0)})();(function(){const N=e.length/3;let z=0;l(na,z);z+=na.length;for(let X=0,aa=Ia.length;X<aa;X++){const ja=Ia[X];l(ja,z);z+=ja.length}d.addGroup(N,e.length/3-N,1)})()}a=void 0===a?new qc([new la(.5,.5),new la(-.5,
.5),new la(-.5,-.5),new la(.5,-.5)]):a;b=void 0===b?{}:b;super();this.type="ExtrudeGeometry";this.parameters={shapes:a,options:b};a=Array.isArray(a)?a:[a];const d=this,e=[],f=[];for(let g=0,h=a.length;g<h;g++)c(a[g]);this.setAttribute("position",new za(e,3));this.setAttribute("uv",new za(f,2));this.computeVertexNormals()}toJSON(){const a=super.toJSON();var b=this.parameters.shapes,c=this.parameters.options;a.shapes=[];if(Array.isArray(b))for(let d=0,e=b.length;d<e;d++)a.shapes.push(b[d].uuid);else a.shapes.push(b.uuid);
void 0!==c.extrudePath&&(a.options.extrudePath=c.extrudePath.toJSON());return a}static fromJSON(a,b){const c=[];for(let d=0,e=a.shapes.length;d<e;d++)c.push(b[a.shapes[d]]);b=a.options.extrudePath;void 0!==b&&(a.options.extrudePath=(new Ah[b.type]).fromJSON(b));return new Lc(c,a.options)}}const Ul={generateTopUV:function(a,b,c,d,e){a=b[3*d];d=b[3*d+1];const f=b[3*e];e=b[3*e+1];return[new la(b[3*c],b[3*c+1]),new la(a,d),new la(f,e)]},generateSideWallUV:function(a,b,c,d,e,f){a=b[3*c];const g=b[3*c+
1];c=b[3*c+2];const h=b[3*d],k=b[3*d+1];d=b[3*d+2];const l=b[3*e],m=b[3*e+1];e=b[3*e+2];const n=b[3*f],r=b[3*f+1];b=b[3*f+2];return Math.abs(g-k)<Math.abs(a-h)?[new la(a,1-c),new la(h,1-d),new la(l,1-e),new la(n,1-b)]:[new la(g,1-c),new la(k,1-d),new la(m,1-e),new la(r,1-b)]}};class $e extends Jc{constructor(a,b){a=void 0===a?1:a;b=void 0===b?0:b;const c=(1+Math.sqrt(5))/2;super([-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,
1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new $e(a.radius,a.detail)}}class af extends Ma{constructor(a,b,c,d){a=void 0===a?[new la(0,.5),new la(.5,0),new la(0,-.5)]:a;b=void 0===b?12:b;c=void 0===c?0:c;d=void 0===d?2*Math.PI:d;super();this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b);d=Ua(d,0,
2*Math.PI);const e=[],f=[],g=[];var h=[];const k=[];var l=1/b,m=new C,n=new la,r=new C,v=new C,t=new C;let y;for(let M=0;M<=a.length-1;M++)switch(M){case 0:var E=a[M+1].x-a[M].x;y=a[M+1].y-a[M].y;r.x=1*y;r.y=-E;r.z=0*y;t.copy(r);r.normalize();h.push(r.x,r.y,r.z);break;case a.length-1:h.push(t.x,t.y,t.z);break;default:E=a[M+1].x-a[M].x,y=a[M+1].y-a[M].y,r.x=1*y,r.y=-E,r.z=0*y,v.copy(r),r.x+=t.x,r.y+=t.y,r.z+=t.z,r.normalize(),h.push(r.x,r.y,r.z),t.copy(v)}for(r=0;r<=b;r++)for(t=c+r*l*d,v=Math.sin(t),
t=Math.cos(t),E=0;E<=a.length-1;E++)m.x=a[E].x*v,m.y=a[E].y,m.z=a[E].x*t,f.push(m.x,m.y,m.z),n.x=r/b,n.y=E/(a.length-1),g.push(n.x,n.y),k.push(h[3*E]*v,h[3*E+1],h[3*E]*t);for(c=0;c<b;c++)for(d=0;d<a.length-1;d++)h=d+c*a.length,l=h+a.length,m=h+a.length+1,n=h+1,e.push(h,l,n),e.push(l,m,n);this.setIndex(e);this.setAttribute("position",new za(f,3));this.setAttribute("uv",new za(g,2));this.setAttribute("normal",new za(k,3))}static fromJSON(a){return new af(a.points,a.segments,a.phiStart,a.phiLength)}}
class le extends Jc{constructor(a,b){a=void 0===a?1:a;b=void 0===b?0:b;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new le(a.radius,a.detail)}}class bf extends Ma{constructor(a,b,c,d,e,f){a=void 0===a?.5:a;b=void 0===b?1:b;c=void 0===c?8:c;d=void 0===d?1:d;e=void 0===e?0:e;f=void 0===f?2*Math.PI:f;super();this.type="RingGeometry";this.parameters={innerRadius:a,
outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};c=Math.max(3,c);d=Math.max(1,d);const g=[],h=[],k=[],l=[];var m=a;a=(b-a)/d;var n=new C,r=new la;for(let v=0;v<=d;v++){for(let t=0;t<=c;t++){const y=e+t/c*f;n.x=m*Math.cos(y);n.y=m*Math.sin(y);h.push(n.x,n.y,n.z);k.push(0,0,1);r.x=(n.x/b+1)/2;r.y=(n.y/b+1)/2;l.push(r.x,r.y)}m+=a}for(b=0;b<d;b++)for(e=b*(c+1),f=0;f<c;f++)m=f+e,a=m+c+1,n=m+c+2,r=m+1,g.push(m,a,r),g.push(a,n,r);this.setIndex(g);this.setAttribute("position",new za(h,
3));this.setAttribute("normal",new za(k,3));this.setAttribute("uv",new za(l,2))}static fromJSON(a){return new bf(a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength)}}class me extends Ma{constructor(a,b){function c(l){const m=e.length/3;var n=l.extractPoints(b);l=n.shape;var r=n.holes;!1===Kc.isClockWise(l)&&(l=l.reverse());for(let v=0,t=r.length;v<t;v++)n=r[v],!0===Kc.isClockWise(n)&&(r[v]=n.reverse());n=Kc.triangulateShape(l,r);for(let v=0,t=r.length;v<t;v++)l=l.concat(r[v]);
for(let v=0,t=l.length;v<t;v++)r=l[v],e.push(r.x,r.y,0),f.push(0,0,1),g.push(r.x,r.y);for(let v=0,t=n.length;v<t;v++)l=n[v],d.push(l[0]+m,l[1]+m,l[2]+m),k+=3}a=void 0===a?new qc([new la(0,.5),new la(-.5,-.5),new la(.5,-.5)]):a;b=void 0===b?12:b;super();this.type="ShapeGeometry";this.parameters={shapes:a,curveSegments:b};const d=[],e=[],f=[],g=[];let h=0,k=0;if(!1===Array.isArray(a))c(a);else for(let l=0;l<a.length;l++)c(a[l]),this.addGroup(h,k,l),h+=k,k=0;this.setIndex(d);this.setAttribute("position",
new za(e,3));this.setAttribute("normal",new za(f,3));this.setAttribute("uv",new za(g,2))}toJSON(){const a=super.toJSON();var b=this.parameters.shapes;a.shapes=[];if(Array.isArray(b))for(let c=0,d=b.length;c<d;c++)a.shapes.push(b[c].uuid);else a.shapes.push(b.uuid);return a}static fromJSON(a,b){const c=[];for(let d=0,e=a.shapes.length;d<e;d++)c.push(b[a.shapes[d]]);return new me(c,a.curveSegments)}}class ne extends Ma{constructor(a,b,c,d,e,f,g){a=void 0===a?1:a;b=void 0===b?32:b;c=void 0===c?16:c;
d=void 0===d?0:d;e=void 0===e?2*Math.PI:e;f=void 0===f?0:f;g=void 0===g?Math.PI:g;super();this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};b=Math.max(3,Math.floor(b));c=Math.max(2,Math.floor(c));const h=Math.min(f+g,Math.PI);var k=0;const l=[];var m=new C;const n=new C,r=[],v=[],t=[],y=[];for(let E=0;E<=c;E++){const M=[],q=E/c;let H=0;0==E&&0==f?H=.5/b:E==c&&h==Math.PI&&(H=-.5/b);for(let J=0;J<=b;J++){const K=
J/b;m.x=-a*Math.cos(d+K*e)*Math.sin(f+q*g);m.y=a*Math.cos(f+q*g);m.z=a*Math.sin(d+K*e)*Math.sin(f+q*g);v.push(m.x,m.y,m.z);n.copy(m).normalize();t.push(n.x,n.y,n.z);y.push(K+H,1-q);M.push(k++)}l.push(M)}for(a=0;a<c;a++)for(d=0;d<b;d++)e=l[a][d+1],g=l[a][d],k=l[a+1][d],m=l[a+1][d+1],(0!==a||0<f)&&r.push(e,g,m),(a!==c-1||h<Math.PI)&&r.push(g,k,m);this.setIndex(r);this.setAttribute("position",new za(v,3));this.setAttribute("normal",new za(t,3));this.setAttribute("uv",new za(y,2))}static fromJSON(a){return new ne(a.radius,
a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)}}class cf extends Jc{constructor(a,b){a=void 0===a?1:a;b=void 0===b?0:b;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}}static fromJSON(a){return new cf(a.radius,a.detail)}}class df extends Ma{constructor(a,b,c,d,e){a=void 0===a?1:a;b=void 0===b?.4:b;c=void 0===c?8:c;d=void 0===d?6:d;e=void 0===e?2*Math.PI:e;super();this.type=
"TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};c=Math.floor(c);d=Math.floor(d);const f=[],g=[],h=[],k=[];var l=new C,m=new C;const n=new C;for(let r=0;r<=c;r++)for(let v=0;v<=d;v++){const t=v/d*e,y=r/c*Math.PI*2;m.x=(a+b*Math.cos(y))*Math.cos(t);m.y=(a+b*Math.cos(y))*Math.sin(t);m.z=b*Math.sin(y);g.push(m.x,m.y,m.z);l.x=a*Math.cos(t);l.y=a*Math.sin(t);n.subVectors(m,l).normalize();h.push(n.x,n.y,n.z);k.push(v/d);k.push(r/c)}for(a=1;a<=c;a++)for(b=1;b<=d;b++)e=
(d+1)*(a-1)+b-1,l=(d+1)*(a-1)+b,m=(d+1)*a+b,f.push((d+1)*a+b-1,e,m),f.push(e,l,m);this.setIndex(f);this.setAttribute("position",new za(g,3));this.setAttribute("normal",new za(h,3));this.setAttribute("uv",new za(k,2))}static fromJSON(a){return new df(a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc)}}class ef extends Ma{constructor(a,b,c,d,e,f){function g(J,K,S,P,U){const V=Math.sin(J);K=S/K*J;S=Math.cos(K);U.x=P*(2+S)*.5*Math.cos(J);U.y=P*(2+S)*V*.5;U.z=P*Math.sin(K)*.5}a=void 0===a?1:a;b=
void 0===b?.4:b;c=void 0===c?64:c;d=void 0===d?8:d;e=void 0===e?2:e;f=void 0===f?3:f;super();this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};c=Math.floor(c);d=Math.floor(d);const h=[],k=[],l=[],m=[];var n=new C;const r=new C,v=new C,t=new C,y=new C,E=new C,M=new C;for(let J=0;J<=c;++J){var q=J/c*e*Math.PI*2;g(q,e,f,a,v);g(q+.01,e,f,a,t);E.subVectors(t,v);M.addVectors(t,v);y.crossVectors(E,M);M.crossVectors(y,E);y.normalize();M.normalize();
for(q=0;q<=d;++q){var H=q/d*Math.PI*2;const K=-b*Math.cos(H);H=b*Math.sin(H);n.x=v.x+(K*M.x+H*y.x);n.y=v.y+(K*M.y+H*y.y);n.z=v.z+(K*M.z+H*y.z);k.push(n.x,n.y,n.z);r.subVectors(n,v).normalize();l.push(r.x,r.y,r.z);m.push(J/c);m.push(q/d)}}for(a=1;a<=c;a++)for(b=1;b<=d;b++)e=(d+1)*a+(b-1),f=(d+1)*a+b,n=(d+1)*(a-1)+b,h.push((d+1)*(a-1)+(b-1),e,n),h.push(e,f,n);this.setIndex(h);this.setAttribute("position",new za(k,3));this.setAttribute("normal",new za(l,3));this.setAttribute("uv",new za(m,2))}static fromJSON(a){return new ef(a.radius,
a.tube,a.tubularSegments,a.radialSegments,a.p,a.q)}}class ff extends Ma{constructor(a,b,c,d,e){function f(y){m=a.getPointAt(y/b,m);const E=g.normals[y];y=g.binormals[y];for(let q=0;q<=d;q++){var M=q/d*Math.PI*2;const H=Math.sin(M);M=-Math.cos(M);k.x=M*E.x+H*y.x;k.y=M*E.y+H*y.y;k.z=M*E.z+H*y.z;k.normalize();r.push(k.x,k.y,k.z);h.x=m.x+c*k.x;h.y=m.y+c*k.y;h.z=m.z+c*k.z;n.push(h.x,h.y,h.z)}}a=void 0===a?new ng(new C(-1,-1,0),new C(-1,1,0),new C(1,1,0)):a;b=void 0===b?64:b;c=void 0===c?1:c;d=void 0===
d?8:d;e=void 0===e?!1:e;super();this.type="TubeGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};const g=a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;const h=new C,k=new C,l=new la;let m=new C;const n=[],r=[],v=[],t=[];(function(){for(var y=0;y<b;y++)f(y);f(!1===e?b:0);for(y=0;y<=b;y++)for(var E=0;E<=d;E++)l.x=y/b,l.y=E/d,v.push(l.x,l.y);for(y=1;y<=b;y++)for(E=1;E<=d;E++){const M=(d+1)*y+(E-1),q=(d+1)*y+
E,H=(d+1)*(y-1)+E;t.push((d+1)*(y-1)+(E-1),M,H);t.push(M,q,H)}})();this.setIndex(t);this.setAttribute("position",new za(n,3));this.setAttribute("normal",new za(r,3));this.setAttribute("uv",new za(v,2))}toJSON(){const a=super.toJSON();a.path=this.parameters.path.toJSON();return a}static fromJSON(a){return new ff((new Ah[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed)}}class Bh extends Ma{constructor(a){a=void 0===a?null:a;super();this.type="WireframeGeometry";this.parameters=
{geometry:a};if(null!==a){const f=[],g=new Set,h=new C,k=new C;if(null!==a.index){var b=a.attributes.position,c=a.index;a=a.groups;0===a.length&&(a=[{start:0,count:c.count,materialIndex:0}]);for(let l=0,m=a.length;l<m;++l){var d=a[l],e=d.start;d=d.count;for(let n=e,r=e+d;n<r;n+=3)for(e=0;3>e;e++){d=c.getX(n+e);const v=c.getX(n+(e+1)%3);h.fromBufferAttribute(b,d);k.fromBufferAttribute(b,v);!0===Ni(h,k,g)&&(f.push(h.x,h.y,h.z),f.push(k.x,k.y,k.z))}}}else{b=a.attributes.position;for(let l=0,m=b.count/
3;l<m;l++)for(c=0;3>c;c++)a=3*l+(c+1)%3,h.fromBufferAttribute(b,3*l+c),k.fromBufferAttribute(b,a),!0===Ni(h,k,g)&&(f.push(h.x,h.y,h.z),f.push(k.x,k.y,k.z))}this.setAttribute("position",new za(f,3))}}}var Nj=Object.freeze({__proto__:null,BoxGeometry:Tc,BoxBufferGeometry:Tc,CircleGeometry:Ue,CircleBufferGeometry:Ue,ConeGeometry:Ve,ConeBufferGeometry:Ve,CylinderGeometry:Ad,CylinderBufferGeometry:Ad,DodecahedronGeometry:We,DodecahedronBufferGeometry:We,EdgesGeometry:th,ExtrudeGeometry:Lc,ExtrudeBufferGeometry:Lc,
IcosahedronGeometry:$e,IcosahedronBufferGeometry:$e,LatheGeometry:af,LatheBufferGeometry:af,OctahedronGeometry:le,OctahedronBufferGeometry:le,PlaneGeometry:Id,PlaneBufferGeometry:Id,PolyhedronGeometry:Jc,PolyhedronBufferGeometry:Jc,RingGeometry:bf,RingBufferGeometry:bf,ShapeGeometry:me,ShapeBufferGeometry:me,SphereGeometry:ne,SphereBufferGeometry:ne,TetrahedronGeometry:cf,TetrahedronBufferGeometry:cf,TorusGeometry:df,TorusBufferGeometry:df,TorusKnotGeometry:ef,TorusKnotBufferGeometry:ef,TubeGeometry:ff,
TubeBufferGeometry:ff,WireframeGeometry:Bh});class Ch extends zb{constructor(a){super();this.type="ShadowMaterial";this.color=new ua(0);this.transparent=!0;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);return this}}Ch.prototype.isShadowMaterial=!0;class pg extends zb{constructor(a){super();this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new ua(16777215);this.roughness=1;this.metalness=0;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;
this.aoMapIntensity=1;this.emissive=new ua(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new la(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.flatShading=!1;this.setValues(a)}copy(a){super.copy(a);
this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=
a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.flatShading=a.flatShading;return this}}pg.prototype.isMeshStandardMaterial=
!0;class Dh extends pg{constructor(a){super();this.defines={STANDARD:"",PHYSICAL:""};this.type="MeshPhysicalMaterial";this.clearcoatMap=null;this.clearcoatRoughness=0;this.clearcoatRoughnessMap=null;this.clearcoatNormalScale=new la(1,1);this.clearcoatNormalMap=null;this.ior=1.5;Object.defineProperty(this,"reflectivity",{get:function(){return Ua(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(b){this.ior=(1+.4*b)/(1-.4*b)}});this.sheenColor=new ua(0);this.sheenColorMap=null;this.sheenRoughness=1;
this.transmissionMap=this.sheenRoughnessMap=null;this.thickness=0;this.thicknessMap=null;this.attenuationDistance=0;this.attenuationColor=new ua(1,1,1);this.specularIntensity=1;this.specularIntensityMap=null;this.specularColor=new ua(1,1,1);this.specularColorMap=null;this._transmission=this._clearcoat=this._sheen=0;this.setValues(a)}get sheen(){return this._sheen}set sheen(a){0<this._sheen!==0<a&&this.version++;this._sheen=a}get clearcoat(){return this._clearcoat}set clearcoat(a){0<this._clearcoat!==
0<a&&this.version++;this._clearcoat=a}get transmission(){return this._transmission}set transmission(a){0<this._transmission!==0<a&&this.version++;this._transmission=a}copy(a){super.copy(a);this.defines={STANDARD:"",PHYSICAL:""};this.clearcoat=a.clearcoat;this.clearcoatMap=a.clearcoatMap;this.clearcoatRoughness=a.clearcoatRoughness;this.clearcoatRoughnessMap=a.clearcoatRoughnessMap;this.clearcoatNormalMap=a.clearcoatNormalMap;this.clearcoatNormalScale.copy(a.clearcoatNormalScale);this.ior=a.ior;this.sheen=
a.sheen;this.sheenColor.copy(a.sheenColor);this.sheenColorMap=a.sheenColorMap;this.sheenRoughness=a.sheenRoughness;this.sheenRoughnessMap=a.sheenRoughnessMap;this.transmission=a.transmission;this.transmissionMap=a.transmissionMap;this.thickness=a.thickness;this.thicknessMap=a.thicknessMap;this.attenuationDistance=a.attenuationDistance;this.attenuationColor.copy(a.attenuationColor);this.specularIntensity=a.specularIntensity;this.specularIntensityMap=a.specularIntensityMap;this.specularColor.copy(a.specularColor);
this.specularColorMap=a.specularColorMap;return this}}Dh.prototype.isMeshPhysicalMaterial=!0;class Eh extends zb{constructor(a){super();this.type="MeshPhongMaterial";this.color=new ua(16777215);this.specular=new ua(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new ua(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new la(1,
1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.flatShading=!1;this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;
this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=
a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.flatShading=a.flatShading;return this}}Eh.prototype.isMeshPhongMaterial=!0;class Fh extends zb{constructor(a){super();this.defines={TOON:""};this.type="MeshToonMaterial";this.color=new ua(16777215);this.lightMap=this.gradientMap=this.map=
null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new ua(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new la(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=
a.map;this.gradientMap=a.gradientMap;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=
a.displacementBias;this.alphaMap=a.alphaMap;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;return this}}Fh.prototype.isMeshToonMaterial=!0;class Gh extends zb{constructor(a){super();this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new la(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;
this.wireframe=!1;this.wireframeLinewidth=1;this.flatShading=this.fog=!1;this.setValues(a)}copy(a){super.copy(a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.flatShading=a.flatShading;return this}}
Gh.prototype.isMeshNormalMaterial=!0;class Hh extends zb{constructor(a){super();this.type="MeshLambertMaterial";this.color=new ua(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new ua(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";
this.setValues(a)}copy(a){super.copy(a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;
this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;return this}}Hh.prototype.isMeshLambertMaterial=!0;class Ih extends zb{constructor(a){super();this.defines={MATCAP:""};this.type="MeshMatcapMaterial";this.color=new ua(16777215);this.bumpMap=this.map=this.matcap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new la(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=
0;this.alphaMap=null;this.flatShading=!1;this.setValues(a)}copy(a){super.copy(a);this.defines={MATCAP:""};this.color.copy(a.color);this.matcap=a.matcap;this.map=a.map;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.alphaMap=a.alphaMap;this.flatShading=a.flatShading;return this}}
Ih.prototype.isMeshMatcapMaterial=!0;class Jh extends Cb{constructor(a){super();this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}copy(a){super.copy(a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this}}Jh.prototype.isLineDashedMaterial=!0;var Vl=Object.freeze({__proto__:null,ShadowMaterial:Ch,SpriteMaterial:Zf,RawShaderMaterial:Md,ShaderMaterial:vc,PointsMaterial:zd,MeshPhysicalMaterial:Dh,MeshStandardMaterial:pg,MeshPhongMaterial:Eh,
MeshToonMaterial:Fh,MeshNormalMaterial:Gh,MeshLambertMaterial:Hh,MeshDepthMaterial:yf,MeshDistanceMaterial:zf,MeshBasicMaterial:Hc,MeshMatcapMaterial:Ih,LineDashedMaterial:Jh,LineBasicMaterial:Cb,Material:zb});const kb={arraySlice:function(a,b,c){return kb.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==c?c:a.length)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&
!(a instanceof DataView)},getKeyframeOrder:function(a){const b=a.length,c=Array(b);for(let d=0;d!==b;++d)c[d]=d;c.sort(function(d,e){return a[d]-a[e]});return c},sortedArray:function(a,b,c){const d=a.length,e=new a.constructor(d);for(let f=0,g=0;g!==d;++f){const h=c[f]*b;for(let k=0;k!==b;++k)e[g++]=a[h+k]}return e},flattenJSON:function(a,b,c,d){let e=1,f=a[0];for(;void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),
c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];while(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++];while(void 0!==f)}}},subclip:function(a,b,c,d,e){e=void 0===e?30:e;a=a.clone();a.name=b;b=[];for(let g=0;g<a.tracks.length;++g){const h=a.tracks[g],k=h.getValueSize(),l=[],m=[];for(let n=0;n<h.times.length;++n){var f=h.times[n]*e;if(!(f<c||f>=d))for(l.push(h.times[n]),f=0;f<k;++f)m.push(h.values[n*
k+f])}0!==l.length&&(h.times=kb.convertArray(l,h.times.constructor),h.values=kb.convertArray(m,h.values.constructor),b.push(h))}a.tracks=b;c=Infinity;for(d=0;d<a.tracks.length;++d)c>a.tracks[d].times[0]&&(c=a.tracks[d].times[0]);for(d=0;d<a.tracks.length;++d)a.tracks[d].shift(-1*c);a.resetDuration();return a},makeClipAdditive:function(a,b,c,d){c=void 0===c?a:c;d=void 0===d?30:d;0>=d&&(d=30);const e=c.tracks.length;b=(void 0===b?0:b)/d;for(d=0;d<e;++d){const l=c.tracks[d],m=l.ValueTypeName;if("bool"===
m||"string"===m)continue;const n=a.tracks.find(function(t){return t.name===l.name&&t.ValueTypeName===m});if(void 0===n)continue;var f=0,g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=g/3);let r=0;const v=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(r=v/3);var h=l.times.length-1;if(b<=l.times[0])f=kb.arraySlice(l.values,f,g-f);else if(b>=l.times[h])h=h*g+f,f=kb.arraySlice(l.values,h,h+g-f);else{h=l.createInterpolant();var k=
f;f=g-f;h.evaluate(b);f=kb.arraySlice(h.resultBuffer,k,f)}"quaternion"===m&&(new Gb).fromArray(f).normalize().conjugate().toArray(f);g=n.times.length;for(h=0;h<g;++h)if(k=h*v+r,"quaternion"===m)Gb.multiplyQuaternionsFlat(n.values,k,f,0,n.values,k);else{const t=v-2*r;for(let y=0;y<t;++y)n.values[k+y]-=f[y]}}a.blendMode=2501;return a}};class Mc{constructor(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c;
this.settings=null;this.DefaultSettings_={}}evaluate(a){const b=this.parameterPositions;let c=this._cachedIndex;var d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;c=0}}for(;c<
d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(a){const b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(let e=0;e!==d;++e)b[e]=c[a+e];return b}interpolate_(){throw Error("call to abstract method");
}intervalChanged_(){}}Mc.prototype.beforeStart_=Mc.prototype.copySampleValue_;Mc.prototype.afterEnd_=Mc.prototype.copySampleValue_;class Oj extends Mc{constructor(a,b,c,d){super(a,b,c,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0;this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(a,b,c){var d=this.parameterPositions;let e=a-2,f=a+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:e=a;g=2*b-c;break;case 2402:e=d.length-
2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case 2401:f=a;h=2*c-b;break;case 2402:f=1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d}interpolate_(a,b,c,d){const e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;const h=a-g,k=this._offsetPrev,l=this._offsetNext;var m=this._weightPrev,n=this._weightNext,r=(c-b)/(d-b);c=r*r;d=c*r;b=
-m*d+2*m*c-m*r;m=(1+m)*d+(-1.5-2*m)*c+(-.5+m)*r+1;r=(-1-n)*d+(1.5+n)*c+.5*r;n=n*d-n*c;for(c=0;c!==g;++c)e[c]=b*f[k+c]+m*f[h+c]+r*f[a+c]+n*f[l+c];return e}}class Kh extends Mc{constructor(a,b,c,d){super(a,b,c,d)}interpolate_(a,b,c,d){const e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;const h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d)e[d]=f[h+d]*c+f[a+d]*b;return e}}class Pj extends Mc{constructor(a,b,c,d){super(a,b,c,d)}interpolate_(a){return this.copySampleValue_(a-1)}}class jc{constructor(a,
b,c,d){if(void 0===a)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===b||0===b.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a;this.times=kb.convertArray(b,this.TimeBufferType);this.values=kb.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation)}static toJSON(a){var b=a.constructor;if(b.toJSON!==this.toJSON)b=b.toJSON(a);else{b={name:a.name,times:kb.convertArray(a.times,Array),values:kb.convertArray(a.values,
Array)};const c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b}InterpolantFactoryMethodDiscrete(a){return new Pj(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodLinear(a){return new Kh(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodSmooth(a){return new Oj(this.times,this.values,this.getValueSize(),a)}setInterpolation(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=
this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(b);console.warn("THREE.KeyframeTrack:",b);return this}this.createInterpolant=b;return this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;
case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(a){if(0!==a){const b=this.times;for(let c=0,d=b.length;c!==d;++c)b[c]+=a}return this}scale(a){if(1!==a){const b=this.times;for(let c=0,d=b.length;c!==d;++c)b[c]*=a}return this}trim(a,b){const c=this.times,d=c.length;let e=0,f=d-1;for(;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),
a=this.getValueSize(),this.times=kb.arraySlice(c,e,f),this.values=kb.arraySlice(this.values,e*a,f*a);return this}validate(){let a=!0;var b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var c=this.times;b=this.values;const d=c.length;0===d&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);let e=null;for(let f=0;f!==d;f++){const g=c[f];if("number"===typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",
this,f,g);a=!1;break}if(null!==e&&e>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&kb.isTypedArray(b))for(let f=0,g=b.length;f!==g;++f)if(c=b[f],isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,c);a=!1;break}return a}optimize(){const a=kb.arraySlice(this.times),b=kb.arraySlice(this.values),c=this.getValueSize(),d=2302===this.getInterpolation(),e=a.length-1;let f=1;for(let l=1;l<e;++l){var g=!1,h=a[l];if(h!==a[l+
1]&&(1!==l||h!==a[0]))if(d)g=!0;else{h=l*c;var k=h-c;const m=h+c;for(let n=0;n!==c;++n){const r=b[h+n];if(r!==b[k+n]||r!==b[m+n]){g=!0;break}}}if(g){if(l!==f)for(a[f]=a[l],g=l*c,h=f*c,k=0;k!==c;++k)b[h+k]=b[g+k];++f}}if(0<e){a[f]=a[e];for(let l=e*c,m=f*c,n=0;n!==c;++n)b[m+n]=b[l+n];++f}f!==a.length?(this.times=kb.arraySlice(a,0,f),this.values=kb.arraySlice(b,0,f*c)):(this.times=a,this.values=b);return this}clone(){var a=kb.arraySlice(this.times,0);const b=kb.arraySlice(this.values,0);a=new this.constructor(this.name,
a,b);a.createInterpolant=this.createInterpolant;return a}}jc.prototype.TimeBufferType=Float32Array;jc.prototype.ValueBufferType=Float32Array;jc.prototype.DefaultInterpolation=2301;class pd extends jc{}pd.prototype.ValueTypeName="bool";pd.prototype.ValueBufferType=Array;pd.prototype.DefaultInterpolation=2300;pd.prototype.InterpolantFactoryMethodLinear=void 0;pd.prototype.InterpolantFactoryMethodSmooth=void 0;class Tg extends jc{}Tg.prototype.ValueTypeName="color";class Ee extends jc{}Ee.prototype.ValueTypeName=
"number";class Qj extends Mc{constructor(a,b,c,d){super(a,b,c,d)}interpolate_(a,b,c,d){const e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;b=(c-b)/(d-b);a*=g;for(c=a+g;a!==c;a+=4)Gb.slerpFlat(e,0,f,a-g,f,a,b);return e}}class Td extends jc{InterpolantFactoryMethodLinear(a){return new Qj(this.times,this.values,this.getValueSize(),a)}}Td.prototype.ValueTypeName="quaternion";Td.prototype.DefaultInterpolation=2301;Td.prototype.InterpolantFactoryMethodSmooth=void 0;class qd extends jc{}qd.prototype.ValueTypeName=
"string";qd.prototype.ValueBufferType=Array;qd.prototype.DefaultInterpolation=2300;qd.prototype.InterpolantFactoryMethodLinear=void 0;qd.prototype.InterpolantFactoryMethodSmooth=void 0;class Fe extends jc{}Fe.prototype.ValueTypeName="vector";class gf{constructor(a,b,c,d){this.name=a;this.tracks=c;this.duration=void 0===b?-1:b;this.blendMode=void 0===d?2500:d;this.uuid=Ta();0>this.duration&&this.resetDuration()}static parse(a){var b=[];const c=a.tracks,d=1/(a.fps||1);for(let h=0,k=c.length;h!==k;++h){var e=
b,f=e.push;{var g=c[h];if(void 0===g.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");const l=Bl(g.type);if(void 0===g.times){const m=[],n=[];kb.flattenJSON(g.keys,m,n,"value");g.times=m;g.values=n}g=void 0!==l.parse?l.parse(g):new l(g.name,g.times,g.values,g.interpolation)}f.call(e,g.scale(d))}b=new this(a.name,a.duration,b,a.blendMode);b.uuid=a.uuid;return b}static toJSON(a){const b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b,uuid:a.uuid,blendMode:a.blendMode};
for(let d=0,e=c.length;d!==e;++d)b.push(jc.toJSON(c[d]));return a}static CreateFromMorphTargetSequence(a,b,c,d){const e=b.length,f=[];for(let g=0;g<e;g++){let h=[],k=[];h.push((g+e-1)%e,g,(g+1)%e);k.push(0,1,0);const l=kb.getKeyframeOrder(h);h=kb.sortedArray(h,1,l);k=kb.sortedArray(k,1,l);d||0!==h[0]||(h.push(e),k.push(k[0]));f.push((new Ee(".morphTargetInfluences["+b[g].name+"]",h,k)).scale(1/c))}return new this(a,-1,f)}static findByName(a,b){let c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||
a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null}static CreateClipsFromMorphTargetSequences(a,b,c){const d={},e=/^([\w-]*?)([\d]+)$/;for(let g=0,h=a.length;g<h;g++){const k=a[g];var f=k.name.match(e);if(f&&1<f.length){f=f[1];let l=d[f];l||(d[f]=l=[]);l.push(k)}}a=[];for(const g in d)a.push(this.CreateFromMorphTargetSequence(g,d[g],b,c));return a}static parseAnimation(a,b){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const c=
function(m,n,r,v,t){if(0!==r.length){const y=[],E=[];kb.flattenJSON(r,y,E,v);0!==y.length&&t.push(new m(n,y,E))}},d=[],e=a.name||"default",f=a.fps||30,g=a.blendMode;var h=a.length||-1;a=a.hierarchy||[];for(let m=0;m<a.length;m++){const n=a[m].keys;if(n&&0!==n.length)if(n[0].morphTargets){h={};var k=void 0;for(k=0;k<n.length;k++)if(n[k].morphTargets)for(var l=0;l<n[k].morphTargets.length;l++)h[n[k].morphTargets[l]]=-1;for(const r in h){l=[];const v=[];for(let t=0;t!==n[k].morphTargets.length;++t){const y=
n[k];l.push(y.time);v.push(y.morphTarget===r?1:0)}d.push(new Ee(".morphTargetInfluence["+r+"]",l,v))}h=h.length*(f||1)}else k=".bones["+b[m].name+"]",c(Fe,k+".position",n,"pos",d),c(Td,k+".quaternion",n,"rot",d),c(Fe,k+".scale",n,"scl",d)}return 0===d.length?null:new this(e,h,d,g)}resetDuration(){var a=this.tracks;let b=0;for(let c=0,d=a.length;c!==d;++c)a=this.tracks[c],b=Math.max(b,a.times[a.times.length-1]);this.duration=b;return this}trim(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,
this.duration);return this}validate(){let a=!0;for(let b=0;b<this.tracks.length;b++)a=a&&this.tracks[b].validate();return a}optimize(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}clone(){const a=[];for(let b=0;b<this.tracks.length;b++)a.push(this.tracks[b].clone());return new this.constructor(this.name,this.duration,a,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}const Bd={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==
this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};class Lh{constructor(a,b,c){const d=this;let e=!1,f=0,g=0,h=void 0;const k=[];this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(l){g++;if(!1===e&&void 0!==d.onStart)d.onStart(l,f,g);e=!0};this.itemEnd=function(l){f++;if(void 0!==d.onProgress)d.onProgress(l,f,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(l){if(void 0!==d.onError)d.onError(l)};
this.resolveURL=function(l){return h?h(l):l};this.setURLModifier=function(l){h=l;return this};this.addHandler=function(l,m){k.push(l,m);return this};this.removeHandler=function(l){l=k.indexOf(l);-1!==l&&k.splice(l,2);return this};this.getHandler=function(l){for(let m=0,n=k.length;m<n;m+=2){const r=k[m],v=k[m+1];r.global&&(r.lastIndex=0);if(r.test(l))return v}return null}}}const Rj=new Lh;class Lb{constructor(a){this.manager=void 0!==a?a:Rj;this.crossOrigin="anonymous";this.withCredentials=!1;this.resourcePath=
this.path="";this.requestHeader={}}load(){}loadAsync(a,b){const c=this;return new Promise(function(d,e){c.load(a,d,b,e)})}parse(){}setCrossOrigin(a){this.crossOrigin=a;return this}setWithCredentials(a){this.withCredentials=a;return this}setPath(a){this.path=a;return this}setResourcePath(a){this.resourcePath=a;return this}setRequestHeader(a){this.requestHeader=a;return this}}const Nc={};class rc extends Lb{constructor(a){super(a)}load(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);
a=this.manager.resolveURL(a);const e=Bd.get(a);if(void 0!==e)return this.manager.itemStart(a),setTimeout(()=>{b&&b(e);this.manager.itemEnd(a)},0),e;void 0!==Nc[a]?Nc[a].push({onLoad:b,onProgress:c,onError:d}):(Nc[a]=[],Nc[a].push({onLoad:b,onProgress:c,onError:d}),c=new Request(a,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),fetch(c).then(f=>{if(200===f.status||0===f.status){0===f.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");
if("undefined"===typeof ReadableStream||void 0===f.body.getReader)return f;const g=Nc[a],h=f.body.getReader(),k=(f=f.headers.get("Content-Length"))?parseInt(f):0,l=0!==k;let m=0;f=new ReadableStream({start(n){function r(){h.read().then(v=>{var {done:t,value:y}=v;if(t)n.close();else{m+=y.byteLength;v=new ProgressEvent("progress",{lengthComputable:l,loaded:m,total:k});for(let E=0,M=g.length;E<M;E++){const q=g[E];if(q.onProgress)q.onProgress(v)}n.enqueue(y);r()}})}r()}});return new Response(f)}throw Error(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`);
}).then(f=>{switch(this.responseType){case "arraybuffer":return f.arrayBuffer();case "blob":return f.blob();case "document":return f.text().then(g=>(new DOMParser).parseFromString(g,this.mimeType));case "json":return f.json();default:return f.text()}}).then(f=>{Bd.add(a,f);const g=Nc[a];delete Nc[a];for(let h=0,k=g.length;h<k;h++){const l=g[h];if(l.onLoad)l.onLoad(f)}}).catch(f=>{const g=Nc[a];if(void 0===g)throw this.manager.itemError(a),f;delete Nc[a];for(let h=0,k=g.length;h<k;h++){const l=g[h];
if(l.onError)l.onError(f)}this.manager.itemError(a)}).finally(()=>{this.manager.itemEnd(a)}),this.manager.itemStart(a))}setResponseType(a){this.responseType=a;return this}setMimeType(a){this.mimeType=a;return this}}class Wl extends Lb{constructor(a){super(a)}load(a,b,c,d){const e=this,f=new rc(this.manager);f.setPath(this.path);f.setRequestHeader(this.requestHeader);f.setWithCredentials(this.withCredentials);f.load(a,function(g){try{b(e.parse(JSON.parse(g)))}catch(h){d?d(h):console.error(h),e.manager.itemError(a)}},
c,d)}parse(a){const b=[];for(let c=0;c<a.length;c++){const d=gf.parse(a[c]);b.push(d)}return b}}class Xl extends Lb{constructor(a){super(a)}load(a,b,c,d){function e(m){k.load(a[m],function(n){n=f.parse(n,!0);g[m]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps};l+=1;6===l&&(1===n.mipmapCount&&(h.minFilter=1006),h.image=g,h.format=n.format,h.needsUpdate=!0,b&&b(h))},c,d)}const f=this,g=[],h=new rh,k=new rc(this.manager);k.setPath(this.path);k.setResponseType("arraybuffer");k.setRequestHeader(this.requestHeader);
k.setWithCredentials(f.withCredentials);let l=0;if(Array.isArray(a))for(let m=0,n=a.length;m<n;++m)e(m);else k.load(a,function(m){m=f.parse(m,!0);if(m.isCubemap){const n=m.mipmaps.length/m.mipmapCount;for(let r=0;r<n;r++){g[r]={mipmaps:[]};for(let v=0;v<m.mipmapCount;v++)g[r].mipmaps.push(m.mipmaps[r*m.mipmapCount+v]),g[r].format=m.format,g[r].width=m.width,g[r].height=m.height}h.image=g}else h.image.width=m.width,h.image.height=m.height,h.mipmaps=m.mipmaps;1===m.mipmapCount&&(h.minFilter=1006);h.format=
m.format;h.needsUpdate=!0;b&&b(h)},c,d);return h}}class hf extends Lb{constructor(a){super(a)}load(a,b,c,d){function e(){g();Bd.add(a,this);b&&b(this);h.manager.itemEnd(a)}function f(m){g();d&&d(m);h.manager.itemError(a);h.manager.itemEnd(a)}function g(){l.removeEventListener("load",e,!1);l.removeEventListener("error",f,!1)}void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);const h=this,k=Bd.get(a);if(void 0!==k)return h.manager.itemStart(a),setTimeout(function(){b&&b(k);h.manager.itemEnd(a)},
0),k;const l=bc("img");l.addEventListener("load",e,!1);l.addEventListener("error",f,!1);"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin);h.manager.itemStart(a);l.src=a;return l}}class Sj extends Lb{constructor(a){super(a)}load(a,b,c,d){function e(k){g.load(a[k],function(l){f.images[k]=l;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}const f=new fe,g=new hf(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);let h=0;for(c=0;c<a.length;++c)e(c);
return f}}class Tj extends Lb{constructor(a){super(a)}load(a,b,c,d){const e=this,f=new xd,g=new rc(this.manager);g.setResponseType("arraybuffer");g.setRequestHeader(this.requestHeader);g.setPath(this.path);g.setWithCredentials(e.withCredentials);g.load(a,function(h){if(h=e.parse(h))void 0!==h.image?f.image=h.image:void 0!==h.data&&(f.image.width=h.width,f.image.height=h.height,f.image.data=h.data),f.wrapS=void 0!==h.wrapS?h.wrapS:1001,f.wrapT=void 0!==h.wrapT?h.wrapT:1001,f.magFilter=void 0!==h.magFilter?
h.magFilter:1006,f.minFilter=void 0!==h.minFilter?h.minFilter:1006,f.anisotropy=void 0!==h.anisotropy?h.anisotropy:1,void 0!==h.encoding&&(f.encoding=h.encoding),void 0!==h.flipY&&(f.flipY=h.flipY),void 0!==h.format&&(f.format=h.format),void 0!==h.type&&(f.type=h.type),void 0!==h.mipmaps&&(f.mipmaps=h.mipmaps,f.minFilter=1008),1===h.mipmapCount&&(f.minFilter=1006),void 0!==h.generateMipmaps&&(f.generateMipmaps=h.generateMipmaps),f.needsUpdate=!0,b&&b(f,h)},c,d);return f}}class Uj extends Lb{constructor(a){super(a)}load(a,
b,c,d){const e=new yb,f=new hf(this.manager);f.setCrossOrigin(this.crossOrigin);f.setPath(this.path);f.load(a,function(g){e.image=g;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e}}class kc extends Va{constructor(a,b){b=void 0===b?1:b;super();this.type="Light";this.color=new ua(a);this.intensity=b}dispose(){}copy(a){super.copy(a);this.color.copy(a.color);this.intensity=a.intensity;return this}toJSON(a){a=super.toJSON(a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==
this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}}kc.prototype.isLight=!0;class Mh extends kc{constructor(a,b,c){super(a,c);this.type="HemisphereLight";this.position.copy(Va.DefaultUp);this.updateMatrix();
this.groundColor=new ua(b)}copy(a){kc.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}}Mh.prototype.isHemisphereLight=!0;const Vj=new Da,Wj=new C,Xj=new C;class Nh{constructor(a){this.camera=a;this.normalBias=this.bias=0;this.radius=1;this.blurSamples=8;this.mapSize=new la(512,512);this.mapPass=this.map=null;this.matrix=new Da;this.autoUpdate=!0;this.needsUpdate=!1;this._frustum=new ve;this._frameExtents=new la(1,1);this._viewportCount=1;this._viewports=[new cb(0,0,1,
1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(a){const b=this.camera,c=this.matrix;Wj.setFromMatrixPosition(a.matrixWorld);b.position.copy(Wj);Xj.setFromMatrixPosition(a.target.matrixWorld);b.lookAt(Xj);b.updateMatrixWorld();Vj.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);this._frustum.setFromProjectionMatrix(Vj);c.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);c.multiply(b.projectionMatrix);c.multiply(b.matrixWorldInverse)}getViewport(a){return this._viewports[a]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&
this.map.dispose();this.mapPass&&this.mapPass.dispose()}copy(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this}clone(){return(new this.constructor).copy(this)}toJSON(){const a={};0!==this.bias&&(a.bias=this.bias);0!==this.normalBias&&(a.normalBias=this.normalBias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;
return a}}class Yj extends Nh{constructor(){super(new Bb(50,1,.5,500));this.focus=1}updateMatrices(a){const b=this.camera,c=2*Ge*a.angle*this.focus,d=this.mapSize.width/this.mapSize.height,e=a.distance||b.far;if(c!==b.fov||d!==b.aspect||e!==b.far)b.fov=c,b.aspect=d,b.far=e,b.updateProjectionMatrix();super.updateMatrices(a)}copy(a){super.copy(a);this.focus=a.focus;return this}}Yj.prototype.isSpotLightShadow=!0;class Oh extends kc{constructor(a,b,c,d,e,f){c=void 0===c?0:c;d=void 0===d?Math.PI/3:d;e=
void 0===e?0:e;f=void 0===f?1:f;super(a,b);this.type="SpotLight";this.position.copy(Va.DefaultUp);this.updateMatrix();this.target=new Va;this.distance=c;this.angle=d;this.penumbra=e;this.decay=f;this.shadow=new Yj}get power(){return this.intensity*Math.PI}set power(a){this.intensity=a/Math.PI}dispose(){this.shadow.dispose()}copy(a){super.copy(a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}}
Oh.prototype.isSpotLight=!0;const Zj=new Da,jf=new C,Ph=new C;class ak extends Nh{constructor(){super(new Bb(90,1,.5,500));this._frameExtents=new la(4,2);this._viewportCount=6;this._viewports=[new cb(2,1,1,1),new cb(0,1,1,1),new cb(3,1,1,1),new cb(1,1,1,1),new cb(3,0,1,1),new cb(1,0,1,1)];this._cubeDirections=[new C(1,0,0),new C(-1,0,0),new C(0,0,1),new C(0,0,-1),new C(0,1,0),new C(0,-1,0)];this._cubeUps=[new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,0,1),new C(0,0,-1)]}updateMatrices(a,
b){b=void 0===b?0:b;const c=this.camera,d=this.matrix,e=a.distance||c.far;e!==c.far&&(c.far=e,c.updateProjectionMatrix());jf.setFromMatrixPosition(a.matrixWorld);c.position.copy(jf);Ph.copy(c.position);Ph.add(this._cubeDirections[b]);c.up.copy(this._cubeUps[b]);c.lookAt(Ph);c.updateMatrixWorld();d.makeTranslation(-jf.x,-jf.y,-jf.z);Zj.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse);this._frustum.setFromProjectionMatrix(Zj)}}ak.prototype.isPointLightShadow=!0;class Qh extends kc{constructor(a,
b,c,d){c=void 0===c?0:c;d=void 0===d?1:d;super(a,b);this.type="PointLight";this.distance=c;this.decay=d;this.shadow=new ak}get power(){return 4*this.intensity*Math.PI}set power(a){this.intensity=a/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(a){super.copy(a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}}Qh.prototype.isPointLight=!0;class bk extends Nh{constructor(){super(new Me(-5,5,5,-5,.5,500))}}bk.prototype.isDirectionalLightShadow=!0;class Rh extends kc{constructor(a,
b){super(a,b);this.type="DirectionalLight";this.position.copy(Va.DefaultUp);this.updateMatrix();this.target=new Va;this.shadow=new bk}dispose(){this.shadow.dispose()}copy(a){super.copy(a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}}Rh.prototype.isDirectionalLight=!0;class Sh extends kc{constructor(a,b){super(a,b);this.type="AmbientLight"}}Sh.prototype.isAmbientLight=!0;class Th extends kc{constructor(a,b,c,d){c=void 0===c?10:c;d=void 0===d?10:d;super(a,b);this.type="RectAreaLight";
this.width=c;this.height=d}get power(){return this.intensity*this.width*this.height*Math.PI}set power(a){this.intensity=a/(this.width*this.height*Math.PI)}copy(a){super.copy(a);this.width=a.width;this.height=a.height;return this}toJSON(a){a=super.toJSON(a);a.object.width=this.width;a.object.height=this.height;return a}}Th.prototype.isRectAreaLight=!0;class Uh{constructor(){this.coefficients=[];for(let a=0;9>a;a++)this.coefficients.push(new C)}set(a){for(let b=0;9>b;b++)this.coefficients[b].copy(a[b]);
return this}zero(){for(let a=0;9>a;a++)this.coefficients[a].set(0,0,0);return this}getAt(a,b){const c=a.x,d=a.y;a=a.z;const e=this.coefficients;b.copy(e[0]).multiplyScalar(.282095);b.addScaledVector(e[1],.488603*d);b.addScaledVector(e[2],.488603*a);b.addScaledVector(e[3],.488603*c);b.addScaledVector(e[4],1.092548*c*d);b.addScaledVector(e[5],1.092548*d*a);b.addScaledVector(e[6],.315392*(3*a*a-1));b.addScaledVector(e[7],1.092548*c*a);b.addScaledVector(e[8],.546274*(c*c-d*d));return b}getIrradianceAt(a,
b){const c=a.x,d=a.y;a=a.z;const e=this.coefficients;b.copy(e[0]).multiplyScalar(.886227);b.addScaledVector(e[1],1.023328*d);b.addScaledVector(e[2],1.023328*a);b.addScaledVector(e[3],1.023328*c);b.addScaledVector(e[4],.858086*c*d);b.addScaledVector(e[5],.858086*d*a);b.addScaledVector(e[6],.743125*a*a-.247708);b.addScaledVector(e[7],.858086*c*a);b.addScaledVector(e[8],.429043*(c*c-d*d));return b}add(a){for(let b=0;9>b;b++)this.coefficients[b].add(a.coefficients[b]);return this}addScaledSH(a,b){for(let c=
0;9>c;c++)this.coefficients[c].addScaledVector(a.coefficients[c],b);return this}scale(a){for(let b=0;9>b;b++)this.coefficients[b].multiplyScalar(a);return this}lerp(a,b){for(let c=0;9>c;c++)this.coefficients[c].lerp(a.coefficients[c],b);return this}equals(a){for(let b=0;9>b;b++)if(!this.coefficients[b].equals(a.coefficients[b]))return!1;return!0}copy(a){return this.set(a.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(a,b){b=void 0===b?0:b;const c=this.coefficients;for(let d=
0;9>d;d++)c[d].fromArray(a,b+3*d);return this}toArray(a,b){a=void 0===a?[]:a;b=void 0===b?0:b;const c=this.coefficients;for(let d=0;9>d;d++)c[d].toArray(a,b+3*d);return a}static getBasisAt(a,b){const c=a.x,d=a.y;a=a.z;b[0]=.282095;b[1]=.488603*d;b[2]=.488603*a;b[3]=.488603*c;b[4]=1.092548*c*d;b[5]=1.092548*d*a;b[6]=.315392*(3*a*a-1);b[7]=1.092548*c*a;b[8]=.546274*(c*c-d*d)}}Uh.prototype.isSphericalHarmonics3=!0;class kf extends kc{constructor(a,b){a=void 0===a?new Uh:a;super(void 0,void 0===b?1:b);
this.sh=a}copy(a){super.copy(a);this.sh.copy(a.sh);return this}fromJSON(a){this.intensity=a.intensity;this.sh.fromArray(a.sh);return this}toJSON(a){a=super.toJSON(a);a.object.sh=this.sh.toArray();return a}}kf.prototype.isLightProbe=!0;class ck extends Lb{constructor(a){super(a);this.textures={}}load(a,b,c,d){const e=this,f=new rc(e.manager);f.setPath(e.path);f.setRequestHeader(e.requestHeader);f.setWithCredentials(e.withCredentials);f.load(a,function(g){try{b(e.parse(JSON.parse(g)))}catch(h){d?d(h):
console.error(h),e.manager.itemError(a)}},c,d)}parse(a){function b(f){void 0===c[f]&&console.warn("THREE.MaterialLoader: Undefined texture",f);return c[f]}const c=this.textures,d=new Vl[a.type];void 0!==a.uuid&&(d.uuid=a.uuid);void 0!==a.name&&(d.name=a.name);void 0!==a.color&&void 0!==d.color&&d.color.setHex(a.color);void 0!==a.roughness&&(d.roughness=a.roughness);void 0!==a.metalness&&(d.metalness=a.metalness);void 0!==a.sheen&&(d.sheen=a.sheen);void 0!==a.sheenColor&&(d.sheenColor=(new ua).setHex(a.sheenColor));
void 0!==a.sheenRoughness&&(d.sheenRoughness=a.sheenRoughness);void 0!==a.emissive&&void 0!==d.emissive&&d.emissive.setHex(a.emissive);void 0!==a.specular&&void 0!==d.specular&&d.specular.setHex(a.specular);void 0!==a.specularIntensity&&(d.specularIntensity=a.specularIntensity);void 0!==a.specularColor&&void 0!==d.specularColor&&d.specularColor.setHex(a.specularColor);void 0!==a.shininess&&(d.shininess=a.shininess);void 0!==a.clearcoat&&(d.clearcoat=a.clearcoat);void 0!==a.clearcoatRoughness&&(d.clearcoatRoughness=
a.clearcoatRoughness);void 0!==a.transmission&&(d.transmission=a.transmission);void 0!==a.thickness&&(d.thickness=a.thickness);void 0!==a.attenuationDistance&&(d.attenuationDistance=a.attenuationDistance);void 0!==a.attenuationColor&&void 0!==d.attenuationColor&&d.attenuationColor.setHex(a.attenuationColor);void 0!==a.fog&&(d.fog=a.fog);void 0!==a.flatShading&&(d.flatShading=a.flatShading);void 0!==a.blending&&(d.blending=a.blending);void 0!==a.combine&&(d.combine=a.combine);void 0!==a.side&&(d.side=
a.side);void 0!==a.shadowSide&&(d.shadowSide=a.shadowSide);void 0!==a.opacity&&(d.opacity=a.opacity);void 0!==a.format&&(d.format=a.format);void 0!==a.transparent&&(d.transparent=a.transparent);void 0!==a.alphaTest&&(d.alphaTest=a.alphaTest);void 0!==a.depthTest&&(d.depthTest=a.depthTest);void 0!==a.depthWrite&&(d.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(d.colorWrite=a.colorWrite);void 0!==a.stencilWrite&&(d.stencilWrite=a.stencilWrite);void 0!==a.stencilWriteMask&&(d.stencilWriteMask=a.stencilWriteMask);
void 0!==a.stencilFunc&&(d.stencilFunc=a.stencilFunc);void 0!==a.stencilRef&&(d.stencilRef=a.stencilRef);void 0!==a.stencilFuncMask&&(d.stencilFuncMask=a.stencilFuncMask);void 0!==a.stencilFail&&(d.stencilFail=a.stencilFail);void 0!==a.stencilZFail&&(d.stencilZFail=a.stencilZFail);void 0!==a.stencilZPass&&(d.stencilZPass=a.stencilZPass);void 0!==a.wireframe&&(d.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(d.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(d.wireframeLinecap=
a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(d.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.rotation&&(d.rotation=a.rotation);1!==a.linewidth&&(d.linewidth=a.linewidth);void 0!==a.dashSize&&(d.dashSize=a.dashSize);void 0!==a.gapSize&&(d.gapSize=a.gapSize);void 0!==a.scale&&(d.scale=a.scale);void 0!==a.polygonOffset&&(d.polygonOffset=a.polygonOffset);void 0!==a.polygonOffsetFactor&&(d.polygonOffsetFactor=a.polygonOffsetFactor);void 0!==a.polygonOffsetUnits&&(d.polygonOffsetUnits=a.polygonOffsetUnits);
void 0!==a.dithering&&(d.dithering=a.dithering);void 0!==a.alphaToCoverage&&(d.alphaToCoverage=a.alphaToCoverage);void 0!==a.premultipliedAlpha&&(d.premultipliedAlpha=a.premultipliedAlpha);void 0!==a.visible&&(d.visible=a.visible);void 0!==a.toneMapped&&(d.toneMapped=a.toneMapped);void 0!==a.userData&&(d.userData=a.userData);void 0!==a.vertexColors&&(d.vertexColors="number"===typeof a.vertexColors?0<a.vertexColors?!0:!1:a.vertexColors);if(void 0!==a.uniforms)for(var e in a.uniforms){const f=a.uniforms[e];
d.uniforms[e]={};switch(f.type){case "t":d.uniforms[e].value=b(f.value);break;case "c":d.uniforms[e].value=(new ua).setHex(f.value);break;case "v2":d.uniforms[e].value=(new la).fromArray(f.value);break;case "v3":d.uniforms[e].value=(new C).fromArray(f.value);break;case "v4":d.uniforms[e].value=(new cb).fromArray(f.value);break;case "m3":d.uniforms[e].value=(new xb).fromArray(f.value);break;case "m4":d.uniforms[e].value=(new Da).fromArray(f.value);break;default:d.uniforms[e].value=f.value}}void 0!==
a.defines&&(d.defines=a.defines);void 0!==a.vertexShader&&(d.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(d.fragmentShader=a.fragmentShader);if(void 0!==a.extensions)for(const f in a.extensions)d.extensions[f]=a.extensions[f];void 0!==a.shading&&(d.flatShading=1===a.shading);void 0!==a.size&&(d.size=a.size);void 0!==a.sizeAttenuation&&(d.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(d.map=b(a.map));void 0!==a.matcap&&(d.matcap=b(a.matcap));void 0!==a.alphaMap&&(d.alphaMap=b(a.alphaMap));
void 0!==a.bumpMap&&(d.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(d.bumpScale=a.bumpScale);void 0!==a.normalMap&&(d.normalMap=b(a.normalMap));void 0!==a.normalMapType&&(d.normalMapType=a.normalMapType);void 0!==a.normalScale&&(e=a.normalScale,!1===Array.isArray(e)&&(e=[e,e]),d.normalScale=(new la).fromArray(e));void 0!==a.displacementMap&&(d.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(d.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(d.displacementBias=
a.displacementBias);void 0!==a.roughnessMap&&(d.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(d.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(d.emissiveMap=b(a.emissiveMap));void 0!==a.emissiveIntensity&&(d.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(d.specularMap=b(a.specularMap));void 0!==a.specularIntensityMap&&(d.specularIntensityMap=b(a.specularIntensityMap));void 0!==a.specularColorMap&&(d.specularColorMap=b(a.specularColorMap));void 0!==a.envMap&&
(d.envMap=b(a.envMap));void 0!==a.envMapIntensity&&(d.envMapIntensity=a.envMapIntensity);void 0!==a.reflectivity&&(d.reflectivity=a.reflectivity);void 0!==a.refractionRatio&&(d.refractionRatio=a.refractionRatio);void 0!==a.lightMap&&(d.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(d.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(d.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(d.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(d.gradientMap=b(a.gradientMap));void 0!==a.clearcoatMap&&
(d.clearcoatMap=b(a.clearcoatMap));void 0!==a.clearcoatRoughnessMap&&(d.clearcoatRoughnessMap=b(a.clearcoatRoughnessMap));void 0!==a.clearcoatNormalMap&&(d.clearcoatNormalMap=b(a.clearcoatNormalMap));void 0!==a.clearcoatNormalScale&&(d.clearcoatNormalScale=(new la).fromArray(a.clearcoatNormalScale));void 0!==a.transmissionMap&&(d.transmissionMap=b(a.transmissionMap));void 0!==a.thicknessMap&&(d.thicknessMap=b(a.thicknessMap));void 0!==a.sheenColorMap&&(d.sheenColorMap=b(a.sheenColorMap));void 0!==
a.sheenRoughnessMap&&(d.sheenRoughnessMap=b(a.sheenRoughnessMap));return d}setTextures(a){this.textures=a;return this}}class qg{static decodeText(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);let b="";for(let c=0,d=a.length;c<d;c++)b+=String.fromCharCode(a[c]);try{return decodeURIComponent(escape(b))}catch(c){return b}}static extractUrlBase(a){const b=a.lastIndexOf("/");return-1===b?"./":a.substr(0,b+1)}static resolveURL(a,b){if("string"!==typeof a||""===a)return"";/^https?:\/\//i.test(b)&&
/^\//.test(a)&&(b=b.replace(/(^https?:\/\/[^\/]+).*/i,"$1"));return/^(https?:)?\/\//i.test(a)||/^data:.*,.*$/i.test(a)||/^blob:.*$/i.test(a)?a:b+a}}class Vh extends Ma{constructor(){super();this.type="InstancedBufferGeometry";this.instanceCount=Infinity}copy(a){super.copy(a);this.instanceCount=a.instanceCount;return this}clone(){return(new this.constructor).copy(this)}toJSON(){const a=super.toJSON(this);a.instanceCount=this.instanceCount;a.isInstancedBufferGeometry=!0;return a}}Vh.prototype.isInstancedBufferGeometry=
!0;class dk extends Lb{constructor(a){super(a)}load(a,b,c,d){const e=this,f=new rc(e.manager);f.setPath(e.path);f.setRequestHeader(e.requestHeader);f.setWithCredentials(e.withCredentials);f.load(a,function(g){try{b(e.parse(JSON.parse(g)))}catch(h){d?d(h):console.error(h),e.manager.itemError(a)}},c,d)}parse(a){function b(n,r){if(void 0!==c[r])return c[r];const v=n.interleavedBuffers[r];var t=v.buffer;void 0!==d[t]?t=d[t]:(n=(new Uint32Array(n.arrayBuffers[t])).buffer,t=d[t]=n);t=new Ud[v.type](t);
t=new vd(t,v.stride);t.uuid=v.uuid;return c[r]=t}const c={},d={},e=a.isInstancedBufferGeometry?new Vh:new Ma;var f=a.data.index;void 0!==f&&(f=new Ud[f.type](f.array),e.setIndex(new $a(f,1)));f=a.data.attributes;for(var g in f){var h=f[g],k=void 0;h.isInterleavedBufferAttribute?(k=b(a.data,h.data),k=new wd(k,h.itemSize,h.offset,h.normalized)):(k=new Ud[h.type](h.array),k=new (h.isInstancedBufferAttribute?yd:$a)(k,h.itemSize,h.normalized));void 0!==h.name&&(k.name=h.name);void 0!==h.usage&&k.setUsage(h.usage);
void 0!==h.updateRange&&(k.updateRange.offset=h.updateRange.offset,k.updateRange.count=h.updateRange.count);e.setAttribute(g,k)}if(g=a.data.morphAttributes)for(var l in g){f=g[l];h=[];for(let n=0,r=f.length;n<r;n++){k=f[n];var m=void 0;k.isInterleavedBufferAttribute?(m=b(a.data,k.data),m=new wd(m,k.itemSize,k.offset,k.normalized)):(m=new Ud[k.type](k.array),m=new $a(m,k.itemSize,k.normalized));void 0!==k.name&&(m.name=k.name);h.push(m)}e.morphAttributes[l]=h}a.data.morphTargetsRelative&&(e.morphTargetsRelative=
!0);l=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==l)for(let n=0,r=l.length;n!==r;++n)g=l[n],e.addGroup(g.start,g.count,g.materialIndex);l=a.data.boundingSphere;void 0!==l&&(g=new C,void 0!==l.center&&g.fromArray(l.center),e.boundingSphere=new bd(g,l.radius));a.name&&(e.name=a.name);a.userData&&(e.userData=a.userData);return e}}class Yl extends Lb{constructor(a){super(a)}load(a,b,c,d){const e=this;var f=""===this.path?qg.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||
f;f=new rc(this.manager);f.setPath(this.path);f.setRequestHeader(this.requestHeader);f.setWithCredentials(this.withCredentials);f.load(a,function(g){let h=null;try{h=JSON.parse(g)}catch(k){void 0!==d&&d(k);console.error("THREE:ObjectLoader: Can't parse "+a+".",k.message);return}g=h.metadata;void 0===g||void 0===g.type||"geometry"===g.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+a):e.parse(h,b)},c,d)}loadAsync(a,b){const c=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var d=
""===c.path?qg.extractUrlBase(a):c.path;c.resourcePath=c.resourcePath||d;d=new rc(c.manager);d.setPath(c.path);d.setRequestHeader(c.requestHeader);d.setWithCredentials(c.withCredentials);d=yield d.loadAsync(a,b);d=JSON.parse(d);const e=d.metadata;if(void 0===e||void 0===e.type||"geometry"===e.type.toLowerCase())throw Error("THREE.ObjectLoader: Can't load "+a);return yield c.parseAsync(d)})}parse(a,b){const c=this.parseAnimations(a.animations);var d=this.parseShapes(a.shapes);const e=this.parseGeometries(a.geometries,
d);d=this.parseImages(a.images,function(){void 0!==b&&b(h)});const f=this.parseTextures(a.textures,d),g=this.parseMaterials(a.materials,f),h=this.parseObject(a.object,e,g,f,c);a=this.parseSkeletons(a.skeletons,h);this.bindSkeletons(h,a);if(void 0!==b){a=!1;for(const k in d)if(d[k]instanceof HTMLImageElement){a=!0;break}!1===a&&b(h)}return h}parseAsync(a){const b=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var c=b.parseAnimations(a.animations),d=b.parseShapes(a.shapes);d=b.parseGeometries(a.geometries,
d);var e=yield b.parseImagesAsync(a.images);e=b.parseTextures(a.textures,e);const f=b.parseMaterials(a.materials,e);c=b.parseObject(a.object,d,f,e,c);d=b.parseSkeletons(a.skeletons,c);b.bindSkeletons(c,d);return c})}parseShapes(a){const b={};if(void 0!==a)for(let c=0,d=a.length;c<d;c++){const e=(new qc).fromJSON(a[c]);b[e.uuid]=e}return b}parseSkeletons(a,b){const c={},d={};b.traverse(function(e){e.isBone&&(d[e.uuid]=e)});if(void 0!==a)for(let e=0,f=a.length;e<f;e++)b=(new nh).fromJSON(a[e],d),c[b.uuid]=
b;return c}parseGeometries(a,b){const c={};if(void 0!==a){const d=new dk;for(let e=0,f=a.length;e<f;e++){let g;const h=a[e];switch(h.type){case "BufferGeometry":case "InstancedBufferGeometry":g=d.parse(h);break;case "Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:h.type in Nj?g=Nj[h.type].fromJSON(h,b):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}g.uuid=h.uuid;void 0!==h.name&&(g.name=h.name);!0===g.isBufferGeometry&&
void 0!==h.userData&&(g.userData=h.userData);c[h.uuid]=g}}return c}parseMaterials(a,b){const c={},d={};if(void 0!==a){const e=new ck;e.setTextures(b);for(let f=0,g=a.length;f<g;f++)if(b=a[f],"MultiMaterial"===b.type){const h=[];for(let k=0;k<b.materials.length;k++){const l=b.materials[k];void 0===c[l.uuid]&&(c[l.uuid]=e.parse(l));h.push(c[l.uuid])}d[b.uuid]=h}else void 0===c[b.uuid]&&(c[b.uuid]=e.parse(b)),d[b.uuid]=c[b.uuid]}return d}parseAnimations(a){const b={};if(void 0!==a)for(let c=0;c<a.length;c++){const d=
gf.parse(a[c]);b[d.uuid]=d}return b}parseImages(a,b){function c(k){e.manager.itemStart(k);return g.load(k,function(){e.manager.itemEnd(k)},void 0,function(){e.manager.itemError(k);e.manager.itemEnd(k)})}function d(k){return"string"===typeof k?(k=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(k)?k:e.resourcePath+k,c(k)):k.data?{data:new Ud[k.type](k.data),width:k.width,height:k.height}:null}const e=this,f={};let g;if(void 0!==a&&0<a.length){b=new Lh(b);g=new hf(b);g.setCrossOrigin(this.crossOrigin);for(let k=0,
l=a.length;k<l;k++){b=a[k];var h=b.url;if(Array.isArray(h)){f[b.uuid]=[];for(let m=0,n=h.length;m<n;m++){const r=d(h[m]);null!==r&&(r instanceof HTMLImageElement?f[b.uuid].push(r):f[b.uuid].push(new xd(r.data,r.width,r.height)))}}else h=d(b.url),null!==h&&(f[b.uuid]=h)}}return f}parseImagesAsync(a){const b=this;return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){function c(h){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){if("string"===typeof h){const k=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?
h:d.resourcePath+h;return yield f.loadAsync(k)}return h.data?{data:new Ud[h.type](h.data),width:h.width,height:h.height}:null})}const d=b,e={};let f;if(void 0!==a&&0<a.length){f=new hf(b.manager);f.setCrossOrigin(b.crossOrigin);for(let h=0,k=a.length;h<k;h++){const l=a[h];var g=l.url;if(Array.isArray(g)){e[l.uuid]=[];for(let m=0,n=g.length;m<n;m++){const r=yield c(g[m]);null!==r&&(r instanceof HTMLImageElement?e[l.uuid].push(r):e[l.uuid].push(new xd(r.data,r.width,r.height)))}}else g=yield c(l.url),
null!==g&&(e[l.uuid]=g)}}return e})}parseTextures(a,b){function c(e,f){if("number"===typeof e)return e;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e);return f[e]}const d={};if(void 0!==a)for(let e=0,f=a.length;e<f;e++){const g=a[e];void 0===g.image&&console.warn('THREE.ObjectLoader: No "image" specified for',g.uuid);void 0===b[g.image]&&console.warn("THREE.ObjectLoader: Undefined image",g.image);let h;const k=b[g.image];Array.isArray(k)?(h=new fe(k),6===k.length&&
(h.needsUpdate=!0)):(h=k&&k.data?new xd(k.data,k.width,k.height):new yb(k),k&&(h.needsUpdate=!0));h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping,Zl));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.center&&h.center.fromArray(g.center);void 0!==g.rotation&&(h.rotation=g.rotation);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0],ek),h.wrapT=c(g.wrap[1],ek));void 0!==g.format&&(h.format=g.format);void 0!==g.type&&
(h.type=g.type);void 0!==g.encoding&&(h.encoding=g.encoding);void 0!==g.minFilter&&(h.minFilter=c(g.minFilter,fk));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter,fk));void 0!==g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);void 0!==g.premultiplyAlpha&&(h.premultiplyAlpha=g.premultiplyAlpha);void 0!==g.unpackAlignment&&(h.unpackAlignment=g.unpackAlignment);void 0!==g.userData&&(h.userData=g.userData);d[g.uuid]=h}return d}parseObject(a,b,c,d,e){function f(r){void 0===
b[r]&&console.warn("THREE.ObjectLoader: Undefined geometry",r);return b[r]}function g(r){if(void 0!==r){if(Array.isArray(r)){const v=[];for(let t=0,y=r.length;t<y;t++){const E=r[t];void 0===c[E]&&console.warn("THREE.ObjectLoader: Undefined material",E);v.push(c[E])}return v}void 0===c[r]&&console.warn("THREE.ObjectLoader: Undefined material",r);return c[r]}}function h(r){void 0===d[r]&&console.warn("THREE.ObjectLoader: Undefined texture",r);return d[r]}let k;switch(a.type){case "Scene":var l=new Yf;
void 0!==a.background&&(Number.isInteger(a.background)?l.background=new ua(a.background):l.background=h(a.background));void 0!==a.environment&&(l.environment=h(a.environment));void 0!==a.fog&&("Fog"===a.fog.type?l.fog=new Xf(a.fog.color,a.fog.near,a.fog.far):"FogExp2"===a.fog.type&&(l.fog=new Wf(a.fog.color,a.fog.density)));break;case "PerspectiveCamera":l=new Bb(a.fov,a.aspect,a.near,a.far);void 0!==a.focus&&(l.focus=a.focus);void 0!==a.zoom&&(l.zoom=a.zoom);void 0!==a.filmGauge&&(l.filmGauge=a.filmGauge);
void 0!==a.filmOffset&&(l.filmOffset=a.filmOffset);void 0!==a.view&&(l.view=Object.assign({},a.view));break;case "OrthographicCamera":l=new Me(a.left,a.right,a.top,a.bottom,a.near,a.far);void 0!==a.zoom&&(l.zoom=a.zoom);void 0!==a.view&&(l.view=Object.assign({},a.view));break;case "AmbientLight":l=new Sh(a.color,a.intensity);break;case "DirectionalLight":l=new Rh(a.color,a.intensity);break;case "PointLight":l=new Qh(a.color,a.intensity,a.distance,a.decay);break;case "RectAreaLight":l=new Th(a.color,
a.intensity,a.width,a.height);break;case "SpotLight":l=new Oh(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case "HemisphereLight":l=new Mh(a.color,a.groundColor,a.intensity);break;case "LightProbe":l=(new kf).fromJSON(a);break;case "SkinnedMesh":l=f(a.geometry);k=g(a.material);l=new dg(l,k);void 0!==a.bindMode&&(l.bindMode=a.bindMode);void 0!==a.bindMatrix&&l.bindMatrix.fromArray(a.bindMatrix);void 0!==a.skeleton&&(l.skeleton=a.skeleton);break;case "Mesh":l=f(a.geometry);k=g(a.material);
l=new ub(l,k);break;case "InstancedMesh":l=f(a.geometry);k=g(a.material);var m=a.instanceMatrix,n=a.instanceColor;l=new oh(l,k,a.count);l.instanceMatrix=new yd(new Float32Array(m.array),16);void 0!==n&&(l.instanceColor=new yd(new Float32Array(n.array),n.itemSize));break;case "LOD":l=new uj;break;case "Line":l=new Ic(f(a.geometry),g(a.material));break;case "LineLoop":l=new qh(f(a.geometry),g(a.material));break;case "LineSegments":l=new Qb(f(a.geometry),g(a.material));break;case "PointCloud":case "Points":l=
new Te(f(a.geometry),g(a.material));break;case "Sprite":l=new bg(g(a.material));break;case "Group":l=new ud;break;case "Bone":l=new eg;break;default:l=new Va}l.uuid=a.uuid;void 0!==a.name&&(l.name=a.name);void 0!==a.matrix?(l.matrix.fromArray(a.matrix),void 0!==a.matrixAutoUpdate&&(l.matrixAutoUpdate=a.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(void 0!==a.position&&l.position.fromArray(a.position),void 0!==a.rotation&&l.rotation.fromArray(a.rotation),
void 0!==a.quaternion&&l.quaternion.fromArray(a.quaternion),void 0!==a.scale&&l.scale.fromArray(a.scale));void 0!==a.castShadow&&(l.castShadow=a.castShadow);void 0!==a.receiveShadow&&(l.receiveShadow=a.receiveShadow);a.shadow&&(void 0!==a.shadow.bias&&(l.shadow.bias=a.shadow.bias),void 0!==a.shadow.normalBias&&(l.shadow.normalBias=a.shadow.normalBias),void 0!==a.shadow.radius&&(l.shadow.radius=a.shadow.radius),void 0!==a.shadow.mapSize&&l.shadow.mapSize.fromArray(a.shadow.mapSize),void 0!==a.shadow.camera&&
(l.shadow.camera=this.parseObject(a.shadow.camera)));void 0!==a.visible&&(l.visible=a.visible);void 0!==a.frustumCulled&&(l.frustumCulled=a.frustumCulled);void 0!==a.renderOrder&&(l.renderOrder=a.renderOrder);void 0!==a.userData&&(l.userData=a.userData);void 0!==a.layers&&(l.layers.mask=a.layers);if(void 0!==a.children)for(m=a.children,n=0;n<m.length;n++)l.add(this.parseObject(m[n],b,c,d,e));if(void 0!==a.animations)for(m=a.animations,n=0;n<m.length;n++)l.animations.push(e[m[n]]);if("LOD"===a.type)for(void 0!==
a.autoUpdate&&(l.autoUpdate=a.autoUpdate),a=a.levels,e=0;e<a.length;e++)m=a[e],n=l.getObjectByProperty("uuid",m.object),void 0!==n&&l.addLevel(n,m.distance);return l}bindSkeletons(a,b){0!==Object.keys(b).length&&a.traverse(function(c){if(!0===c.isSkinnedMesh&&void 0!==c.skeleton){const d=b[c.skeleton];void 0===d?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",c.skeleton):c.bind(d,c.bindMatrix)}})}setTexturePath(a){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");
return this.setResourcePath(a)}}const Zl={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},ek={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},fk={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};class gk extends Lb{constructor(a){super(a);
"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.options={premultiplyAlpha:"none"}}setOptions(a){this.options=a;return this}load(a,b,c,d){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);const e=this,f=Bd.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},
0),f;c={};c.credentials="anonymous"===this.crossOrigin?"same-origin":"include";c.headers=this.requestHeader;fetch(a,c).then(function(g){return g.blob()}).then(function(g){return createImageBitmap(g,Object.assign(e.options,{colorSpaceConversion:"none"}))}).then(function(g){Bd.add(a,g);b&&b(g);e.manager.itemEnd(a)}).catch(function(g){d&&d(g);e.manager.itemError(a);e.manager.itemEnd(a)});e.manager.itemStart(a)}}gk.prototype.isImageBitmapLoader=!0;let rg;const Wh={getContext:function(){void 0===rg&&(rg=
new (window.AudioContext||window.webkitAudioContext));return rg},setContext:function(a){rg=a}};class hk extends Lb{constructor(a){super(a)}load(a,b,c,d){const e=this,f=new rc(this.manager);f.setResponseType("arraybuffer");f.setPath(this.path);f.setRequestHeader(this.requestHeader);f.setWithCredentials(this.withCredentials);f.load(a,function(g){try{const h=g.slice(0);Wh.getContext().decodeAudioData(h,function(k){b(k)})}catch(h){d?d(h):console.error(h),e.manager.itemError(a)}},c,d)}}class ik extends kf{constructor(a,
b,c){super(void 0,void 0===c?1:c);a=(new ua).set(a);c=(new ua).set(b);b=new C(a.r,a.g,a.b);a=new C(c.r,c.g,c.b);c=Math.sqrt(Math.PI);const d=c*Math.sqrt(.75);this.sh.coefficients[0].copy(b).add(a).multiplyScalar(c);this.sh.coefficients[1].copy(b).sub(a).multiplyScalar(d)}}ik.prototype.isHemisphereLightProbe=!0;class jk extends kf{constructor(a,b){super(void 0,void 0===b?1:b);a=(new ua).set(a);this.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI))}}jk.prototype.isAmbientLightProbe=
!0;const kk=new Da,lk=new Da,Cd=new Da;class $l{constructor(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new Bb;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new Bb;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1;this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(a){const b=this._cache;if(b.focus!==a.focus||b.fov!==a.fov||b.aspect!==a.aspect*this.aspect||b.near!==a.near||b.far!==a.far||
b.zoom!==a.zoom||b.eyeSep!==this.eyeSep){b.focus=a.focus;b.fov=a.fov;b.aspect=a.aspect*this.aspect;b.near=a.near;b.far=a.far;b.zoom=a.zoom;b.eyeSep=this.eyeSep;Cd.copy(a.projectionMatrix);var c=b.eyeSep/2;const d=c*b.near/b.focus,e=b.near*Math.tan(rd*b.fov*.5)/b.zoom;let f;lk.elements[12]=-c;kk.elements[12]=c;c=-e*b.aspect+d;f=e*b.aspect+d;Cd.elements[0]=2*b.near/(f-c);Cd.elements[8]=(f+c)/(f-c);this.cameraL.projectionMatrix.copy(Cd);c=-e*b.aspect-d;f=e*b.aspect-d;Cd.elements[0]=2*b.near/(f-c);Cd.elements[8]=
(f+c)/(f-c);this.cameraR.projectionMatrix.copy(Cd)}this.cameraL.matrixWorld.copy(a.matrixWorld).multiply(lk);this.cameraR.matrixWorld.copy(a.matrixWorld).multiply(kk)}}class mk{constructor(a){this.autoStart=void 0===a?!0:a;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}start(){this.oldTime=this.startTime=Oi();this.elapsedTime=0;this.running=!0}stop(){this.getElapsedTime();this.autoStart=this.running=!1}getElapsedTime(){this.getDelta();return this.elapsedTime}getDelta(){let a=0;if(this.autoStart&&
!this.running)return this.start(),0;if(this.running){const b=Oi();a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}}const Dd=new C,nk=new Gb,am=new C,Ed=new C;class bm extends Va{constructor(){super();this.type="AudioListener";this.context=Wh.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null;this.timeDelta=0;this._clock=new mk}getInput(){return this.gain}removeFilter(){null!==this.filter&&(this.gain.disconnect(this.filter),
this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null);return this}getFilter(){return this.filter}setFilter(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination);return this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(a){this.gain.gain.setTargetAtTime(a,
this.context.currentTime,.01);return this}updateMatrixWorld(a){super.updateMatrixWorld(a);a=this.context.listener;const b=this.up;this.timeDelta=this._clock.getDelta();this.matrixWorld.decompose(Dd,nk,am);Ed.set(0,0,-1).applyQuaternion(nk);if(a.positionX){const c=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(Dd.x,c);a.positionY.linearRampToValueAtTime(Dd.y,c);a.positionZ.linearRampToValueAtTime(Dd.z,c);a.forwardX.linearRampToValueAtTime(Ed.x,c);a.forwardY.linearRampToValueAtTime(Ed.y,
c);a.forwardZ.linearRampToValueAtTime(Ed.z,c);a.upX.linearRampToValueAtTime(b.x,c);a.upY.linearRampToValueAtTime(b.y,c);a.upZ.linearRampToValueAtTime(b.z,c)}else a.setPosition(Dd.x,Dd.y,Dd.z),a.setOrientation(Ed.x,Ed.y,Ed.z,b.x,b.y,b.z)}}class Xh extends Va{constructor(a){super();this.type="Audio";this.listener=a;this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.detune=0;this.loop=!1;this.offset=this.loopEnd=this.loopStart=
0;this.duration=void 0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.source=null;this.sourceType="empty";this._progress=this._startedAt=0;this._connected=!1;this.filters=[]}getOutput(){return this.gain}setNodeSource(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this}setMediaElementSource(a){this.hasPlaybackControl=!1;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(a);this.connect();return this}setMediaStreamSource(a){this.hasPlaybackControl=
!1;this.sourceType="mediaStreamNode";this.source=this.context.createMediaStreamSource(a);this.connect();return this}setBuffer(a){this.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this}play(a){a=void 0===a?0:a;if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+a,a=this.context.createBufferSource(),
a.buffer=this.buffer,a.loop=this.loop,a.loopStart=this.loopStart,a.loopEnd=this.loopEnd,a.onended=this.onEnded.bind(this),a.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=a,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,
0)*this.playbackRate,!0===this.loop&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(let a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);
this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());this._connected=!0;return this}disconnect(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(let a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());this._connected=!1;return this}getFilters(){return this.filters}setFilters(a){a||(a=[]);
!0===this._connected?(this.disconnect(),this.filters=a.slice(),this.connect()):this.filters=a.slice();return this}setDetune(a){this.detune=a;if(void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(a){return this.setFilters(a?[a]:[])}setPlaybackRate(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=a,!0===this.isPlaying&&(this.source.loop=
this.loop),this}setLoopStart(a){this.loopStart=a;return this}setLoopEnd(a){this.loopEnd=a;return this}getVolume(){return this.gain.gain.value}setVolume(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this}}const Fd=new C,ok=new Gb,cm=new C,Gd=new C;class dm extends Xh{constructor(a){super(a);this.panner=this.context.createPanner();this.panner.panningModel="HRTF";this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(a){this.panner.refDistance=
a;return this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(a){this.panner.rolloffFactor=a;return this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(a){this.panner.distanceModel=a;return this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(a){this.panner.maxDistance=a;return this}setDirectionalCone(a,b,c){this.panner.coneInnerAngle=a;this.panner.coneOuterAngle=b;this.panner.coneOuterGain=c;return this}updateMatrixWorld(a){super.updateMatrixWorld(a);
if(!0!==this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(Fd,ok,cm),Gd.set(0,0,1).applyQuaternion(ok),a=this.panner,a.positionX){const b=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(Fd.x,b);a.positionY.linearRampToValueAtTime(Fd.y,b);a.positionZ.linearRampToValueAtTime(Fd.z,b);a.orientationX.linearRampToValueAtTime(Gd.x,b);a.orientationY.linearRampToValueAtTime(Gd.y,b);a.orientationZ.linearRampToValueAtTime(Gd.z,b)}else a.setPosition(Fd.x,
Fd.y,Fd.z),a.setOrientation(Gd.x,Gd.y,Gd.z)}}class pk{constructor(a,b){b=void 0===b?2048:b;this.analyser=a.context.createAnalyser();this.analyser.fftSize=b;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}getFrequencyData(){this.analyser.getByteFrequencyData(this.data);return this.data}getAverageFrequency(){let a=0;const b=this.getFrequencyData();for(let c=0;c<b.length;c++)a+=b[c];return a/b.length}}class qk{constructor(a,b,c){this.binding=a;this.valueSize=
c;let d;switch(b){case "quaternion":a=this._slerp;b=this._slerpAdditive;d=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*c);this._workIndex=5;break;case "string":case "bool":b=a=this._select;d=this._setAdditiveIdentityOther;this.buffer=Array(5*c);break;default:a=this._lerp,b=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*c)}this._mixBufferRegion=a;this._mixBufferRegionAdditive=b;this._setIdentity=d;this._origIndex=3;this._addIndex=4;this.referenceCount=
this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}accumulate(a,b){const c=this.buffer,d=this.valueSize;a=a*d+d;var e=this.cumulativeWeight;if(0===e){for(e=0;e!==d;++e)c[a+e]=c[e];e=b}else e+=b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e}accumulateAdditive(a){const b=this.buffer,c=this.valueSize,d=c*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity();this._mixBufferRegionAdditive(b,d,0,a,c);this.cumulativeWeightAdditive+=a}apply(a){const b=this.valueSize,
c=this.buffer;a=a*b+b;const d=this.cumulativeWeight,e=this.cumulativeWeightAdditive,f=this.binding;this.cumulativeWeightAdditive=this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,b*this._origIndex,1-d,b);0<e&&this._mixBufferRegionAdditive(c,a,this._addIndex*b,1,b);for(let g=b,h=b+b;g!==h;++g)if(c[g]!==c[g+b]){f.setValue(c,a);break}}saveOriginalState(){const a=this.buffer,b=this.valueSize,c=b*this._origIndex;this.binding.getValue(a,c);for(let d=b,e=c;d!==e;++d)a[d]=a[c+d%b];this._setIdentity();
this.cumulativeWeightAdditive=this.cumulativeWeight=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){var a=this._addIndex*this.valueSize;const b=a+this.valueSize;for(;a<b;a++)this.buffer[a]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric();this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const a=this._origIndex*this.valueSize,b=this._addIndex*this.valueSize;for(let c=0;c<this.valueSize;c++)this.buffer[b+
c]=this.buffer[a+c]}_select(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]}_slerp(a,b,c,d){Gb.slerpFlat(a,b,a,b,a,c,d)}_slerpAdditive(a,b,c,d,e){e*=this._workIndex;Gb.multiplyQuaternionsFlat(a,e,a,b,a,c);Gb.slerpFlat(a,b,a,b,a,e,d)}_lerp(a,b,c,d,e){const f=1-d;for(let g=0;g!==e;++g){const h=b+g;a[h]=a[h]*f+a[c+g]*d}}_lerpAdditive(a,b,c,d,e){for(let f=0;f!==e;++f){const g=b+f;a[g]+=a[c+f]*d}}}const em=RegExp("[\\[\\]\\.:\\/]","g"),fm=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),gm=
/(WCOD+)?/.source.replace("WCOD","[^\\[\\]:\\/]"),hm=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),im=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),jm=new RegExp("^"+fm+gm+hm+im+"$"),km=["material","materials","bones"];class lm{constructor(a,b,c){c=c||bb.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)}getValue(a,b){this.bind();const c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)}setValue(a,b){const c=this._bindings;
for(let d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)}bind(){const a=this._bindings;for(let b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()}unbind(){const a=this._bindings;for(let b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].unbind()}}class bb{constructor(a,b,c){this.path=b;this.parsedPath=c||bb.parseTrackName(b);this.node=bb.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a;this.getValue=this._getValue_unbound;this.setValue=
this._setValue_unbound}static create(a,b,c){return a&&a.isAnimationObjectGroup?new bb.Composite(a,b,c):new bb(a,b,c)}static sanitizeNodeName(a){return a.replace(/\s/g,"_").replace(em,"")}static parseTrackName(a){var b=jm.exec(a);if(!b)throw Error("PropertyBinding: Cannot parse trackName: "+a);b={nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};const c=b.nodeName&&b.nodeName.lastIndexOf(".");if(void 0!==c&&-1!==c){const d=b.nodeName.substring(c+1);-1!==km.indexOf(d)&&
(b.nodeName=b.nodeName.substring(0,c),b.objectName=d)}if(null===b.propertyName||0===b.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+a);return b}static findNode(a,b){if(!b||""===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){const c=a.skeleton.getBoneByName(b);if(void 0!==c)return c}if(a.children){const c=function(d){for(let f=0;f<d.length;f++){var e=d[f];if(e.name===b||e.uuid===b||(e=c(e.children)))return e}return null};if(a=c(a.children))return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(a,
b){a[b]=this.targetObject[this.propertyName]}_getValue_array(a,b){const c=this.resolvedProperty;for(let d=0,e=c.length;d!==e;++d)a[b++]=c[d]}_getValue_arrayElement(a,b){a[b]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(a,b){this.resolvedProperty.toArray(a,b)}_setValue_direct(a,b){this.targetObject[this.propertyName]=a[b]}_setValue_direct_setNeedsUpdate(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(a,b){this.targetObject[this.propertyName]=
a[b];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(a,b){const c=this.resolvedProperty;for(let d=0,e=c.length;d!==e;++d)c[d]=a[b++]}_setValue_array_setNeedsUpdate(a,b){const c=this.resolvedProperty;for(let d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(a,b){const c=this.resolvedProperty;for(let d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(a,b){this.resolvedProperty[this.propertyIndex]=
a[b]}_setValue_arrayElement_setNeedsUpdate(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(a,b){this.resolvedProperty.fromArray(a,b)}_setValue_fromArray_setNeedsUpdate(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(a,b){this.resolvedProperty.fromArray(a,
b);this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(a,b){this.bind();this.getValue(a,b)}_setValue_unbound(a,b){this.bind();this.setValue(a,b)}bind(){let a=this.node;var b=this.parsedPath,c=b.objectName;const d=b.propertyName;let e=b.propertyIndex;a||(this.node=a=bb.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case "materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",
this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void 0===a[c]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",
this);return}a=a[c]}if(void 0!==f){if(void 0===a[f]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error("THREE.PropertyBinding: Trying to update property for track: "+b.nodeName+"."+d+" but it wasn't found.",a);else{b=this.Versioning.None;this.targetObject=a;void 0!==a.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);c=
this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===d){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}void 0!==a.morphTargetDictionary[e]&&(e=a.morphTargetDictionary[e])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",
this);return}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==f.fromArray&&void 0!==f.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(c=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}unbind(){this.node=
null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}}bb.Composite=lm;bb.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};bb.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};bb.prototype.GetterByBindingType=[bb.prototype._getValue_direct,bb.prototype._getValue_array,bb.prototype._getValue_arrayElement,bb.prototype._getValue_toArray];bb.prototype.SetterByBindingTypeAndVersioning=[[bb.prototype._setValue_direct,bb.prototype._setValue_direct_setNeedsUpdate,
bb.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[bb.prototype._setValue_array,bb.prototype._setValue_array_setNeedsUpdate,bb.prototype._setValue_array_setMatrixWorldNeedsUpdate],[bb.prototype._setValue_arrayElement,bb.prototype._setValue_arrayElement_setNeedsUpdate,bb.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[bb.prototype._setValue_fromArray,bb.prototype._setValue_fromArray_setNeedsUpdate,bb.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class rk{constructor(){this.uuid=
Ta();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;const a={};this._indicesByUUID=a;for(let c=0,d=arguments.length;c!==d;++c)a[arguments[c].uuid]=c;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};const b=this;this.stats={objects:{get total(){return b._objects.length},get inUse(){return this.total-b.nCachedObjects_}},get bindingsPerObject(){return b._bindings.length}}}add(){const a=this._objects,b=this._indicesByUUID,c=this._paths,d=
this._parsedPaths,e=this._bindings,f=e.length;let g=void 0,h=a.length,k=this.nCachedObjects_;for(let n=0,r=arguments.length;n!==r;++n){const v=arguments[n];var l=v.uuid;let t=b[l];if(void 0===t){t=h++;b[l]=t;a.push(v);for(let y=0,E=f;y!==E;++y)e[y].push(new bb(v,c[y],d[y]))}else if(t<k){g=a[t];const y=--k;var m=a[y];b[m.uuid]=t;a[t]=m;b[l]=y;a[y]=v;for(let E=0,M=f;E!==M;++E)l=e[E],m=l[t],l[t]=l[y],void 0===m&&(m=new bb(v,c[E],d[E])),l[y]=m}else a[t]!==g&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=
k}remove(){const a=this._objects,b=this._indicesByUUID,c=this._bindings,d=c.length;let e=this.nCachedObjects_;for(let h=0,k=arguments.length;h!==k;++h){var f=arguments[h],g=f.uuid;const l=b[g];if(void 0!==l&&l>=e){const m=e++,n=a[m];b[n.uuid]=l;a[l]=n;b[g]=m;a[m]=f;for(let r=0,v=d;r!==v;++r)f=c[r],g=f[l],f[l]=f[m],f[m]=g}}this.nCachedObjects_=e}uncache(){const a=this._objects,b=this._indicesByUUID,c=this._bindings,d=c.length;let e=this.nCachedObjects_,f=a.length;for(let m=0,n=arguments.length;m!==
n;++m){var g=arguments[m].uuid;const r=b[g];if(void 0!==r)if(delete b[g],r<e){g=--e;var h=a[g],k=--f,l=a[k];b[h.uuid]=r;a[r]=h;b[l.uuid]=g;a[g]=l;a.pop();for(let v=0,t=d;v!==t;++v)h=c[v],l=h[k],h[r]=h[g],h[g]=l,h.pop()}else{g=--f;k=a[g];0<g&&(b[k.uuid]=r);a[r]=k;a.pop();for(let v=0,t=d;v!==t;++v)k=c[v],k[r]=k[g],k.pop()}}this.nCachedObjects_=e}subscribe_(a,b){const c=this._bindingsIndicesByPath;let d=c[a];const e=this._bindings;if(void 0!==d)return e[d];const f=this._paths,g=this._parsedPaths,h=this._objects,
k=this.nCachedObjects_,l=Array(h.length);d=e.length;c[a]=d;f.push(a);g.push(b);e.push(l);for(let m=k,n=h.length;m!==n;++m)l[m]=new bb(h[m],a,b);return l}unsubscribe_(a){const b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){const d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}}rk.prototype.isAnimationObjectGroup=!0;class mm{constructor(a,b,c,d){d=void 0===d?b.blendMode:d;this._mixer=a;this._clip=b;this._localRoot=
void 0===c?null:c;this.blendMode=d;a=b.tracks;b=a.length;c=Array(b);d={endingStart:2400,endingEnd:2400};for(let e=0;e!==b;++e){const f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=
1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}play(){this._mixer._activateAction(this);return this}stop(){this._mixer._deactivateAction(this);return this.reset()}reset(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(a){this._startTime=
a;return this}setLoop(a,b){this.loop=a;this.repetitions=b;return this}setEffectiveWeight(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(a){return this._scheduleFading(a,0,1)}fadeOut(a){return this._scheduleFading(a,1,0)}crossFadeFrom(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;const d=a._clip.duration,e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this}crossFadeTo(a,b,c){return a.crossFadeFrom(this,
b,c)}stopFading(){const a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this}setEffectiveTimeScale(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(a){this.timeScale=this._clip.duration/a;return this.stopWarping()}syncWith(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()}halt(a){return this.warp(this._effectiveTimeScale,
0,a)}warp(a,b,c){var d=this._mixer;const e=d.time,f=this.timeScale;var g=this._timeScaleInterpolant;null===g&&(this._timeScaleInterpolant=g=d._lendControlInterpolant());d=g.parameterPositions;g=g.sampleValues;d[0]=e;d[1]=e+c;g[0]=a/f;g[1]=b/f;return this}stopWarping(){const a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(a,
b,c,d){if(this.enabled){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a)switch(b=this._interpolants,e=this._propertyBindings,this.blendMode){case 2501:for(let f=0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulateAdditive(a);break;default:for(let f=0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}}else this._updateWeight(a)}_updateWeight(a){let b=0;if(this.enabled){b=
this.weight;const c=this._weightInterpolant;if(null!==c){const d=c.evaluate(a)[0];b*=d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b}_updateTimeScale(a){let b=0;if(!this.paused){b=this.timeScale;const c=this._timeScaleInterpolant;if(null!==c){const d=c.evaluate(a)[0];b*=d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b}_updateTime(a){const b=this._clip.duration;var c=
this.loop;let d=this.time+a,e=this._loopCount;const f=2202===c;if(0===a)return-1===e?d:f&&1===(e&1)?b-d:d;if(2200===c)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),d>=b)d=b;else if(0>d)d=0;else{this.time=d;break a}this.clampWhenFinished?this.paused=!0:this.enabled=!1;this.time=d;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,f)):this._setEndings(0===this.repetitions,!0,f));if(d>=b||0>d){c=
Math.floor(d/b);d-=b*c;e+=Math.abs(c);const g=this.repetitions-e;0>=g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=d=0<a?b:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(1===g?(a=0>a,this._setEndings(a,!a,f)):this._setEndings(!1,!1,f),this._loopCount=e,this.time=d,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c}))}else this.time=d;if(f&&1===(e&1))return b-d}return d}_setEndings(a,b,c){const d=this._interpolantSettings;c?(d.endingStart=
2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(a,b,c){var d=this._mixer;const e=d.time;var f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}}class sk extends Zc{constructor(a){super();this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}_bindAction(a,
b){const c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;const g=c.uuid;var h=this._bindingsByRootAndName;let k=h[g];void 0===k&&(k={},h[g]=k);for(h=0;h!==e;++h){const l=d[h],m=l.name;let n=k[m];if(void 0===n){n=f[h];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,g,m));continue}n=new qk(bb.create(c,m,b&&b._propertyBindings[h].binding.parsedPath),l.ValueTypeName,l.getValueSize());++n.referenceCount;this._addInactiveBinding(n,
g,m)}f[h]=n;a[h].resultBuffer=n.buffer}}_activateAction(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid;const d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;for(let d=0,e=b.length;d!==e;++d)c=b[d],0===c.useCount++&&(this._lendBinding(c),c.saveOriginalState());this._lendAction(a)}}_deactivateAction(a){if(this._isActiveAction(a)){const b=a._propertyBindings;for(let c=
0,d=b.length;c!==d;++c){const e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}}_initMemoryManager(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;const a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},
get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}}_isActiveAction(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions}_addInactiveAction(a,b,c){const d=this._actions,e=this._actionsByClip;let f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);f.actionByRoot[c]=
a}_removeInactiveAction(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;b=a._clip.uuid;c=this._actionsByClip;d=c[b];const e=d.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;f._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete d.actionByRoot[(a._localRoot||this._root).uuid];0===e.length&&delete c[b];this._removeInactiveBindingsForAction(a)}_removeInactiveBindingsForAction(a){a=a._propertyBindings;for(let b=0,c=a.length;b!==
c;++b){const d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}}_lendAction(a){const b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e}_takeBackAction(a){const b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e}_addInactiveBinding(a,b,c){const d=this._bindingsByRootAndName,e=this._bindings;let f=d[b];void 0===f&&(f={},d[b]=f);f[c]=a;a._cacheIndex=e.length;e.push(a)}_removeInactiveBinding(a){const b=
this._bindings;var c=a.binding;const d=c.rootNode.uuid;c=c.path;const e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;g._cacheIndex=a;b[a]=g;b.pop();delete f[c];0===Object.keys(f).length&&delete e[d]}_lendBinding(a){const b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e}_takeBackBinding(a){const b=this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e}_lendControlInterpolant(){const a=
this._controlInterpolants,b=this._nActiveControlInterpolants++;let c=a[b];void 0===c&&(c=new Kh(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c);return c}_takeBackControlInterpolant(a){const b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e}clipAction(a,b,c){var d=b||this._root;const e=d.uuid;d="string"===typeof a?gf.findByName(d,a):a;a=null!==d?d.uuid:a;
const f=this._actionsByClip[a];var g=null;void 0===c&&(c=null!==d?d.blendMode:2500);if(void 0!==f){g=f.actionByRoot[e];if(void 0!==g&&g.blendMode===c)return g;g=f.knownActions[0];null===d&&(d=g._clip)}if(null===d)return null;b=new mm(this,d,b,c);this._bindAction(b,g);this._addInactiveAction(b,a,e);return b}existingAction(a,b){var c=b||this._root;b=c.uuid;c="string"===typeof a?gf.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null}stopAllAction(){const a=
this._actions;var b=this._nActiveActions;for(--b;0<=b;--b)a[b].stop();return this}update(a){a*=this.timeScale;var b=this._actions,c=this._nActiveActions;const d=this.time+=a,e=Math.sign(a),f=this._accuIndex^=1;for(let g=0;g!==c;++g)b[g]._update(d,a,e,f);a=this._bindings;b=this._nActiveBindings;for(c=0;c!==b;++c)a[c].apply(f);return this}setTime(a){this.time=0;for(let b=0;b<this._actions.length;b++)this._actions[b].time=0;return this.update(a)}getRoot(){return this._root}uncacheClip(a){const b=this._actions;
a=a.uuid;const c=this._actionsByClip;var d=c[a];if(void 0!==d){d=d.knownActions;for(let e=0,f=d.length;e!==f;++e){const g=d[e];this._deactivateAction(g);const h=g._cacheIndex,k=b[b.length-1];g._cacheIndex=null;g._byClipCacheIndex=null;k._cacheIndex=h;b[h]=k;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}}uncacheRoot(a){a=a.uuid;const b=this._actionsByClip;for(var c in b){const d=b[c].actionByRoot[a];void 0!==d&&(this._deactivateAction(d),this._removeInactiveAction(d))}c=this._bindingsByRootAndName[a];
if(void 0!==c)for(const d in c)a=c[d],a.restoreOriginalState(),this._removeInactiveBinding(a)}uncacheAction(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}}sk.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Yh{constructor(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a}clone(){return new Yh(void 0===this.value.clone?this.value:this.value.clone())}}class tk extends vd{constructor(a,
b,c){c=void 0===c?1:c;super(a,b);this.meshPerAttribute=c}copy(a){super.copy(a);this.meshPerAttribute=a.meshPerAttribute;return this}clone(a){a=super.clone(a);a.meshPerAttribute=this.meshPerAttribute;return a}toJSON(a){a=super.toJSON(a);a.isInstancedInterleavedBuffer=!0;a.meshPerAttribute=this.meshPerAttribute;return a}}tk.prototype.isInstancedInterleavedBuffer=!0;class uk{constructor(a,b,c,d,e){this.buffer=a;this.type=b;this.itemSize=c;this.elementSize=d;this.count=e;this.version=0}set needsUpdate(a){!0===
a&&this.version++}setBuffer(a){this.buffer=a;return this}setType(a,b){this.type=a;this.elementSize=b;return this}setItemSize(a){this.itemSize=a;return this}setCount(a){this.count=a;return this}}uk.prototype.isGLBufferAttribute=!0;class nm{constructor(a,b,c,d){c=void 0===c?0:c;d=void 0===d?Infinity:d;this.ray=new dd(a,b);this.near=c;this.far=d;this.camera=null;this.layers=new xf;this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(a,b){this.ray.set(a,b)}setFromCamera(a,
b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize(),this.camera=b):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld),this.camera=b):console.error("THREE.Raycaster: Unsupported camera type: "+b.type)}intersectObject(a,b,c){c=void 0===c?[]:c;Ug(a,this,c,void 0===b?!0:b);c.sort(Pi);
return c}intersectObjects(a,b,c){b=void 0===b?!0:b;c=void 0===c?[]:c;for(let d=0,e=a.length;d<e;d++)Ug(a[d],this,c,b);c.sort(Pi);return c}}class om{constructor(a,b,c){this.radius=void 0===a?1:a;this.phi=void 0===b?0:b;this.theta=void 0===c?0:c;return this}set(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this}copy(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this}makeSafe(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this}setFromVector3(a){return this.setFromCartesianCoords(a.x,
a.y,a.z)}setFromCartesianCoords(a,b,c){this.radius=Math.sqrt(a*a+b*b+c*c);0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a,c),this.phi=Math.acos(Ua(b/this.radius,-1,1)));return this}clone(){return(new this.constructor).copy(this)}}class pm{constructor(a,b,c){this.radius=void 0===a?1:a;this.theta=void 0===b?0:b;this.y=void 0===c?0:c;return this}set(a,b,c){this.radius=a;this.theta=b;this.y=c;return this}copy(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this}setFromVector3(a){return this.setFromCartesianCoords(a.x,
a.y,a.z)}setFromCartesianCoords(a,b,c){this.radius=Math.sqrt(a*a+c*c);this.theta=Math.atan2(a,c);this.y=b;return this}clone(){return(new this.constructor).copy(this)}}const vk=new la;class oe{constructor(a,b){a=void 0===a?new la(Infinity,Infinity):a;b=void 0===b?new la(-Infinity,-Infinity):b;this.min=a;this.max=b}set(a,b){this.min.copy(a);this.max.copy(b);return this}setFromPoints(a){this.makeEmpty();for(let b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this}setFromCenterAndSize(a,b){b=vk.copy(b).multiplyScalar(.5);
this.min.copy(a).sub(b);this.max.copy(a).add(b);return this}clone(){return(new this.constructor).copy(this)}copy(a){this.min.copy(a.min);this.max.copy(a.max);return this}makeEmpty(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(a){return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)}expandByPoint(a){this.min.min(a);
this.max.max(a);return this}expandByVector(a){this.min.sub(a);this.max.add(a);return this}expandByScalar(a){this.min.addScalar(-a);this.max.addScalar(a);return this}containsPoint(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y}getParameter(a,b){return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(a){return a.max.x<
this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0}clampPoint(a,b){return b.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return vk.copy(a).clamp(this.min,this.max).sub(a).length()}intersect(a){this.min.max(a.min);this.max.min(a.max);return this}union(a){this.min.min(a.min);this.max.max(a.max);return this}translate(a){this.min.add(a);this.max.add(a);return this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}oe.prototype.isBox2=!0;const wk=new C,sg=
new C;class xk{constructor(a,b){a=void 0===a?new C:a;b=void 0===b?new C:b;this.start=a;this.end=b}set(a,b){this.start.copy(a);this.end.copy(b);return this}copy(a){this.start.copy(a.start);this.end.copy(a.end);return this}getCenter(a){return a.addVectors(this.start,this.end).multiplyScalar(.5)}delta(a){return a.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(a,b){return this.delta(b).multiplyScalar(a).add(this.start)}closestPointToPointParameter(a,
b){wk.subVectors(a,this.start);sg.subVectors(this.end,this.start);a=sg.dot(sg);a=sg.dot(wk)/a;b&&(a=Ua(a,0,1));return a}closestPointToPoint(a,b,c){a=this.closestPointToPointParameter(a,b);return this.delta(c).multiplyScalar(a).add(this.start)}applyMatrix4(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this}equals(a){return a.start.equals(this.start)&&a.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const yk=new C;class qm extends Va{constructor(a,b){super();this.light=
a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new Ma;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let c=0,d=1,e=32;c<e;c++,d++){const f=c/e*Math.PI*2,g=d/e*Math.PI*2;b.push(Math.cos(f),Math.sin(f),1,Math.cos(g),Math.sin(g),1)}a.setAttribute("position",new za(b,3));b=new Cb({fog:!1,toneMapped:!1});this.cone=new Qb(a,b);this.add(this.cone);this.update()}dispose(){this.cone.geometry.dispose();this.cone.material.dispose()}update(){this.light.updateMatrixWorld();
const a=this.light.distance?this.light.distance:1E3,b=a*Math.tan(this.light.angle);this.cone.scale.set(b,b,a);yk.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(yk);void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const fd=new C,tg=new Da,Zh=new Da;class zk extends Qb{constructor(a){const b=Qi(a),c=new Ma;var d=[];const e=[],f=new ua(0,0,1),g=new ua(0,1,0);for(let h=0;h<b.length;h++){const k=b[h];k.parent&&k.parent.isBone&&
(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.setAttribute("position",new za(d,3));c.setAttribute("color",new za(e,3));d=new Cb({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(c,d);this.type="SkeletonHelper";this.isSkeletonHelper=!0;this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}updateMatrixWorld(a){const b=this.bones,c=this.geometry,d=c.getAttribute("position");Zh.copy(this.root.matrixWorld).invert();for(let e=
0,f=0;e<b.length;e++){const g=b[e];g.parent&&g.parent.isBone&&(tg.multiplyMatrices(Zh,g.matrixWorld),fd.setFromMatrixPosition(tg),d.setXYZ(f,fd.x,fd.y,fd.z),tg.multiplyMatrices(Zh,g.parent.matrixWorld),fd.setFromMatrixPosition(tg),d.setXYZ(f+1,fd.x,fd.y,fd.z),f+=2)}c.getAttribute("position").needsUpdate=!0;super.updateMatrixWorld(a)}}class rm extends ub{constructor(a,b,c){b=new ne(b,4,2);const d=new Hc({wireframe:!0,fog:!1,toneMapped:!1});super(b,d);this.light=a;this.light.updateMatrixWorld();this.color=
c;this.type="PointLightHelper";this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}dispose(){this.geometry.dispose();this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const sm=new C,Ak=new ua,Bk=new ua;class tm extends Va{constructor(a,b,c){super();this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;a=new le(b);a.rotateY(.5*Math.PI);this.material=
new Hc({wireframe:!0,fog:!1,toneMapped:!1});void 0===this.color&&(this.material.vertexColors=!0);b=a.getAttribute("position");b=new Float32Array(3*b.count);a.setAttribute("color",new $a(b,3));this.add(new ub(a,this.material));this.update()}dispose(){this.children[0].geometry.dispose();this.children[0].material.dispose()}update(){const a=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const b=a.geometry.getAttribute("color");Ak.copy(this.light.color);Bk.copy(this.light.groundColor);
for(let c=0,d=b.count;c<d;c++){const e=c<d/2?Ak:Bk;b.setXYZ(c,e.r,e.g,e.b)}b.needsUpdate=!0}a.lookAt(sm.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Ck extends Qb{constructor(a,b,c,d){a=void 0===a?10:a;b=void 0===b?10:b;d=void 0===d?8947848:d;c=new ua(void 0===c?4473924:c);d=new ua(d);const e=b/2,f=a/b,g=a/2;a=[];const h=[];for(let k=0,l=0,m=-g;k<=b;k++,m+=f){a.push(-g,0,m,g,0,m);a.push(m,0,-g,m,0,g);const n=k===e?c:d;n.toArray(h,l);l+=3;n.toArray(h,l);l+=3;n.toArray(h,l);l+=3;n.toArray(h,
l);l+=3}b=new Ma;b.setAttribute("position",new za(a,3));b.setAttribute("color",new za(h,3));c=new Cb({vertexColors:!0,toneMapped:!1});super(b,c);this.type="GridHelper"}}class um extends Qb{constructor(a,b,c,d,e,f){a=void 0===a?10:a;b=void 0===b?16:b;c=void 0===c?8:c;d=void 0===d?64:d;f=void 0===f?8947848:f;e=new ua(void 0===e?4473924:e);f=new ua(f);var g=[];const h=[];for(var k=0;k<=b;k++){var l=k/b*2*Math.PI,m=Math.sin(l)*a;l=Math.cos(l)*a;g.push(0,0,0);g.push(m,0,l);m=k&1?e:f;h.push(m.r,m.g,m.b);
h.push(m.r,m.g,m.b)}for(b=0;b<=c;b++)for(k=b&1?e:f,m=a-a/c*b,l=0;l<d;l++){var n=l/d*2*Math.PI;let r=Math.sin(n)*m;n=Math.cos(n)*m;g.push(r,0,n);h.push(k.r,k.g,k.b);n=(l+1)/d*2*Math.PI;r=Math.sin(n)*m;n=Math.cos(n)*m;g.push(r,0,n);h.push(k.r,k.g,k.b)}a=new Ma;a.setAttribute("position",new za(g,3));a.setAttribute("color",new za(h,3));g=new Cb({vertexColors:!0,toneMapped:!1});super(a,g);this.type="PolarGridHelper"}}const Dk=new C,ug=new C,Ek=new C;class vm extends Va{constructor(a,b,c){super();this.light=
a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void 0===b&&(b=1);a=new Ma;a.setAttribute("position",new za([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new Cb({fog:!1,toneMapped:!1});this.lightPlane=new Ic(a,b);this.add(this.lightPlane);a=new Ma;a.setAttribute("position",new za([0,0,0,0,0,1],3));this.targetLine=new Ic(a,b);this.add(this.targetLine);this.update()}dispose(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();
this.targetLine.material.dispose()}update(){Dk.setFromMatrixPosition(this.light.matrixWorld);ug.setFromMatrixPosition(this.light.target.matrixWorld);Ek.subVectors(ug,Dk);this.lightPlane.lookAt(ug);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(ug);this.targetLine.scale.z=Ek.length()}}const Hf=new C,
pb=new Le;class wm extends Qb{constructor(a){function b(v,t,y){c(v,y);c(t,y)}function c(v,t){f.push(0,0,0);g.push(t.r,t.g,t.b);void 0===h[v]&&(h[v]=[]);h[v].push(f.length/3-1)}const d=new Ma,e=new Cb({color:16777215,vertexColors:!0,toneMapped:!1}),f=[],g=[],h={},k=new ua(16755200),l=new ua(16711680),m=new ua(43775),n=new ua(16777215),r=new ua(3355443);b("n1","n2",k);b("n2","n4",k);b("n4","n3",k);b("n3","n1",k);b("f1","f2",k);b("f2","f4",k);b("f4","f3",k);b("f3","f1",k);b("n1","f1",k);b("n2","f2",
k);b("n3","f3",k);b("n4","f4",k);b("p","n1",l);b("p","n2",l);b("p","n3",l);b("p","n4",l);b("u1","u2",m);b("u2","u3",m);b("u3","u1",m);b("c","t",n);b("p","c",r);b("cn1","cn2",r);b("cn3","cn4",r);b("cf1","cf2",r);b("cf3","cf4",r);d.setAttribute("position",new za(f,3));d.setAttribute("color",new za(g,3));super(d,e);this.type="CameraHelper";this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}update(){const a=
this.geometry,b=this.pointMap;pb.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);rb("c",b,a,pb,0,0,-1);rb("t",b,a,pb,0,0,1);rb("n1",b,a,pb,-1,-1,-1);rb("n2",b,a,pb,1,-1,-1);rb("n3",b,a,pb,-1,1,-1);rb("n4",b,a,pb,1,1,-1);rb("f1",b,a,pb,-1,-1,1);rb("f2",b,a,pb,1,-1,1);rb("f3",b,a,pb,-1,1,1);rb("f4",b,a,pb,1,1,1);rb("u1",b,a,pb,.7,1.1,-1);rb("u2",b,a,pb,-.7,1.1,-1);rb("u3",b,a,pb,0,2,-1);rb("cf1",b,a,pb,-1,0,1);rb("cf2",b,a,pb,1,0,1);rb("cf3",b,a,pb,0,-1,1);rb("cf4",b,a,pb,0,1,1);rb("cn1",
b,a,pb,-1,0,-1);rb("cn2",b,a,pb,1,0,-1);rb("cn3",b,a,pb,0,-1,-1);rb("cn4",b,a,pb,0,1,-1);a.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose();this.material.dispose()}}const vg=new Vb;class Fk extends Qb{constructor(a,b){b=void 0===b?16776960:b;const c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Float32Array(24),e=new Ma;e.setIndex(new $a(c,1));e.setAttribute("position",new $a(d,3));super(e,new Cb({color:b,toneMapped:!1}));this.object=a;this.type=
"BoxHelper";this.matrixAutoUpdate=!1;this.update()}update(a){void 0!==a&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==this.object&&vg.setFromObject(this.object);if(!vg.isEmpty()){a=vg.min;var b=vg.max,c=this.geometry.attributes.position,d=c.array;d[0]=b.x;d[1]=b.y;d[2]=b.z;d[3]=a.x;d[4]=b.y;d[5]=b.z;d[6]=a.x;d[7]=a.y;d[8]=b.z;d[9]=b.x;d[10]=a.y;d[11]=b.z;d[12]=b.x;d[13]=b.y;d[14]=a.z;d[15]=a.x;d[16]=b.y;d[17]=a.z;d[18]=a.x;d[19]=a.y;d[20]=a.z;d[21]=b.x;d[22]=a.y;d[23]=
a.z;c.needsUpdate=!0;this.geometry.computeBoundingSphere()}}setFromObject(a){this.object=a;this.update();return this}copy(a){Qb.prototype.copy.call(this,a);this.object=a.object;return this}}class xm extends Qb{constructor(a,b){b=void 0===b?16776960:b;const c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Ma;d.setIndex(new $a(c,1));d.setAttribute("position",new za([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));super(d,new Cb({color:b,toneMapped:!1}));this.box=
a;this.type="Box3Helper";this.geometry.computeBoundingSphere()}updateMatrixWorld(a){const b=this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(a))}}class ym extends Ic{constructor(a,b,c){b=void 0===b?1:b;c=void 0===c?16776960:c;const d=new Ma;d.setAttribute("position",new za([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));d.computeBoundingSphere();super(d,new Cb({color:c,toneMapped:!1}));this.type=
"PlaneHelper";this.plane=a;this.size=b;a=new Ma;a.setAttribute("position",new za([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));a.computeBoundingSphere();this.add(new ub(a,new Hc({color:c,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(a){let b=-this.plane.constant;1E-8>Math.abs(b)&&(b=1E-8);this.scale.set(.5*this.size,.5*this.size,b);this.children[0].material.side=0>b?1:0;this.lookAt(this.plane.normal);super.updateMatrixWorld(a)}}const Gk=new C;let wg,$h;class zm extends Va{constructor(a,
b,c,d,e,f){a=void 0===a?new C(0,0,1):a;b=void 0===b?new C(0,0,0):b;c=void 0===c?1:c;d=void 0===d?16776960:d;e=void 0===e?.2*c:e;f=void 0===f?.2*e:f;super();this.type="ArrowHelper";void 0===wg&&(wg=new Ma,wg.setAttribute("position",new za([0,0,0,0,1,0],3)),$h=new Ad(0,.5,1,5,1),$h.translate(0,-.5,0));this.position.copy(b);this.line=new Ic(wg,new Cb({color:d,toneMapped:!1}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new ub($h,new Hc({color:d,toneMapped:!1}));this.cone.matrixAutoUpdate=
!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)}setDirection(a){.99999<a.y?this.quaternion.set(0,0,0,1):-.99999>a.y?this.quaternion.set(1,0,0,0):(Gk.set(a.z,0,-a.x).normalize(),this.quaternion.setFromAxisAngle(Gk,Math.acos(a.y)))}setLength(a,b,c){b=void 0===b?.2*a:b;c=void 0===c?.2*b:c;this.line.scale.set(1,Math.max(1E-4,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()}setColor(a){this.line.material.color.set(a);this.cone.material.color.set(a)}copy(a){super.copy(a,
!1);this.line.copy(a.line);this.cone.copy(a.cone);return this}}class Hk extends Qb{constructor(a){a=void 0===a?1:a;var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new Ma;a.setAttribute("position",new za(b,3));a.setAttribute("color",new za([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new Cb({vertexColors:!0,toneMapped:!1});super(a,b);this.type="AxesHelper"}setColors(a,b,c){const d=new ua,e=this.geometry.attributes.color.array;d.set(a);d.toArray(e,0);d.toArray(e,3);d.set(b);d.toArray(e,6);d.toArray(e,
9);d.set(c);d.toArray(e,12);d.toArray(e,15);this.geometry.attributes.color.needsUpdate=!0;return this}dispose(){this.geometry.dispose();this.material.dispose()}}class Am{constructor(){this.type="ShapePath";this.color=new ua;this.subPaths=[];this.currentPath=null}moveTo(a,b){this.currentPath=new Ze;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b);return this}lineTo(a,b){this.currentPath.lineTo(a,b);return this}quadraticCurveTo(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d);return this}bezierCurveTo(a,
b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f);return this}splineThru(a){this.currentPath.splineThru(a);return this}toShapes(a,b){function c(t){const y=[];for(let E=0,M=t.length;E<M;E++){const q=t[E],H=new qc;H.curves=q.curves;y.push(H)}return y}function d(t,y){const E=y.length;let M=!1;for(let H=E-1,J=0;J<E;H=J++){var q=y[H];let K=y[J],S=K.x-q.x,P=K.y-q.y;if(Math.abs(P)>Number.EPSILON){if(0>P&&(q=y[J],S=-S,K=y[H],P=-P),!(t.y<q.y||t.y>K.y))if(t.y===q.y){if(t.x===q.x)return!0}else{q=P*(t.x-
q.x)-S*(t.y-q.y);if(0===q)return!0;0>q||(M=!M)}}else if(t.y===q.y&&(K.x<=t.x&&t.x<=q.x||q.x<=t.x&&t.x<=K.x))return!0}return M}var e=Kc.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);b=[];if(1===f.length){var g=f[0];var h=new qc;h.curves=g.curves;b.push(h);return b}var k=!e(f[0].getPoints());k=a?!k:k;h=[];const l=[];let m=[];var n=0;let r;l[n]=void 0;m[n]=[];for(let t=0,y=f.length;t<y;t++){g=f[t];r=g.getPoints();var v=e(r);(v=a?!v:v)?(!k&&l[n]&&n++,l[n]={s:new qc,p:r},l[n].s.curves=
g.curves,k&&n++,m[n]=[]):m[n].push({h:g,p:r[0]})}if(!l[0])return c(f);if(1<l.length){a=!1;e=[];for(let t=0,y=l.length;t<y;t++)h[t]=[];for(let t=0,y=l.length;t<y;t++)for(f=m[t],g=0;g<f.length;g++){v=f[g];k=!0;for(n=0;n<l.length;n++)d(v.p,l[n].p)&&(t!==n&&e.push({froms:t,tos:n,hole:g}),k?(k=!1,h[n].push(v)):a=!0);k&&h[t].push(v)}0<e.length&&(a||(m=h))}for(let t=0,y=l.length;t<y;t++){h=l[t].s;b.push(h);a=m[t];for(let E=0,M=a.length;E<M;E++)h.holes.push(a[E].h)}return b}}const Ik=new Float32Array(1),
Bm=new Int32Array(Ik.buffer);class Cm{static toHalfFloat(a){65504<a&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),a=65504);Ik[0]=a;a=Bm[0];let b=a>>16&32768,c=a>>12&2047;const d=a>>23&255;return 103>d?b:142<d?b|31744|((255==d?0:1)&&a&8388607):113>d?(c|=2048,b|(c>>114-d)+(c>>113-d&1)):b=(b|d-112<<10|c>>1)+(c&1)}}Xb.create=function(a,b){console.log("THREE.Curve.create() has been deprecated");a.prototype=Object.create(Xb.prototype);a.prototype.constructor=a;a.prototype.getPoint=
b;return a};Ze.prototype.fromPoints=function(a){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");return this.setFromPoints(a)};Ck.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};zk.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Lb.prototype.extractUrlBase=function(a){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");
return qg.extractUrlBase(a)};Lb.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};oe.prototype.center=function(a){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(a)};oe.prototype.empty=function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");
return this.isEmpty()};oe.prototype.isIntersectionBox=function(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)};oe.prototype.size=function(a){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(a)};Vb.prototype.center=function(a){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(a)};Vb.prototype.empty=function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");
return this.isEmpty()};Vb.prototype.isIntersectionBox=function(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)};Vb.prototype.isIntersectionSphere=function(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)};Vb.prototype.size=function(a){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(a)};bd.prototype.empty=function(){console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty().");
return this.isEmpty()};ve.prototype.setFromMatrix=function(a){console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().");return this.setFromProjectionMatrix(a)};xk.prototype.center=function(a){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(a)};xb.prototype.flattenToArrayOffset=function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)};
xb.prototype.multiplyVector3=function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)};xb.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};xb.prototype.applyToBufferAttribute=function(a){console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)};xb.prototype.applyToVector3Array=
function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};xb.prototype.getInverse=function(a){console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.");return this.copy(a).invert()};Da.prototype.extractPosition=function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)};Da.prototype.flattenToArrayOffset=function(a,b){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");
return this.toArray(a,b)};Da.prototype.getPosition=function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return(new C).setFromMatrixColumn(this,3)};Da.prototype.setRotationFromQuaternion=function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)};Da.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};
Da.prototype.multiplyVector3=function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)};Da.prototype.multiplyVector4=function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)};Da.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Da.prototype.rotateAxis=
function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)};Da.prototype.crossVector=function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)};Da.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Da.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};
Da.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Da.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Da.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Da.prototype.applyToBufferAttribute=function(a){console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)};Da.prototype.applyToVector3Array=
function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Da.prototype.makeFrustum=function(a,b,c,d,e,f){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(a,b,d,c,e,f)};Da.prototype.getInverse=function(a){console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead.");return this.copy(a).invert()};oc.prototype.isIntersectionLine=
function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(a)};Gb.prototype.multiplyVector3=function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)};Gb.prototype.inverse=function(){console.warn("THREE.Quaternion: .inverse() has been renamed to invert().");return this.invert()};dd.prototype.isIntersectionBox=function(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");
return this.intersectsBox(a)};dd.prototype.isIntersectionPlane=function(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)};dd.prototype.isIntersectionSphere=function(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)};tb.prototype.area=function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()};tb.prototype.barycoordFromPoint=
function(a,b){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(a,b)};tb.prototype.midpoint=function(a){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(a)};tb.prototypenormal=function(a){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(a)};tb.prototype.plane=function(a){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");
return this.getPlane(a)};tb.barycoordFromPoint=function(a,b,c,d,e){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return tb.getBarycoord(a,b,c,d,e)};tb.normal=function(a,b,c,d){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return tb.getNormal(a,b,c,d)};qc.prototype.extractAllPoints=function(a){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(a)};qc.prototype.extrude=
function(a){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new Lc(this,a)};qc.prototype.makeGeometry=function(a){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new me(this,a)};la.prototype.fromAttribute=function(a,b,c){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)};la.prototype.distanceToManhattan=function(a){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");
return this.manhattanDistanceTo(a)};la.prototype.lengthManhattan=function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()};C.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};C.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};
C.prototype.getPositionFromMatrix=function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)};C.prototype.getScaleFromMatrix=function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)};C.prototype.getColumnFromMatrix=function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");
return this.setFromMatrixColumn(b,a)};C.prototype.applyProjection=function(a){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(a)};C.prototype.fromAttribute=function(a,b,c){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)};C.prototype.distanceToManhattan=function(a){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");
return this.manhattanDistanceTo(a)};C.prototype.lengthManhattan=function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()};cb.prototype.fromAttribute=function(a,b,c){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)};cb.prototype.lengthManhattan=function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");
return this.manhattanLength()};Va.prototype.getChildByName=function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)};Va.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Va.prototype.translate=function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)};
Va.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Va.prototype.applyMatrix=function(a){console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(a)};Object.defineProperties(Va.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");
this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});ub.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};
Object.defineProperties(ub.prototype,{drawMode:{get:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.");return 0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});dg.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};
Bb.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};Object.defineProperties(kc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");
this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");
this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},
shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties($a.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}},dynamic:{get:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");
return 35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");this.setUsage(35048)}}});$a.prototype.setDynamic=function(a){console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===a?35048:35044);return this};$a.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")};$a.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};
Ma.prototype.addIndex=function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)};Ma.prototype.addAttribute=function(a,b,c){console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().");return b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute?"index"===a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(b),this):this.setAttribute(a,b):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),
this.setAttribute(a,new $a(b,c)))};Ma.prototype.addDrawCall=function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)};Ma.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()};Ma.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};
Ma.prototype.removeAttribute=function(a){console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().");return this.deleteAttribute(a)};Ma.prototype.applyMatrix=function(a){console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(a)};Object.defineProperties(Ma.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");
return this.groups}}});vd.prototype.setDynamic=function(a){console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===a?35048:35044);return this};vd.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Lc.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Lc.prototype.addShapeList=
function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Lc.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Yf.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Yh.prototype.onUpdate=function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this};Object.defineProperties(zb.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},
set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new ua}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(a){console.warn("THREE."+
this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===a}},stencilMask:{get:function(){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead.");return this.stencilFuncMask},set:function(a){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead.");this.stencilFuncMask=a}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},
set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(vc.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});db.prototype.clearTarget=function(a,b,c,d){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");
this.setRenderTarget(a);this.clear(b,c,d)};db.prototype.animate=function(a){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(a)};db.prototype.getCurrentRenderTarget=function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()};db.prototype.getMaxAnisotropy=function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()};
db.prototype.getPrecision=function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision};db.prototype.resetGLState=function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()};db.prototype.supportsFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")};
db.prototype.supportsHalfFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")};db.prototype.supportsStandardDerivatives=function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")};db.prototype.supportsCompressedTextureS3TC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");
return this.extensions.get("WEBGL_compressed_texture_s3tc")};db.prototype.supportsCompressedTexturePVRTC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")};db.prototype.supportsBlendMinMax=function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")};
db.prototype.supportsVertexTextures=function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures};db.prototype.supportsInstancedArrays=function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")};db.prototype.enableScissorTest=function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");
this.setScissorTest(a)};db.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};db.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};db.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};db.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};db.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};
db.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};db.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};db.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};db.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};db.prototype.getActiveMipMapLevel=function(){console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().");
return this.getActiveMipmapLevel()};Object.defineProperties(db.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.");return this.getContext()}},vr:{get:function(){console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr");return this.xr}},gammaInput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");
return!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");return!1},set:function(a){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");this.outputEncoding=!0===a?3001:3E3}},toneMappingWhitePoint:{get:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.");
return 1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.");return 2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(zi.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},
renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});
Object.defineProperties(Rb.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=a}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");
return this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=a}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");
return this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=a}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},
set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");
this.texture.type=a}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a}}});Xh.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const b=this;(new hk).load(a,function(c){b.setBuffer(c)});return this};
pk.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};Sf.prototype.updateCubeMap=function(a,b){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(a,b)};Sf.prototype.clear=function(a,b,c,d){console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear().");return this.renderTarget.clear(a,b,c,d)};hd.crossOrigin=void 0;hd.loadTexture=function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");
const e=new Uj;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a};hd.loadTextureCube=function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const e=new Sj;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a};hd.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};hd.loadCompressedTextureCube=
function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"136"}}));"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="136");p.ACESFilmicToneMapping=4;p.AddEquation=100;p.AddOperation=2;p.AdditiveAnimationBlendMode=2501;p.AdditiveBlending=
2;p.AlphaFormat=1021;p.AlwaysDepth=1;p.AlwaysStencilFunc=519;p.AmbientLight=Sh;p.AmbientLightProbe=jk;p.AnimationClip=gf;p.AnimationLoader=Wl;p.AnimationMixer=sk;p.AnimationObjectGroup=rk;p.AnimationUtils=kb;p.ArcCurve=uh;p.ArrayCamera=kh;p.ArrowHelper=zm;p.Audio=Xh;p.AudioAnalyser=pk;p.AudioContext=Wh;p.AudioListener=bm;p.AudioLoader=hk;p.AxesHelper=Hk;p.AxisHelper=function(a){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new Hk(a)};p.BackSide=1;p.BasicDepthPacking=
3200;p.BasicShadowMap=0;p.BinaryTextureLoader=function(a){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new Tj(a)};p.Bone=eg;p.BooleanKeyframeTrack=pd;p.BoundingBoxHelper=function(a,b){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Fk(a,b)};p.Box2=oe;p.Box3=Vb;p.Box3Helper=xm;p.BoxBufferGeometry=Tc;p.BoxGeometry=Tc;p.BoxHelper=Fk;p.BufferAttribute=$a;p.BufferGeometry=Ma;p.BufferGeometryLoader=
dk;p.ByteType=1010;p.Cache=Bd;p.Camera=Le;p.CameraHelper=wm;p.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")};p.CanvasTexture=Kj;p.CatmullRomCurve3=yh;p.CineonToneMapping=3;p.CircleBufferGeometry=Ue;p.CircleGeometry=Ue;p.ClampToEdgeWrapping=1001;p.Clock=mk;p.Color=ua;p.ColorKeyframeTrack=Tg;p.CompressedTexture=rh;p.CompressedTextureLoader=Xl;p.ConeBufferGeometry=Ve;p.ConeGeometry=Ve;p.CubeCamera=Sf;p.CubeReflectionMapping=301;p.CubeRefractionMapping=302;p.CubeTexture=
fe;p.CubeTextureLoader=Sj;p.CubeUVReflectionMapping=306;p.CubeUVRefractionMapping=307;p.CubicBezierCurve=lg;p.CubicBezierCurve3=zh;p.CubicInterpolant=Oj;p.CullFaceBack=1;p.CullFaceFront=2;p.CullFaceFrontBack=3;p.CullFaceNone=0;p.Curve=Xb;p.CurvePath=Mj;p.CustomBlending=5;p.CustomToneMapping=5;p.CylinderBufferGeometry=Ad;p.CylinderGeometry=Ad;p.Cylindrical=pm;p.DataTexture=xd;p.DataTexture2DArray=wf;p.DataTexture3D=jh;p.DataTextureLoader=Tj;p.DataUtils=Cm;p.DecrementStencilOp=7683;p.DecrementWrapStencilOp=
34056;p.DefaultLoadingManager=Rj;p.DepthFormat=1026;p.DepthStencilFormat=1027;p.DepthTexture=Vf;p.DirectionalLight=Rh;p.DirectionalLightHelper=vm;p.DiscreteInterpolant=Pj;p.DodecahedronBufferGeometry=We;p.DodecahedronGeometry=We;p.DoubleSide=2;p.DstAlphaFactor=206;p.DstColorFactor=208;p.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");return(new $a(a,b)).setUsage(35048)};
p.DynamicCopyUsage=35050;p.DynamicDrawUsage=35048;p.DynamicReadUsage=35049;p.EdgesGeometry=th;p.EdgesHelper=function(a,b){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new Qb(new th(a.geometry),new Cb({color:void 0!==b?b:16777215}))};p.EllipseCurve=Xe;p.EqualDepth=4;p.EqualStencilFunc=514;p.EquirectangularReflectionMapping=303;p.EquirectangularRefractionMapping=304;p.Euler=$d;p.EventDispatcher=Zc;p.ExtrudeBufferGeometry=Lc;p.ExtrudeGeometry=Lc;p.FaceColors=
1;p.FileLoader=rc;p.FlatShading=1;p.Float16BufferAttribute=ij;p.Float32Attribute=function(a,b){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new za(a,b)};p.Float32BufferAttribute=za;p.Float64Attribute=function(a,b){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new jj(a,b)};p.Float64BufferAttribute=jj;p.FloatType=1015;p.Fog=Xf;p.FogExp2=Wf;p.Font=function(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")};
p.FontLoader=function(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")};p.FramebufferTexture=Jj;p.FrontSide=0;p.Frustum=ve;p.GLBufferAttribute=uk;p.GLSL1="100";p.GLSL3="300 es";p.GreaterDepth=6;p.GreaterEqualDepth=5;p.GreaterEqualStencilFunc=518;p.GreaterStencilFunc=516;p.GridHelper=Ck;p.Group=ud;p.HalfFloatType=1016;p.HemisphereLight=Mh;p.HemisphereLightHelper=tm;p.HemisphereLightProbe=ik;p.IcosahedronBufferGeometry=$e;p.IcosahedronGeometry=$e;p.ImageBitmapLoader=
gk;p.ImageLoader=hf;p.ImageUtils=hd;p.ImmediateRenderObject=function(){console.error("THREE.ImmediateRenderObject has been removed.")};p.IncrementStencilOp=7682;p.IncrementWrapStencilOp=34055;p.InstancedBufferAttribute=yd;p.InstancedBufferGeometry=Vh;p.InstancedInterleavedBuffer=tk;p.InstancedMesh=oh;p.Int16Attribute=function(a,b){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new gj(a,b)};p.Int16BufferAttribute=gj;p.Int32Attribute=function(a,
b){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new hj(a,b)};p.Int32BufferAttribute=hj;p.Int8Attribute=function(a,b){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new dj(a,b)};p.Int8BufferAttribute=dj;p.IntType=1013;p.InterleavedBuffer=vd;p.InterleavedBufferAttribute=wd;p.Interpolant=Mc;p.InterpolateDiscrete=2300;p.InterpolateLinear=2301;p.InterpolateSmooth=2302;p.InvertStencilOp=
5386;p.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")};p.KeepStencilOp=7680;p.KeyframeTrack=jc;p.LOD=uj;p.LatheBufferGeometry=af;p.LatheGeometry=af;p.Layers=xf;p.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")};p.LessDepth=2;p.LessEqualDepth=3;p.LessEqualStencilFunc=515;p.LessStencilFunc=513;p.Light=kc;p.LightProbe=kf;p.Line=Ic;p.Line3=xk;p.LineBasicMaterial=Cb;p.LineCurve=Ye;p.LineCurve3=Lj;p.LineDashedMaterial=
Jh;p.LineLoop=qh;p.LinePieces=1;p.LineSegments=Qb;p.LineStrip=0;p.LinearEncoding=3E3;p.LinearFilter=1006;p.LinearInterpolant=Kh;p.LinearMipMapLinearFilter=1008;p.LinearMipMapNearestFilter=1007;p.LinearMipmapLinearFilter=1008;p.LinearMipmapNearestFilter=1007;p.LinearToneMapping=1;p.Loader=Lb;p.LoaderUtils=qg;p.LoadingManager=Lh;p.LoopOnce=2200;p.LoopPingPong=2202;p.LoopRepeat=2201;p.LuminanceAlphaFormat=1025;p.LuminanceFormat=1024;p.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};p.Material=
zb;p.MaterialLoader=ck;p.Math=Ri;p.MathUtils=Ri;p.Matrix3=xb;p.Matrix4=Da;p.MaxEquation=104;p.Mesh=ub;p.MeshBasicMaterial=Hc;p.MeshDepthMaterial=yf;p.MeshDistanceMaterial=zf;p.MeshFaceMaterial=function(a){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return a};p.MeshLambertMaterial=Hh;p.MeshMatcapMaterial=Ih;p.MeshNormalMaterial=Gh;p.MeshPhongMaterial=Eh;p.MeshPhysicalMaterial=Dh;p.MeshStandardMaterial=pg;p.MeshToonMaterial=Fh;p.MinEquation=103;p.MirroredRepeatWrapping=
1002;p.MixOperation=1;p.MultiMaterial=function(a){a=void 0===a?[]:a;console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");a.isMultiMaterial=!0;a.materials=a;a.clone=function(){return a.slice()};return a};p.MultiplyBlending=4;p.MultiplyOperation=0;p.NearestFilter=1003;p.NearestMipMapLinearFilter=1005;p.NearestMipMapNearestFilter=1004;p.NearestMipmapLinearFilter=1005;p.NearestMipmapNearestFilter=1004;p.NeverDepth=0;p.NeverStencilFunc=512;p.NoBlending=0;p.NoColors=0;p.NoToneMapping=
0;p.NormalAnimationBlendMode=2500;p.NormalBlending=1;p.NotEqualDepth=7;p.NotEqualStencilFunc=517;p.NumberKeyframeTrack=Ee;p.Object3D=Va;p.ObjectLoader=Yl;p.ObjectSpaceNormalMap=1;p.OctahedronBufferGeometry=le;p.OctahedronGeometry=le;p.OneFactor=201;p.OneMinusDstAlphaFactor=207;p.OneMinusDstColorFactor=209;p.OneMinusSrcAlphaFactor=205;p.OneMinusSrcColorFactor=203;p.OrthographicCamera=Me;p.PCFShadowMap=1;p.PCFSoftShadowMap=2;p.PMREMGenerator=ai;p.ParametricGeometry=function(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js");
return new Ma};p.Particle=function(a){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new bg(a)};p.ParticleBasicMaterial=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new zd(a)};p.ParticleSystem=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new Te(a,b)};p.ParticleSystemMaterial=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");
return new zd(a)};p.Path=Ze;p.PerspectiveCamera=Bb;p.Plane=oc;p.PlaneBufferGeometry=Id;p.PlaneGeometry=Id;p.PlaneHelper=ym;p.PointCloud=function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new Te(a,b)};p.PointCloudMaterial=function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new zd(a)};p.PointLight=Qh;p.PointLightHelper=rm;p.Points=Te;p.PointsMaterial=zd;p.PolarGridHelper=um;p.PolyhedronBufferGeometry=Jc;p.PolyhedronGeometry=
Jc;p.PositionalAudio=dm;p.PropertyBinding=bb;p.PropertyMixer=qk;p.QuadraticBezierCurve=mg;p.QuadraticBezierCurve3=ng;p.Quaternion=Gb;p.QuaternionKeyframeTrack=Td;p.QuaternionLinearInterpolant=Qj;p.REVISION="136";p.RGBADepthPacking=3201;p.RGBAFormat=1023;p.RGBAIntegerFormat=1033;p.RGBA_ASTC_10x10_Format=37819;p.RGBA_ASTC_10x5_Format=37816;p.RGBA_ASTC_10x6_Format=37817;p.RGBA_ASTC_10x8_Format=37818;p.RGBA_ASTC_12x10_Format=37820;p.RGBA_ASTC_12x12_Format=37821;p.RGBA_ASTC_4x4_Format=37808;p.RGBA_ASTC_5x4_Format=
37809;p.RGBA_ASTC_5x5_Format=37810;p.RGBA_ASTC_6x5_Format=37811;p.RGBA_ASTC_6x6_Format=37812;p.RGBA_ASTC_8x5_Format=37813;p.RGBA_ASTC_8x6_Format=37814;p.RGBA_ASTC_8x8_Format=37815;p.RGBA_BPTC_Format=36492;p.RGBA_ETC2_EAC_Format=37496;p.RGBA_PVRTC_2BPPV1_Format=35843;p.RGBA_PVRTC_4BPPV1_Format=35842;p.RGBA_S3TC_DXT1_Format=33777;p.RGBA_S3TC_DXT3_Format=33778;p.RGBA_S3TC_DXT5_Format=33779;p.RGBFormat=1022;p.RGBIntegerFormat=1032;p.RGB_ETC1_Format=36196;p.RGB_ETC2_Format=37492;p.RGB_PVRTC_2BPPV1_Format=
35841;p.RGB_PVRTC_4BPPV1_Format=35840;p.RGB_S3TC_DXT1_Format=33776;p.RGFormat=1030;p.RGIntegerFormat=1031;p.RawShaderMaterial=Md;p.Ray=dd;p.Raycaster=nm;p.RectAreaLight=Th;p.RedFormat=1028;p.RedIntegerFormat=1029;p.ReinhardToneMapping=2;p.RepeatWrapping=1E3;p.ReplaceStencilOp=7681;p.ReverseSubtractEquation=102;p.RingBufferGeometry=bf;p.RingGeometry=bf;p.SRGB8_ALPHA8_ASTC_10x10_Format=37851;p.SRGB8_ALPHA8_ASTC_10x5_Format=37848;p.SRGB8_ALPHA8_ASTC_10x6_Format=37849;p.SRGB8_ALPHA8_ASTC_10x8_Format=
37850;p.SRGB8_ALPHA8_ASTC_12x10_Format=37852;p.SRGB8_ALPHA8_ASTC_12x12_Format=37853;p.SRGB8_ALPHA8_ASTC_4x4_Format=37840;p.SRGB8_ALPHA8_ASTC_5x4_Format=37841;p.SRGB8_ALPHA8_ASTC_5x5_Format=37842;p.SRGB8_ALPHA8_ASTC_6x5_Format=37843;p.SRGB8_ALPHA8_ASTC_6x6_Format=37844;p.SRGB8_ALPHA8_ASTC_8x5_Format=37845;p.SRGB8_ALPHA8_ASTC_8x6_Format=37846;p.SRGB8_ALPHA8_ASTC_8x8_Format=37847;p.Scene=Yf;p.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},
detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};p.ShaderChunk=Sa;p.ShaderLib=dc;p.ShaderMaterial=vc;p.ShadowMaterial=Ch;p.Shape=qc;p.ShapeBufferGeometry=me;p.ShapeGeometry=me;p.ShapePath=Am;p.ShapeUtils=Kc;p.ShortType=1011;p.Skeleton=nh;p.SkeletonHelper=zk;p.SkinnedMesh=dg;p.SmoothShading=2;p.Sphere=bd;p.SphereBufferGeometry=ne;p.SphereGeometry=
ne;p.Spherical=om;p.SphericalHarmonics3=Uh;p.SplineCurve=og;p.SpotLight=Oh;p.SpotLightHelper=qm;p.Sprite=bg;p.SpriteMaterial=Zf;p.SrcAlphaFactor=204;p.SrcAlphaSaturateFactor=210;p.SrcColorFactor=202;p.StaticCopyUsage=35046;p.StaticDrawUsage=35044;p.StaticReadUsage=35045;p.StereoCamera=$l;p.StreamCopyUsage=35042;p.StreamDrawUsage=35040;p.StreamReadUsage=35041;p.StringKeyframeTrack=qd;p.SubtractEquation=101;p.SubtractiveBlending=3;p.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};p.TangentSpaceNormalMap=
0;p.TetrahedronBufferGeometry=cf;p.TetrahedronGeometry=cf;p.TextGeometry=function(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js");return new Ma};p.Texture=yb;p.TextureLoader=Uj;p.TorusBufferGeometry=df;p.TorusGeometry=df;p.TorusKnotBufferGeometry=ef;p.TorusKnotGeometry=ef;p.Triangle=tb;p.TriangleFanDrawMode=2;p.TriangleStripDrawMode=1;p.TrianglesDrawMode=0;p.TubeBufferGeometry=ff;p.TubeGeometry=ff;p.UVMapping=300;p.Uint16Attribute=function(a,b){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");
return new vf(a,b)};p.Uint16BufferAttribute=vf;p.Uint32Attribute=function(a,b){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new uf(a,b)};p.Uint32BufferAttribute=uf;p.Uint8Attribute=function(a,b){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new ej(a,b)};p.Uint8BufferAttribute=ej;p.Uint8ClampedAttribute=function(a,b){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");
return new fj(a,b)};p.Uint8ClampedBufferAttribute=fj;p.Uniform=Yh;p.UniformsLib=sa;p.UniformsUtils=vi;p.UnsignedByteType=1009;p.UnsignedInt248Type=1020;p.UnsignedIntType=1014;p.UnsignedShort4444Type=1017;p.UnsignedShort5551Type=1018;p.UnsignedShort565Type=1019;p.UnsignedShortType=1012;p.VSMShadowMap=3;p.Vector2=la;p.Vector3=C;p.Vector4=cb;p.VectorKeyframeTrack=Fe;p.Vertex=function(a,b,c){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new C(a,b,c)};p.VertexColors=
2;p.VideoTexture=Ij;p.WebGL1Renderer=qj;p.WebGLCubeRenderTarget=sf;p.WebGLMultipleRenderTargets=Si;p.WebGLMultisampleRenderTarget=Cf;p.WebGLRenderTarget=Rb;p.WebGLRenderTargetCube=function(a,b,c){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");return new sf(a,c)};p.WebGLRenderer=db;p.WebGLUtils=Ai;p.WireframeGeometry=Bh;p.WireframeHelper=function(a,b){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");
return new Qb(new Bh(a.geometry),new Cb({color:void 0!==b?b:16777215}))};p.WrapAroundEnding=2402;p.XHRLoader=function(a){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new rc(a)};p.ZeroCurvatureEnding=2400;p.ZeroFactor=200;p.ZeroSlopeEnding=2401;p.ZeroStencilOp=0;p.sRGBEncoding=3001;Object.defineProperty(p,"__esModule",{value:!0})})};
shadow$provide[1]=function(Z,oa,Ja,La){Object.defineProperty(La,"__esModule",{value:!0});La.MapControls=La.OrbitControls=void 0;var p=oa(0);const Ta={type:"change"},Ua={type:"start"},Mb={type:"end"};class lc extends p.EventDispatcher{constructor(mc,Yb){function nc(){return Math.pow(.95,O.zoomSpeed)}function bc(G){O.object.isPerspectiveCamera?Vc/=G:O.object.isOrthographicCamera?(O.object.zoom=Math.max(O.minZoom,Math.min(O.maxZoom,O.object.zoom*G)),O.object.updateProjectionMatrix(),xc=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),
O.enableZoom=!1)}function sc(G){O.object.isPerspectiveCamera?Vc*=G:O.object.isOrthographicCamera?(O.object.zoom=Math.max(O.minZoom,Math.min(O.maxZoom,O.object.zoom/G)),O.object.updateProjectionMatrix(),xc=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),O.enableZoom=!1)}function tc(){1===x.length?Sb.set(x[0].pageX,x[0].pageY):Sb.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function ia(){1===x.length?Eb.set(x[0].pageX,x[0].pageY):
Eb.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function Oc(){const G=x[0].pageX-x[1].pageX,fa=x[0].pageY-x[1].pageY;u.set(0,Math.sqrt(G*G+fa*fa))}function Pa(G){if(1==x.length)Zb.set(G.pageX,G.pageY);else{const fa=Uc(G);Zb.set(.5*(G.pageX+fa.x),.5*(G.pageY+fa.y))}Tb.subVectors(Zb,Sb).multiplyScalar(O.rotateSpeed);G=O.domElement;mb.theta-=2*Math.PI*Tb.x/G.clientHeight;mb.phi-=2*Math.PI*Tb.y/G.clientHeight;Sb.copy(Zb)}function uc(G){if(1===x.length)ec.set(G.pageX,G.pageY);else{const fa=
Uc(G);ec.set(.5*(G.pageX+fa.x),.5*(G.pageY+fa.y))}Hb.subVectors(ec,Eb).multiplyScalar(O.panSpeed);Q(Hb.x,Hb.y);Eb.copy(ec)}function cc(G){const fa=Uc(G),ra=G.pageX-fa.x;G=G.pageY-fa.y;w.set(0,Math.sqrt(ra*ra+G*G));D.set(0,Math.pow(w.y/u.y,O.zoomSpeed));bc(D.y);u.copy(w)}function qb(G){!1!==O.enabled&&(0===x.length&&(O.domElement.setPointerCapture(G.pointerId),O.domElement.addEventListener("pointermove",Sc),O.domElement.addEventListener("pointerup",jd)),x.push(G),"touch"===G.pointerType?qe(G):pe(G))}
function Sc(G){if(!1!==O.enabled)if("touch"===G.pointerType)switch(wc(G),eb){case Ya.TOUCH_ROTATE:if(!1===O.enableRotate)break;Pa(G);O.update();break;case Ya.TOUCH_PAN:if(!1===O.enablePan)break;uc(G);O.update();break;case Ya.TOUCH_DOLLY_PAN:if(!1===O.enableZoom&&!1===O.enablePan)break;O.enableZoom&&cc(G);O.enablePan&&uc(G);O.update();break;case Ya.TOUCH_DOLLY_ROTATE:if(!1===O.enableZoom&&!1===O.enableRotate)break;O.enableZoom&&cc(G);O.enableRotate&&Pa(G);O.update();break;default:eb=Ya.NONE}else if(!1!==
O.enabled)switch(eb){case Ya.ROTATE:if(!1===O.enableRotate)break;Zb.set(G.clientX,G.clientY);Tb.subVectors(Zb,Sb).multiplyScalar(O.rotateSpeed);G=O.domElement;mb.theta-=2*Math.PI*Tb.x/G.clientHeight;mb.phi-=2*Math.PI*Tb.y/G.clientHeight;Sb.copy(Zb);O.update();break;case Ya.DOLLY:if(!1===O.enableZoom)break;w.set(G.clientX,G.clientY);D.subVectors(w,u);0<D.y?bc(nc()):0>D.y&&sc(nc());u.copy(w);O.update();break;case Ya.PAN:!1!==O.enablePan&&(ec.set(G.clientX,G.clientY),Hb.subVectors(ec,Eb).multiplyScalar(O.panSpeed),
Q(Hb.x,Hb.y),Eb.copy(ec),O.update())}}function jd(G){kd(G);0===x.length&&(O.domElement.releasePointerCapture(G.pointerId),O.domElement.removeEventListener("pointermove",Sc),O.domElement.removeEventListener("pointerup",jd));O.dispatchEvent(Mb);eb=Ya.NONE}function Hd(G){kd(G)}function pe(G){let fa;switch(G.button){case 0:fa=O.mouseButtons.LEFT;break;case 1:fa=O.mouseButtons.MIDDLE;break;case 2:fa=O.mouseButtons.RIGHT;break;default:fa=-1}switch(fa){case p.MOUSE.DOLLY:if(!1===O.enableZoom)return;u.set(G.clientX,
G.clientY);eb=Ya.DOLLY;break;case p.MOUSE.ROTATE:if(G.ctrlKey||G.metaKey||G.shiftKey){if(!1===O.enablePan)return;Eb.set(G.clientX,G.clientY);eb=Ya.PAN}else{if(!1===O.enableRotate)return;Sb.set(G.clientX,G.clientY);eb=Ya.ROTATE}break;case p.MOUSE.PAN:if(G.ctrlKey||G.metaKey||G.shiftKey){if(!1===O.enableRotate)return;Sb.set(G.clientX,G.clientY);eb=Ya.ROTATE}else{if(!1===O.enablePan)return;Eb.set(G.clientX,G.clientY);eb=Ya.PAN}break;default:eb=Ya.NONE}eb!==Ya.NONE&&O.dispatchEvent(Ua)}function Jd(G){!1!==
O.enabled&&!1!==O.enableZoom&&eb===Ya.NONE&&(G.preventDefault(),O.dispatchEvent(Ua),0>G.deltaY?sc(nc()):0<G.deltaY&&bc(nc()),O.update(),O.dispatchEvent(Mb))}function Kd(G){if(!1!==O.enabled&&!1!==O.enablePan){var fa=!1;switch(G.code){case O.keys.UP:Q(0,O.keyPanSpeed);fa=!0;break;case O.keys.BOTTOM:Q(0,-O.keyPanSpeed);fa=!0;break;case O.keys.LEFT:Q(O.keyPanSpeed,0);fa=!0;break;case O.keys.RIGHT:Q(-O.keyPanSpeed,0),fa=!0}fa&&(G.preventDefault(),O.update())}}function qe(G){wc(G);switch(x.length){case 1:switch(O.touches.ONE){case p.TOUCH.ROTATE:if(!1===
O.enableRotate)return;tc();eb=Ya.TOUCH_ROTATE;break;case p.TOUCH.PAN:if(!1===O.enablePan)return;ia();eb=Ya.TOUCH_PAN;break;default:eb=Ya.NONE}break;case 2:switch(O.touches.TWO){case p.TOUCH.DOLLY_PAN:if(!1===O.enableZoom&&!1===O.enablePan)return;O.enableZoom&&Oc();O.enablePan&&ia();eb=Ya.TOUCH_DOLLY_PAN;break;case p.TOUCH.DOLLY_ROTATE:if(!1===O.enableZoom&&!1===O.enableRotate)return;O.enableZoom&&Oc();O.enableRotate&&tc();eb=Ya.TOUCH_DOLLY_ROTATE;break;default:eb=Ya.NONE}break;default:eb=Ya.NONE}eb!==
Ya.NONE&&O.dispatchEvent(Ua)}function Ld(G){!1!==O.enabled&&G.preventDefault()}function kd(G){delete I[G.pointerId];for(let fa=0;fa<x.length;fa++)if(x[fa].pointerId==G.pointerId){x.splice(fa,1);break}}function wc(G){let fa=I[G.pointerId];void 0===fa&&(fa=new p.Vector2,I[G.pointerId]=fa);fa.set(G.pageX,G.pageY)}function Uc(G){return I[(G.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}super();void 0===Yb&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.');Yb===
document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');this.object=mc;this.domElement=Yb;this.domElement.style.touchAction="none";this.enabled=!0;this.target=new p.Vector3;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.05;
this.enableZoom=!0;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!0;this.panSpeed=1;this.screenSpacePanning=!0;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"};this.mouseButtons={LEFT:p.MOUSE.ROTATE,MIDDLE:p.MOUSE.DOLLY,RIGHT:p.MOUSE.PAN};this.touches={ONE:p.TOUCH.ROTATE,TWO:p.TOUCH.DOLLY_PAN};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=
this.object.zoom;this._domElementKeyEvents=null;this.getPolarAngle=function(){return Za.phi};this.getAzimuthalAngle=function(){return Za.theta};this.getDistance=function(){return this.object.position.distanceTo(this.target)};this.listenToKeyEvents=function(G){G.addEventListener("keydown",Kd);this._domElementKeyEvents=G};this.saveState=function(){O.target0.copy(O.target);O.position0.copy(O.object.position);O.zoom0=O.object.zoom};this.reset=function(){O.target.copy(O.target0);O.object.position.copy(O.position0);
O.object.zoom=O.zoom0;O.object.updateProjectionMatrix();O.dispatchEvent(Ta);O.update();eb=Ya.NONE};this.update=function(){const G=new p.Vector3,fa=(new p.Quaternion).setFromUnitVectors(mc.up,new p.Vector3(0,1,0)),ra=fa.clone().invert(),Oa=new p.Vector3,Ha=new p.Quaternion,Ra=2*Math.PI;return function(){const Na=O.object.position;G.copy(Na).sub(O.target);G.applyQuaternion(fa);Za.setFromVector3(G);O.autoRotate&&eb===Ya.NONE&&(mb.theta-=2*Math.PI/60/60*O.autoRotateSpeed);O.enableDamping?(Za.theta+=mb.theta*
O.dampingFactor,Za.phi+=mb.phi*O.dampingFactor):(Za.theta+=mb.theta,Za.phi+=mb.phi);let Wa=O.minAzimuthAngle,fb=O.maxAzimuthAngle;isFinite(Wa)&&isFinite(fb)&&(Wa<-Math.PI?Wa+=Ra:Wa>Math.PI&&(Wa-=Ra),fb<-Math.PI?fb+=Ra:fb>Math.PI&&(fb-=Ra),Za.theta=Wa<=fb?Math.max(Wa,Math.min(fb,Za.theta)):Za.theta>(Wa+fb)/2?Math.max(Wa,Za.theta):Math.min(fb,Za.theta));Za.phi=Math.max(O.minPolarAngle,Math.min(O.maxPolarAngle,Za.phi));Za.makeSafe();Za.radius*=Vc;Za.radius=Math.max(O.minDistance,Math.min(O.maxDistance,
Za.radius));!0===O.enableDamping?O.target.addScaledVector(Nb,O.dampingFactor):O.target.add(Nb);G.setFromSpherical(Za);G.applyQuaternion(ra);Na.copy(O.target).add(G);O.object.lookAt(O.target);!0===O.enableDamping?(mb.theta*=1-O.dampingFactor,mb.phi*=1-O.dampingFactor,Nb.multiplyScalar(1-O.dampingFactor)):(mb.set(0,0,0),Nb.set(0,0,0));Vc=1;return xc||1E-6<Oa.distanceToSquared(O.object.position)||1E-6<8*(1-Ha.dot(O.object.quaternion))?(O.dispatchEvent(Ta),Oa.copy(O.object.position),Ha.copy(O.object.quaternion),
xc=!1,!0):!1}}();this.dispose=function(){O.domElement.removeEventListener("contextmenu",Ld);O.domElement.removeEventListener("pointerdown",qb);O.domElement.removeEventListener("pointercancel",Hd);O.domElement.removeEventListener("wheel",Jd);O.domElement.removeEventListener("pointermove",Sc);O.domElement.removeEventListener("pointerup",jd);null!==O._domElementKeyEvents&&O._domElementKeyEvents.removeEventListener("keydown",Kd)};const O=this,Ya={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,
TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let eb=Ya.NONE;const Za=new p.Spherical,mb=new p.Spherical;let Vc=1;const Nb=new p.Vector3;let xc=!1;const Sb=new p.Vector2,Zb=new p.Vector2,Tb=new p.Vector2,Eb=new p.Vector2,ec=new p.Vector2,Hb=new p.Vector2,u=new p.Vector2,w=new p.Vector2,D=new p.Vector2,x=[],I={},R=function(){const G=new p.Vector3;return function(fa,ra){G.setFromMatrixColumn(ra,0);G.multiplyScalar(-fa);Nb.add(G)}}(),L=function(){const G=new p.Vector3;return function(fa,ra){!0===O.screenSpacePanning?
G.setFromMatrixColumn(ra,1):(G.setFromMatrixColumn(ra,0),G.crossVectors(O.object.up,G));G.multiplyScalar(fa);Nb.add(G)}}(),Q=function(){const G=new p.Vector3;return function(fa,ra){const Oa=O.domElement;if(O.object.isPerspectiveCamera){G.copy(O.object.position).sub(O.target);let Ha=G.length();Ha*=Math.tan(O.object.fov/2*Math.PI/180);R(2*fa*Ha/Oa.clientHeight,O.object.matrix);L(2*ra*Ha/Oa.clientHeight,O.object.matrix)}else O.object.isOrthographicCamera?(R(fa*(O.object.right-O.object.left)/O.object.zoom/
Oa.clientWidth,O.object.matrix),L(ra*(O.object.top-O.object.bottom)/O.object.zoom/Oa.clientHeight,O.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),O.enablePan=!1)}}();O.domElement.addEventListener("contextmenu",Ld);O.domElement.addEventListener("pointerdown",qb);O.domElement.addEventListener("pointercancel",Hd);O.domElement.addEventListener("wheel",Jd,{passive:!1});this.update()}}La.OrbitControls=lc;class gd extends lc{constructor(mc,
Yb){super(mc,Yb);this.screenSpacePanning=!1;this.mouseButtons.LEFT=p.MOUSE.PAN;this.mouseButtons.RIGHT=p.MOUSE.ROTATE;this.touches.ONE=p.TOUCH.PAN;this.touches.TWO=p.TOUCH.DOLLY_ROTATE}}La.MapControls=gd};
shadow$provide[2]=function(Z,oa,Ja,La){function p(){let u={};return{get:function(w){return u[w]},add:function(w,D){u[w]=D},remove:function(w){delete u[w]},removeAll:function(){u={}}}}function Ta(u){void 0===u.DefaultMaterial&&(u.DefaultMaterial=new ia.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ia.FrontSide}));return u.DefaultMaterial}function Ua(u,w,D){for(const x in D.extensions)void 0===u[x]&&(w.userData.gltfExtensions=w.userData.gltfExtensions||
{},w.userData.gltfExtensions[x]=D.extensions[x])}function Mb(u,w){void 0!==w.extras&&("object"===typeof w.extras?Object.assign(u.userData,w.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+w.extras))}function lc(u,w,D){let x=!1,I=!1;for(let G=0,fa=w.length;G<fa;G++){var R=w[G];void 0!==R.POSITION&&(x=!0);void 0!==R.NORMAL&&(I=!0);if(x&&I)break}if(!x&&!I)return Promise.resolve(u);R=[];const L=[];for(let G=0,fa=w.length;G<fa;G++){var Q=w[G];if(x){const ra=void 0!==Q.POSITION?
D.getDependency("accessor",Q.POSITION):u.attributes.position;R.push(ra)}I&&(Q=void 0!==Q.NORMAL?D.getDependency("accessor",Q.NORMAL):u.attributes.normal,L.push(Q))}return Promise.all([Promise.all(R),Promise.all(L)]).then(function(G){const fa=G[0];G=G[1];x&&(u.morphAttributes.position=fa);I&&(u.morphAttributes.normal=G);u.morphTargetsRelative=!0;return u})}function gd(u){const w=u.extensions&&u.extensions[Pa.KHR_DRACO_MESH_COMPRESSION];return w?"draco:"+w.bufferView+":"+w.indices+":"+mc(w.attributes):
u.indices+":"+mc(u.attributes)+":"+u.mode}function mc(u){let w="";const D=Object.keys(u).sort();for(let x=0,I=D.length;x<I;x++)w+=D[x]+":"+u[D[x]]+";";return w}function Yb(u){switch(u){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.");}}function nc(u,w,D,x){const I=D.nodes[u];return x.getDependency("node",u).then(function(R){if(void 0===I.skin)return R;
let L;return x.getDependency("skin",I.skin).then(function(Q){L=Q;Q=[];for(let G=0,fa=L.joints.length;G<fa;G++)Q.push(x.getDependency("node",L.joints[G]));return Promise.all(Q)}).then(function(Q){R.traverse(function(G){if(G.isMesh){var fa=[],ra=[];for(let Ha=0,Ra=Q.length;Ha<Ra;Ha++){var Oa=Q[Ha];Oa?(fa.push(Oa),Oa=new ia.Matrix4,void 0!==L.inverseBindMatrices&&Oa.fromArray(L.inverseBindMatrices.array,16*Ha),ra.push(Oa)):console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',L.joints[Ha])}G.bind(new ia.Skeleton(fa,
ra),G.matrixWorld)}});return R})}).then(function(R){w.add(R);const L=[];if(I.children){const Q=I.children;for(let G=0,fa=Q.length;G<fa;G++)L.push(nc(Q[G],R,D,x))}return Promise.all(L)})}function bc(u,w,D){var x=w.attributes;const I=new ia.Box3;if(void 0!==x.POSITION){x=D.json.accessors[x.POSITION];var R=x.min,L=x.max;if(void 0!==R&&void 0!==L){I.set(new ia.Vector3(R[0],R[1],R[2]),new ia.Vector3(L[0],L[1],L[2]));x.normalized&&(x=Yb(Nb[x.componentType]),I.min.multiplyScalar(x),I.max.multiplyScalar(x));
w=w.targets;if(void 0!==w){x=new ia.Vector3;R=new ia.Vector3;for(let Q=0,G=w.length;Q<G;Q++)if(L=w[Q],void 0!==L.POSITION){L=D.json.accessors[L.POSITION];const fa=L.min,ra=L.max;void 0!==fa&&void 0!==ra?(R.setX(Math.max(Math.abs(fa[0]),Math.abs(ra[0]))),R.setY(Math.max(Math.abs(fa[1]),Math.abs(ra[1]))),R.setZ(Math.max(Math.abs(fa[2]),Math.abs(ra[2]))),L.normalized&&(L=Yb(Nb[L.componentType]),R.multiplyScalar(L)),x.max(R)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}I.expandByVector(x)}u.boundingBox=
I;D=new ia.Sphere;I.getCenter(D.center);D.radius=I.min.distanceTo(I.max)/2;u.boundingSphere=D}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function sc(u,w,D){function x(L,Q){return D.getDependency("accessor",L).then(function(G){u.setAttribute(Q,G)})}var I=w.attributes;const R=[];for(const L in I){const Q=Tb[L]||L.toLowerCase();Q in u.attributes||R.push(x(I[L],Q))}void 0===w.indices||u.index||(I=D.getDependency("accessor",w.indices).then(function(L){u.setIndex(L)}),
R.push(I));Mb(u,w);bc(u,w,D);return Promise.all(R).then(function(){return void 0!==w.targets?lc(u,w.targets,D):u})}function tc(u,w){var D=u.getIndex();if(null===D){var x=[];D=u.getAttribute("position");if(void 0!==D){for(var I=0;I<D.count;I++)x.push(I);u.setIndex(x);D=u.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),u}I=D.count-2;x=[];if(w===ia.TriangleFanDrawMode)for(w=1;w<=I;w++)x.push(D.getX(0)),x.push(D.getX(w)),
x.push(D.getX(w+1));else for(w=0;w<I;w++)0===w%2?(x.push(D.getX(w)),x.push(D.getX(w+1)),x.push(D.getX(w+2))):(x.push(D.getX(w+2)),x.push(D.getX(w+1)),x.push(D.getX(w)));x.length/3!==I&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");u=u.clone();u.setIndex(x);return u}Object.defineProperty(La,"__esModule",{value:!0});La.GLTFLoader=void 0;var ia=oa(0);class Oc extends ia.Loader{constructor(u){super(u);this.meshoptDecoder=this.ktx2Loader=this.dracoLoader=
null;this.pluginCallbacks=[];this.register(function(w){return new qb(w)});this.register(function(w){return new Kd(w)});this.register(function(w){return new qe(w)});this.register(function(w){return new Sc(w)});this.register(function(w){return new jd(w)});this.register(function(w){return new Hd(w)});this.register(function(w){return new pe(w)});this.register(function(w){return new Jd(w)});this.register(function(w){return new uc(w)});this.register(function(w){return new Ld(w)})}load(u,w,D,x){const I=
this;let R;R=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:ia.LoaderUtils.extractUrlBase(u);this.manager.itemStart(u);const L=function(G){x?x(G):console.error(G);I.manager.itemError(u);I.manager.itemEnd(u)},Q=new ia.FileLoader(this.manager);Q.setPath(this.path);Q.setResponseType("arraybuffer");Q.setRequestHeader(this.requestHeader);Q.setWithCredentials(this.withCredentials);Q.load(u,function(G){try{I.parse(G,R,function(fa){w(fa);I.manager.itemEnd(u)},L)}catch(fa){L(fa)}},D,L)}setDRACOLoader(u){this.dracoLoader=
u;return this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".');}setKTX2Loader(u){this.ktx2Loader=u;return this}setMeshoptDecoder(u){this.meshoptDecoder=u;return this}register(u){-1===this.pluginCallbacks.indexOf(u)&&this.pluginCallbacks.push(u);return this}unregister(u){-1!==this.pluginCallbacks.indexOf(u)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(u),1);return this}parse(u,w,D,x){const I={},R={};if("string"!==
typeof u)if("glTF"===ia.LoaderUtils.decodeText(new Uint8Array(u,0,4))){try{I[Pa.KHR_BINARY_GLTF]=new kd(u)}catch(G){x&&x(G);return}u=I[Pa.KHR_BINARY_GLTF].content}else u=ia.LoaderUtils.decodeText(new Uint8Array(u));u=JSON.parse(u);if(void 0===u.asset||2>u.asset.version[0])x&&x(Error("THREE.GLTFLoader: Unsupported asset. glTF versions \x3e\x3d2.0 are supported."));else{w=new Hb(u,{path:w||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,
meshoptDecoder:this.meshoptDecoder});w.fileLoader.setRequestHeader(this.requestHeader);for(var L=0;L<this.pluginCallbacks.length;L++){var Q=this.pluginCallbacks[L](w);R[Q.name]=Q;I[Q.name]=!0}if(u.extensionsUsed)for(L=0;L<u.extensionsUsed.length;++L){Q=u.extensionsUsed[L];const G=u.extensionsRequired||[];switch(Q){case Pa.KHR_MATERIALS_UNLIT:I[Q]=new cc;break;case Pa.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:I[Q]=new Ya;break;case Pa.KHR_DRACO_MESH_COMPRESSION:I[Q]=new wc(u,this.dracoLoader);break;case Pa.KHR_TEXTURE_TRANSFORM:I[Q]=
new Uc;break;case Pa.KHR_MESH_QUANTIZATION:I[Q]=new eb;break;default:0<=G.indexOf(Q)&&void 0===R[Q]&&console.warn('THREE.GLTFLoader: Unknown extension "'+Q+'".')}}w.setExtensions(I);w.setPlugins(R);w.parse(D,x)}}parseAsync(u,w){const D=this;return new Promise(function(x,I){D.parse(u,w,x,I)})}}La.GLTFLoader=Oc;const Pa={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",
KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",
EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class uc{constructor(u){this.parser=u;this.name=Pa.KHR_LIGHTS_PUNCTUAL;this.cache={refs:{},uses:{}}}_markDefs(){const u=this.parser,w=this.parser.json.nodes||[];for(let D=0,x=w.length;D<x;D++){const I=w[D];I.extensions&&I.extensions[this.name]&&void 0!==I.extensions[this.name].light&&u._addNodeRef(this.cache,I.extensions[this.name].light)}}_loadLight(u){const w=this.parser,D="light:"+u;var x=w.cache.get(D);if(x)return x;x=w.json;x=((x.extensions&&
x.extensions[this.name]||{}).lights||[])[u];var I=new ia.Color(16777215);void 0!==x.color&&I.fromArray(x.color);const R=void 0!==x.range?x.range:0;switch(x.type){case "directional":I=new ia.DirectionalLight(I);I.target.position.set(0,0,-1);I.add(I.target);break;case "point":I=new ia.PointLight(I);I.distance=R;break;case "spot":I=new ia.SpotLight(I);I.distance=R;x.spot=x.spot||{};x.spot.innerConeAngle=void 0!==x.spot.innerConeAngle?x.spot.innerConeAngle:0;x.spot.outerConeAngle=void 0!==x.spot.outerConeAngle?
x.spot.outerConeAngle:Math.PI/4;I.angle=x.spot.outerConeAngle;I.penumbra=1-x.spot.innerConeAngle/x.spot.outerConeAngle;I.target.position.set(0,0,-1);I.add(I.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+x.type);}I.position.set(0,0,0);I.decay=2;void 0!==x.intensity&&(I.intensity=x.intensity);I.name=w.createUniqueName(x.name||"light_"+u);x=Promise.resolve(I);w.cache.add(D,x);return x}createNodeAttachment(u){const w=this,D=this.parser;u=D.json.nodes[u];const x=(u.extensions&&
u.extensions[this.name]||{}).light;return void 0===x?null:this._loadLight(x).then(function(I){return D._getNodeRef(w.cache,x,I)})}}class cc{constructor(){this.name=Pa.KHR_MATERIALS_UNLIT}getMaterialType(){return ia.MeshBasicMaterial}extendParams(u,w,D){const x=[];u.color=new ia.Color(1,1,1);u.opacity=1;if(w=w.pbrMetallicRoughness){if(Array.isArray(w.baseColorFactor)){const I=w.baseColorFactor;u.color.fromArray(I);u.opacity=I[3]}void 0!==w.baseColorTexture&&x.push(D.assignTexture(u,"map",w.baseColorTexture))}return Promise.all(x)}}
class qb{constructor(u){this.parser=u;this.name=Pa.KHR_MATERIALS_CLEARCOAT}getMaterialType(u){u=this.parser.json.materials[u];return u.extensions&&u.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(u,w){var D=this.parser,x=D.json.materials[u];if(!x.extensions||!x.extensions[this.name])return Promise.resolve();u=[];x=x.extensions[this.name];void 0!==x.clearcoatFactor&&(w.clearcoat=x.clearcoatFactor);void 0!==x.clearcoatTexture&&u.push(D.assignTexture(w,"clearcoatMap",x.clearcoatTexture));
void 0!==x.clearcoatRoughnessFactor&&(w.clearcoatRoughness=x.clearcoatRoughnessFactor);void 0!==x.clearcoatRoughnessTexture&&u.push(D.assignTexture(w,"clearcoatRoughnessMap",x.clearcoatRoughnessTexture));void 0!==x.clearcoatNormalTexture&&(u.push(D.assignTexture(w,"clearcoatNormalMap",x.clearcoatNormalTexture)),void 0!==x.clearcoatNormalTexture.scale&&(D=x.clearcoatNormalTexture.scale,w.clearcoatNormalScale=new ia.Vector2(D,D)));return Promise.all(u)}}class Sc{constructor(u){this.parser=u;this.name=
Pa.KHR_MATERIALS_SHEEN}getMaterialType(u){u=this.parser.json.materials[u];return u.extensions&&u.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(u,w){const D=this.parser;var x=D.json.materials[u];if(!x.extensions||!x.extensions[this.name])return Promise.resolve();u=[];w.sheenColor=new ia.Color(0,0,0);w.sheenRoughness=0;w.sheen=1;x=x.extensions[this.name];void 0!==x.sheenColorFactor&&w.sheenColor.fromArray(x.sheenColorFactor);void 0!==x.sheenRoughnessFactor&&(w.sheenRoughness=
x.sheenRoughnessFactor);void 0!==x.sheenColorTexture&&u.push(D.assignTexture(w,"sheenColorMap",x.sheenColorTexture));void 0!==x.sheenRoughnessTexture&&u.push(D.assignTexture(w,"sheenRoughnessMap",x.sheenRoughnessTexture));return Promise.all(u)}}class jd{constructor(u){this.parser=u;this.name=Pa.KHR_MATERIALS_TRANSMISSION}getMaterialType(u){u=this.parser.json.materials[u];return u.extensions&&u.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(u,w){const D=this.parser;var x=D.json.materials[u];
if(!x.extensions||!x.extensions[this.name])return Promise.resolve();u=[];x=x.extensions[this.name];void 0!==x.transmissionFactor&&(w.transmission=x.transmissionFactor);void 0!==x.transmissionTexture&&u.push(D.assignTexture(w,"transmissionMap",x.transmissionTexture));return Promise.all(u)}}class Hd{constructor(u){this.parser=u;this.name=Pa.KHR_MATERIALS_VOLUME}getMaterialType(u){u=this.parser.json.materials[u];return u.extensions&&u.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(u,
w){var D=this.parser,x=D.json.materials[u];if(!x.extensions||!x.extensions[this.name])return Promise.resolve();u=[];x=x.extensions[this.name];w.thickness=void 0!==x.thicknessFactor?x.thicknessFactor:0;void 0!==x.thicknessTexture&&u.push(D.assignTexture(w,"thicknessMap",x.thicknessTexture));w.attenuationDistance=x.attenuationDistance||0;D=x.attenuationColor||[1,1,1];w.attenuationColor=new ia.Color(D[0],D[1],D[2]);return Promise.all(u)}}class pe{constructor(u){this.parser=u;this.name=Pa.KHR_MATERIALS_IOR}getMaterialType(u){u=
this.parser.json.materials[u];return u.extensions&&u.extensions[this.name]?ia.MeshPhysicalMaterial:null}extendMaterialParams(u,w){u=this.parser.json.materials[u];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();u=u.extensions[this.name];w.ior=void 0!==u.ior?u.ior:1.5;return Promise.resolve()}}class Jd{constructor(u){this.parser=u;this.name=Pa.KHR_MATERIALS_SPECULAR}getMaterialType(u){u=this.parser.json.materials[u];return u.extensions&&u.extensions[this.name]?ia.MeshPhysicalMaterial:
null}extendMaterialParams(u,w){const D=this.parser;var x=D.json.materials[u];if(!x.extensions||!x.extensions[this.name])return Promise.resolve();u=[];x=x.extensions[this.name];w.specularIntensity=void 0!==x.specularFactor?x.specularFactor:1;void 0!==x.specularTexture&&u.push(D.assignTexture(w,"specularIntensityMap",x.specularTexture));const I=x.specularColorFactor||[1,1,1];w.specularColor=new ia.Color(I[0],I[1],I[2]);void 0!==x.specularColorTexture&&u.push(D.assignTexture(w,"specularColorMap",x.specularColorTexture).then(function(R){R.encoding=
ia.sRGBEncoding}));return Promise.all(u)}}class Kd{constructor(u){this.parser=u;this.name=Pa.KHR_TEXTURE_BASISU}loadTexture(u){const w=this.parser,D=w.json;var x=D.textures[u];if(!x.extensions||!x.extensions[this.name])return null;x=D.images[x.extensions[this.name].source];const I=w.options.ktx2Loader;if(!I){if(D.extensionsRequired&&0<=D.extensionsRequired.indexOf(this.name))throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return w.loadTextureImage(u,
x,I)}}class qe{constructor(u){this.parser=u;this.name=Pa.EXT_TEXTURE_WEBP;this.isSupported=null}loadTexture(u){const w=this.name,D=this.parser,x=D.json;var I=x.textures[u];if(!I.extensions||!I.extensions[w])return null;const R=x.images[I.extensions[w].source];let L=D.textureLoader;R.uri&&(I=D.options.manager.getHandler(R.uri),null!==I&&(L=I));return this.detectSupport().then(function(Q){if(Q)return D.loadTextureImage(u,R,L);if(x.extensionsRequired&&0<=x.extensionsRequired.indexOf(w))throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");
return D.loadTexture(u)})}detectSupport(){this.isSupported||(this.isSupported=new Promise(function(u){const w=new Image;w.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA";w.onload=w.onerror=function(){u(1===w.height)}}));return this.isSupported}}class Ld{constructor(u){this.name=Pa.EXT_MESHOPT_COMPRESSION;this.parser=u}loadBufferView(u){const w=this.parser.json;u=w.bufferViews[u];if(u.extensions&&u.extensions[this.name]){const D=u.extensions[this.name];u=this.parser.getDependency("buffer",
D.buffer);const x=this.parser.options.meshoptDecoder;if(!x||!x.supported){if(w.extensionsRequired&&0<=w.extensionsRequired.indexOf(this.name))throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([u,x.ready]).then(function(I){const R=D.byteOffset||0,L=D.byteLength||0,Q=D.count,G=D.byteStride,fa=new ArrayBuffer(Q*G);I=new Uint8Array(I[0],R,L);x.decodeGltfBuffer(new Uint8Array(fa),Q,G,I,D.mode,D.filter);return fa})}return null}}
class kd{constructor(u){this.name=Pa.KHR_BINARY_GLTF;this.body=this.content=null;var w=new DataView(u,0,12);this.header={magic:ia.LoaderUtils.decodeText(new Uint8Array(u.slice(0,4))),version:w.getUint32(4,!0),length:w.getUint32(8,!0)};if("glTF"!==this.header.magic)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(2>this.header.version)throw Error("THREE.GLTFLoader: Legacy binary file detected.");w=this.header.length-12;const D=new DataView(u,12);let x=0;for(;x<w;){const R=D.getUint32(x,
!0);x+=4;var I=D.getUint32(x,!0);x+=4;1313821514===I?(I=new Uint8Array(u,12+x,R),this.content=ia.LoaderUtils.decodeText(I)):5130562===I&&(I=12+x,this.body=u.slice(I,I+R));x+=R}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.");}}class wc{constructor(u,w){if(!w)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Pa.KHR_DRACO_MESH_COMPRESSION;this.json=u;this.dracoLoader=w;this.dracoLoader.preload()}decodePrimitive(u,w){const D=this.json,x=this.dracoLoader,
I=u.extensions[this.name].bufferView,R=u.extensions[this.name].attributes,L={},Q={},G={};for(var fa in R){var ra=Tb[fa]||fa.toLowerCase();L[ra]=R[fa]}for(const Oa in u.attributes)fa=Tb[Oa]||Oa.toLowerCase(),void 0!==R[Oa]&&(ra=D.accessors[u.attributes[Oa]],G[fa]=Nb[ra.componentType],Q[fa]=!0===ra.normalized);return w.getDependency("bufferView",I).then(function(Oa){return new Promise(function(Ha){x.decodeDracoFile(Oa,function(Ra){for(const Na in Ra.attributes){const Wa=Ra.attributes[Na],fb=Q[Na];void 0!==
fb&&(Wa.normalized=fb)}Ha(Ra)},L,G)})})}}class Uc{constructor(){this.name=Pa.KHR_TEXTURE_TRANSFORM}extendTexture(u,w){void 0!==w.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.');if(void 0===w.offset&&void 0===w.rotation&&void 0===w.scale)return u;u=u.clone();void 0!==w.offset&&u.offset.fromArray(w.offset);void 0!==w.rotation&&(u.rotation=w.rotation);void 0!==w.scale&&u.repeat.fromArray(w.scale);u.needsUpdate=!0;return u}}class O extends ia.MeshStandardMaterial{constructor(u){super();
this.isGLTFSpecularGlossinessMaterial=!0;const w={specular:{value:(new ia.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=w;this.onBeforeCompile=function(D){for(const x in w)D.uniforms[x]=w[x];D.fragmentShader=D.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include \x3croughnessmap_pars_fragment\x3e","#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif").replace("#include \x3cmetalnessmap_pars_fragment\x3e",
"#ifdef USE_GLOSSINESSMAP\n\tuniform sampler2D glossinessMap;\n#endif").replace("#include \x3croughnessmap_fragment\x3e","vec3 specularFactor \x3d specular;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular \x3d texture2D( specularMap, vUv );\n\ttexelSpecular \x3d sRGBToLinear( texelSpecular );\n\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tspecularFactor *\x3d texelSpecular.rgb;\n#endif").replace("#include \x3cmetalnessmap_fragment\x3e","float glossinessFactor \x3d glossiness;\n#ifdef USE_GLOSSINESSMAP\n\tvec4 texelGlossiness \x3d texture2D( glossinessMap, vUv );\n\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tglossinessFactor *\x3d texelGlossiness.a;\n#endif").replace("#include \x3clights_physical_fragment\x3e",
"PhysicalMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );\nvec3 dxy \x3d max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness \x3d max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness \x3d max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.roughness +\x3d geometryRoughness;\nmaterial.roughness \x3d min( material.roughness, 1.0 );\nmaterial.specularColor \x3d specularFactor;")};
Object.defineProperties(this,{specular:{get:function(){return w.specular.value},set:function(D){w.specular.value=D}},specularMap:{get:function(){return w.specularMap.value},set:function(D){(w.specularMap.value=D)?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return w.glossiness.value},set:function(D){w.glossiness.value=D}},glossinessMap:{get:function(){return w.glossinessMap.value},set:function(D){(w.glossinessMap.value=D)?(this.defines.USE_GLOSSINESSMAP=
"",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}});delete this.metalness;delete this.roughness;delete this.metalnessMap;delete this.roughnessMap;this.setValues(u)}copy(u){super.copy(u);this.specularMap=u.specularMap;this.specular.copy(u.specular);this.glossinessMap=u.glossinessMap;this.glossiness=u.glossiness;delete this.metalness;delete this.roughness;delete this.metalnessMap;delete this.roughnessMap;return this}}class Ya{constructor(){this.name=Pa.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;
this.specularGlossinessParams="color map lightMap lightMapIntensity aoMap aoMapIntensity emissive emissiveIntensity emissiveMap bumpMap bumpScale normalMap normalMapType displacementMap displacementScale displacementBias specularMap specular glossinessMap glossiness alphaMap envMap envMapIntensity refractionRatio".split(" ")}getMaterialType(){return O}extendParams(u,w,D){var x=w.extensions[this.name];u.color=new ia.Color(1,1,1);u.opacity=1;w=[];if(Array.isArray(x.diffuseFactor)){const I=x.diffuseFactor;
u.color.fromArray(I);u.opacity=I[3]}void 0!==x.diffuseTexture&&w.push(D.assignTexture(u,"map",x.diffuseTexture));u.emissive=new ia.Color(0,0,0);u.glossiness=void 0!==x.glossinessFactor?x.glossinessFactor:1;u.specular=new ia.Color(1,1,1);Array.isArray(x.specularFactor)&&u.specular.fromArray(x.specularFactor);void 0!==x.specularGlossinessTexture&&(x=x.specularGlossinessTexture,w.push(D.assignTexture(u,"glossinessMap",x)),w.push(D.assignTexture(u,"specularMap",x)));return Promise.all(w)}createMaterial(u){const w=
new O(u);w.fog=!0;w.color=u.color;w.map=void 0===u.map?null:u.map;w.lightMap=null;w.lightMapIntensity=1;w.aoMap=void 0===u.aoMap?null:u.aoMap;w.aoMapIntensity=1;w.emissive=u.emissive;w.emissiveIntensity=1;w.emissiveMap=void 0===u.emissiveMap?null:u.emissiveMap;w.bumpMap=void 0===u.bumpMap?null:u.bumpMap;w.bumpScale=1;w.normalMap=void 0===u.normalMap?null:u.normalMap;w.normalMapType=ia.TangentSpaceNormalMap;u.normalScale&&(w.normalScale=u.normalScale);w.displacementMap=null;w.displacementScale=1;w.displacementBias=
0;w.specularMap=void 0===u.specularMap?null:u.specularMap;w.specular=u.specular;w.glossinessMap=void 0===u.glossinessMap?null:u.glossinessMap;w.glossiness=u.glossiness;w.alphaMap=null;w.envMap=void 0===u.envMap?null:u.envMap;w.envMapIntensity=1;w.refractionRatio=.98;return w}}class eb{constructor(){this.name=Pa.KHR_MESH_QUANTIZATION}}class Za extends ia.Interpolant{constructor(u,w,D,x){super(u,w,D,x)}copySampleValue_(u){const w=this.resultBuffer,D=this.sampleValues,x=this.valueSize;u=u*x*3+x;for(let I=
0;I!==x;I++)w[I]=D[u+I];return w}}Za.prototype.beforeStart_=Za.prototype.copySampleValue_;Za.prototype.afterEnd_=Za.prototype.copySampleValue_;Za.prototype.interpolate_=function(u,w,D,x){const I=this.resultBuffer,R=this.sampleValues,L=this.valueSize,Q=2*L;var G=3*L;x-=w;w=(D-w)/x;D=w*w;var fa=D*w;u*=G;G=u-G;const ra=-2*fa+3*D;fa-=D;const Oa=1-ra;w=fa-D+w;for(D=0;D!==L;D++)I[D]=Oa*R[G+D+L]+w*R[G+D+Q]*x+ra*R[u+D+L]+fa*R[u+D]*x;return I};const mb=new ia.Quaternion;class Vc extends Za{interpolate_(u,
w,D,x){u=super.interpolate_(u,w,D,x);mb.fromArray(u).normalize().toArray(u);return u}}const Nb={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},xc={9728:ia.NearestFilter,9729:ia.LinearFilter,9984:ia.NearestMipmapNearestFilter,9985:ia.LinearMipmapNearestFilter,9986:ia.NearestMipmapLinearFilter,9987:ia.LinearMipmapLinearFilter},Sb={33071:ia.ClampToEdgeWrapping,33648:ia.MirroredRepeatWrapping,10497:ia.RepeatWrapping},Zb={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,
MAT2:4,MAT3:9,MAT4:16},Tb={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Eb={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ec={CUBICSPLINE:void 0,LINEAR:ia.InterpolateLinear,STEP:ia.InterpolateDiscrete};class Hb{constructor(u={},w={}){this.json=u;this.extensions={};this.plugins={};this.options=w;this.cache=new p;this.associations=new Map;this.primitiveCache=
{};this.meshCache={refs:{},uses:{}};this.cameraCache={refs:{},uses:{}};this.lightCache={refs:{},uses:{}};this.textureCache={};this.nodeNamesUsed={};"undefined"!==typeof createImageBitmap&&!1===/Firefox|Safari/.test(navigator.userAgent)?this.textureLoader=new ia.ImageBitmapLoader(this.options.manager):this.textureLoader=new ia.TextureLoader(this.options.manager);this.textureLoader.setCrossOrigin(this.options.crossOrigin);this.textureLoader.setRequestHeader(this.options.requestHeader);this.fileLoader=
new ia.FileLoader(this.options.manager);this.fileLoader.setResponseType("arraybuffer");"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(u){this.extensions=u}setPlugins(u){this.plugins=u}parse(u,w){const D=this,x=this.json,I=this.extensions;this.cache.removeAll();this._invokeAll(function(R){return R._markDefs&&R._markDefs()});Promise.all(this._invokeAll(function(R){return R.beforeRoot&&R.beforeRoot()})).then(function(){return Promise.all([D.getDependencies("scene"),
D.getDependencies("animation"),D.getDependencies("camera")])}).then(function(R){const L={scene:R[0][x.scene||0],scenes:R[0],animations:R[1],cameras:R[2],asset:x.asset,parser:D,userData:{}};Ua(I,L,x);Mb(L,x);Promise.all(D._invokeAll(function(Q){return Q.afterRoot&&Q.afterRoot(L)})).then(function(){u(L)})}).catch(w)}_markDefs(){const u=this.json.nodes||[];var w=this.json.skins||[];const D=this.json.meshes||[];for(let x=0,I=w.length;x<I;x++){const R=w[x].joints;for(let L=0,Q=R.length;L<Q;L++)u[R[L]].isBone=
!0}for(let x=0,I=u.length;x<I;x++)w=u[x],void 0!==w.mesh&&(this._addNodeRef(this.meshCache,w.mesh),void 0!==w.skin&&(D[w.mesh].isSkinnedMesh=!0)),void 0!==w.camera&&this._addNodeRef(this.cameraCache,w.camera)}_addNodeRef(u,w){void 0!==w&&(void 0===u.refs[w]&&(u.refs[w]=u.uses[w]=0),u.refs[w]++)}_getNodeRef(u,w,D){if(1>=u.refs[w])return D;const x=D.clone(),I=(R,L)=>{const Q=this.associations.get(R);null!=Q&&this.associations.set(L,Q);for(const [G,fa]of R.children.entries())I(fa,L.children[G])};I(D,
x);x.name+="_instance_"+u.uses[w]++;return x}_invokeOne(u){const w=Object.values(this.plugins);w.push(this);for(let D=0;D<w.length;D++){const x=u(w[D]);if(x)return x}return null}_invokeAll(u){const w=Object.values(this.plugins);w.unshift(this);const D=[];for(let x=0;x<w.length;x++){const I=u(w[x]);I&&D.push(I)}return D}getDependency(u,w){const D=u+":"+w;let x=this.cache.get(D);if(!x){switch(u){case "scene":x=this.loadScene(w);break;case "node":x=this.loadNode(w);break;case "mesh":x=this._invokeOne(function(I){return I.loadMesh&&
I.loadMesh(w)});break;case "accessor":x=this.loadAccessor(w);break;case "bufferView":x=this._invokeOne(function(I){return I.loadBufferView&&I.loadBufferView(w)});break;case "buffer":x=this.loadBuffer(w);break;case "material":x=this._invokeOne(function(I){return I.loadMaterial&&I.loadMaterial(w)});break;case "texture":x=this._invokeOne(function(I){return I.loadTexture&&I.loadTexture(w)});break;case "skin":x=this.loadSkin(w);break;case "animation":x=this.loadAnimation(w);break;case "camera":x=this.loadCamera(w);
break;default:throw Error("Unknown type: "+u);}this.cache.add(D,x)}return x}getDependencies(u){let w=this.cache.get(u);if(!w){const D=this;w=Promise.all((this.json[u+("mesh"===u?"es":"s")]||[]).map(function(x,I){return D.getDependency(u,I)}));this.cache.add(u,w)}return w}loadBuffer(u){const w=this.json.buffers[u],D=this.fileLoader;if(w.type&&"arraybuffer"!==w.type)throw Error("THREE.GLTFLoader: "+w.type+" buffer type is not supported.");if(void 0===w.uri&&0===u)return Promise.resolve(this.extensions[Pa.KHR_BINARY_GLTF].body);
const x=this.options;return new Promise(function(I,R){D.load(ia.LoaderUtils.resolveURL(w.uri,x.path),I,void 0,function(){R(Error('THREE.GLTFLoader: Failed to load buffer "'+w.uri+'".'))})})}loadBufferView(u){const w=this.json.bufferViews[u];return this.getDependency("buffer",w.buffer).then(function(D){const x=w.byteOffset||0;return D.slice(x,x+(w.byteLength||0))})}loadAccessor(u){const w=this,D=this.json,x=this.json.accessors[u];if(void 0===x.bufferView&&void 0===x.sparse)return Promise.resolve(null);
u=[];void 0!==x.bufferView?u.push(this.getDependency("bufferView",x.bufferView)):u.push(null);void 0!==x.sparse&&(u.push(this.getDependency("bufferView",x.sparse.indices.bufferView)),u.push(this.getDependency("bufferView",x.sparse.values.bufferView)));return Promise.all(u).then(function(I){var R=I[0];const L=Zb[x.type],Q=Nb[x.componentType];var G=Q.BYTES_PER_ELEMENT,fa=x.byteOffset||0,ra=void 0!==x.bufferView?D.bufferViews[x.bufferView].byteStride:void 0;const Oa=!0===x.normalized;if(ra&&ra!==G*L){var Ha=
Math.floor(fa/ra);const Ra="InterleavedBuffer:"+x.bufferView+":"+x.componentType+":"+Ha+":"+x.count;let Na=w.cache.get(Ra);Na||(Ha=new Q(R,Ha*ra,x.count*ra/G),Na=new ia.InterleavedBuffer(Ha,ra/G),w.cache.add(Ra,Na));G=new ia.InterleavedBufferAttribute(Na,L,fa%ra/G,Oa)}else Ha=null===R?new Q(x.count*L):new Q(R,fa,x.count*L),G=new ia.BufferAttribute(Ha,L,Oa);if(void 0!==x.sparse){ra=x.sparse.values.byteOffset||0;fa=new Nb[x.sparse.indices.componentType](I[1],x.sparse.indices.byteOffset||0,x.sparse.count*
Zb.SCALAR);I=new Q(I[2],ra,x.sparse.count*L);null!==R&&(G=new ia.BufferAttribute(G.array.slice(),G.itemSize,G.normalized));for(let Ra=0,Na=fa.length;Ra<Na;Ra++)if(R=fa[Ra],G.setX(R,I[Ra*L]),2<=L&&G.setY(R,I[Ra*L+1]),3<=L&&G.setZ(R,I[Ra*L+2]),4<=L&&G.setW(R,I[Ra*L+3]),5<=L)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.");}return G})}loadTexture(u){var w=this.json,D=this.options;w=w.images[w.textures[u].source];let x=this.textureLoader;w.uri&&(D=D.manager.getHandler(w.uri),
null!==D&&(x=D));return this.loadTextureImage(u,w,x)}loadTextureImage(u,w,D){const x=this,I=this.json,R=this.options,L=I.textures[u],Q=(w.uri||w.bufferView)+":"+L.sampler;if(this.textureCache[Q])return this.textureCache[Q];const G=self.URL||self.webkitURL;let fa=w.uri||"",ra=!1;if(void 0!==w.bufferView)fa=x.getDependency("bufferView",w.bufferView).then(function(Ha){ra=!0;Ha=new Blob([Ha],{type:w.mimeType});return fa=G.createObjectURL(Ha)});else if(void 0===w.uri)throw Error("THREE.GLTFLoader: Image "+
u+" is missing URI and bufferView");const Oa=Promise.resolve(fa).then(function(Ha){return new Promise(function(Ra,Na){let Wa=Ra;!0===D.isImageBitmapLoader&&(Wa=function(fb){fb=new ia.Texture(fb);fb.needsUpdate=!0;Ra(fb)});D.load(ia.LoaderUtils.resolveURL(Ha,R.path),Wa,void 0,Na)})}).then(function(Ha){!0===ra&&G.revokeObjectURL(fa);Ha.flipY=!1;L.name&&(Ha.name=L.name);const Ra=(I.samplers||{})[L.sampler]||{};Ha.magFilter=xc[Ra.magFilter]||ia.LinearFilter;Ha.minFilter=xc[Ra.minFilter]||ia.LinearMipmapLinearFilter;
Ha.wrapS=Sb[Ra.wrapS]||ia.RepeatWrapping;Ha.wrapT=Sb[Ra.wrapT]||ia.RepeatWrapping;x.associations.set(Ha,{textures:u});return Ha}).catch(function(){console.error("THREE.GLTFLoader: Couldn't load texture",fa);return null});return this.textureCache[Q]=Oa}assignTexture(u,w,D){const x=this;return this.getDependency("texture",D.index).then(function(I){void 0===D.texCoord||0==D.texCoord||"aoMap"===w&&1==D.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+D.texCoord+" for texture "+w+" not yet supported.");
if(x.extensions[Pa.KHR_TEXTURE_TRANSFORM]){const R=void 0!==D.extensions?D.extensions[Pa.KHR_TEXTURE_TRANSFORM]:void 0;if(R){const L=x.associations.get(I);I=x.extensions[Pa.KHR_TEXTURE_TRANSFORM].extendTexture(I,R);x.associations.set(I,L)}}return u[w]=I})}assignFinalMaterial(u){const w=u.geometry;let D=u.material;const x=void 0===w.attributes.tangent,I=void 0!==w.attributes.color,R=void 0===w.attributes.normal;if(u.isPoints){var L="PointsMaterial:"+D.uuid,Q=this.cache.get(L);Q||(Q=new ia.PointsMaterial,
ia.Material.prototype.copy.call(Q,D),Q.color.copy(D.color),Q.map=D.map,Q.sizeAttenuation=!1,this.cache.add(L,Q));D=Q}else u.isLine&&(L="LineBasicMaterial:"+D.uuid,Q=this.cache.get(L),Q||(Q=new ia.LineBasicMaterial,ia.Material.prototype.copy.call(Q,D),Q.color.copy(D.color),this.cache.add(L,Q)),D=Q);if(x||I||R)L="ClonedMaterial:"+D.uuid+":",D.isGLTFSpecularGlossinessMaterial&&(L+="specular-glossiness:"),x&&(L+="derivative-tangents:"),I&&(L+="vertex-colors:"),R&&(L+="flat-shading:"),Q=this.cache.get(L),
Q||(Q=D.clone(),I&&(Q.vertexColors=!0),R&&(Q.flatShading=!0),x&&(Q.normalScale&&(Q.normalScale.y*=-1),Q.clearcoatNormalScale&&(Q.clearcoatNormalScale.y*=-1)),this.cache.add(L,Q),this.associations.set(Q,this.associations.get(D))),D=Q;D.aoMap&&void 0===w.attributes.uv2&&void 0!==w.attributes.uv&&w.setAttribute("uv2",w.attributes.uv);u.material=D}getMaterialType(){return ia.MeshStandardMaterial}loadMaterial(u){const w=this,D=this.extensions,x=this.json.materials[u];let I;const R={};var L=x.extensions||
{};const Q=[];if(L[Pa.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS])L=D[Pa.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS],I=L.getMaterialType(),Q.push(L.extendParams(R,x,w));else if(L[Pa.KHR_MATERIALS_UNLIT])L=D[Pa.KHR_MATERIALS_UNLIT],I=L.getMaterialType(),Q.push(L.extendParams(R,x,w));else{L=x.pbrMetallicRoughness||{};R.color=new ia.Color(1,1,1);R.opacity=1;if(Array.isArray(L.baseColorFactor)){const G=L.baseColorFactor;R.color.fromArray(G);R.opacity=G[3]}void 0!==L.baseColorTexture&&Q.push(w.assignTexture(R,"map",
L.baseColorTexture));R.metalness=void 0!==L.metallicFactor?L.metallicFactor:1;R.roughness=void 0!==L.roughnessFactor?L.roughnessFactor:1;void 0!==L.metallicRoughnessTexture&&(Q.push(w.assignTexture(R,"metalnessMap",L.metallicRoughnessTexture)),Q.push(w.assignTexture(R,"roughnessMap",L.metallicRoughnessTexture)));I=this._invokeOne(function(G){return G.getMaterialType&&G.getMaterialType(u)});Q.push(Promise.all(this._invokeAll(function(G){return G.extendMaterialParams&&G.extendMaterialParams(u,R)})))}!0===
x.doubleSided&&(R.side=ia.DoubleSide);L=x.alphaMode||"OPAQUE";"BLEND"===L?(R.transparent=!0,R.depthWrite=!1):(R.format=ia.RGBFormat,R.transparent=!1,"MASK"===L&&(R.alphaTest=void 0!==x.alphaCutoff?x.alphaCutoff:.5));void 0!==x.normalTexture&&I!==ia.MeshBasicMaterial&&(Q.push(w.assignTexture(R,"normalMap",x.normalTexture)),R.normalScale=new ia.Vector2(1,1),void 0!==x.normalTexture.scale&&(L=x.normalTexture.scale,R.normalScale.set(L,L)));void 0!==x.occlusionTexture&&I!==ia.MeshBasicMaterial&&(Q.push(w.assignTexture(R,
"aoMap",x.occlusionTexture)),void 0!==x.occlusionTexture.strength&&(R.aoMapIntensity=x.occlusionTexture.strength));void 0!==x.emissiveFactor&&I!==ia.MeshBasicMaterial&&(R.emissive=(new ia.Color).fromArray(x.emissiveFactor));void 0!==x.emissiveTexture&&I!==ia.MeshBasicMaterial&&Q.push(w.assignTexture(R,"emissiveMap",x.emissiveTexture));return Promise.all(Q).then(function(){let G;G=I===O?D[Pa.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(R):new I(R);x.name&&(G.name=x.name);G.map&&(G.map.encoding=
ia.sRGBEncoding);G.emissiveMap&&(G.emissiveMap.encoding=ia.sRGBEncoding);Mb(G,x);w.associations.set(G,{materials:u});x.extensions&&Ua(D,G,x);return G})}createUniqueName(u){let w=u=ia.PropertyBinding.sanitizeNodeName(u||"");for(let D=1;this.nodeNamesUsed[w];++D)w=u+"_"+D;this.nodeNamesUsed[w]=!0;return w}loadGeometries(u){function w(Q){return x[Pa.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Q,D).then(function(G){return sc(G,Q,D)})}const D=this,x=this.extensions,I=this.primitiveCache,R=[];for(let Q=
0,G=u.length;Q<G;Q++){const fa=u[Q],ra=gd(fa);var L=I[ra];L?R.push(L.promise):(L=fa.extensions&&fa.extensions[Pa.KHR_DRACO_MESH_COMPRESSION]?w(fa):sc(new ia.BufferGeometry,fa,D),I[ra]={primitive:fa,promise:L},R.push(L))}return Promise.all(R)}loadMesh(u){const w=this,D=this.extensions,x=this.json.meshes[u],I=x.primitives,R=[];for(let L=0,Q=I.length;L<Q;L++){const G=void 0===I[L].material?Ta(this.cache):this.getDependency("material",I[L].material);R.push(G)}R.push(w.loadGeometries(I));return Promise.all(R).then(function(L){var Q=
L.slice(0,L.length-1);const G=L[L.length-1];L=[];for(let Ha=0,Ra=G.length;Ha<Ra;Ha++){var fa=G[Ha];const Na=I[Ha];var ra=void 0;ra=Q[Ha];if(4===Na.mode||5===Na.mode||6===Na.mode||void 0===Na.mode)ra=!0===x.isSkinnedMesh?new ia.SkinnedMesh(fa,ra):new ia.Mesh(fa,ra),!0!==ra.isSkinnedMesh||ra.geometry.attributes.skinWeight.normalized||ra.normalizeSkinWeights(),5===Na.mode?ra.geometry=tc(ra.geometry,ia.TriangleStripDrawMode):6===Na.mode&&(ra.geometry=tc(ra.geometry,ia.TriangleFanDrawMode));else if(1===
Na.mode)ra=new ia.LineSegments(fa,ra);else if(3===Na.mode)ra=new ia.Line(fa,ra);else if(2===Na.mode)ra=new ia.LineLoop(fa,ra);else if(0===Na.mode)ra=new ia.Points(fa,ra);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+Na.mode);if(0<Object.keys(ra.geometry.morphAttributes).length){fa=ra;var Oa=x;fa.updateMorphTargets();if(void 0!==Oa.weights)for(let Wa=0,fb=Oa.weights.length;Wa<fb;Wa++)fa.morphTargetInfluences[Wa]=Oa.weights[Wa];if(Oa.extras&&Array.isArray(Oa.extras.targetNames))if(Oa=
Oa.extras.targetNames,fa.morphTargetInfluences.length===Oa.length){fa.morphTargetDictionary={};for(let Wa=0,fb=Oa.length;Wa<fb;Wa++)fa.morphTargetDictionary[Oa[Wa]]=Wa}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}ra.name=w.createUniqueName(x.name||"mesh_"+u);Mb(ra,x);Na.extensions&&Ua(D,ra,Na);w.assignFinalMaterial(ra);L.push(ra)}for(let Ha=0,Ra=L.length;Ha<Ra;Ha++)w.associations.set(L[Ha],{meshes:u,primitives:Ha});if(1===L.length)return L[0];Q=new ia.Group;
w.associations.set(Q,{meshes:u});for(let Ha=0,Ra=L.length;Ha<Ra;Ha++)Q.add(L[Ha]);return Q})}loadCamera(u){let w;u=this.json.cameras[u];const D=u[u.type];if(D)return"perspective"===u.type?w=new ia.PerspectiveCamera(ia.MathUtils.radToDeg(D.yfov),D.aspectRatio||1,D.znear||1,D.zfar||2E6):"orthographic"===u.type&&(w=new ia.OrthographicCamera(-D.xmag,D.xmag,D.ymag,-D.ymag,D.znear,D.zfar)),u.name&&(w.name=this.createUniqueName(u.name)),Mb(w,u),Promise.resolve(w);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(u){u=
this.json.skins[u];const w={joints:u.joints};return void 0===u.inverseBindMatrices?Promise.resolve(w):this.getDependency("accessor",u.inverseBindMatrices).then(function(D){w.inverseBindMatrices=D;return w})}loadAnimation(u){const w=this.json.animations[u],D=[],x=[],I=[],R=[],L=[];for(let G=0,fa=w.channels.length;G<fa;G++){var Q=w.channels[G];const ra=w.samplers[Q.sampler];Q=Q.target;const Oa=void 0!==w.parameters?w.parameters[ra.input]:ra.input,Ha=void 0!==w.parameters?w.parameters[ra.output]:ra.output;
D.push(this.getDependency("node",void 0!==Q.node?Q.node:Q.id));x.push(this.getDependency("accessor",Oa));I.push(this.getDependency("accessor",Ha));R.push(ra);L.push(Q)}return Promise.all([Promise.all(D),Promise.all(x),Promise.all(I),Promise.all(R),Promise.all(L)]).then(function(G){const fa=G[0],ra=G[1],Oa=G[2],Ha=G[3];G=G[4];const Ra=[];for(let yc=0,Bg=fa.length;yc<Bg;yc++){var Na=fa[yc];const Cg=ra[yc];var Wa=Oa[yc];const re=Ha[yc],se=G[yc];if(void 0===Na)continue;Na.updateMatrix();Na.matrixAutoUpdate=
!0;let Nd;switch(Eb[se.path]){case Eb.weights:Nd=ia.NumberKeyframeTrack;break;case Eb.rotation:Nd=ia.QuaternionKeyframeTrack;break;default:Nd=ia.VectorKeyframeTrack}var fb=Na.name?Na.name:Na.uuid;const Dg=void 0!==re.interpolation?ec[re.interpolation]:ia.InterpolateLinear,Od=[];Eb[se.path]===Eb.weights?Na.traverse(function(Ib){Ib.morphTargetInfluences&&Od.push(Ib.name?Ib.name:Ib.uuid)}):Od.push(fb);Na=Wa.array;if(Wa.normalized){Wa=Yb(Na.constructor);fb=new Float32Array(Na.length);for(let Ib=0,te=
Na.length;Ib<te;Ib++)fb[Ib]=Na[Ib]*Wa;Na=fb}for(let Ib=0,te=Od.length;Ib<te;Ib++)Wa=new Nd(Od[Ib]+"."+Eb[se.path],Cg.array,Na,Dg),"CUBICSPLINE"===re.interpolation&&(Wa.createInterpolant=function(Eg){return new (this instanceof ia.QuaternionKeyframeTrack?Vc:Za)(this.times,this.values,this.getValueSize()/3,Eg)},Wa.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Ra.push(Wa)}return new ia.AnimationClip(w.name?w.name:"animation_"+u,void 0,Ra)})}createNodeMesh(u){const w=this,D=this.json.nodes[u];
return void 0===D.mesh?null:w.getDependency("mesh",D.mesh).then(function(x){x=w._getNodeRef(w.meshCache,D.mesh,x);void 0!==D.weights&&x.traverse(function(I){if(I.isMesh)for(let R=0,L=D.weights.length;R<L;R++)I.morphTargetInfluences[R]=D.weights[R]});return x})}loadNode(u){const w=this.extensions,D=this,x=this.json.nodes[u],I=x.name?D.createUniqueName(x.name):"";return function(){const R=[],L=D._invokeOne(function(Q){return Q.createNodeMesh&&Q.createNodeMesh(u)});L&&R.push(L);void 0!==x.camera&&R.push(D.getDependency("camera",
x.camera).then(function(Q){return D._getNodeRef(D.cameraCache,x.camera,Q)}));D._invokeAll(function(Q){return Q.createNodeAttachment&&Q.createNodeAttachment(u)}).forEach(function(Q){R.push(Q)});return Promise.all(R)}().then(function(R){let L;L=!0===x.isBone?new ia.Bone:1<R.length?new ia.Group:1===R.length?R[0]:new ia.Object3D;if(L!==R[0])for(let Q=0,G=R.length;Q<G;Q++)L.add(R[Q]);x.name&&(L.userData.name=x.name,L.name=I);Mb(L,x);x.extensions&&Ua(w,L,x);void 0!==x.matrix?(R=new ia.Matrix4,R.fromArray(x.matrix),
L.applyMatrix4(R)):(void 0!==x.translation&&L.position.fromArray(x.translation),void 0!==x.rotation&&L.quaternion.fromArray(x.rotation),void 0!==x.scale&&L.scale.fromArray(x.scale));D.associations.has(L)||D.associations.set(L,{});D.associations.get(L).nodes=u;return L})}loadScene(u){const w=this.json;var D=this.extensions;u=this.json.scenes[u];const x=this,I=new ia.Group;u.name&&(I.name=x.createUniqueName(u.name));Mb(I,u);u.extensions&&Ua(D,I,u);D=u.nodes||[];u=[];for(let R=0,L=D.length;R<L;R++)u.push(nc(D[R],
I,w,x));return Promise.all(u).then(function(){x.associations=(R=>{const L=new Map;for(const [Q,G]of x.associations)(Q instanceof ia.Material||Q instanceof ia.Texture)&&L.set(Q,G);R.traverse(Q=>{const G=x.associations.get(Q);null!=G&&L.set(Q,G)});return L})(I);return I})}}};
/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var g,aa=this||self;function r(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"}var ba="closure_uid_"+(1E9*Math.random()>>>0),ca=0;function da(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b};function fa(a,b){null!=a&&this.append.apply(this,arguments)}g=fa.prototype;g.Da="";g.set=function(a){this.Da=""+a};g.append=function(a,b,c){this.Da+=String(a);if(null!=b)for(let d=1;d<arguments.length;d++)this.Da+=arguments[d];return this};g.clear=function(){this.Da=""};g.toString=function(){return this.Da};var ha={},ia={},ja,u={},ka=null;function la(){return new ma(null,5,[new v(null,"flush-on-newline","flush-on-newline",-151457939),!0,oa,!0,pa,!1,qa,!1,ra,null],null)}function w(a){return null!=a&&!1!==a}function sa(a){return a instanceof Array}function x(a,b){return a[r(null==b?null:b)]?!0:a._?!0:!1}function z(a,b){var c=null==b?null:b.constructor;return Error(["No protocol method ",a," defined for type ",w(w(c)?c.xb:c)?c.lb:r(b),": ",b].join(""))}function ta(a){var b=a.lb;return w(b)?b:B.j(a)}
var ua="undefined"!==typeof Symbol&&"function"===r(Symbol)?Symbol.iterator:"@@iterator";function D(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function va(){}function wa(a){if(null!=a&&null!=a.$)a=a.$(a);else{var b=wa[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=wa._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("ICounted.-count",a);}return a}function xa(){}
function ya(a){if(null!=a&&null!=a.aa)a=a.aa(a);else{var b=ya[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=ya._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IEmptyableCollection.-empty",a);}return a}function za(){}function Aa(a,b){if(null!=a&&null!=a.Z)a=a.Z(a,b);else{var c=Aa[r(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=Aa._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("ICollection.-conj",a);}return a}function Ba(){}
var Ca=function(){function a(d,e,f){var h=E[r(null==d?null:d)];if(null!=h)return h.v?h.v(d,e,f):h.call(null,d,e,f);h=E._;if(null!=h)return h.v?h.v(d,e,f):h.call(null,d,e,f);throw z("IIndexed.-nth",d);}function b(d,e){var f=E[r(null==d?null:d)];if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);f=E._;if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);throw z("IIndexed.-nth",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.m=b;c.v=a;return c}(),E=function E(a){switch(arguments.length){case 2:return E.m(arguments[0],arguments[1]);case 3:return E.v(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};E.m=function(a,b){return null!=a&&null!=a.Y?a.Y(a,b):Ca(a,b)};E.v=function(a,b,c){return null!=a&&null!=a.oa?a.oa(a,b,c):Ca(a,b,c)};E.W=3;
function F(a){if(null!=a&&null!=a.fa)a=a.fa(a);else{var b=F[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=F._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("ISeq.-first",a);}return a}function H(a){if(null!=a&&null!=a.ja)a=a.ja(a);else{var b=H[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=H._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("ISeq.-rest",a);}return a}function Da(){}function Ea(){}
var Ga=function(){function a(d,e,f){var h=Fa[r(null==d?null:d)];if(null!=h)return h.v?h.v(d,e,f):h.call(null,d,e,f);h=Fa._;if(null!=h)return h.v?h.v(d,e,f):h.call(null,d,e,f);throw z("ILookup.-lookup",d);}function b(d,e){var f=Fa[r(null==d?null:d)];if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);f=Fa._;if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);throw z("ILookup.-lookup",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.m=b;c.v=a;return c}(),Fa=function Fa(a){switch(arguments.length){case 2:return Fa.m(arguments[0],arguments[1]);case 3:return Fa.v(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Fa.m=function(a,b){return null!=a&&null!=a.na?a.na(a,b):Ga(a,b)};Fa.v=function(a,b,c){return null!=a&&null!=a.M?a.M(a,b,c):Ga(a,b,c)};Fa.W=3;function Ha(){}
function Ia(a,b){if(null!=a&&null!=a.Wa)a=a.Wa(a,b);else{var c=Ia[r(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=Ia._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IAssociative.-contains-key?",a);}return a}function Ja(a,b,c){if(null!=a&&null!=a.za)a=a.za(a,b,c);else{var d=Ja[r(null==a?null:a)];if(null!=d)a=d.v?d.v(a,b,c):d.call(null,a,b,c);else if(d=Ja._,null!=d)a=d.v?d.v(a,b,c):d.call(null,a,b,c);else throw z("IAssociative.-assoc",a);}return a}function Ka(){}
function La(a){if(null!=a&&null!=a.Ib)a=a.key;else{var b=La[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=La._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IMapEntry.-key",a);}return a}function Ma(a){if(null!=a&&null!=a.Jb)a=a.K;else{var b=Ma[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Ma._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IMapEntry.-val",a);}return a}function Na(){}
function Oa(a){if(null!=a&&null!=a.Cb)a=a.K;else{var b=Oa[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Oa._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IDeref.-deref",a);}return a}function Pa(){}function Qa(a){if(null!=a&&null!=a.T)a=a.T(a);else{var b=Qa[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Qa._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IMeta.-meta",a);}return a}
function Ra(a,b){if(null!=a&&null!=a.U)a=a.U(a,b);else{var c=Ra[r(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=Ra._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IWithMeta.-with-meta",a);}return a}function Sa(){}
var Ua=function(){function a(d,e,f){var h=Ta[r(null==d?null:d)];if(null!=h)return h.v?h.v(d,e,f):h.call(null,d,e,f);h=Ta._;if(null!=h)return h.v?h.v(d,e,f):h.call(null,d,e,f);throw z("IReduce.-reduce",d);}function b(d,e){var f=Ta[r(null==d?null:d)];if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);f=Ta._;if(null!=f)return f.m?f.m(d,e):f.call(null,d,e);throw z("IReduce.-reduce",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.m=b;c.v=a;return c}(),Ta=function Ta(a){switch(arguments.length){case 2:return Ta.m(arguments[0],arguments[1]);case 3:return Ta.v(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Ta.m=function(a,b){return null!=a&&null!=a.da?a.da(a,b):Ua(a,b)};Ta.v=function(a,b,c){return null!=a&&null!=a.ea?a.ea(a,b,c):Ua(a,b,c)};Ta.W=3;function Va(){}
function Wa(a,b){if(null!=a&&null!=a.jb)a=a.jb(a,b,!0);else{var c=Wa[r(null==a?null:a)];if(null!=c)a=c.v?c.v(a,b,!0):c.call(null,a,b,!0);else if(c=Wa._,null!=c)a=c.v?c.v(a,b,!0):c.call(null,a,b,!0);else throw z("IKVReduce.-kv-reduce",a);}return a}function Xa(a,b){if(null!=a&&null!=a.O)a=a.O(a,b);else{var c=Xa[r(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=Xa._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IEquiv.-equiv",a);}return a}
function Ya(a){if(null!=a&&null!=a.S)a=a.S(a);else{var b=Ya[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Ya._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IHash.-hash",a);}return a}function Za(){}function $a(a){if(null!=a&&null!=a.N)a=a.N(a);else{var b=$a[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=$a._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("ISeqable.-seq",a);}return a}function ab(){}function bb(){}function cb(){}
function I(a,b){if(null!=a&&null!=a.wb)a=a.wb(a,b);else{var c=I[r(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=I._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("IWriter.-write",a);}return a}function db(){}function eb(a,b,c){if(null!=a&&null!=a.P)a=a.P(a,b,c);else{var d=eb[r(null==a?null:a)];if(null!=d)a=d.v?d.v(a,b,c):d.call(null,a,b,c);else if(d=eb._,null!=d)a=d.v?d.v(a,b,c):d.call(null,a,b,c);else throw z("IPrintWithWriter.-pr-writer",a);}return a}
function fb(a){if(null!=a&&null!=a.Za)a=a.Za(a);else{var b=fb[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=fb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IEditableCollection.-as-transient",a);}return a}function gb(a,b){if(null!=a&&null!=a.bb)a=a.bb(a,b);else{var c=gb[r(null==a?null:a)];if(null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else if(c=gb._,null!=c)a=c.m?c.m(a,b):c.call(null,a,b);else throw z("ITransientCollection.-conj!",a);}return a}
function hb(a){if(null!=a&&null!=a.kb)a=a.kb(a);else{var b=hb[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=hb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("ITransientCollection.-persistent!",a);}return a}function ib(a,b,c){if(null!=a&&null!=a.Xa)a=a.Xa(a,b,c);else{var d=ib[r(null==a?null:a)];if(null!=d)a=d.v?d.v(a,b,c):d.call(null,a,b,c);else if(d=ib._,null!=d)a=d.v?d.v(a,b,c):d.call(null,a,b,c);else throw z("ITransientAssociative.-assoc!",a);}return a}
function jb(a){if(null!=a&&null!=a.sb)a=a.sb(a);else{var b=jb[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=jb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IChunk.-drop-first",a);}return a}function kb(a){if(null!=a&&null!=a.pb)a=a.pb(a);else{var b=kb[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=kb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IChunkedSeq.-chunked-first",a);}return a}
function lb(a){if(null!=a&&null!=a.ib)a=a.ib(a);else{var b=lb[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=lb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IChunkedSeq.-chunked-rest",a);}return a}function mb(){}function nb(a){if(null!=a&&null!=a.ua)a=a.ua(a);else{var b=nb[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=nb._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IIterable.-iterator",a);}return a}
function ob(a){this.Rb=a;this.u=1073741824;this.F=0}ob.prototype.wb=function(a,b){return this.Rb.append(b)};function pb(a){var b=new fa;a.P(null,new ob(b),la());return B.j(b)}var qb="undefined"!==typeof Math&&"undefined"!==typeof Math.imul?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function rb(a){a=qb(a|0,-862048943);return qb(a<<15|a>>>-15,461845907)}
function sb(a,b){a=(a|0)^(b|0);return qb(a<<13|a>>>-13,5)+-430675100|0}function tb(a,b){a=(a|0)^b;a=qb(a^a>>>16,-2048144789);a=qb(a^a>>>13,-1028477387);return a^a>>>16}function ub(a){a:{var b=1;for(var c=0;;)if(b<a.length)c=sb(c,rb(a.charCodeAt(b-1)|a.charCodeAt(b)<<16)),b+=2;else{b=c;break a}}return tb(1===(a.length&1)?b^rb(a.charCodeAt(a.length-1)):b,qb(2,a.length))}var vb={},wb=0;
function xb(a){255<wb&&(vb={},wb=0);if(null==a)return 0;var b=vb[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b)d=qb(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a}else b=0;else b=0;vb[a]=b;wb+=1;a=b}return a}
function yb(a){if(null!=a&&(a.u&4194304||u===a.Wb))return a.S(null)^0;if("number"===typeof a){if(isFinite(a))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=xb(a),a=0===a?a:tb(sb(0,rb(a)),4)):a=a instanceof Date?a.valueOf()^0:null==a?0:Ya(a)^0,a}function zb(a,b){return a^b+2654435769+(a<<6)+(a>>2)}
function Ab(a,b,c,d,e){this.hb=a;this.name=b;this.Ca=c;this.Va=d;this.ta=e;this.u=2154168321;this.F=4096}g=Ab.prototype;g.toString=function(){return this.Ca};g.O=function(a,b){return b instanceof Ab?this.Ca===b.Ca:!1};g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(D(b)))};
g.j=function(a){return J.m?J.m(a,this):J.call(null,a,this)};g.m=function(a,b){return J.v?J.v(a,this,b):J.call(null,a,this,b)};g.T=function(){return this.ta};g.U=function(a,b){return new Ab(this.hb,this.name,this.Ca,this.Va,b)};g.S=function(){var a=this.Va;return null!=a?a:this.Va=a=zb(ub(this.name),xb(this.hb))};g.P=function(a,b){return I(b,this.Ca)};
var Bb=function Bb(a){switch(arguments.length){case 1:return Bb.j(arguments[0]);case 2:return Bb.m(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Bb.j=function(a){for(;;){if(a instanceof Ab)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?Bb.m(null,a):Bb.m(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof v)a=a.xa;else throw Error("no conversion to symbol");}};
Bb.m=function(a,b){var c=null!=a?[B.j(a),"/",B.j(b)].join(""):b;return new Ab(a,b,c,null,null)};Bb.W=2;function Cb(a){return null!=a?a.F&131072||u===a.Xb?!0:a.F?!1:x(mb,a):x(mb,a)}
function K(a){if(null==a)return null;if(null!=a&&(a.u&8388608||u===a.Nb))return a.N(null);if(sa(a)||"string"===typeof a)return 0===a.length?null:new N(a,0,null);if(null!=a&&null!=a[ua])return a=(null!==a&&ua in a?a[ua]:void 0).call(a),Db.j?Db.j(a):Db.call(null,a);if(x(Za,a))return $a(a);throw Error([B.j(a)," is not ISeqable"].join(""));}function O(a){if(null==a)return null;if(null!=a&&(a.u&64||u===a.ab))return a.fa(null);a=K(a);return null==a?null:F(a)}
function Eb(a){return null!=a?null!=a&&(a.u&64||u===a.ab)?a.ja(null):(a=K(a))?a.ja(null):P:P}function Q(a){return null==a?null:null!=a&&(a.u&128||u===a.$a)?a.ba():K(Eb(a))}var R=function R(a){switch(arguments.length){case 1:return R.j(arguments[0]);case 2:return R.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return R.J(arguments[0],arguments[1],new N(c.slice(2),0,null))}};R.j=function(){return!0};
R.m=function(a,b){return null==a?null==b:a===b||Xa(a,b)};R.J=function(a,b,c){for(;;)if(R.m(a,b))if(Q(c))a=b,b=O(c),c=Q(c);else return R.m(b,O(c));else return!1};R.V=function(a){var b=O(a),c=Q(a);a=O(c);c=Q(c);return this.J(b,a,c)};R.W=2;function Fb(a){this.s=a}Fb.prototype.next=function(){if(null!=this.s){var a=O(this.s);this.s=Q(this.s);return{value:a,done:!1}}return{value:null,done:!0}};function Gb(a){return new Fb(K(a))}
function Hb(a,b){this.value=a;this.yb=b;this.mb=null;this.u=8388672;this.F=0}Hb.prototype.N=function(){return this};Hb.prototype.fa=function(){return this.value};Hb.prototype.ja=function(){null==this.mb&&(this.mb=Db.j?Db.j(this.yb):Db.call(null,this.yb));return this.mb};function Db(a){var b=a.next();return w(b.done)?null:new Hb(b.value,a)}function Ib(a){var b=0,c=1;for(a=K(a);;)if(null!=a)b+=1,c=qb(31,c)+yb(O(a))|0,a=Q(a);else return tb(sb(0,rb(c)),b)}var Jb=tb(sb(0,rb(1)),0);
function Kb(a){var b=0,c=0;for(a=K(a);;)if(null!=a)b+=1,c=c+yb(O(a))|0,a=Q(a);else return tb(sb(0,rb(c)),b)}var Lb=tb(sb(0,rb(0)),0);va["null"]=!0;wa["null"]=function(){return 0};Date.prototype.O=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};Xa.number=function(a,b){return a===b};Pa["function"]=!0;Qa["function"]=function(){return null};Ya._=function(a){return Object.prototype.hasOwnProperty.call(a,ba)&&a[ba]||(a[ba]=++ca)};function Mb(){this.K=!1;this.u=32768;this.F=0}
Mb.prototype.Cb=function(){return this.K};function Nb(a){return a instanceof Mb}function Ob(a){return Oa(a)}function Pb(a,b){var c=a.length;if(0===a.length)return b.I?b.I():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.m?b.m(d,f):b.call(null,d,f);if(Nb(d))return Oa(d);e+=1}else return d}function Qb(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.m?b.m(e,f):b.call(null,e,f);if(Nb(e))return Oa(e);c+=1}else return e}
function Rb(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.m?b.m(c,f):b.call(null,c,f);if(Nb(c))return Oa(c);d+=1}else return c}function Sb(a){return null!=a?a.u&2||u===a.Bb?!0:a.u?!1:x(va,a):x(va,a)}function Tb(a){return null!=a?a.u&16||u===a.ub?!0:a.u?!1:x(Ba,a):x(Ba,a)}function T(a,b,c){var d=U.j?U.j(a):U.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(R.m(Ub?Ub(a,c):Vb.call(null,a,c),b))return c;c+=1}else return-1}
function V(a,b,c){var d=U.j?U.j(a):U.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(R.m(Ub?Ub(a,c):Vb.call(null,a,c),b))return c;--c}else return-1}function Wb(a,b){this.o=a;this.i=b}Wb.prototype.la=function(){return this.i<this.o.length};Wb.prototype.next=function(){var a=this.o[this.i];this.i+=1;return a};function N(a,b,c){this.o=a;this.i=b;this.C=c;this.u=166592766;this.F=139264}g=N.prototype;g.toString=function(){return pb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U.j?U.j(this):U.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.Y=function(a,b){a=b+this.i;if(0<=a&&a<this.o.length)return this.o[a];throw Error("Index out of bounds");};g.oa=function(a,b,c){a=b+this.i;return 0<=a&&a<this.o.length?this.o[a]:c};
g.ua=function(){return new Wb(this.o,this.i)};g.T=function(){return this.C};g.ba=function(){return this.i+1<this.o.length?new N(this.o,this.i+1,null):null};g.$=function(){var a=this.o.length-this.i;return 0>a?0:a};g.S=function(){return Ib(this)};g.O=function(a,b){return Xb.m?Xb.m(this,b):Xb.call(null,this,b)};g.aa=function(){return P};g.da=function(a,b){return Rb(this.o,b,this.o[this.i],this.i+1)};g.ea=function(a,b,c){return Rb(this.o,b,c,this.i)};g.fa=function(){return this.o[this.i]};
g.ja=function(){return this.i+1<this.o.length?new N(this.o,this.i+1,null):P};g.N=function(){return this.i<this.o.length?this:null};g.U=function(a,b){return b===this.C?this:new N(this.o,this.i,b)};g.Z=function(a,b){return W.m?W.m(b,this):W.call(null,b,this)};N.prototype[ua]=function(){return Gb(this)};function Yb(a){return 0<a.length?new N(a,0,null):null}Xa._=function(a,b){return a===b};
var Zb=function Zb(a){switch(arguments.length){case 0:return Zb.I();case 1:return Zb.j(arguments[0]);case 2:return Zb.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Zb.J(arguments[0],arguments[1],new N(c.slice(2),0,null))}};Zb.I=function(){return $b};Zb.j=function(a){return a};Zb.m=function(a,b){return null!=a?Aa(a,b):new ac(null,b,null,1,null)};
Zb.J=function(a,b,c){for(;;)if(w(c))a=Zb.m(a,b),b=O(c),c=Q(c);else return Zb.m(a,b)};Zb.V=function(a){var b=O(a),c=Q(a);a=O(c);c=Q(c);return this.J(b,a,c)};Zb.W=2;function U(a){if(null!=a)if(null!=a&&(a.u&2||u===a.Bb))a=a.$(null);else if(sa(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.u&8388608||u===a.Nb))a:{a=K(a);for(var b=0;;){if(Sb(a)){a=b+wa(a);break a}a=Q(a);b+=1}}else a=wa(a);else a=0;return a}
function bc(a,b,c){for(;;){if(null==a)return c;if(0===b)return K(a)?O(a):c;if(Tb(a))return E(a,b,c);if(K(a))a=Q(a),--b;else return c}}function Vb(a){switch(arguments.length){case 2:return Ub(arguments[0],arguments[1]);case 3:return X(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}
function Ub(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.u&16||u===a.ub))return a.Y(null,b);if(sa(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.u&64||u===a.ab)||null!=a&&(a.u&16777216||u===a.vb)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(K(a)){a=O(a);break a}throw Error("Index out of bounds");}if(Tb(a)){a=E(a,b);break a}if(K(a))a=Q(a),--b;else throw Error("Index out of bounds");}return a}if(x(Ba,a))return E(a,b);throw Error(["nth not supported on this type ",B.j(ta(null==a?null:a.constructor))].join(""));}
function X(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.u&16||u===a.ub))return a.oa(null,b,c);if(sa(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.u&64||u===a.ab)||null!=a&&(a.u&16777216||u===a.vb))return 0>b?c:bc(a,b,c);if(x(Ba,a))return E(a,b,c);throw Error(["nth not supported on this type ",B.j(ta(null==a?null:a.constructor))].join(""));}
var J=function J(a){switch(arguments.length){case 2:return J.m(arguments[0],arguments[1]);case 3:return J.v(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};J.m=function(a,b){return null==a?null:null!=a&&(a.u&256||u===a.Hb)?a.na(null,b):sa(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:x(Ea,a)?Fa(a,b):null};
J.v=function(a,b,c){return null!=a?null!=a&&(a.u&256||u===a.Hb)?a.M(null,b,c):sa(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:x(Ea,a)?Fa(a,b,c):c:c};J.W=3;var cc=function cc(a){switch(arguments.length){case 3:return cc.v(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return cc.J(arguments[0],arguments[1],arguments[2],new N(c.slice(3),0,null))}};
cc.v=function(a,b,c){if(null!=a&&(a.u&512||u===a.Ab))a=a.za(null,b,c);else if(null!=a)a=Ja(a,b,c);else{a=[b,c];b=[];for(c=0;;)if(c<a.length){var d=a[c],e=a[c+1],f=dc(b,d);-1===f?(f=b,f.push(d),f.push(e)):b[f+1]=e;c+=2}else break;a=new ma(null,b.length/2,b,null)}return a};cc.J=function(a,b,c,d){for(;;)if(a=cc.v(a,b,c),w(d))b=O(d),c=O(Q(d)),d=Q(Q(d));else return a};cc.V=function(a){var b=O(a),c=Q(a);a=O(c);var d=Q(c);c=O(d);d=Q(d);return this.J(b,a,c,d)};cc.W=3;
function ec(a,b){this.B=a;this.C=b;this.u=393217;this.F=0}g=ec.prototype;g.T=function(){return this.C};g.U=function(a,b){return new ec(this.B,b)};
g.call=function(a){switch(arguments.length-1){case 0:return this.I();case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);case 3:return this.v(arguments[1],arguments[2],arguments[3]);case 4:return this.ia(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.wa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.Pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Qa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Sa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ka(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ma(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Oa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:var b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],f=arguments[5],h=arguments[6],k=arguments[7],l=arguments[8],m=arguments[9],n=arguments[10],p=arguments[11],q=arguments[12],t=arguments[13],y=arguments[14],A=arguments[15],
C=arguments[16],G=arguments[17],M=arguments[18],S=arguments[19],ea=arguments[20],na=arguments[21];return fc.Gb?fc.Gb(this.B,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M,S,ea,na):fc.call(null,this.B,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M,S,ea,na);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(D(b)))};g.I=function(){return this.B.I?this.B.I():this.B.call(null)};
g.j=function(a){return this.B.j?this.B.j(a):this.B.call(null,a)};g.m=function(a,b){return this.B.m?this.B.m(a,b):this.B.call(null,a,b)};g.v=function(a,b,c){return this.B.v?this.B.v(a,b,c):this.B.call(null,a,b,c)};g.ia=function(a,b,c,d){return this.B.ia?this.B.ia(a,b,c,d):this.B.call(null,a,b,c,d)};g.wa=function(a,b,c,d,e){return this.B.wa?this.B.wa(a,b,c,d,e):this.B.call(null,a,b,c,d,e)};g.Pa=function(a,b,c,d,e,f){return this.B.Pa?this.B.Pa(a,b,c,d,e,f):this.B.call(null,a,b,c,d,e,f)};
g.Qa=function(a,b,c,d,e,f,h){return this.B.Qa?this.B.Qa(a,b,c,d,e,f,h):this.B.call(null,a,b,c,d,e,f,h)};g.Ra=function(a,b,c,d,e,f,h,k){return this.B.Ra?this.B.Ra(a,b,c,d,e,f,h,k):this.B.call(null,a,b,c,d,e,f,h,k)};g.Sa=function(a,b,c,d,e,f,h,k,l){return this.B.Sa?this.B.Sa(a,b,c,d,e,f,h,k,l):this.B.call(null,a,b,c,d,e,f,h,k,l)};g.Ea=function(a,b,c,d,e,f,h,k,l,m){return this.B.Ea?this.B.Ea(a,b,c,d,e,f,h,k,l,m):this.B.call(null,a,b,c,d,e,f,h,k,l,m)};
g.Fa=function(a,b,c,d,e,f,h,k,l,m,n){return this.B.Fa?this.B.Fa(a,b,c,d,e,f,h,k,l,m,n):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ga=function(a,b,c,d,e,f,h,k,l,m,n,p){return this.B.Ga?this.B.Ga(a,b,c,d,e,f,h,k,l,m,n,p):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};g.Ha=function(a,b,c,d,e,f,h,k,l,m,n,p,q){return this.B.Ha?this.B.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};
g.Ia=function(a,b,c,d,e,f,h,k,l,m,n,p,q,t){return this.B.Ia?this.B.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,t):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,t)};g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y){return this.B.Ja?this.B.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,t,y)};g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A){return this.B.Ka?this.B.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A)};
g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C){return this.B.La?this.B.La(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C)};g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G){return this.B.Ma?this.B.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G)};
g.Na=function(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M){return this.B.Na?this.B.Na(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M)};g.Oa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M,S){return this.B.Oa?this.B.Oa(a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M,S):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M,S)};function gc(a,b){return"function"===typeof a?new ec(a,b):null==a?null:Ra(a,b)}
function hc(a){var b=null!=a;return(b?null!=a?a.u&131072||u===a.Kb||(a.u?0:x(Pa,a)):x(Pa,a):b)?Qa(a):null}function ic(a){return null!=a?a.u&16777216||u===a.vb?!0:a.u?!1:x(ab,a):x(ab,a)}function jc(a){return null==a?!1:null!=a?a.u&1024||u===a.$b?!0:a.u?!1:x(Ka,a):x(Ka,a)}function kc(a){return null!=a?a.u&67108864||u===a.bc?!0:a.u?!1:x(cb,a):x(cb,a)}function lc(a){return null!=a?a.u&16384||u===a.cc?!0:a.u?!1:x(Na,a):x(Na,a)}function mc(a){return null!=a?a.F&512||u===a.Tb?!0:!1:!1}
function nc(a,b,c,d,e){for(;0!==e;)c[d]=a[b],d+=1,--e,b+=1}var oc={};function pc(a){return null==a?!1:!1===a?!1:!0}function qc(a,b){return null!=a&&(a.u&512||u===a.Ab)?a.Wa(null,b):x(Ha,a)?Ia(a,b):J.v(a,b,oc)===oc?!1:!0}function rc(a,b){var c=K(b);return c?(b=O(c),c=Q(c),sc?sc(a,b,c):tc.call(null,a,b,c)):a.I?a.I():a.call(null)}function uc(a,b,c){for(c=K(c);;)if(c){var d=O(c);b=a.m?a.m(b,d):a.call(null,b,d);if(Nb(b))return Oa(b);c=Q(c)}else return b}
function vc(a,b){a=nb(a);if(w(a.la()))for(var c=a.next();;)if(a.la()){var d=a.next();c=b.m?b.m(c,d):b.call(null,c,d);if(Nb(c))return Oa(c)}else return c;else return b.I?b.I():b.call(null)}function wc(a,b,c){for(a=nb(a);;)if(a.la()){var d=a.next();c=b.m?b.m(c,d):b.call(null,c,d);if(Nb(c))return Oa(c)}else return c}
function tc(a){switch(arguments.length){case 2:var b=arguments[0],c=arguments[1];return null!=c&&(c.u&524288||u===c.Mb)?c.da(null,b):sa(c)?Pb(c,b):"string"===typeof c?Pb(c,b):x(Sa,c)?Ta(c,b):Cb(c)?vc(c,b):rc(b,c);case 3:return sc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}
function sc(a,b,c){return null!=c&&(c.u&524288||u===c.Mb)?c.ea(null,a,b):sa(c)?Qb(c,a,b):"string"===typeof c?Qb(c,a,b):x(Sa,c)?Ta(c,a,b):Cb(c)?wc(c,a,b):uc(a,b,c)}function xc(a,b){return null!=b?Wa(b,a):!0}function yc(a){return a}function zc(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}function Ac(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}
var B=function B(a){switch(arguments.length){case 0:return B.I();case 1:return B.j(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return B.J(arguments[0],new N(c.slice(1),0,null))}};B.I=function(){return""};B.j=function(a){return null==a?"":[a].join("")};B.J=function(a,b){for(a=new fa(B.j(a));;)if(w(b))a=a.append(B.j(O(b))),b=Q(b);else return a.toString()};B.V=function(a){var b=O(a);a=Q(a);return this.J(b,a)};B.W=1;
function Xb(a,b){if(ic(b))if(Sb(a)&&Sb(b)&&U(a)!==U(b))a=!1;else a:for(a=K(a),b=K(b);;){if(null==a){a=null==b;break a}if(null!=b&&R.m(O(a),O(b)))a=Q(a),b=Q(b);else{a=!1;break a}}else a=null;return pc(a)}function ac(a,b,c,d,e){this.C=a;this.first=b;this.ya=c;this.count=d;this.D=e;this.u=65937646;this.F=8192}g=ac.prototype;g.toString=function(){return pb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.T=function(){return this.C};g.ba=function(){return 1===this.count?null:this.ya};g.$=function(){return this.count};g.S=function(){var a=this.D;return null!=a?a:this.D=a=Ib(this)};g.O=function(a,b){return Xb(this,b)};
g.aa=function(){return Ra(P,this.C)};g.da=function(a,b){return rc(b,this)};g.ea=function(a,b,c){return uc(b,c,this)};g.fa=function(){return this.first};g.ja=function(){return 1===this.count?P:this.ya};g.N=function(){return this};g.U=function(a,b){return b===this.C?this:new ac(b,this.first,this.ya,this.count,this.D)};g.Z=function(a,b){return new ac(this.C,b,this,this.count+1,null)};ac.prototype[ua]=function(){return Gb(this)};function Bc(a){this.C=a;this.u=65937614;this.F=8192}g=Bc.prototype;
g.toString=function(){return pb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.T=function(){return this.C};g.ba=function(){return null};g.$=function(){return 0};g.S=function(){return Jb};g.O=function(a,b){return(null!=b?b.u&33554432||u===b.Zb||(b.u?0:x(bb,b)):x(bb,b))||ic(b)?null==K(b):!1};g.aa=function(){return this};
g.da=function(a,b){return rc(b,this)};g.ea=function(a,b,c){return uc(b,c,this)};g.fa=function(){return null};g.ja=function(){return P};g.N=function(){return null};g.U=function(a,b){return b===this.C?this:new Bc(b)};g.Z=function(a,b){return new ac(this.C,b,null,1,null)};var P=new Bc(null);Bc.prototype[ua]=function(){return Gb(this)};function Cc(a,b,c,d){this.C=a;this.first=b;this.ya=c;this.D=d;this.u=65929452;this.F=8192}g=Cc.prototype;g.toString=function(){return pb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.T=function(){return this.C};g.ba=function(){return null==this.ya?null:K(this.ya)};g.S=function(){var a=this.D;return null!=a?a:this.D=a=Ib(this)};g.O=function(a,b){return Xb(this,b)};g.aa=function(){return P};
g.da=function(a,b){return rc(b,this)};g.ea=function(a,b,c){return uc(b,c,this)};g.fa=function(){return this.first};g.ja=function(){return null==this.ya?P:this.ya};g.N=function(){return this};g.U=function(a,b){return b===this.C?this:new Cc(b,this.first,this.ya,this.D)};g.Z=function(a,b){return new Cc(null,b,this,null)};Cc.prototype[ua]=function(){return Gb(this)};function W(a,b){return null==b?new ac(null,a,null,1,null):null!=b&&(b.u&64||u===b.ab)?new Cc(null,a,b,null):new Cc(null,a,K(b),null)}
function v(a,b,c,d){this.hb=a;this.name=b;this.xa=c;this.Va=d;this.u=2153775105;this.F=4096}g=v.prototype;g.toString=function(){return[":",B.j(this.xa)].join("")};g.O=function(a,b){return b instanceof v?this.xa===b.xa:!1};g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(D(b)))};
g.j=function(a){return J.m(a,this)};g.m=function(a,b){return J.v(a,this,b)};g.S=function(){var a=this.Va;return null!=a?a:this.Va=a=zb(ub(this.name),xb(this.hb))+2654435769|0};g.P=function(a,b){return I(b,[":",B.j(this.xa)].join(""))};function Dc(a){if(null!=a&&(a.F&4096||u===a.Lb))return a.hb;throw Error(["Doesn't support namespace: ",B.j(a)].join(""));}
var Ec=function Ec(a){switch(arguments.length){case 1:return Ec.j(arguments[0]);case 2:return Ec.m(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}};Ec.j=function(a){if(a instanceof v)return a;if(a instanceof Ab)return new v(Dc(a),Fc.j?Fc.j(a):Fc.call(null,a),a.Ca,null);if(R.m("/",a))return new v(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new v(b[0],b[1],a,null):new v(null,b[0],a,null)}return null};
Ec.m=function(a,b){a=a instanceof v?Fc.j?Fc.j(a):Fc.call(null,a):a instanceof Ab?Fc.j?Fc.j(a):Fc.call(null,a):a;b=b instanceof v?Fc.j?Fc.j(b):Fc.call(null,b):b instanceof Ab?Fc.j?Fc.j(b):Fc.call(null,b):b;return new v(a,b,[w(a)?[B.j(a),"/"].join(""):null,B.j(b)].join(""),null)};Ec.W=2;function Gc(a,b,c){this.C=a;this.cb=b;this.s=null;this.D=c;this.u=32374988;this.F=1}g=Gc.prototype;g.toString=function(){return pb(this)};
function Hc(a){null!=a.cb&&(a.s=a.cb.I?a.cb.I():a.cb.call(null),a.cb=null);return a.s}g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.T=function(){return this.C};g.ba=function(){this.N(null);return null==this.s?null:Q(this.s)};g.S=function(){var a=this.D;return null!=a?a:this.D=a=Ib(this)};g.O=function(a,b){return Xb(this,b)};
g.aa=function(){return Ra(P,this.C)};g.da=function(a,b){return rc(b,this)};g.ea=function(a,b,c){return uc(b,c,this)};g.fa=function(){this.N(null);return null==this.s?null:O(this.s)};g.ja=function(){this.N(null);return null!=this.s?Eb(this.s):P};g.N=function(){Hc(this);if(null==this.s)return null;for(var a=this.s;;)if(a instanceof Gc)a=Hc(a);else return this.s=a,K(this.s)};g.U=function(a,b){var c=this;return b===this.C?c:new Gc(b,function(){return c.N(null)},this.D)};g.Z=function(a,b){return W(b,this)};
Gc.prototype[ua]=function(){return Gb(this)};function Ic(a){this.ob=a;this.end=0;this.u=2;this.F=0}Ic.prototype.add=function(a){this.ob[this.end]=a;return this.end+=1};Ic.prototype.va=function(){var a=new Jc(this.ob,0,this.end);this.ob=null;return a};Ic.prototype.$=function(){return this.end};function Jc(a,b,c){this.o=a;this.X=b;this.end=c;this.u=524306;this.F=0}g=Jc.prototype;g.$=function(){return this.end-this.X};g.Y=function(a,b){return this.o[this.X+b]};
g.oa=function(a,b,c){return 0<=b&&b<this.end-this.X?this.o[this.X+b]:c};g.sb=function(){if(this.X===this.end)throw Error("-drop-first of empty chunk");return new Jc(this.o,this.X+1,this.end)};g.da=function(a,b){return Rb(this.o,b,this.o[this.X],this.X+1)};g.ea=function(a,b,c){return Rb(this.o,b,c,this.X)};function Kc(a,b,c,d){this.va=a;this.ra=b;this.C=c;this.D=d;this.u=31850732;this.F=1536}g=Kc.prototype;g.toString=function(){return pb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.T=function(){return this.C};g.ba=function(){return 1<wa(this.va)?new Kc(jb(this.va),this.ra,null,null):null==this.ra?null:$a(this.ra)};g.S=function(){var a=this.D;return null!=a?a:this.D=a=Ib(this)};
g.O=function(a,b){return Xb(this,b)};g.aa=function(){return P};g.fa=function(){return E(this.va,0)};g.ja=function(){return 1<wa(this.va)?new Kc(jb(this.va),this.ra,null,null):null==this.ra?P:this.ra};g.N=function(){return this};g.pb=function(){return this.va};g.ib=function(){return null==this.ra?P:this.ra};g.U=function(a,b){return b===this.C?this:new Kc(this.va,this.ra,b,this.D)};g.Z=function(a,b){return W(b,this)};g.tb=function(){return null==this.ra?null:this.ra};Kc.prototype[ua]=function(){return Gb(this)};
function Lc(a,b){return 0===wa(a)?b:new Kc(a,b,null,null)}function Mc(a,b){a.add(b)}function Nc(a,b){if(Sb(b))return U(b);var c=0;for(b=K(b);;)if(null!=b&&c<a)c+=1,b=Q(b);else return c}
var Oc=function Oc(a){if(null==a)return null;var c=Q(a);return null==c?K(O(a)):W(O(a),Oc.j?Oc.j(c):Oc.call(null,c))},Pc=function Pc(a){switch(arguments.length){case 0:return Pc.I();case 1:return Pc.j(arguments[0]);case 2:return Pc.m(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Pc.J(arguments[0],arguments[1],new N(c.slice(2),0,null))}};Pc.I=function(){return fb($b)};Pc.j=function(a){return a};
Pc.m=function(a,b){return gb(a,b)};Pc.J=function(a,b,c){for(;;)if(a=gb(a,b),w(c))b=O(c),c=Q(c);else return a};Pc.V=function(a){var b=O(a),c=Q(a);a=O(c);c=Q(c);return this.J(b,a,c)};Pc.W=2;
function Qc(a,b,c){var d=K(c);if(0===b)return a.I?a.I():a.call(null);c=F(d);var e=H(d);if(1===b)return a.j?a.j(c):a.call(null,c);d=F(e);var f=H(e);if(2===b)return a.m?a.m(c,d):a.call(null,c,d);e=F(f);var h=H(f);if(3===b)return a.v?a.v(c,d,e):a.call(null,c,d,e);f=F(h);var k=H(h);if(4===b)return a.ia?a.ia(c,d,e,f):a.call(null,c,d,e,f);h=F(k);var l=H(k);if(5===b)return a.wa?a.wa(c,d,e,f,h):a.call(null,c,d,e,f,h);k=F(l);var m=H(l);if(6===b)return a.Pa?a.Pa(c,d,e,f,h,k):a.call(null,c,d,e,f,h,k);l=F(m);
var n=H(m);if(7===b)return a.Qa?a.Qa(c,d,e,f,h,k,l):a.call(null,c,d,e,f,h,k,l);m=F(n);var p=H(n);if(8===b)return a.Ra?a.Ra(c,d,e,f,h,k,l,m):a.call(null,c,d,e,f,h,k,l,m);n=F(p);var q=H(p);if(9===b)return a.Sa?a.Sa(c,d,e,f,h,k,l,m,n):a.call(null,c,d,e,f,h,k,l,m,n);p=F(q);var t=H(q);if(10===b)return a.Ea?a.Ea(c,d,e,f,h,k,l,m,n,p):a.call(null,c,d,e,f,h,k,l,m,n,p);q=F(t);var y=H(t);if(11===b)return a.Fa?a.Fa(c,d,e,f,h,k,l,m,n,p,q):a.call(null,c,d,e,f,h,k,l,m,n,p,q);t=F(y);var A=H(y);if(12===b)return a.Ga?
a.Ga(c,d,e,f,h,k,l,m,n,p,q,t):a.call(null,c,d,e,f,h,k,l,m,n,p,q,t);y=F(A);var C=H(A);if(13===b)return a.Ha?a.Ha(c,d,e,f,h,k,l,m,n,p,q,t,y):a.call(null,c,d,e,f,h,k,l,m,n,p,q,t,y);A=F(C);var G=H(C);if(14===b)return a.Ia?a.Ia(c,d,e,f,h,k,l,m,n,p,q,t,y,A):a.call(null,c,d,e,f,h,k,l,m,n,p,q,t,y,A);C=F(G);var M=H(G);if(15===b)return a.Ja?a.Ja(c,d,e,f,h,k,l,m,n,p,q,t,y,A,C):a.call(null,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C);G=F(M);var S=H(M);if(16===b)return a.Ka?a.Ka(c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G):a.call(null,
c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G);M=F(S);var ea=H(S);if(17===b)return a.La?a.La(c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M):a.call(null,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M);S=F(ea);var na=H(ea);if(18===b)return a.Ma?a.Ma(c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M,S):a.call(null,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M,S);ea=F(na);na=H(na);if(19===b)return a.Na?a.Na(c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M,S,ea):a.call(null,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M,S,ea);var Td=F(na);H(na);if(20===b)return a.Oa?a.Oa(c,d,e,f,h,k,l,m,n,p,q,t,
y,A,C,G,M,S,ea,Td):a.call(null,c,d,e,f,h,k,l,m,n,p,q,t,y,A,C,G,M,S,ea,Td);throw Error("Only up to 20 arguments supported on functions");}function Rc(a){return null!=a&&(a.u&128||u===a.$a)?a.ba():K(Eb(a))}function Sc(a,b,c){return null==c?a.j?a.j(b):a.call(a,b):Tc(a,b,F(c),Rc(c))}function Tc(a,b,c,d){return null==d?a.m?a.m(b,c):a.call(a,b,c):Uc(a,b,c,F(d),Rc(d))}function Uc(a,b,c,d,e){return null==e?a.v?a.v(b,c,d):a.call(a,b,c,d):Vc(a,b,c,d,F(e),Rc(e))}
function Vc(a,b,c,d,e,f){if(null==f)return a.ia?a.ia(b,c,d,e):a.call(a,b,c,d,e);var h=F(f),k=Q(f);if(null==k)return a.wa?a.wa(b,c,d,e,h):a.call(a,b,c,d,e,h);f=F(k);var l=Q(k);if(null==l)return a.Pa?a.Pa(b,c,d,e,h,f):a.call(a,b,c,d,e,h,f);k=F(l);var m=Q(l);if(null==m)return a.Qa?a.Qa(b,c,d,e,h,f,k):a.call(a,b,c,d,e,h,f,k);l=F(m);var n=Q(m);if(null==n)return a.Ra?a.Ra(b,c,d,e,h,f,k,l):a.call(a,b,c,d,e,h,f,k,l);m=F(n);var p=Q(n);if(null==p)return a.Sa?a.Sa(b,c,d,e,h,f,k,l,m):a.call(a,b,c,d,e,h,f,k,l,
m);n=F(p);var q=Q(p);if(null==q)return a.Ea?a.Ea(b,c,d,e,h,f,k,l,m,n):a.call(a,b,c,d,e,h,f,k,l,m,n);p=F(q);var t=Q(q);if(null==t)return a.Fa?a.Fa(b,c,d,e,h,f,k,l,m,n,p):a.call(a,b,c,d,e,h,f,k,l,m,n,p);q=F(t);var y=Q(t);if(null==y)return a.Ga?a.Ga(b,c,d,e,h,f,k,l,m,n,p,q):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q);t=F(y);var A=Q(y);if(null==A)return a.Ha?a.Ha(b,c,d,e,h,f,k,l,m,n,p,q,t):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,t);y=F(A);var C=Q(A);if(null==C)return a.Ia?a.Ia(b,c,d,e,h,f,k,l,m,n,p,q,t,y):a.call(a,b,
c,d,e,h,f,k,l,m,n,p,q,t,y);A=F(C);var G=Q(C);if(null==G)return a.Ja?a.Ja(b,c,d,e,h,f,k,l,m,n,p,q,t,y,A):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,t,y,A);C=F(G);var M=Q(G);if(null==M)return a.Ka?a.Ka(b,c,d,e,h,f,k,l,m,n,p,q,t,y,A,C):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,t,y,A,C);G=F(M);var S=Q(M);if(null==S)return a.La?a.La(b,c,d,e,h,f,k,l,m,n,p,q,t,y,A,C,G):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,t,y,A,C,G);M=F(S);var ea=Q(S);if(null==ea)return a.Ma?a.Ma(b,c,d,e,h,f,k,l,m,n,p,q,t,y,A,C,G,M):a.call(a,b,c,d,e,h,f,k,l,m,
n,p,q,t,y,A,C,G,M);S=F(ea);var na=Q(ea);if(null==na)return a.Na?a.Na(b,c,d,e,h,f,k,l,m,n,p,q,t,y,A,C,G,M,S):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,t,y,A,C,G,M,S);ea=F(na);na=Q(na);if(null==na)return a.Oa?a.Oa(b,c,d,e,h,f,k,l,m,n,p,q,t,y,A,C,G,M,S,ea):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,t,y,A,C,G,M,S,ea);b=[b,c,d,e,h,f,k,l,m,n,p,q,t,y,A,C,G,M,S,ea];for(c=na;;)if(c)b.push(F(c)),c=Q(c);else break;return a.apply(a,b)}
function fc(a){switch(arguments.length){case 2:return Wc(arguments[0],arguments[1]);case 3:return Xc(arguments[0],arguments[1],arguments[2]);case 4:var b=arguments[0];var c=arguments[1],d=arguments[2],e=arguments[3];b.V?(c=W(c,W(d,e)),d=b.W,e=2+Nc(d-1,e),b=e<=d?Qc(b,e,c):b.V(c)):b=Tc(b,c,d,K(e));return b;case 5:b=arguments[0];c=arguments[1];d=arguments[2];var f=arguments[3];e=arguments[4];b.V?(c=W(c,W(d,W(f,e))),d=b.W,e=3+Nc(d-2,e),b=e<=d?Qc(b,e,c):b.V(c)):b=Uc(b,c,d,f,K(e));return b;default:e=[];
b=arguments.length;for(c=0;;)if(c<b)e.push(arguments[c]),c+=1;else break;b=arguments[0];c=arguments[1];d=arguments[2];f=arguments[3];var h=arguments[4];e=new N(e.slice(5),0,null);b.V?(e=Oc(e),c=W(c,W(d,W(f,W(h,e)))),d=b.W,e=4+Nc(d-3,e),b=e<=d?Qc(b,e,c):b.V(c)):b=Vc(b,c,d,f,h,Oc(e));return b}}function Wc(a,b){if(a.V){var c=a.W,d=Nc(c+1,b);return d<=c?Qc(a,d,b):a.V(b)}b=K(b);return null==b?a.I?a.I():a.call(a):Sc(a,F(b),Rc(b))}
function Xc(a,b,c){if(a.V){b=W(b,c);var d=a.W;c=Nc(d,c)+1;return c<=d?Qc(a,c,b):a.V(b)}return Sc(a,b,K(c))}function Yc(a){return null!=a&&(a.u&64||u===a.ab)?Wc(Zc,a):a}
function $c(){if("undefined"===typeof ha||"undefined"===typeof ia||"undefined"===typeof ja)ja=function(a){this.Qb=a;this.u=393216;this.F=0},ja.prototype.U=function(a,b){return new ja(b)},ja.prototype.T=function(){return this.Qb},ja.prototype.la=function(){return!1},ja.prototype.next=function(){return Error("No such element")},ja.prototype.remove=function(){return Error("Unsupported operation")},ja.xb=!0,ja.lb="cljs.core/t_cljs$core18830",ja.Ob=function(a){return I(a,"cljs.core/t_cljs$core18830")};
return new ja(ad)}function bd(a,b){for(;;){if(null==K(b))return!0;var c=O(b);c=a.j?a.j(c):a.call(null,c);if(w(c))b=Q(b);else return!1}}
var Y=function Y(a){switch(arguments.length){case 1:return Y.j(arguments[0]);case 2:return Y.m(arguments[0],arguments[1]);case 3:return Y.v(arguments[0],arguments[1],arguments[2]);case 4:return Y.ia(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Y.J(arguments[0],arguments[1],arguments[2],arguments[3],new N(c.slice(4),0,null))}};
Y.j=function(a){return function(b){return function(){function c(k,l){l=a.j?a.j(l):a.call(null,l);return b.m?b.m(k,l):b.call(null,k,l)}function d(k){return b.j?b.j(k):b.call(null,k)}function e(){return b.I?b.I():b.call(null)}var f=null,h=function(){function k(m,n,p){var q=null;if(2<arguments.length){q=0;for(var t=Array(arguments.length-2);q<t.length;)t[q]=arguments[q+2],++q;q=new N(t,0,null)}return l.call(this,m,n,q)}function l(m,n,p){n=Xc(a,n,p);return b.m?b.m(m,n):b.call(null,m,n)}k.W=2;k.V=function(m){var n=
O(m);m=Q(m);var p=O(m);m=Eb(m);return l(n,p,m)};k.J=l;return k}();f=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new N(p,0,null)}return h.J(k,l,n)}throw Error("Invalid arity: "+arguments.length);};f.W=2;f.V=h.V;f.I=e;f.j=d;f.m=c;f.J=h.J;return f}()}};
Y.m=function(a,b){return new Gc(null,function(){var c=K(b);if(c){if(mc(c)){for(var d=kb(c),e=U(d),f=new Ic(Array(e)),h=0;;)if(h<e)Mc(f,function(){var k=E(d,h);return a.j?a.j(k):a.call(null,k)}()),h+=1;else break;return Lc(f.va(),Y.m(a,lb(c)))}return W(function(){var k=O(c);return a.j?a.j(k):a.call(null,k)}(),Y.m(a,Eb(c)))}return null},null)};
Y.v=function(a,b,c){return new Gc(null,function(){var d=K(b),e=K(c);if(d&&e){var f=O(d);var h=O(e);f=a.m?a.m(f,h):a.call(null,f,h);d=W(f,Y.v(a,Eb(d),Eb(e)))}else d=null;return d},null)};Y.ia=function(a,b,c,d){return new Gc(null,function(){var e=K(b),f=K(c),h=K(d);if(e&&f&&h){var k=O(e);var l=O(f),m=O(h);k=a.v?a.v(k,l,m):a.call(null,k,l,m);e=W(k,Y.ia(a,Eb(e),Eb(f),Eb(h)))}else e=null;return e},null)};
Y.J=function(a,b,c,d,e){return Y.m(function(f){return Wc(a,f)},function k(h){return new Gc(null,function(){var l=Y.m(K,h);return bd(yc,l)?W(Y.m(O,l),k(Y.m(Eb,l))):null},null)}(Zb.J(e,d,Yb([c,b]))))};Y.V=function(a){var b=O(a),c=Q(a);a=O(c);var d=Q(c);c=O(d);var e=Q(d);d=O(e);e=Q(e);return this.J(b,a,c,d,e)};Y.W=4;function cd(a,b){this.H=a;this.o=b}
function dd(a){return new cd(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function ed(a){a=a.A;return 32>a?0:a-1>>>5<<5}function fd(a,b,c){for(;;){if(0===b)return c;var d=dd(a);d.o[0]=c;c=d;b-=5}}var gd=function gd(a,b,c,d){var f=new cd(c.H,D(c.o)),h=a.A-1>>>b&31;5===b?f.o[h]=d:(c=c.o[h],null!=c?(b-=5,a=gd.ia?gd.ia(a,b,c,d):gd.call(null,a,b,c,d)):a=fd(null,b-5,d),f.o[h]=a);return f};
function hd(a,b){if(b>=ed(a))return a.ha;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.o[b>>>a&31];a=d}else return c.o}function id(a,b){if(0<=b&&b<a.A)b=hd(a,b);else throw a=a.A,Error(["No item ",B.j(b)," in vector of length ",B.j(a)].join(""));return b}var jd=function jd(a,b,c,d,e){var h=new cd(c.H,D(c.o));if(0===b)h.o[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.o[k];a=jd.wa?jd.wa(a,b,c,d,e):jd.call(null,a,b,c,d,e);h.o[k]=a}return h};
function kd(a,b,c){this.nb=this.i=0;this.o=a;this.Sb=b;this.start=0;this.end=c}kd.prototype.la=function(){return this.i<this.end};kd.prototype.next=function(){32===this.i-this.nb&&(this.o=hd(this.Sb,this.i),this.nb+=32);var a=this.o[this.i&31];this.i+=1;return a};function ld(a,b,c,d){return c<d?md(a,b,Ub(a,c),c+1,d):b.I?b.I():b.call(null)}
function md(a,b,c,d,e){var f=c;c=d;for(d=hd(a,d);;)if(c<e){var h=c&31;d=0===h?hd(a,c):d;h=d[h];f=b.m?b.m(f,h):b.call(null,f,h);if(Nb(f))return Oa(f);c+=1}else return f}function nd(a,b,c,d,e,f){this.C=a;this.A=b;this.shift=c;this.root=d;this.ha=e;this.D=f;this.u=167666463;this.F=139268}g=nd.prototype;g.toString=function(){return pb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.na=function(a,b){return this.M(null,b,null)};g.M=function(a,b,c){return"number"===typeof b?this.oa(null,b,c):c};
g.jb=function(a,b,c){a=0;for(var d=c;;)if(a<this.A){var e=hd(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=f+a,k=e[f];d=b.v?b.v(d,h,k):b.call(null,d,h,k);if(Nb(d)){e=d;break a}f+=1}else{e=d;break a}if(Nb(e))return Oa(e);a+=c;d=e}else return d};g.Y=function(a,b){return id(this,b)[b&31]};g.oa=function(a,b,c){return 0<=b&&b<this.A?hd(this,b)[b&31]:c};
g.qb=function(a,b){if(0<=a&&a<this.A){if(ed(this)<=a){var c=D(this.ha);c[a&31]=b;return new nd(this.C,this.A,this.shift,this.root,c,null)}return new nd(this.C,this.A,this.shift,jd(this,this.shift,this.root,a,b),this.ha,null)}if(a===this.A)return this.Z(null,b);throw Error(["Index ",B.j(a)," out of bounds  [0,",B.j(this.A),"]"].join(""));};g.ua=function(){var a=this.A;return new kd(0<U(this)?hd(this,0):null,this,a)};g.T=function(){return this.C};g.$=function(){return this.A};
g.S=function(){var a=this.D;return null!=a?a:this.D=a=Ib(this)};g.O=function(a,b){if(b instanceof nd)if(this.A===U(b))for(a=this.ua(null),b=b.ua(null);;)if(a.la()){var c=a.next(),d=b.next();if(!R.m(c,d))return!1}else return!0;else return!1;else return Xb(this,b)};g.Za=function(){return new od(this.A,this.shift,pd.j?pd.j(this.root):pd.call(null,this.root),qd.j?qd.j(this.ha):qd.call(null,this.ha))};g.aa=function(){return Ra($b,this.C)};g.da=function(a,b){return ld(this,b,0,this.A)};
g.ea=function(a,b,c){a=0;for(var d=c;;)if(a<this.A){var e=hd(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=e[f];d=b.m?b.m(d,h):b.call(null,d,h);if(Nb(d)){e=d;break a}f+=1}else{e=d;break a}if(Nb(e))return Oa(e);a+=c;d=e}else return d};g.za=function(a,b,c){if("number"===typeof b)return this.qb(b,c);throw Error("Vector's key for assoc must be a number.");};g.Wa=function(a,b){return"number"!==typeof b||isNaN(b)||Infinity===b||parseFloat(b)!==parseInt(b,10)?!1:0<=b&&b<this.A};
g.N=function(){if(0===this.A)return null;if(32>=this.A)return new N(this.ha,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.o[0];else{a=a.o;break a}}return rd?rd(this,a,0,0):sd.call(null,this,a,0,0)};g.U=function(a,b){return b===this.C?this:new nd(b,this.A,this.shift,this.root,this.ha,this.D)};
g.Z=function(a,b){if(32>this.A-ed(this)){a=this.ha.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.ha[d],d+=1;else break;c[a]=b;return new nd(this.C,this.A+1,this.shift,this.root,c,null)}a=(c=this.A>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=dd(null),c.o[0]=this.root,d=fd(null,this.shift,new cd(null,this.ha)),c.o[1]=d):c=gd(this,this.shift,this.root,new cd(null,this.ha));return new nd(this.C,this.A+1,a,c,[b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(D(b)))};g.j=function(a){if("number"===typeof a)return this.Y(null,a);throw Error("Key must be integer");};
var td=new cd(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),$b=new nd(null,0,5,td,[],Jb);nd.prototype[ua]=function(){return Gb(this)};function ud(a,b,c,d,e){this.ma=a;this.node=b;this.i=c;this.X=d;this.C=e;this.D=null;this.u=32375020;this.F=1536}g=ud.prototype;g.toString=function(){return pb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.T=function(){return this.C};g.ba=function(){if(this.X+1<this.node.length){var a=this.ma;var b=this.node,c=this.i,d=this.X+1;a=rd?rd(a,b,c,d):sd.call(null,a,b,c,d);return null==a?null:a}return this.tb()};
g.S=function(){var a=this.D;return null!=a?a:this.D=a=Ib(this)};g.O=function(a,b){return Xb(this,b)};g.aa=function(){return P};g.da=function(a,b){return ld(this.ma,b,this.i+this.X,U(this.ma))};g.ea=function(a,b,c){return md(this.ma,b,c,this.i+this.X,U(this.ma))};g.fa=function(){return this.node[this.X]};g.ja=function(){if(this.X+1<this.node.length){var a=this.ma;var b=this.node,c=this.i,d=this.X+1;a=rd?rd(a,b,c,d):sd.call(null,a,b,c,d);return null==a?P:a}return this.ib(null)};g.N=function(){return this};
g.pb=function(){var a=this.node;return new Jc(a,this.X,a.length)};g.ib=function(){var a=this.i+this.node.length;if(a<wa(this.ma)){var b=this.ma,c=hd(this.ma,a);return rd?rd(b,c,a,0):sd.call(null,b,c,a,0)}return P};g.U=function(a,b){return b===this.C?this:vd?vd(this.ma,this.node,this.i,this.X,b):sd.call(null,this.ma,this.node,this.i,this.X,b)};g.Z=function(a,b){return W(b,this)};
g.tb=function(){var a=this.i+this.node.length;if(a<wa(this.ma)){var b=this.ma,c=hd(this.ma,a);return rd?rd(b,c,a,0):sd.call(null,b,c,a,0)}return null};ud.prototype[ua]=function(){return Gb(this)};
function sd(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new ud(b,id(b,c),c,d,null);case 4:return rd(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return vd(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function rd(a,b,c,d){return new ud(a,b,c,d,null)}function vd(a,b,c,d,e){return new ud(a,b,c,d,e)}
function wd(a,b){return a===b.H?b:new cd(a,D(b.o))}function pd(a){return new cd({},D(a.o))}function qd(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];nc(a,0,b,0,a.length);return b}var xd=function xd(a,b,c,d){c=wd(a.root.H,c);var f=a.A-1>>>b&31;if(5===b)a=d;else{var h=c.o[f];null!=h?(b-=5,a=xd.ia?xd.ia(a,b,h,d):xd.call(null,a,b,h,d)):a=fd(a.root.H,b-5,d)}c.o[f]=a;return c};
function od(a,b,c,d){this.A=a;this.shift=b;this.root=c;this.ha=d;this.F=88;this.u=275}g=od.prototype;
g.bb=function(a,b){if(this.root.H){if(32>this.A-ed(this))this.ha[this.A&31]=b;else{a=new cd(this.root.H,this.ha);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.ha=c;this.A>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=fd(this.root.H,this.shift,a),this.root=new cd(this.root.H,b),this.shift=c):this.root=xd(this,this.shift,this.root,a)}this.A+=1;return this}throw Error("conj! after persistent!");};g.kb=function(){if(this.root.H){this.root.H=null;var a=this.A-ed(this),b=Array(a);nc(this.ha,0,b,0,a);return new nd(null,this.A,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
g.Xa=function(a,b,c){if("number"===typeof b)return yd(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function yd(a,b,c){if(a.root.H){if(0<=b&&b<a.A){if(ed(a)<=b)a.ha[b&31]=c;else{var d=function k(f,h){h=wd(a.root.H,h);if(0===f)h.o[b&31]=c;else{var l=b>>>f&31;f=k(f-5,h.o[l]);h.o[l]=f}return h}(a.shift,a.root);a.root=d}return a}if(b===a.A)return a.bb(null,c);throw Error(["Index ",B.j(b)," out of bounds for TransientVector of length",B.j(a.A)].join(""));}throw Error("assoc! after persistent!");}g.$=function(){if(this.root.H)return this.A;throw Error("count after persistent!");};
g.Y=function(a,b){if(this.root.H)return id(this,b)[b&31];throw Error("nth after persistent!");};g.oa=function(a,b,c){return 0<=b&&b<this.A?this.Y(null,b):c};g.na=function(a,b){return this.M(null,b,null)};g.M=function(a,b,c){if(this.root.H)return"number"===typeof b?this.oa(null,b,c):c;throw Error("lookup after persistent!");};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(D(b)))};g.j=function(a){return this.na(null,a)};g.m=function(a,b){return this.M(null,a,b)};function zd(){this.u=2097152;this.F=0}zd.prototype.O=function(){return!1};var Ad=new zd;
function Bd(a,b){return pc(jc(b)&&!kc(b)?U(a)===U(b)?(null!=a?a.u&1048576||u===a.Yb||(a.u?0:x(Va,a)):x(Va,a))?xc(function(c,d,e){return R.m(J.v(b,d,Ad),e)?!0:new Mb},a):bd(function(c){return R.m(J.v(b,O(c),Ad),O(Q(c)))},a):null:null)}function Cd(a){this.s=a}Cd.prototype.next=function(){if(null!=this.s){var a=O(this.s),b=X(a,0,null);a=X(a,1,null);this.s=Q(this.s);return{value:[b,a],done:!1}}return{value:null,done:!0}};
function dc(a,b){if(b instanceof v)a:{var c=a.length;b=b.xa;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof v&&b===a[d].xa){a=d;break a}d+=2}}else if("string"===typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof Ab)a:for(c=a.length,b=b.Ca,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof Ab&&b===a[d].Ca){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(R.m(b,a[d])){a=d;break a}d+=2}return a}function Dd(a,b){this.key=a;this.K=b;this.D=null;this.u=166619935;this.F=0}g=Dd.prototype;g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.na=function(a,b){return this.oa(null,b,null)};g.M=function(a,b,c){return this.oa(null,b,c)};g.Y=function(a,b){if(0===b)return this.key;if(1===b)return this.K;throw Error("Index out of bounds");};
g.oa=function(a,b,c){return 0===b?this.key:1===b?this.K:c};g.qb=function(a,b){return(new nd(null,2,5,td,[this.key,this.K],null)).qb(a,b)};g.T=function(){return null};g.$=function(){return 2};g.Ib=function(){return this.key};g.Jb=function(){return this.K};g.S=function(){var a=this.D;return null!=a?a:this.D=a=Ib(this)};g.O=function(a,b){return Xb(this,b)};g.aa=function(){return null};
g.da=function(a,b){a:if(a=this.$(null),0===a)b=b.I?b.I():b.call(null);else for(var c=this.Y(null,0),d=1;;)if(d<a){var e=this.Y(null,d);c=b.m?b.m(c,e):b.call(null,c,e);if(Nb(c)){b=Oa(c);break a}d+=1}else{b=c;break a}return b};g.ea=function(a,b,c){a:{a=this.$(null);var d=c;for(c=0;;)if(c<a){var e=this.Y(null,c);d=b.m?b.m(d,e):b.call(null,d,e);if(Nb(d)){b=Oa(d);break a}c+=1}else{b=d;break a}}return b};g.za=function(a,b,c){return cc.v(new nd(null,2,5,td,[this.key,this.K],null),b,c)};
g.Wa=function(a,b){return 0===b||1===b};g.N=function(){return new N([this.key,this.K],0,null)};g.U=function(a,b){return gc(new nd(null,2,5,td,[this.key,this.K],null),b)};g.Z=function(a,b){return new nd(null,3,5,td,[this.key,this.K,b],null)};g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(D(b)))};
g.j=function(a){return this.Y(null,a)};g.m=function(a,b){return this.oa(null,a,b)};function Ed(a){return null!=a?a.u&2048||u===a.ac?!0:!1:!1}function Fd(a,b,c){this.o=a;this.i=b;this.ta=c;this.u=32374990;this.F=0}g=Fd.prototype;g.toString=function(){return pb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.T=function(){return this.ta};g.ba=function(){return this.i<this.o.length-2?new Fd(this.o,this.i+2,null):null};g.$=function(){return(this.o.length-this.i)/2};g.S=function(){return Ib(this)};
g.O=function(a,b){return Xb(this,b)};g.aa=function(){return P};g.da=function(a,b){return rc(b,this)};g.ea=function(a,b,c){return uc(b,c,this)};g.fa=function(){return new Dd(this.o[this.i],this.o[this.i+1])};g.ja=function(){return this.i<this.o.length-2?new Fd(this.o,this.i+2,null):P};g.N=function(){return this};g.U=function(a,b){return b===this.ta?this:new Fd(this.o,this.i,b)};g.Z=function(a,b){return W(b,this)};Fd.prototype[ua]=function(){return Gb(this)};
function Gd(a,b){this.o=a;this.i=0;this.A=b}Gd.prototype.la=function(){return this.i<this.A};Gd.prototype.next=function(){var a=new Dd(this.o[this.i],this.o[this.i+1]);this.i+=2;return a};function ma(a,b,c,d){this.C=a;this.A=b;this.o=c;this.D=d;this.u=16647951;this.F=139268}g=ma.prototype;g.toString=function(){return pb(this)};g.keys=function(){return Gb(Hd.j?Hd.j(this):Hd.call(null,this))};g.entries=function(){return new Cd(K(K(this)))};
g.values=function(){return Gb(Id.j?Id.j(this):Id.call(null,this))};g.has=function(a){return qc(this,a)};g.get=function(a,b){return this.M(null,a,b)};g.forEach=function(a){for(var b=K(this),c=null,d=0,e=0;;)if(e<d){var f=c.Y(null,e),h=X(f,0,null);f=X(f,1,null);a.m?a.m(f,h):a.call(null,f,h);e+=1}else if(b=K(b))mc(b)?(c=kb(b),b=lb(b),h=c,d=U(c),c=h):(c=O(b),h=X(c,0,null),f=X(c,1,null),a.m?a.m(f,h):a.call(null,f,h),b=Q(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.M(null,b,null)};
g.M=function(a,b,c){a=dc(this.o,b);return-1===a?c:this.o[a+1]};g.jb=function(a,b,c){a=this.o.length;for(var d=0;;)if(d<a){var e=this.o[d],f=this.o[d+1];c=b.v?b.v(c,e,f):b.call(null,c,e,f);if(Nb(c))return Oa(c);d+=2}else return c};g.ua=function(){return new Gd(this.o,2*this.A)};g.T=function(){return this.C};g.$=function(){return this.A};g.S=function(){var a=this.D;return null!=a?a:this.D=a=Kb(this)};
g.O=function(a,b){if(jc(b)&&!kc(b))if(a=this.o.length,this.A===b.$(null))for(var c=0;;)if(c<a){var d=b.M(null,this.o[c],oc);if(d!==oc)if(R.m(this.o[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};g.Za=function(){return new Jd(this.o.length,D(this.o))};g.aa=function(){return Ra(ad,this.C)};g.da=function(a,b){return vc(this,b)};g.ea=function(a,b,c){return wc(this,b,c)};
g.za=function(a,b,c){a=dc(this.o,b);if(-1===a){if(this.A<Kd){a=this.o;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new ma(this.C,this.A+1,e,null)}a=Ra;d=Ja;e=Ld;e=null!=e?null!=e&&(e.F&4||u===e.Vb)?Ra(hb(sc(gb,fb(e),this)),hc(e)):sc(Aa,e,this):sc(Zb,e,this);return a(d(e,b,c),this.C)}if(c===this.o[a+1])return this;b=D(this.o);b[a+1]=c;return new ma(this.C,this.A,b,null)};g.Wa=function(a,b){return-1!==dc(this.o,b)};
g.N=function(){var a=this.o;return 0<=a.length-2?new Fd(a,0,null):null};g.U=function(a,b){return b===this.C?this:new ma(b,this.A,this.o,this.D)};g.Z=function(a,b){if(lc(b))return this.za(null,E(b,0),E(b,1));a=this;for(b=K(b);;){if(null==b)return a;var c=O(b);if(lc(c))a=Ja(a,E(c,0),E(c,1)),b=Q(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(D(b)))};g.j=function(a){return this.na(null,a)};g.m=function(a,b){return this.M(null,a,b)};var ad=new ma(null,0,[],Lb),Kd=8;ma.prototype[ua]=function(){return Gb(this)};
function Jd(a,b){this.Ya={};this.Ua=a;this.o=b;this.u=259;this.F=56}g=Jd.prototype;g.$=function(){if(this.Ya)return zc(this.Ua);throw Error("count after persistent!");};g.na=function(a,b){return this.M(null,b,null)};g.M=function(a,b,c){if(this.Ya)return a=dc(this.o,b),-1===a?c:this.o[a+1];throw Error("lookup after persistent!");};
g.bb=function(a,b){if(this.Ya){if(Ed(b))return this.Xa(null,Md.j?Md.j(b):Md.call(null,b),Nd.j?Nd.j(b):Nd.call(null,b));if(lc(b))return this.Xa(null,b.j?b.j(0):b.call(null,0),b.j?b.j(1):b.call(null,1));a=K(b);for(b=this;;){var c=O(a);if(w(c))a=Q(a),b=ib(b,Md.j?Md.j(c):Md.call(null,c),Nd.j?Nd.j(c):Nd.call(null,c));else return b}}else throw Error("conj! after persistent!");};g.kb=function(){if(this.Ya)return this.Ya=!1,new ma(null,zc(this.Ua),this.o,null);throw Error("persistent! called twice");};
g.Xa=function(a,b,c){if(this.Ya){a=dc(this.o,b);if(-1===a){if(this.Ua+2<=2*Kd)return this.Ua+=2,this.o.push(b),this.o.push(c),this;a=Od.m?Od.m(this.Ua,this.o):Od.call(null,this.Ua,this.o);return ib(a,b,c)}c!==this.o[a+1]&&(this.o[a+1]=c);return this}throw Error("assoc! after persistent!");};g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(D(b)))};g.j=function(a){return this.M(null,a,null)};g.m=function(a,b){return this.M(null,a,b)};function Od(a,b){for(var c=fb(Ld),d=0;;)if(d<a)c=ib(c,b[d],b[d+1]),d+=2;else return c}function Pd(){this.K=!1}function Qd(a,b){return a===b?!0:a===b||a instanceof v&&b instanceof v&&a.xa===b.xa?!0:R.m(a,b)}function Rd(a,b,c){a=D(a);a[b]=c;return a}function Sd(a,b,c,d){a=a.Ta(b);a.o[c]=d;return a}
function Ud(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var h=a[e+1];c=b.v?b.v(f,c,h):b.call(null,f,c,h)}else c=a[e+1],c=null!=c?c.fb(b,f):f;if(Nb(c))return c;e+=2;f=c}else return f}function Vd(a){this.o=a;this.i=0;this.sa=this.gb=null}Vd.prototype.advance=function(){for(var a=this.o.length;;)if(this.i<a){var b=this.o[this.i],c=this.o[this.i+1];null!=b?b=this.gb=new Dd(b,c):null!=c?(b=nb(c),b=b.la()?this.sa=b:!1):b=!1;this.i+=2;if(b)return!0}else return!1};
Vd.prototype.la=function(){var a=null!=this.gb;return a?a:(a=null!=this.sa)?a:this.advance()};Vd.prototype.next=function(){if(null!=this.gb){var a=this.gb;this.gb=null;return a}if(null!=this.sa)return a=this.sa.next(),this.sa.la()||(this.sa=null),a;if(this.advance())return this.next();throw Error("No such element");};Vd.prototype.remove=function(){return Error("Unsupported operation")};function Wd(a,b,c){this.H=a;this.R=b;this.o=c;this.F=131072;this.u=0}g=Wd.prototype;
g.Ta=function(a){if(a===this.H)return this;var b=Ac(this.R),c=Array(0>b?4:2*(b+1));nc(this.o,0,c,0,2*b);return new Wd(a,this.R,c)};g.eb=function(){return Xd?Xd(this.o):Yd.call(null,this.o)};g.fb=function(a,b){return Ud(this.o,a,b)};g.Ba=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.R&e))return d;var f=Ac(this.R&e-1);e=this.o[2*f];f=this.o[2*f+1];return null==e?f.Ba(a+5,b,c,d):Qd(c,e)?f:d};
g.qa=function(a,b,c,d,e,f){var h=1<<(c>>>b&31),k=Ac(this.R&h-1);if(0===(this.R&h)){var l=Ac(this.R);if(2*l<this.o.length){a=this.Ta(a);b=a.o;f.K=!0;c=2*(l-k);f=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[f],--l,--c,--f;b[2*k]=d;b[2*k+1]=e;a.R|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Zd.qa(a,b+5,c,d,e,f);for(e=d=0;;)if(32>d)0===(this.R>>>d&1)?
d+=1:(k[d]=null!=this.o[e]?Zd.qa(a,b+5,yb(this.o[e]),this.o[e],this.o[e+1],f):this.o[e+1],e+=2,d+=1);else break;return new $d(a,l+1,k)}b=Array(2*(l+4));nc(this.o,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;nc(this.o,2*k,b,2*(k+1),2*(l-k));f.K=!0;a=this.Ta(a);a.o=b;a.R|=h;return a}l=this.o[2*k];h=this.o[2*k+1];if(null==l)return l=h.qa(a,b+5,c,d,e,f),l===h?this:Sd(this,a,2*k+1,l);if(Qd(d,l))return e===h?this:Sd(this,a,2*k+1,e);f.K=!0;f=b+5;d=ae?ae(a,f,l,h,c,d,e):be.call(null,a,f,l,h,c,d,e);e=2*k;k=2*k+1;a=this.Ta(a);
a.o[e]=null;a.o[k]=d;return a};
g.pa=function(a,b,c,d,e){var f=1<<(b>>>a&31),h=Ac(this.R&f-1);if(0===(this.R&f)){var k=Ac(this.R);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=Zd.pa(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.R>>>c&1)?c+=1:(h[c]=null!=this.o[d]?Zd.pa(a+5,yb(this.o[d]),this.o[d],this.o[d+1],e):this.o[d+1],d+=2,c+=1);else break;return new $d(null,k+1,h)}a=Array(2*(k+1));nc(this.o,
0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;nc(this.o,2*h,a,2*(h+1),2*(k-h));e.K=!0;return new Wd(null,this.R|f,a)}var l=this.o[2*h];f=this.o[2*h+1];if(null==l)return k=f.pa(a+5,b,c,d,e),k===f?this:new Wd(null,this.R,Rd(this.o,2*h+1,k));if(Qd(c,l))return d===f?this:new Wd(null,this.R,Rd(this.o,2*h+1,d));e.K=!0;e=this.R;k=this.o;a+=5;a=ce?ce(a,l,f,b,c,d):be.call(null,a,l,f,b,c,d);c=2*h;h=2*h+1;d=D(k);d[c]=null;d[h]=a;return new Wd(null,e,d)};g.ua=function(){return new Vd(this.o)};var Zd=new Wd(null,0,[]);
function de(a){this.o=a;this.i=0;this.sa=null}de.prototype.la=function(){for(var a=this.o.length;;){if(null!=this.sa&&this.sa.la())return!0;if(this.i<a){var b=this.o[this.i];this.i+=1;null!=b&&(this.sa=nb(b))}else return!1}};de.prototype.next=function(){if(this.la())return this.sa.next();throw Error("No such element");};de.prototype.remove=function(){return Error("Unsupported operation")};function $d(a,b,c){this.H=a;this.A=b;this.o=c;this.F=131072;this.u=0}g=$d.prototype;
g.Ta=function(a){return a===this.H?this:new $d(a,this.A,D(this.o))};g.eb=function(){return ee?ee(this.o):fe.call(null,this.o)};g.fb=function(a,b){for(var c=this.o.length,d=0;;)if(d<c){var e=this.o[d];if(null!=e){b=e.fb(a,b);if(Nb(b))return b;d+=1}else d+=1}else return b};g.Ba=function(a,b,c,d){var e=this.o[b>>>a&31];return null!=e?e.Ba(a+5,b,c,d):d};
g.qa=function(a,b,c,d,e,f){var h=c>>>b&31,k=this.o[h];if(null==k)return a=Sd(this,a,h,Zd.qa(a,b+5,c,d,e,f)),a.A+=1,a;b=k.qa(a,b+5,c,d,e,f);return b===k?this:Sd(this,a,h,b)};g.pa=function(a,b,c,d,e){var f=b>>>a&31,h=this.o[f];if(null==h)return new $d(null,this.A+1,Rd(this.o,f,Zd.pa(a+5,b,c,d,e)));a=h.pa(a+5,b,c,d,e);return a===h?this:new $d(null,this.A,Rd(this.o,f,a))};g.ua=function(){return new de(this.o)};function ge(a,b,c){b*=2;for(var d=0;;)if(d<b){if(Qd(c,a[d]))return d;d+=2}else return-1}
function he(a,b,c,d){this.H=a;this.Aa=b;this.A=c;this.o=d;this.F=131072;this.u=0}g=he.prototype;g.Ta=function(a){if(a===this.H)return this;var b=Array(2*(this.A+1));nc(this.o,0,b,0,2*this.A);return new he(a,this.Aa,this.A,b)};g.eb=function(){return Xd?Xd(this.o):Yd.call(null,this.o)};g.fb=function(a,b){return Ud(this.o,a,b)};g.Ba=function(a,b,c,d){a=ge(this.o,this.A,c);return 0>a?d:Qd(c,this.o[a])?this.o[a+1]:d};
g.qa=function(a,b,c,d,e,f){if(c===this.Aa){b=ge(this.o,this.A,d);if(-1===b){if(this.o.length>2*this.A)return b=2*this.A,c=2*this.A+1,a=this.Ta(a),a.o[b]=d,a.o[c]=e,f.K=!0,a.A+=1,a;c=this.o.length;b=Array(c+2);nc(this.o,0,b,0,c);b[c]=d;b[c+1]=e;f.K=!0;d=this.A+1;a===this.H?(this.o=b,this.A=d,a=this):a=new he(this.H,this.Aa,d,b);return a}return this.o[b+1]===e?this:Sd(this,a,b+1,e)}return(new Wd(a,1<<(this.Aa>>>b&31),[null,this,null,null])).qa(a,b,c,d,e,f)};
g.pa=function(a,b,c,d,e){return b===this.Aa?(a=ge(this.o,this.A,c),-1===a?(a=2*this.A,b=Array(a+2),nc(this.o,0,b,0,a),b[a]=c,b[a+1]=d,e.K=!0,new he(null,this.Aa,this.A+1,b)):R.m(this.o[a+1],d)?this:new he(null,this.Aa,this.A,Rd(this.o,a+1,d))):(new Wd(null,1<<(this.Aa>>>a&31),[null,this])).pa(a,b,c,d,e)};g.ua=function(){return new Vd(this.o)};
function be(a){switch(arguments.length){case 6:return ce(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return ae(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function ce(a,b,c,d,e,f){var h=yb(b);if(h===d)return new he(null,h,2,[b,c,e,f]);var k=new Pd;return Zd.pa(a,h,b,c,k).pa(a,d,e,f,k)}
function ae(a,b,c,d,e,f,h){var k=yb(c);if(k===e)return new he(null,k,2,[c,d,f,h]);var l=new Pd;return Zd.qa(a,b,k,c,d,l).qa(a,b,e,f,h,l)}function ie(a,b,c,d,e){this.C=a;this.nodes=b;this.i=c;this.s=d;this.D=e;this.u=32374988;this.F=0}g=ie.prototype;g.toString=function(){return pb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.T=function(){return this.C};g.ba=function(){if(null==this.s){var a=this.nodes,b=this.i+2;return je?je(a,b,null):Yd.call(null,a,b,null)}a=this.nodes;b=this.i;var c=Q(this.s);return je?je(a,b,c):Yd.call(null,a,b,c)};
g.S=function(){var a=this.D;return null!=a?a:this.D=a=Ib(this)};g.O=function(a,b){return Xb(this,b)};g.aa=function(){return P};g.da=function(a,b){return rc(b,this)};g.ea=function(a,b,c){return uc(b,c,this)};g.fa=function(){return null==this.s?new Dd(this.nodes[this.i],this.nodes[this.i+1]):O(this.s)};
g.ja=function(){var a=this,b=null==a.s?function(){var c=a.nodes,d=a.i+2;return je?je(c,d,null):Yd.call(null,c,d,null)}():function(){var c=a.nodes,d=a.i,e=Q(a.s);return je?je(c,d,e):Yd.call(null,c,d,e)}();return null!=b?b:P};g.N=function(){return this};g.U=function(a,b){return b===this.C?this:new ie(b,this.nodes,this.i,this.s,this.D)};g.Z=function(a,b){return W(b,this)};ie.prototype[ua]=function(){return Gb(this)};
function Yd(a){switch(arguments.length){case 1:return Xd(arguments[0]);case 3:return je(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function Xd(a){return je(a,0,null)}function je(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new ie(null,a,b,null,null);var d=a[b+1];if(w(d)&&(d=d.eb(),w(d)))return new ie(null,a,b+2,d,null);b+=2}else return null;else return new ie(null,a,b,c,null)}
function ke(a,b,c,d,e){this.C=a;this.nodes=b;this.i=c;this.s=d;this.D=e;this.u=32374988;this.F=0}g=ke.prototype;g.toString=function(){return pb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.T=function(){return this.C};g.ba=function(){var a=this.nodes,b=this.i,c=Q(this.s);return le?le(a,b,c):fe.call(null,a,b,c)};g.S=function(){var a=this.D;return null!=a?a:this.D=a=Ib(this)};g.O=function(a,b){return Xb(this,b)};
g.aa=function(){return P};g.da=function(a,b){return rc(b,this)};g.ea=function(a,b,c){return uc(b,c,this)};g.fa=function(){return O(this.s)};g.ja=function(){var a=this.nodes;var b=this.i,c=Q(this.s);a=le?le(a,b,c):fe.call(null,a,b,c);return null!=a?a:P};g.N=function(){return this};g.U=function(a,b){return b===this.C?this:new ke(b,this.nodes,this.i,this.s,this.D)};g.Z=function(a,b){return W(b,this)};ke.prototype[ua]=function(){return Gb(this)};
function fe(a){switch(arguments.length){case 1:return ee(arguments[0]);case 3:return le(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length)].join(""));}}function ee(a){return le(a,0,null)}function le(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(w(d)&&(d=d.eb(),w(d)))return new ke(null,a,b+1,d,null);b+=1}else return null;else return new ke(null,a,b,c,null)}function me(a,b){this.ga=a;this.zb=b;this.rb=!1}
me.prototype.la=function(){return!this.rb||this.zb.la()};me.prototype.next=function(){if(this.rb)return this.zb.next();this.rb=!0;return new Dd(null,this.ga)};me.prototype.remove=function(){return Error("Unsupported operation")};function ne(a,b,c,d,e,f){this.C=a;this.A=b;this.root=c;this.ka=d;this.ga=e;this.D=f;this.u=16123663;this.F=139268}g=ne.prototype;g.toString=function(){return pb(this)};g.keys=function(){return Gb(Hd.j?Hd.j(this):Hd.call(null,this))};g.entries=function(){return new Cd(K(K(this)))};
g.values=function(){return Gb(Id.j?Id.j(this):Id.call(null,this))};g.has=function(a){return qc(this,a)};g.get=function(a,b){return this.M(null,a,b)};g.forEach=function(a){for(var b=K(this),c=null,d=0,e=0;;)if(e<d){var f=c.Y(null,e),h=X(f,0,null);f=X(f,1,null);a.m?a.m(f,h):a.call(null,f,h);e+=1}else if(b=K(b))mc(b)?(c=kb(b),b=lb(b),h=c,d=U(c),c=h):(c=O(b),h=X(c,0,null),f=X(c,1,null),a.m?a.m(f,h):a.call(null,f,h),b=Q(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.M(null,b,null)};
g.M=function(a,b,c){return null==b?this.ka?this.ga:c:null==this.root?c:this.root.Ba(0,yb(b),b,c)};g.jb=function(a,b,c){a=this.ka?b.v?b.v(c,null,this.ga):b.call(null,c,null,this.ga):c;Nb(a)?b=Oa(a):null!=this.root?(b=this.root.fb(b,a),b=Nb(b)?Ob.j?Ob.j(b):Ob.call(null,b):b):b=a;return b};g.ua=function(){var a=this.root?nb(this.root):$c();return this.ka?new me(this.ga,a):a};g.T=function(){return this.C};g.$=function(){return this.A};g.S=function(){var a=this.D;return null!=a?a:this.D=a=Kb(this)};
g.O=function(a,b){return Bd(this,b)};g.Za=function(){return new oe(this.root,this.A,this.ka,this.ga)};g.aa=function(){return Ra(Ld,this.C)};g.za=function(a,b,c){if(null==b)return this.ka&&c===this.ga?this:new ne(this.C,this.ka?this.A:this.A+1,this.root,!0,c,null);a=new Pd;b=(null==this.root?Zd:this.root).pa(0,yb(b),b,c,a);return b===this.root?this:new ne(this.C,a.K?this.A+1:this.A,b,this.ka,this.ga,null)};g.Wa=function(a,b){return null==b?this.ka:null==this.root?!1:this.root.Ba(0,yb(b),b,oc)!==oc};
g.N=function(){if(0<this.A){var a=null!=this.root?this.root.eb():null;return this.ka?W(new Dd(null,this.ga),a):a}return null};g.U=function(a,b){return b===this.C?this:new ne(b,this.A,this.root,this.ka,this.ga,this.D)};g.Z=function(a,b){if(lc(b))return this.za(null,E(b,0),E(b,1));a=this;for(b=K(b);;){if(null==b)return a;var c=O(b);if(lc(c))a=Ja(a,E(c,0),E(c,1)),b=Q(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(D(b)))};g.j=function(a){return this.na(null,a)};g.m=function(a,b){return this.M(null,a,b)};var Ld=new ne(null,0,null,!1,null,Lb);ne.prototype[ua]=function(){return Gb(this)};
function oe(a,b,c,d){this.H={};this.root=a;this.count=b;this.ka=c;this.ga=d;this.u=259;this.F=56}function pe(a,b,c){if(a.H){if(null==b)a.ga!==c&&(a.ga=c),a.ka||(a.count+=1,a.ka=!0);else{var d=new Pd;b=(null==a.root?Zd:a.root).qa(a.H,0,yb(b),b,c,d);b!==a.root&&(a.root=b);d.K&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}g=oe.prototype;g.$=function(){if(this.H)return this.count;throw Error("count after persistent!");};
g.na=function(a,b){return null==b?this.ka?this.ga:null:null==this.root?null:this.root.Ba(0,yb(b),b)};g.M=function(a,b,c){return null==b?this.ka?this.ga:c:null==this.root?c:this.root.Ba(0,yb(b),b,c)};
g.bb=function(a,b){a:if(this.H)if(Ed(b))a=pe(this,Md.j?Md.j(b):Md.call(null,b),Nd.j?Nd.j(b):Nd.call(null,b));else if(lc(b))a=pe(this,b.j?b.j(0):b.call(null,0),b.j?b.j(1):b.call(null,1));else for(a=K(b),b=this;;){var c=O(a);if(w(c))a=Q(a),b=pe(b,Md.j?Md.j(c):Md.call(null,c),Nd.j?Nd.j(c):Nd.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
g.kb=function(){if(this.H){this.H=null;var a=new ne(null,this.count,this.root,this.ka,this.ga,null)}else throw Error("persistent! called twice");return a};g.Xa=function(a,b,c){return pe(this,b,c)};g.call=function(a){switch(arguments.length-1){case 1:return this.j(arguments[1]);case 2:return this.m(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.j(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(D(b)))};
g.j=function(a){return this.na(null,a)};g.m=function(a,b){return this.M(null,a,b)};var Zc=function Zc(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Zc.J(0<c.length?new N(c.slice(0),0,null):null)};Zc.J=function(a){for(var b=K(a),c=fb(Ld);;)if(b){var d=Q(b);if(null==d)throw Error(["No value supplied for key: ",B.j(O(b))].join(""));a=Q(d);b=O(b);d=O(d);c=ib(c,b,d);b=a}else return hb(c)};Zc.W=0;Zc.V=function(a){return this.J(K(a))};
function qe(a,b){this.G=a;this.ta=b;this.u=32374988;this.F=0}g=qe.prototype;g.toString=function(){return pb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.T=function(){return this.ta};g.ba=function(){var a=(null!=this.G?this.G.u&128||u===this.G.$a||(this.G.u?0:x(Da,this.G)):x(Da,this.G))?this.G.ba():Q(this.G);return null==a?null:new qe(a,null)};g.S=function(){return Ib(this)};
g.O=function(a,b){return Xb(this,b)};g.aa=function(){return P};g.da=function(a,b){return rc(b,this)};g.ea=function(a,b,c){return uc(b,c,this)};g.fa=function(){return this.G.fa(null).key};g.ja=function(){var a=(null!=this.G?this.G.u&128||u===this.G.$a||(this.G.u?0:x(Da,this.G)):x(Da,this.G))?this.G.ba():Q(this.G);return null!=a?new qe(a,null):P};g.N=function(){return this};g.U=function(a,b){return b===this.ta?this:new qe(this.G,b)};g.Z=function(a,b){return W(b,this)};qe.prototype[ua]=function(){return Gb(this)};
function Hd(a){return(a=K(a))?new qe(a,null):null}function Md(a){return La(a)}function re(a,b){this.G=a;this.ta=b;this.u=32374988;this.F=0}g=re.prototype;g.toString=function(){return pb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return T(this,b,0);case 2:return T(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.j=function(b){return T(this,b,0)};a.m=function(b,c){return T(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return V(this,c,U(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return V(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.j=a;b.m=function(c,d){return V(this,c,d)};return b}();g.T=function(){return this.ta};g.ba=function(){var a=(null!=this.G?this.G.u&128||u===this.G.$a||(this.G.u?0:x(Da,this.G)):x(Da,this.G))?this.G.ba():Q(this.G);return null==a?null:new re(a,null)};g.S=function(){return Ib(this)};
g.O=function(a,b){return Xb(this,b)};g.aa=function(){return P};g.da=function(a,b){return rc(b,this)};g.ea=function(a,b,c){return uc(b,c,this)};g.fa=function(){return this.G.fa(null).K};g.ja=function(){var a=(null!=this.G?this.G.u&128||u===this.G.$a||(this.G.u?0:x(Da,this.G)):x(Da,this.G))?this.G.ba():Q(this.G);return null!=a?new re(a,null):P};g.N=function(){return this};g.U=function(a,b){return b===this.ta?this:new re(this.G,b)};g.Z=function(a,b){return W(b,this)};re.prototype[ua]=function(){return Gb(this)};
function Id(a){return(a=K(a))?new re(a,null):null}function Nd(a){return Ma(a)}function Fc(a){if(null!=a&&(a.F&4096||u===a.Lb))return a.name;if("string"===typeof a)return a;throw Error(["Doesn't support name: ",B.j(a)].join(""));}
function se(a,b,c,d,e,f,h){var k=ka;ka=null==ka?null:ka-1;try{if(null!=ka&&0>ka)return I(a,"#");I(a,c);if(0===ra.j(f))K(h)&&I(a,function(){var t=(new v(null,"more-marker","more-marker",-14717935)).j(f);return w(t)?t:"..."}());else{if(K(h)){var l=O(h);b.v?b.v(l,a,f):b.call(null,l,a,f)}for(var m=Q(h),n=ra.j(f)-1;;)if(!m||null!=n&&0===n){K(m)&&0===n&&(I(a,d),I(a,function(){var t=(new v(null,"more-marker","more-marker",-14717935)).j(f);return w(t)?t:"..."}()));break}else{I(a,d);var p=O(m);c=a;h=f;b.v?
b.v(p,c,h):b.call(null,p,c,h);var q=Q(m);c=n-1;m=q;n=c}}return I(a,e)}finally{ka=k}}function te(a,b){b=K(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.Y(null,e);I(a,f);e+=1}else if(b=K(b))c=b,mc(c)?(b=kb(c),d=lb(c),c=b,f=U(b),b=d,d=f):(f=O(c),I(a,f),b=Q(c),c=null,d=0),e=0;else return null}var ue={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function ve(a){return['"',B.j(a.replace(RegExp('[\\\\"\b\f\n\r\t]',"g"),function(b){return ue[b]})),'"'].join("")}
function we(a,b){return(a=pc(J.m(a,pa)))?(a=null!=b?b.u&131072||u===b.Kb?!0:!1:!1)?null!=hc(b):a:a}
function xe(a,b,c){if(null==a)return I(b,"nil");if(we(c,a)){I(b,"^");var d=hc(a);Z.v?Z.v(d,b,c):Z.call(null,d,b,c);I(b," ")}if(a.xb)return a.Ob(b);if(null!=a?a.u&2147483648||u===a.ca||(a.u?0:x(db,a)):x(db,a))return eb(a,b,c);if(!0===a||!1===a)return I(b,B.j(a));if("number"===typeof a)return I(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":B.j(a));if(null!=a&&a.constructor===Object)return I(b,"#js "),d=Y.m(function(f){var h=/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/;
if("string"===typeof f)if(h=h.exec(f),null!=h&&R.m(h[0],f))if(1===h.length)h=h[0];else if(w(Ed.j?Ed.j(h):Ed.call(null,h)))h=new nd(null,2,5,td,[Md.j?Md.j(h):Md.call(null,h),Nd.j?Nd.j(h):Nd.call(null,h)],null);else if(lc(h))h=gc(h,null);else if(sa(h))b:{var k=h.length;if(32>k)h=new nd(null,k,5,td,h,null);else for(var l=32,m=(new nd(null,32,5,td,h.slice(0,32),null)).Za(null);;)if(l<k){var n=l+1;m=Pc.m(m,h[l]);l=n}else{h=hb(m);break b}}else h=hb(sc(gb,fb($b),h));else h=null;else throw new TypeError("re-matches must match against a string.");
return new Dd(null!=h?Ec.j(f):f,a[f])},da(a)),ye.ia?ye.ia(d,Z,b,c):ye.call(null,d,Z,b,c);if(sa(a))return se(b,Z,"#js ["," ","]",c,a);if("string"===typeof a)return w(oa.j(c))?I(b,ve(a)):I(b,a);if("function"===typeof a){var e=a.name;c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Function":e;return te(b,Yb(["#object[",c,w(!1)?[' "',B.j(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(f,h){for(f=B.j(f);;)if(f.length<h)f=["0",f].join("");else return f},te(b,Yb(['#inst "',
c(a.getUTCFullYear(),4),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return te(b,Yb(['#"',a.source,'"']));if("symbol"===r(a)||"undefined"!==typeof Symbol&&a instanceof Symbol)return te(b,Yb(["#object[",a.toString(),"]"]));if(w(function(){var f=null==a?null:a.constructor;return null==f?null:f.lb}()))return te(b,Yb(["#object[",a.constructor.lb.replace(RegExp("/",
"g"),"."),"]"]));e=function(){var f=null==a?null:a.constructor;return null==f?null:f.name}();c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Object":e;return null==a.constructor?te(b,Yb(["#object[",c,"]"])):te(b,Yb(["#object[",c," ",B.j(a),"]"]))}function Z(a,b,c){var d=ze.j(c);return w(d)?(c=cc.v(c,new v(null,"fallback-impl","fallback-impl",-1501286995),xe),d.v?d.v(a,b,c):d.call(null,a,b,c)):xe(a,b,c)}function Ae(a){return a instanceof Ab?Bb.m(null,Fc(a)):Ec.m(null,Fc(a))}
function Be(a){if(w(!1)){var b=K(a),c=K(b),d=O(c);Q(c);X(d,0,null);X(d,1,null);c=null==a?null:null!=a&&(a.u&4||u===a.Db)?a.aa(null):(null!=a?a.u&4||u===a.Db||(a.u?0:x(xa,a)):x(xa,a))?ya(a):null;for(a=null;;){d=a;b=K(b);a=O(b);var e=Q(b),f=a;a=X(f,0,null);b=X(f,1,null);if(w(f))if(a instanceof v||a instanceof Ab)if(w(d))if(R.m(d,Dc(a)))c=cc.v(c,Ae(a),b),a=d,b=e;else return null;else if(d=Dc(a),w(d))c=cc.v(c,Ae(a),b),a=d,b=e;else return null;else return null;else return new nd(null,2,5,td,[d,c],null)}}else return null}
function Ce(a,b,c,d,e){return se(d,function(f,h,k){var l=La(f);c.v?c.v(l,h,k):c.call(null,l,h,k);I(h," ");f=Ma(f);return c.v?c.v(f,h,k):c.call(null,f,h,k)},[B.j(a),"{"].join(""),", ","}",e,K(b))}function ye(a,b,c,d){var e=jc(a)?Be(a):null,f=X(e,0,null);e=X(e,1,null);return w(f)?Ce(["#:",B.j(f)].join(""),e,b,c,d):Ce(null,a,b,c,d)}N.prototype.ca=u;N.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};Gc.prototype.ca=u;Gc.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};
Dd.prototype.ca=u;Dd.prototype.P=function(a,b,c){return se(b,Z,"["," ","]",c,this)};ie.prototype.ca=u;ie.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};Fd.prototype.ca=u;Fd.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};Hb.prototype.ca=u;Hb.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};ud.prototype.ca=u;ud.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};Cc.prototype.ca=u;Cc.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};
ne.prototype.ca=u;ne.prototype.P=function(a,b,c){return ye(this,Z,b,c)};ke.prototype.ca=u;ke.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};Kc.prototype.ca=u;Kc.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};re.prototype.ca=u;re.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};nd.prototype.ca=u;nd.prototype.P=function(a,b,c){return se(b,Z,"["," ","]",c,this)};Bc.prototype.ca=u;Bc.prototype.P=function(a,b){return I(b,"()")};ma.prototype.ca=u;
ma.prototype.P=function(a,b,c){return ye(this,Z,b,c)};qe.prototype.ca=u;qe.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};ac.prototype.ca=u;ac.prototype.P=function(a,b,c){return se(b,Z,"("," ",")",c,this)};function De(){}function Ee(a){if(null!=a&&null!=a.Fb)a=a.Fb(a);else{var b=Ee[r(null==a?null:a)];if(null!=b)a=b.j?b.j(a):b.call(null,a);else if(b=Ee._,null!=b)a=b.j?b.j(a):b.call(null,a);else throw z("IEncodeJS.-clj-\x3ejs",a);}return a}
function Fe(a,b){if(null!=a?u===a.Eb||(a.Pb?0:x(De,a)):x(De,a))a=Ee(a);else if("string"===typeof a||"number"===typeof a||a instanceof v||a instanceof Ab)a=b.j?b.j(a):b.call(null,a);else{var c=Yb([a]);a=la();(b=null==c)||(b=K(c),b=null==b?!0:!1===b?!0:!1);if(b)a="";else{b=B;var d=b.j,e=new fa,f=new ob(e);Z(O(c),f,a);c=K(Q(c));for(var h=null,k=0,l=0;;)if(l<k){var m=h.Y(null,l);I(f," ");Z(m,f,a);l+=1}else if(c=K(c))h=c,mc(h)?(c=kb(h),k=lb(h),h=c,m=U(c),c=k,k=m):(m=O(h),I(f," "),Z(m,f,a),c=Q(h),h=null,
k=0),l=0;else break;a=d.call(b,e)}}return a}var Ge=function Ge(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ge.J(arguments[0],1<c.length?new N(c.slice(1),0,null):null)};
Ge.J=function(a,b){b=Yc(b);var c=J.v(b,new v(null,"keyword-fn","keyword-fn",-64566675),Fc),d=function h(f){if(null==f)return null;if(null!=f?u===f.Eb||(f.Pb?0:x(De,f)):x(De,f))return Ee(f);if(f instanceof v)return c.j?c.j(f):c.call(null,f);if(f instanceof Ab)return B.j(f);if(jc(f)){var k={};f=K(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.Y(null,n),q=X(p,0,null);p=X(p,1,null);q=Fe(q,d);p=h(p);k[q]=p;n+=1}else if(f=K(f))mc(f)?(m=kb(f),f=lb(f),l=m,m=U(m)):(m=O(f),l=X(m,0,null),m=X(m,1,null),l=Fe(l,d),
m=h(m),k[l]=m,f=Q(f),l=null,m=0),n=0;else break;return k}if(null==f?0:null!=f?f.u&8||u===f.Ub||(f.u?0:x(za,f)):x(za,f)){k=[];f=K(Y.m(h,f));l=null;for(n=m=0;;)if(n<m)q=l.Y(null,n),k.push(q),n+=1;else if(f=K(f))l=f,mc(l)?(f=kb(l),n=lb(l),l=f,m=U(f),f=n):(f=O(l),k.push(f),f=Q(l),l=null,m=0),n=0;else break;return k}return f};return d(a)};Ge.W=1;Ge.V=function(a){var b=O(a);a=Q(a);return this.J(b,a)};var He=new v(null,"far","far",85807546),ra=new v(null,"print-length","print-length",1931866356),Ie=new v(null,"side","side",389652279),Je=new v(null,"controls","controls",1340701452),oa=new v(null,"readably","readably",1129599760),Ke=new v(null,"scene","scene",1523800415),Le=new v(null,"renderer","renderer",336841071),pa=new v(null,"meta","meta",1499536964),ze=new v(null,"alt-impl","alt-impl",670969595),Me=new v(null,"map","map",1371690461),qa=new v(null,"dup","dup",556298533);var Ne={},Oe={},Pe=[];function Qe(a,b){var c=Oe[a];if(void 0!==c)return c;try{Pe.push(a);var d=Ne[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};Ne[a]=d}if(e){delete shadow$provide[a];try{e.call(d,aa,Qe,d,d.exports)}catch(h){throw console.warn("shadow-cljs - failed to load",a),h;}if(b){var f=b.globals;if(f)for(a=0;a<f.length;a++)window[f[a]]=d.exports}}}finally{Pe.pop()}return d.exports}Qe.cache={};Qe.resolve=function(a){return a};var module$node_modules$three$build$three=Qe(0,{});var Re=Qe(1,{});var Se=Qe(2,{});function Te(){var a=Yc(new ma(null,4,[new v(null,"fov","fov",-12463282),45,new v(null,"aspect","aspect",-839905246),2,new v(null,"near","near",-1077668328),.1,He,100],null)),b=J.m(a,new v(null,"fov","fov",-12463282)),c=J.m(a,new v(null,"aspect","aspect",-839905246)),d=J.m(a,new v(null,"near","near",-1077668328)),e=J.m(a,He),f=document.querySelector("#three-canvas");a=new module$node_modules$three$build$three.WebGLRenderer(Ge(new ma(null,1,[new v(null,"canvas","canvas",-1798817489),f],null)));var h=
function(){var m=new module$node_modules$three$build$three.PerspectiveCamera(b,c,d,e),n=m.position;n.set.apply(n,[0,10,20]);return m}(),k=function(){var m=new Re.OrbitControls(h,f),n=m.target;n.set.apply(n,[0,5,0]);m.update();return m}(),l=new module$node_modules$three$build$three.Scene;l.background=new module$node_modules$three$build$three.Color("cyan");return new ma(null,4,[Le,a,new v(null,"camera","camera",-1190348585),h,Je,k,Ke,l],null)}
function Ue(a){var b=Yc(a);a=J.m(b,new v(null,"camera","camera",-1190348585));b=J.m(b,Le);var c=b.domElement,d=c.clientWidth;c=c.clientHeight;var e=d/c;b.setSize(d,c,!1);(null!=a?a:{}).aspect=e;a.updateProjectionMatrix()}function Ve(a){a=Yc(a);var b=J.m(a,Le).domElement,c=b.clientHeight,d=b.height;R.m(b.clientWidth,b.width)&&R.m(c,d)||Ue(a)}
var We=function We(a){var c=Yc(a);a=J.m(c,new v(null,"camera","camera",-1190348585));var d=J.m(c,Le),e=J.m(c,Ke);window.requestAnimationFrame(function(){return We.j?We.j(c):We.call(null,c)});Ve(c);return d.render(e,a)};
function Xe(a){var b=function(){var e=(new module$node_modules$three$build$three.TextureLoader).load("https://threejs.org/manual/examples/resources/images/checker.png"),f=null!=e?e:{};f.wrapS=module$node_modules$three$build$three.RepeatWrapping;f.wrapT=module$node_modules$three$build$three.RepeatWrapping;f.magFilter=module$node_modules$three$build$three.NearestFilter;f=f.repeat;f.set.apply(f,[20,20]);return e}(),c=new module$node_modules$three$build$three.PlaneGeometry(40,40),d=new module$node_modules$three$build$three.MeshPhongMaterial(Ge(new ma(null,
2,[Me,b,Ie,module$node_modules$three$build$three.DoubleSide],null)));b=function(){var e=new module$node_modules$three$build$three.Mesh(c,d),f=null!=e?e:{};var h=f.rotation;null!=h?f=h:(h={},f=f.rotation=h);f.x=-.5*Math.PI;return e}();return a.add(b)}
function Ye(a,b,c,d){a*=.5;var e=module$node_modules$three$build$three.MathUtils.degToRad(.5*d.fov);a/=Math.tan(e);e=function(){var h=new module$node_modules$three$build$three.Vector3;h.subVectors(d.position,c);h.multiply(new module$node_modules$three$build$three.Vector3(1,0,1));h.normalize();return h}();var f=d.position;f.copy.call(f,e.multiplyScalar(a).add(c));(function(){var h=null!=d?d:{};h.near=b/100;return h})().far=100*b;d.updateProjectionMatrix();d.lookAt(c)}
function Ze(a){a=Yc(a);var b=J.m(a,new v(null,"camera","camera",-1190348585)),c=J.m(a,Je),d=J.m(a,Ke);(new Se.GLTFLoader).load("https://threejs.org/manual/examples/resources/models/cartoon_lowpoly_small_city_free_pack/scene.gltf",function(e){e=e.scene;var f=(new module$node_modules$three$build$three.Box3).setFromObject(e),h=f.getSize(new module$node_modules$three$build$three.Vector3).length();f=f.getCenter(new module$node_modules$three$build$three.Vector3);d.add(e);Ye(.5*h,h,f,b);(null!=c?c:{}).maxDistance=
10*h;e=c.target;e.copy.call(e,f);c.update();return c})}function $e(){var a=Te();a=Yc(a);var b=J.m(a,Ke);b=Xe(b);var c=new module$node_modules$three$build$three.HemisphereLight(11657727,12155424,1);b=b.add(c);c=new module$node_modules$three$build$three.DirectionalLight(16777215,1);var d=c.position;d.set.apply(d,[5,10,2]);b.add(c);c=null!=c?c.target:void 0;b.add(c);Ze(a);Ue(a);return We(a)};function af(){document.getElementById("load-0").addEventListener("click",function(){return $e.I?$e.I():$e.call(null)})};try{af(),$e()}catch(a){throw console.error("An error occurred when calling (main/init)"),a;};
}).call(this);